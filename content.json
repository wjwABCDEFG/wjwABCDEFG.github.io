{"pages":[],"posts":[{"title":"1011-åœ¨Då¤©å†…é€è¾¾åŒ…è£¹çš„èƒ½åŠ›","text":"åŠ›æ‰£1208 https://leetcode-cn.com/problems/get-equal-substrings-within-budget/ ç¬¬ä¸€ç›´è§‰å°±æ˜¯æœ‰ä¸€ä¸ªdisæ•°ç»„è®°å½•äº†s[i]å’Œt[i]çš„å·®è·ï¼Œä¹Ÿç¡®å®æ˜¯è¿™ä¹ˆåšçš„ï¼Œæ¥ä¸‹æ¥ä¸€å¼€å§‹ä»¥ä¸ºç›´æ¥å¯¹disæ’åºå³å¯ï¼Œåæ¥æ‰å‘ç°æ˜¯å­å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æ˜¯è¦è¿ç»­çš„ï¼Œå› æ­¤è¿™é“é¢˜æ˜¯ä¸€é“æ»‘åŠ¨çª—å£é¢˜ 1234567891011121314151617181920212223242526public int equalSubstring(String s, String t, int maxCost) { int res = 0; int[] dis = new int[s.length()]; char[] sArr = s.toCharArray(); char[] tArr = t.toCharArray(); //ç»Ÿè®¡s[i]å’Œt[i]çš„å·®è· for (int i = 0; i &lt; s.length(); i++) { dis[i] = Math.abs(sArr[i] - tArr[i]); } //å› ä¸ºå­å­—ç¬¦ä¸²è¦æ±‚è¿ç»­ï¼Œæ‰€ä»¥æ»‘åŠ¨çª—å£ int l = 0, r = 0, len = 0; while (r &lt; s.length()){ if ((len + dis[r]) &lt;= maxCost){ len += dis[r]; r++; }else { len -= dis[l]; l++; } res = Math.max(res, r - l); } return res;} pythonå®ç° 12345678910111213141516def equalSubstring(self, s: str, t: str, maxCost: int) -&gt; int: # ç»Ÿè®¡s[i]å’Œt[i]çš„å·®è· dis = [abs(ord(s[i]) - ord(t[i])) for i in range(len(s))] # å› ä¸ºå­å­—ç¬¦ä¸²è¦æ±‚è¿ç»­ï¼Œæ‰€ä»¥æ»‘åŠ¨çª—å£ l, r, max_len, res = 0, 0, 0, 0 while r &lt; len(s): if max_len + dis[r] &lt;= maxCost: max_len += dis[r] r += 1 else: max_len -= dis[l] l += 1 res = max(res, r - l) return res å…¶ä»–æ»‘åŠ¨çª—å£ç±»å‹çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/get-equal-substrings-within-budget/"},{"title":"113-è·¯å¾„æ€»å’ŒII","text":"åŠ›æ‰£113 https://leetcode-cn.com/problems/path-sum-ii/ è™½ç„¶æ ‘å’Œå›æº¯æœ¬è´¨ä¸Šéƒ½æ˜¯DFSï¼Œä½†æˆ‘æ›´æ„¿æ„æŠŠè¿™ä¸ªé€‰æ‹©+é€’å½’+æ’¤é”€çš„æ¨¡å¼å½’ä¸ºå›æº¯ 123456789101112131415161718192021222324public List&lt;List&lt;Integer&gt;&gt; pathSum(TreeNode root, int sum) { if (root == null) return res; findPath(root, sum, new ArrayList&lt;&gt;()); return res;}private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;();public void findPath(TreeNode root, int remain, List&lt;Integer&gt; path) { //ç»“æŸæ¡ä»¶ if (root == null) return ; //é€‰æ‹© path.add(root.val); if (root.left == null &amp;&amp; root.right == null &amp;&amp; remain - root.val == 0){ res.add(new ArrayList&lt;&gt;(path)); } //é€’å½’ findPath(root.left, remain - root.val, path); findPath(root.right, remain - root.val, path); //æ’¤é”€ path.remove(path.size() - 1);} å…¶ä»–å›æº¯ç³»åˆ—é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/path-sum-ii/"},{"title":"11-ç››æ°´æœ€å¤šçš„å®¹å™¨","text":"åŠ›æ‰£11 https://leetcode-cn.com/problems/container-with-most-water/ å•è°ƒæ ˆ860msé—®é¢˜åœ¨äºå·¦è¾¹ä¸åªæ˜¯ä¸€ä¸ªæ ˆçš„é—®é¢˜ï¼Œè€Œæ˜¯å•å¢çš„ï¼Œæ¯”å¦‚121ï¼Œæœ€å³çš„1è¦å’Œå·¦è¾¹çš„1å’Œ2éƒ½è¦æ¯”ï¼Œå¦åˆ™ä¸çŸ¥é“ï¼Œå› æ­¤å³è¾¹é€’å‡ï¼Œå·¦è¾¹é€’å¢ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¸é€‚åˆç”¨å•è°ƒæ ˆçš„ 12345678910111213141516171819202122232425public int maxArea(int[] height) { if (height.length &lt; 2) return 0; int res = 0; List&lt;Integer&gt; leftList = new ArrayList&lt;&gt;(); Deque&lt;Integer&gt; stack = new LinkedList&lt;&gt;(); stack.offerLast(0); leftList.add(0); for (int i = 1; i &lt; height.length; i++) { if (height[i] &gt; height[leftList.get(leftList.size() - 1)]) leftList.add(i); while (!stack.isEmpty() &amp;&amp; height[i] &gt;= height[stack.peekLast()]){ stack.pollLast(); } stack.offerLast(i); } //å‰©ä½™çš„ while (!stack.isEmpty()){ Integer right = stack.pollLast(); for (Integer left : leftList) { if (left &gt; right) break; int minHeight = Math.min(height[right], height[left]); res = Math.max(res, minHeight * (right - left)); } } return res;} åŒæŒ‡é’ˆ4ms 1234567891011public int maxArea_other(int[] height) { if(height.length &lt;= 1) return -1; int i = 0, j = height.length - 1, res = 0; while(i &lt; j){ int h = Math.min(height[i], height[j]); res = Math.max(res, h * (j - i)); if(height[i] &lt; height[j]) ++i; else --j; } return res;} å…¶ä»–åŒæŒ‡é’ˆç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/container-with-most-water/"},{"title":"10æœˆäº‹è®°","text":"[DONE] äº‘ä¹‹å®¶å®ä¹ ç»“æŸ æµ™æ±Ÿå¤§åoffer æ‹’ç»æµ™æ±Ÿå¤§åoffer å¼€å¯å­¦æ ¡å®è®­ [TODO] è¡¥æ‹› è¡¥çŸ¥è¯† åæœˆå·²è¿‡ï¼Œè¿™ä¸ªæœˆå¯ä»¥è¯´æ˜¯å¾ˆå¼€å¿ƒçš„ä¸€ä¸ªæœˆï¼Œå®ä¹ ç»“æŸäº†ï¼Œæ ¡ä¼å®è®­å¼€å§‹äº†ï¼Œèµ°ä¹‹å‰offerä¹Ÿæ‹¿åˆ°äº†ã€‚ å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™æ˜¯11.6ï¼Œç­–ç•¥ç»ˆç©¶æ˜¯é«˜ä¼°äº†è‡ªå·±ï¼Œè¿˜æƒ³ç€ä¸€ä¸ªä¿åº•offerï¼Œè¦ä»·å¾ˆä½ï¼Œç»“æœå°±è¿™ä¸€ä¸ªï¼ï¼ï¼æ€»ä¹‹æ‹’äº†ï¼Œç°åœ¨è¿˜æ˜¯0offerçŠ¶æ€â€¦â€¦ å‘ç°è‡ªå·±ç¼ºå°‘å¾ˆå¤šå¿…è¦åŸºç¡€çŸ¥è¯†ï¼Œç°åœ¨æ­£åœ¨ç‹‚è¡¥ã€‚åŒæ—¶åœ¨è¿›è¡Œè¡¥æ‹›å’Œç­‰å¾…æ˜¥æ‹›ï¼Œçœ‹ç€å‘¨å›´çš„åŒå­¦éƒ½æ…¢æ…¢ä¸Šå²¸äº†ï¼Œè‡ªå·±å†…å¿ƒè¿˜æ˜¯æœ‰ä¸€ç‚¹æ…Œä¹±çš„ã€‚ä¸çŸ¥é“å‰è·¯å¦‚ä½•ï¼Œä½†æ˜¯ä¸èƒ½æ”¾å¼ƒï¼ŒåŠ æ²¹å§å°‘å¹´","link":"/life/10%E6%9C%88%E4%BA%8B%E8%AE%B0/"},{"title":"116/117-å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ","text":"åŠ›æ‰£116/117 https://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node/ https://leetcode-cn.com/problems/populating-next-right-pointers-in-each-node-ii/ ä¸¤é¢˜çš„åŒºåˆ«åœ¨äºæ ‘æ˜¯å¦æ˜¯å®Œå…¨äºŒå‰æ ‘ å…ˆçœ‹116 ç”±äºé¢˜ç›®è¦æ±‚ç©ºé—´å¤æ‚åº¦ä¸ºå¸¸é‡ï¼Œå› æ­¤ä¸èƒ½ç”¨BFSï¼Œå¦åˆ™é˜Ÿåˆ—æœ‰å¤§å°é€ æˆç©ºé—´å¤æ‚åº¦ä¸ºO(n)ã€‚å› æ­¤åªèƒ½ä½¿ç”¨é€’å½’ï¼Œè¿™é¢˜å…¶å®æ€è·¯ä¸Šæ¥è¯´æ¯”è¾ƒæ¸…æ™°ï¼Œroot.leftè¿åˆ°root.rightä¸Šï¼Œroot.rightè¿åˆ°root.next.leftä¸Š 12345 o / \\ o------&gt;o / \\ / \\ o--&gt;o--&gt;o o ä¸ºäº†æ–¹ä¾¿ï¼Œç›´æ¥ç»™å‡ºideä¸Šå¯ä»¥è·‘çš„ä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243public class one_one_six_å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ { @Test public void test(){ Node root = new Node(1); root.left = new Node(2); root.left.left = new Node(4); root.left.right = new Node(5); root.right = new Node(3); root.right.left = new Node(6); root.right.right = new Node(7); Node res = connect(root); } public Node connect(Node root) { if (root == null || root.left == null) return root; root.left.next = root.right; //å³æ˜¯ç©ºä¹Ÿæ²¡å…³ç³»ï¼Œå°±ç›´æ¥ä¸ºnull if (root.next != null) root.right.next = root.next.left; //è¦æœ‰é€’å½’ç´¯ç§¯çš„æ€æƒ³ï¼Œè¡¨é¢ä¸Šçœ‹èµ·æ¥æ— æ³•è¿æ¥å…¶ä»–å­æ ‘ï¼Œå®é™…ä¸Šä¹‹å‰å·²ç»è¿æ¥å¥½äº† connect(root.left); connect(root.right); return root; } class Node { public int val; public Node left; public Node right; public Node next; public Node() {} public Node(int _val) { val = _val; } public Node(int _val, Node _left, Node _right, Node _next) { val = _val; left = _left; right = _right; next = _next; } }} 117é¢˜çš„åŒºåˆ«åœ¨äºä¸ä¸€å®šæ˜¯å®Œå…¨äºŒå‰æ ‘ï¼Œä¹Ÿå°±æ˜¯å­˜åœ¨å³èŠ‚ç‚¹ä¸ºç©ºçš„æƒ…å†µï¼Œé‚£ä¹ˆå·¦èŠ‚ç‚¹å°±è¦ç›´æ¥nextåˆ°å¦ä¸€é¢—å­æ ‘ 12345 o / \\ o--&gt;o / / \\ o--&gt;o o é‚£ä¹ˆåŠ ä¸Šè¿™ä¸ªåˆ¤æ–­å°±è¡Œ è¿˜æœ‰å°±æ˜¯å¿…é¡»å…ˆé€’å½’å³å­æ ‘å†é€’å½’å·¦å­æ ‘ï¼ŒåŸå› å¦‚ä¸‹å›¾ 12345678910ä¸ºä»€ä¹ˆè¦å…ˆé€’å½’å³å­æ ‘ï¼Œå¦‚ä¸‹å›¾ å…ˆé€’å½’å·¦å­æ ‘ å…ˆé€’å½’å³å­æ ‘ o o / \\ / \\ o â€”â€” o o â€”â€” o / / \\ / / \\ o â€”â€” o o o â€”â€” o---o / / \\ / / \\ o o o o--------o oä¹Ÿå°±æ˜¯è¯´ï¼Œå…ˆé€’å½’å·¦å­æ ‘çš„è¯ç¬¬ä¸‰å±‚çš„è™šçº¿nextæ•°æ®å°šæœªäº§ç”Ÿï¼Œç¬¬å››å±‚getNext()æ—¶ä¹Ÿå°±æ‰¾ä¸åˆ°ç¬¬å››å±‚çš„è™šçº¿nextæ•°æ® ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œç›´æ¥è´´ideä¸‹çš„å®Œæ•´ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public class one_one_seven_å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆII { @Test public void test(){ Node root = new Node(1); root.left = new Node(2); root.left.left = new Node(4); root.right = new Node(3); root.right.right = new Node(5);// root.right.left = new Node(6);// root.right.right = new Node(7); connect(root); } public Node connect(Node root) { if(root == null) return null; if (root.left != null){ //rootçš„å·¦å­æ ‘ï¼šå¯èƒ½è¿æ¥åˆ°å³å­æ ‘ä¹Ÿå¯èƒ½è¿æ¥åˆ°rootçš„å…„å¼Ÿæ ‘çš„left/right if(root.right != null){ root.left.next = root.right; //å³å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™å·¦å­æ ‘è¿æ¥å³å­æ ‘ }else { root.left.next = getNext(root.next); //å³å­æ ‘ä¸ºç©ºï¼Œè¿æ¥åˆ°å…„å¼Ÿæ ‘çš„left/right } } if(root.right != null) { //rootçš„å³å­æ ‘ï¼šè¿æ¥åˆ°rootçš„å…„å¼Ÿæ ‘çš„left/right root.right.next = getNext(root.next); } connect(root.right); connect(root.left); return root; } private Node getNext(Node node){ if (node == null) return null; if (node.left != null) return node.left; if (node.right != null) return node.right; if (node.next != null) return getNext(node.next); return null; } class Node { public int val; public Node left; public Node right; public Node next; public Node() {} public Node(int _val) { val = _val; } public Node(int _val, Node _left, Node _right, Node _next) { val = _val; left = _left; right = _right; next = _next; } }} è¿™ä»½ä»£ç éå¸¸ç²¾ç‚¼ï¼Œå°¤å…¶æ˜¯getNextå‡½æ•° å…¶å®è¿™é“é¢˜é€»è¾‘ä¸Šæ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼ˆroot.left.next = root.right;é‚£æ®µï¼‰ï¼Œä½†æ˜¯é€’å½’é‚£æ®µæ˜¯å¾ˆéš¾æƒ³åˆ°çš„ï¼ˆroot.right.next = getNext(root.next);é‚£æ®µï¼‰ã€‚åæ­£æˆ‘æ˜¯è¿™æ ·ï¼Œé€’å½’çš„é¢˜çœŸçš„å¤´å¤§ï¼Œå°¤å…¶æ˜¯åˆ†æ²»ï¼Œé™¤äº†å›æº¯ä¸­çš„é€’å½’æˆ‘æ€»ç»“äº†å¥—è·¯ï¼Œå…¶ä»–çš„ä¾é¢˜æ„å¤ªçµæ´»ï¼Œèµ·ç æˆ‘è§‰å¾—æ²¡æœ‰åšè¿‡ç›¸ä¼¼çš„é¢˜ç›®æ—¶æˆ‘æ˜¯å†™ä¸å‡ºæ¥çš„ï¼Œé€ƒ~ å…¶ä»–æ ‘çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/populating-next-right-pointers-in-each-node/"},{"title":"1208-å°½å¯èƒ½ä½¿å­—ç¬¦ä¸²ç›¸ç­‰","text":"åŠ›æ‰£1208 https://leetcode-cn.com/problems/get-equal-substrings-within-budget/ ç¬¬ä¸€ç›´è§‰å°±æ˜¯æœ‰ä¸€ä¸ªdisæ•°ç»„è®°å½•äº†s[i]å’Œt[i]çš„å·®è·ï¼Œä¹Ÿç¡®å®æ˜¯è¿™ä¹ˆåšçš„ï¼Œæ¥ä¸‹æ¥ä¸€å¼€å§‹ä»¥ä¸ºç›´æ¥å¯¹disæ’åºå³å¯ï¼Œåæ¥æ‰å‘ç°æ˜¯å­å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æ˜¯è¦è¿ç»­çš„ï¼Œå› æ­¤è¿™é“é¢˜æ˜¯ä¸€é“æ»‘åŠ¨çª—å£é¢˜ 1234567891011121314151617181920212223242526public int equalSubstring(String s, String t, int maxCost) { int res = 0; int[] dis = new int[s.length()]; char[] sArr = s.toCharArray(); char[] tArr = t.toCharArray(); //ç»Ÿè®¡s[i]å’Œt[i]çš„å·®è· for (int i = 0; i &lt; s.length(); i++) { dis[i] = Math.abs(sArr[i] - tArr[i]); } //å› ä¸ºå­å­—ç¬¦ä¸²è¦æ±‚è¿ç»­ï¼Œæ‰€ä»¥æ»‘åŠ¨çª—å£ int l = 0, r = 0, len = 0; while (r &lt; s.length()){ if ((len + dis[r]) &lt;= maxCost){ len += dis[r]; r++; }else { len -= dis[l]; l++; } res = Math.max(res, r - l); } return res;} pythonå®ç° 12345678910111213141516def equalSubstring(self, s: str, t: str, maxCost: int) -&gt; int: # ç»Ÿè®¡s[i]å’Œt[i]çš„å·®è· dis = [abs(ord(s[i]) - ord(t[i])) for i in range(len(s))] # å› ä¸ºå­å­—ç¬¦ä¸²è¦æ±‚è¿ç»­ï¼Œæ‰€ä»¥æ»‘åŠ¨çª—å£ l, r, max_len, res = 0, 0, 0, 0 while r &lt; len(s): if max_len + dis[r] &lt;= maxCost: max_len += dis[r] r += 1 else: max_len -= dis[l] l += 1 res = max(res, r - l) return res å…¶ä»–æ»‘åŠ¨çª—å£ç±»å‹çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/get-equal-substrings-within-budget/"},{"title":"1219 é»„é‡‘çŸ¿å·¥","text":"åŠ›æ‰£1219 https://leetcode-cn.com/problems/path-with-maximum-gold/ å¦ä¸€ç§å›æº¯ç±»å‹ï¼šæšä¸¾å‹ ä»¥å‰éƒ½æ˜¯forå¾ªç¯é‡Œé¢é€’å½’çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™å› ä¸ºæƒ…å†µå°‘ï¼ˆæ¯”å¦‚å››ä¸ªæ–¹å‘ï¼‰ï¼Œforå¾ªç¯å†™èµ·æ¥åè€Œéº»çƒ¦ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class one_two_one_nine_é»„é‡‘çŸ¿å·¥ { @Test public void test(){ int[][] grid = {{0,6,0}, {5,8,7}, {0,9,0}}; int result = getMaximumGold(grid); System.out.println(result); } private int res = 0; public int getMaximumGold(int[][] grid) { for (int i = 0; i &lt; grid.length; i++) { for (int j = 0; j &lt; grid[i].length; j++) { backtrace(grid, i, j, 0); } } return res; } public void backtrace(int[][] grid, int x, int y, int money){ if (!check(grid, x, y)) return ; if (grid[x][y] == 0){ //ç»“æŸæ¡ä»¶ï¼šå››é¢ä¸º0ï¼Œå®é™…ä¸Šæ˜¯è¸è¿‡å»ä¹‹åæ‰€åœ¨åœ°ä¸º0 res = Math.max(res, money); return ; } //åšé€‰æ‹© int stored = grid[x][y]; money += stored; grid[x][y] = 0; //ä¸èµ°å›å¤´è·¯ //forå¾ªç¯æœ‰é™ï¼Œæšä¸¾ä»£æ›¿é€’å½’ backtrace(grid, x - 1, y, money); backtrace(grid, x, y - 1, money); backtrace(grid, x + 1, y, money); backtrace(grid, x, y + 1, money); //æ’¤é”€ money -= stored; grid[x][y] = stored; } public boolean check(int[][] grid, int x, int y){ return (x &gt;= 0 &amp;&amp; x &lt; grid.length &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; grid[0].length ); }} å¯¹æ¯”ä»¥å‰çš„å›æº¯ï¼Œä»ç„¶ä½¿ç”¨ä¸€ä¸ªå˜é‡ä¿å­˜ä¹‹å‰çš„çŠ¶æ€ï¼Œåªæ˜¯å°†foræ”¹æˆäº†æšä¸¾ï¼Œå¹¶åœ¨æšä¸¾é€’å½’ä¹‹åæ’¤é”€ä¹‹å‰çš„çŠ¶æ€ã€‚åŒæ ·çš„è¿˜æœ‰å¦ä¸€é“é¢˜ 2020åº¦å°æ»¡é‡‘èç§‹æ‹›ç¬”è¯•é¢˜â€“åšå¼ºçš„å°æ˜†è™« ç›´æ¥ç»™å‡ºjavaä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556public class duxiaoman_002_åšå¼ºçš„å°æ˜†è™« { public static void main(String[] args) { Scanner sc = new Scanner(System.in); int group = sc.nextInt(); sc.nextLine(); for (int i = 0; i &lt; group; i++) { //æ¯ä¸€ç»„ flag = false; res = Integer.MAX_VALUE; String[] temp = sc.nextLine().split(\" \"); int n = Integer.parseInt(temp[0]); int m = Integer.parseInt(temp[1]); int x = 0, y = 0; //åˆå§‹ä½ç½® char[][] matrix = new char[n][m]; for (int j = 0; j &lt; n; j++) { matrix[j] = sc.nextLine().toCharArray(); for (int k = 0; k &lt; matrix[j].length; k++) { if (matrix[j][k] == '@'){ x = j; y = k; } } } //å¤„ç†å®Œè¾“å…¥ï¼Œè¿›å…¥æ­£å¼é€»è¾‘ backtrace(matrix, x, y, 0); if (!flag) res = -1; System.out.println(res); } } private static int res = Integer.MAX_VALUE; private static boolean flag = false; /** * å›æº¯ * @param matrix */ public static void backtrace(char[][] matrix, int x, int y, int num){ if (matrix[x][y] == '#') return ; if (matrix[x][y] == '*') num++; //ç»“æŸæ¡ä»¶ if (x == 0 || y == 0 || x == matrix.length - 1 || y == matrix[0].length - 1){ res = Math.min(res, num); flag = true; return ; } //å››æ¬¡æšä¸¾ä»£æ›¿forå¾ªç¯ char stored = matrix[x][y] == '@' ? '.' : matrix[x][y]; matrix[x][y] = '#'; //ä¸èµ°å›å¤´è·¯ï¼ backtrace(matrix, x - 1, y, num); //ä¸Š backtrace(matrix, x, y - 1, num); //å·¦ backtrace(matrix, x + 1, y, num); //ä¸‹ backtrace(matrix, x, y + 1, num); //å³ matrix[x][y] = stored; }} åŒæ ·çš„ä¹Ÿæ˜¯ä½¿ç”¨storedä¿å­˜ä¹‹å‰çš„çŠ¶æ€ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„å›æº¯ï¼Œè¦æ³¨æ„çš„æ”¹åŠ¨å¹¶ä¸å¤š å…¶ä»–å›æº¯ç³»åˆ—é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/path-with-maximum-gold/"},{"title":"121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº","text":"åŠ›æ‰£ç¬¬121é¢˜ å‰‘æŒ‡offerç¬¬63é¢˜ https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/ ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚ å¦‚æœä½ æœ€å¤šåªå…è®¸å®Œæˆä¸€ç¬”äº¤æ˜“ï¼ˆå³ä¹°å…¥å’Œå–å‡ºä¸€æ”¯è‚¡ç¥¨ä¸€æ¬¡ï¼‰ï¼Œè®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ æ³¨æ„ï¼šä½ ä¸èƒ½åœ¨ä¹°å…¥è‚¡ç¥¨å‰å–å‡ºè‚¡ç¥¨ã€‚ ç¤ºä¾‹ 1: 1234è¾“å…¥: [7,1,5,3,6,4]è¾“å‡º: 5è§£é‡Š: åœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ = 6-1 = 5 ã€‚ æ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ 7-1 = 6, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ï¼›åŒæ—¶ï¼Œä½ ä¸èƒ½åœ¨ä¹°å…¥å‰å–å‡ºè‚¡ç¥¨ã€‚ ç¤ºä¾‹ 2: 123è¾“å…¥: [7,6,4,3,1]è¾“å‡º: 0è§£é‡Š: åœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚ æ€è·¯ï¼š ç»å…¸çš„åŠ¨æ€è§„åˆ’é¢˜ dpæ•°ç»„å«ä¹‰ï¼šdp[i]ä»£è¡¨åˆ°ç¬¬iå¤©æœ€ä½³åˆ©æ¶¦ï¼Œåˆ™dp[n]å°±æ˜¯æœ€ç»ˆæœ€å¤§åˆ©æ¶¦ åˆå§‹æ¡ä»¶ï¼šdp[0] = 0ï¼Œæ²¡ä¹°å…¥å–å‡ºä¹‹å‰é»˜è®¤åˆ©æ¶¦ä¸º0 å…³ç³»å¼ï¼šdp[i] = Math.max(ä»Šå¤©å–å‡ºå»çš„è¯è·å¾—çš„æœ€å¤§åˆ©æ¶¦, ä¹‹å‰å–çš„è¯æœ€å¤§åˆ©æ¶¦å³dp[i-1]); 12345678910111213141516171819202122232425public class one_two_one_ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº { @Test public void test(){ int[] prices = {2,6,1,7}; int res = maxProfit(prices); System.out.println(res); } public int maxProfit(int[] prices) { if (prices.length == 0){ return 0; } int n = prices.length; int[] dp = new int[n]; //dp[i]ä»£è¡¨åˆ°ç¬¬iå¤©ä¸ºæ­¢æœ€ä½³æ”¶å…¥ int buy = 0; //å½“å‰æœ€ä½³ä¹°å…¥æ—¥æœŸ for (int i = 1; i &lt; n; i++) { if (prices[i] &lt; prices[buy]){ buy = i; } dp[i] = Math.max(prices[i] - prices[buy], dp[i - 1]); } return dp[n - 1]; }} ç»å…¸çš„åŠ¨æ€è§„åˆ’é¢˜ï¼Œè·Ÿç€3æ­¥èµ°å°±å®Œäº‹å„¿~ å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼šdp[i]åªå’Œdp[i-1]æœ‰å…³ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨æ•°ç»„è€Œåªç”¨ä¸€ä¸ªå˜é‡ä¿å­˜ 123456789101112131415public int maxProfit(int[] prices) { if (prices.length == 0){ return 0; } int n = prices.length; int res = 0; int buy = 0; //å½“å‰æœ€ä½³ä¹°å…¥æ—¥æœŸ for (int i = 1; i &lt; n; i++) { if (prices[i] &lt; prices[buy]){ buy = i; } res = Math.max(prices[i] - prices[buy], res); } return res;} æ—¶é—´ä¹Ÿç”±2mså˜ä¸º1ms å…¶ä»–åŠ¨æ€è§„åˆ’çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/best-time-to-buy-and-sell-stock/"},{"title":"131-åˆ†å‰²å›æ–‡ä¸²","text":"åŠ›æ‰£131 https://leetcode-cn.com/problems/palindrome-partitioning/ å›æº¯é—®é¢˜ï¼Œä¸€å¼€å§‹çœ‹åˆ°æ ·ä¾‹çš„ç»“æœæ˜¯å•ä¸ªçš„åœ¨æœ€åé¢ï¼Œå¯¼è‡´æƒ³å¤æ‚äº† è´´å®Œæ•´ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839public class one_three_one_åˆ†å‰²å›æ–‡ä¸² { @Test public void test(){ String s = \"\"; partition(s); System.out.println(res.toString()); } private List&lt;List&lt;String&gt;&gt; res = new ArrayList&lt;&gt;(); public List&lt;List&lt;String&gt;&gt; partition(String s) { backtrace(s, new ArrayList&lt;&gt;(), 0); return res; } public void backtrace(String s, List&lt;String&gt; path, int splitIndex){ if (splitIndex == s.length()){ //ç»“æŸæ¡ä»¶ï¼šåˆ†å‰²åˆ°åº• res.add(new ArrayList&lt;&gt;(path)); return ; } for (int i = splitIndex; i &lt; s.length(); i++) { String a = s.substring(splitIndex, i + 1); //åšé€‰æ‹© path.add(a); if (check(a)){ //æ¡ä»¶é€’å½’ backtrace(s, path, i + 1); } path.remove(path.size() - 1); //æ’¤é”€é€‰æ‹© } } //æ£€éªŒå›æ–‡ public boolean check(String str){ for (int i = 0; i &lt; str.length() / 2; i++) { if (str.charAt(i) != str.charAt(str.length() - i - 1)) return false; } return true; }} 13ms å‰ªæï¼šå°†åˆ¤æ–­æ·»åŠ åœ¨addï¼ˆåšé€‰æ‹©å‰ï¼‰ï¼Œå¯ä»¥å‡å°‘å¤šæ¬¡add removeæ“ä½œï¼Œæå‡åˆ°5-8ms å…¶ä»–ä¸å˜ï¼Œåªè´´æœ‰å˜åŠ¨çš„backtraceå‡½æ•° 12345678910111213public void backtrace(String s, List&lt;String&gt; path, int splitIndex){ if (splitIndex == s.length()){ res.add(new ArrayList&lt;&gt;(path)); return ; } for (int i = splitIndex; i &lt; s.length(); i++) { String a = s.substring(splitIndex, i + 1); if (!check(a)) continue; //å…ˆåˆ¤æ–­ä¸å›æ–‡ï¼Œå‡å°‘ä¸€æ¬¡addå’Œremoveæ“ä½œ path.add(a); backtrace(s, path, i + 1); path.remove(path.size() - 1); }} å…¶ä»–å›æº¯çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/palindrome-partitioning/"},{"title":"1291-é¡ºæ¬¡æ•°","text":"åŠ›æ‰£1291 https://leetcode-cn.com/problems/sequential-digits/ ä¹ä¸€çœ‹æœ‰ç‚¹æ€ªï¼Œçœ‹ä¼¼å›æº¯åˆä¸åƒã€‚å…¶å®æ˜¯å›æº¯ï¼Œä½†æ˜¯æ²¡æœ‰123 124 125è¿™æ ·çš„è¿‡ç¨‹ï¼Œæ¯ä¸€æ¬¡forå¾ªç¯è¿˜åœ¨ï¼Œä½†æ˜¯æ¯æ¬¡é€’å½’è¿›å…¥ä¸€æ¬¡åå°±è¢«å‰ªæäº†ï¼ˆåˆ¤æ–­12åé¢å¿…é¡»è·Ÿ3ï¼‰ 12345678910111213141516171819202122232425public List&lt;Integer&gt; sequentialDigits(int low, int high) { backtrace(low, high, 0, 1); Collections.sort(res); return res;}private List&lt;Integer&gt; res = new ArrayList&lt;&gt;();public void backtrace(int low, int high, int path, int index){ //ç»“æŸæ¡ä»¶ if (path &gt; high) return ; if (path &gt;= low &amp;&amp; path &lt;= high){ res.add(path); } //é€‰æ‹©åˆ—è¡¨å®é™…ä¸ºèµ·å§‹æ•°å­— for (int i = index; i &lt;= 9; i++) { //å‰ªæ if (path != 0 &amp;&amp; path % 10 + 1 != i) return; //é€‰æ‹© path = path * 10 + i; //é€’å½’ backtrace(low, high, path, i + 1); //æ’¤é”€ path = path / 10; }} å…¶ä»–å›æº¯ç³»åˆ—é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/sequential-digits/"},{"title":"15-ä¸‰æ•°ä¹‹å’Œ","text":"åŠ›æ‰£15 https://leetcode-cn.com/problems/3sum/ æ€è·¯ï¼šè¿™é¢˜çš„å…³é”®åœ¨äºæ’åº+åŒæŒ‡é’ˆï¼Œè™½ç„¶æœ‰ä¸‰ä¸ªæŒ‡é’ˆï¼Œä½†æ ¸å¿ƒæ˜¯j, kæŒ‡é’ˆ å› ä¸ºæ’å¥½åºäº†ï¼Œæ‰€ä»¥æŒ‡é’ˆkä»i+1å¼€å§‹å‘å³èµ°ï¼Œkä»æœ«å°¾å¾€å‰èµ° -3 | -2 -1 0 2 4 7 æ­¤æ—¶iæŒ‡å‘-3ï¼Œé‚£ä¹ˆjæŒ‡å‘ä¸‹ä¸€ä¸ª-2ï¼ŒkæŒ‡å‘æœ«å°¾7ï¼Œç„¶åç”¨|ä¸¤ç«¯è¡¨ç¤ºj, k -3 | -2 -1 0 2 4 7| ç„¶åè®¡ç®—-3 + -2 + 7 &gt; 0ï¼Œkâ€“ -3 | -2 -1 0 2 4 | 7 ç„¶åè®¡ç®—-3 + -2 + 4 &lt; 0ï¼Œj++ -3 -2 | -1 0 2 4 | 7 ç„¶åè®¡ç®—-3 + -1 + 4 = 0ï¼Œè¯´å-3, -1, 4æ˜¯ä¸€ç»„ç»“æœ 12345678910111213141516171819202122232425262728293031public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] nums) { Set&lt;List&lt;Integer&gt;&gt; res = new HashSet&lt;&gt;(); int n = nums.length; if(n &lt; 3){ return new ArrayList&lt;&gt;(res); } Arrays.sort(nums); for (int i = 0; i &lt; n - 2; i++) { int j = i + 1; int k = n - 1; while (j &lt; k){ if (nums[i] + nums[j] + nums[k] &gt; 0){ k--; }else if (nums[i] + nums[j] + nums[k] &lt; 0){ j++; }else { List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(nums[i]); list.add(nums[j]); list.add(nums[k]); res.add(list); j++; k--; } } } return new ArrayList&lt;&gt;(res);} å…¶ä»–åŒæŒ‡é’ˆç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/3sum/"},{"title":"152-ä¹˜ç§¯æœ€å¤§å­æ•°ç»„","text":"åŠ›æ‰£152 https://leetcode-cn.com/problems/maximum-product-subarray/ è¿™é¢˜ä¸æ˜¯æ™®é€šçš„åŠ¨æ€è§„åˆ’é¢˜ï¼Œå€ŸåŠ©äº†æœ€å¤§æœ€å°ä¸¤ä¸ªæ•°ç»„æ¥è¿›è¡ŒåŠ¨æ€è§„åˆ’ åŠ¨æ€è§„åˆ’è§£æ³•å¯ä»¥å‚è€ƒå®˜æ–¹é¢˜è§£ https://leetcode-cn.com/problems/maximum-product-subarray/solution/cheng-ji-zui-da-zi-shu-zu-by-leetcode-solution/ åœ¨è¯„è®ºåŒºçœ‹åˆ°ä¸€ä¸ªå¾ˆå¦™çš„æ€è·¯ï¼ŒåŠ¨æ€è§„åˆ’çš„å…³é”®åœ¨å“ªé‡Œï¼Ÿå…³é”®å°±åœ¨äº åªè¦ç›¸ä¹˜ä¸ä¸º0ï¼Œç»å¯¹å€¼å°±ä¼šå¢å¤§ã€‚å¦‚æœæ•°ç»„çš„æ•°æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æœ€å¤§çš„å˜æœ€å°çš„ï¼Œæœ€å°çš„å˜æœ€å¤§çš„ï¼Œæœ€å¤§æœ€å°ä¿å­˜èµ·æ¥äº¤æ¢å³å¯ 1234567891011121314public int maxProduct2(int[] nums) { int max = Integer.MIN_VALUE, imax = 1, imin = 1; //ä¸€ä¸ªä¿å­˜æœ€å¤§çš„ï¼Œä¸€ä¸ªä¿å­˜æœ€å°çš„ã€‚ for(int i=0; i&lt;nums.length; i++){ if(nums[i] &lt; 0){ //å¦‚æœæ•°ç»„çš„æ•°æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æœ€å¤§çš„å˜æœ€å°çš„ï¼Œæœ€å°çš„å˜æœ€å¤§çš„ã€‚å› æ­¤äº¤æ¢ä¸¤ä¸ªçš„å€¼ã€‚ int temp = imax; imax = imin; imin = temp; } imax = Math.max(imax*nums[i], nums[i]); imin = Math.min(imin*nums[i], nums[i]); max = Math.max(max, imax); } return max;} å¤ªå¼ºäº†ï¼Œè¿™è¾ˆå­æƒ³ä¸å‡ºäº†â€¦ ä¸è¿‡è¿™é“é¢˜å¯ä»¥æœ‰ä¸€ä¸ªæ›´åŠ å®¹æ˜“æ€è€ƒçš„è§£æ³•ï¼š è®°å½•ä¸€ä¸ªå½“å‰ä¹˜ç§¯productï¼Œä¸€ä¸ªå½“å‰æœ€å¤§max 1å¦‚æœæœ‰0ï¼Œåˆ™ä¼šä»¥0ä¸ºåˆ†ç•Œç‚¹ï¼Œå°†producté‡ç½®ä¸º1é‡æ–°è®¡ç®— 2å¦‚æœæ²¡æœ‰0ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š 2.1è´Ÿæ•°ä¸ºå¶æ•°ï¼Œä¸€ç›´ä¹˜åˆ°åº• 2.2è´Ÿæ•°ä¸ºå¥‡æ•°ï¼Œä»å·¦è¾¹å¼€å§‹ä¹˜åˆ°æœ€åä¸€ä¸ªè´Ÿæ•°å‰æœ‰ä¸€ä¸ªæœ€å¤§å€¼ï¼Œä»å³è¾¹å¼€å§‹ä¹˜ä¹Ÿæœ‰ä¸€ä¸ªæœ€å¤§å€¼ï¼Œæ¯”è¾ƒå³å¯ æ˜ç™½äº†è¿™ä¸€ç‚¹åå¯ä»¥ç®€åŒ–ï¼š 2.2ä¸­æ‰€è¯´â€œæœ€åä¸€ä¸ªè´Ÿæ•°å‰â€å…¶å®ä¸éœ€è¦è€ƒè™‘ï¼Œç›´æ¥ä¹˜åˆ°åº•ï¼Œå› ä¸ºæˆ‘ä»¬è®°å½•äº†maxï¼Œå°±ç®—ä¹˜åˆ°åº•ä¹Ÿä¸ä¼šæ¯”maxå¤§ï¼ˆè´Ÿæ•°&lt;æ­£æ•°ï¼‰ 2.1å¯ä»¥åŒ…å«åœ¨2.2ä¸­ï¼Œåªä¸è¿‡å·¦å³ä¸¤æ¬¡ç»“æœä¸€æ ·ç½¢äº† 1å¯ä»¥åŒ…å«åœ¨2.2ä¸­ï¼Œåªéœ€è¦åˆ¤æ–­å½“å‰æ˜¯å¦ä¸º0é‡ç½®productå³å¯ æ‰€ä»¥ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718public int maxProduct(int[] nums) { int product = 1; int max = nums[0]; //ä»å·¦å¾€å³ for (int i = 0; i &lt; nums.length; i++) { product *= nums[i]; max = Math.max(max, product); if (nums[i] == 0) product = 1; } //ä»å³å¾€å·¦ product = 1; for (int i = nums.length - 1; i &gt;= 0; i--) { product *= nums[i]; max = Math.max(max, product); if (nums[i] == 0) product = 1; } return max;} å…¶ä»–åŠ¨æ€è§„åˆ’çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/maximum-product-subarray/"},{"title":"160-ç›¸äº¤é“¾è¡¨","text":"åŠ›æ‰£160 / å‰‘æŒ‡offer52 https://leetcode-cn.com/problems/intersection-of-two-linked-lists/ è¿™é¢˜æœ‰å‘ï¼Œé¢˜ç›®æè¿°çš„ä¸æ¸…æ¥šã€‚è¿™é¢˜æ„æ€æ˜¯èŠ‚ç‚¹åœ°å€ç›¸åŒï¼ˆè€Œä¸åªæ˜¯å€¼ï¼‰ã€‚ æ€è·¯ï¼šè®©Aæœ«å°¾æ¥ä¸ŠBç»„æˆï¼ˆABï¼‰ï¼ŒBçš„æœ«å°¾æ¥ä¸ŠAï¼ˆç»„æˆBAï¼‰ï¼Œè¿™æ ·ä¸¤ä¸ªé“¾è¡¨é•¿åº¦å°±ç›¸åŒäº†ï¼Œéå†ä»–ä»¬å¾—åˆ°ç›¸åŒçš„èŠ‚ç‚¹å°±æ˜¯äº¤ç‚¹ 1234567891011121314151617181920212223242526272829303132333435public class one_six_zero_ç›¸äº¤é“¾è¡¨ { @Test public void test(){ ListNode commons = new ListNode(8); commons.next= new ListNode(4); commons.next.next = new ListNode(5); ListNode headA = new ListNode(4); headA.next = new ListNode(1); headA.next.next = commons; ListNode headB = new ListNode(5); headB.next = new ListNode(0); headB.next.next = new ListNode(1); headB.next.next.next = commons; ListNode res = getIntersectionNode(headA, headB); System.out.println(res.val); } public ListNode getIntersectionNode(ListNode headA, ListNode headB) { if(headA == null || headB == null) { return null; } ListNode n1 = headA; ListNode n2 = headB; while(n1 != n2){ n1 = n1 == null ? headB : n1.next; n2 = n2 == null ? headA : n2.next; } return n1; }} éœ€è¦æ³¨æ„çš„æ˜¯n1 == nullè€Œä¸æ˜¯n1.next == nullï¼Œä¹Ÿå°±æ˜¯è¯´ä¸¤ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€æ¬¡nullçš„æœºä¼šï¼Œå¦åˆ™å¦‚æœä¸¤ä¸ªé“¾è¡¨æ²¡æœ‰äº¤ç‚¹ï¼Œå°±ç›´æ¥æ­»å¾ªç¯äº† è¯„è®ºåŒºçœ‹åˆ°æ–‡è‰ºç‰ˆè§£é‡Šï¼š ä¸¤ä¸ªç»“ç‚¹ä¸æ–­çš„å»å¯¹æ–¹çš„è½¨è¿¹ä¸­å¯»æ‰¾å¯¹æ–¹çš„èº«å½±ï¼Œåªè¦äºŒäººæœ‰äº¤é›†ï¼Œå°±ç»ˆä¼šç›¸é‡â¤ æˆ‘å“­äº†ï¼Œç¨‹åºéƒ½æ¯”æˆ‘æ‡‚æµªæ¼«ğŸ™ å…¶ä»–é“¾è¡¨ç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/intersection-of-two-linked-lists/"},{"title":"19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹","text":"åŠ›æ‰£19 https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/ åŒæŒ‡é’ˆç»å…¸é¢˜ å‰åæŒ‡é’ˆï¼Œä¸€éæ‰«æå‰é¢çš„æŒ‡é’ˆå…ˆèµ°nä¸ªï¼Œç„¶åå‰åæŒ‡é’ˆä¸€èµ·ç§»åŠ¨ï¼Œåœ¨è¦åˆ é™¤çš„èŠ‚ç‚¹å‰é¢åœä¸‹ï¼Œä¹Ÿå°±æ˜¯pre.next != nullç„¶ååˆ æ‰ç¬¬nä¸ªï¼špost.next = post.next.next 1234567891011121314151617public ListNode removeNthFromEnd2(ListNode head, int n) { if (head == null) return null; ListNode root = new ListNode(0); root.next = head; ListNode pre = root, post = root; while (n-- != 0) { pre = pre.next; } while (pre != null &amp;&amp; pre.next != null){ pre = pre.next; post = post.next; } if (post != null &amp;&amp; post.next != null) post.next = post.next.next; return root.next;} å…¶ä»–é“¾è¡¨ç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ å…¶ä»–åŒæŒ‡é’ˆç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/remove-nth-node-from-end-of-list/"},{"title":"179-æœ€å¤§æ•°","text":"åŠ›æ‰£179 https://leetcode-cn.com/problems/largest-number/ å®³ï¼Œç½‘æ˜“çš„é¢˜æ²¡åšå‡ºæ¥ï¼Œè¿˜æ˜¯ç‰›å®¢åŸé¢˜ï¼Œæ˜¯ä¸€é“å­—ç¬¦ä¸²é—®é¢˜ï¼Œå­—ç¬¦ä¸²æ‹¼æ¥åä¿è¯æ•°æœ€å¤§ï¼Œè€ƒçš„æ˜¯sortçš„é‡å†™Comparator 12345678910111213141516public String largestNumber(int[] nums) { String[] strArr = new String[nums.length]; for (int i = 0; i &lt; strArr.length; i++) { strArr[i] = String.valueOf(nums[i]); } Arrays.sort(strArr, (o1, o2) -&gt; (int) (Long.parseLong(o1 + o2) - Long.parseLong(o2 + o1))); //å°±è¿™å¥,è¿™é‡Œçš„o1 + o2æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ StringBuilder sb = new StringBuilder(); boolean flag = true; for(int i = strArr.length - 1; i &gt;= 0; i--){ sb.append(strArr[i]); if (!\"0\".equals(strArr[i])) flag = false; } if (flag) return \"0\"; return sb.toString();} æˆ–è€…ç›´æ¥è°ƒç”¨å­—ç¬¦ä¸²çš„compareToæ–¹æ³• 12345678910111213141516public String largestNumber(int[] nums) { String[] strArr = new String[nums.length]; for (int i = 0; i &lt; strArr.length; i++) { strArr[i] = String.valueOf(nums[i]); } Arrays.sort(strArr, (o1, o2) -&gt; (o1 + o2).compareTo(o2 + o1)); StringBuilder sb = new StringBuilder(); boolean flag = true; for(int i = strArr.length - 1; i &gt;= 0; i--){ sb.append(strArr[i]); if (!\"0\".equals(strArr[i])) flag = false; } if (flag) return \"0\"; return sb.toString();} å…¶ä»–å­—ç¬¦ä¸²ç±»å‹çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/largest-number/"},{"title":"206-åè½¬é“¾è¡¨","text":"åŠ›æ‰£206 https://leetcode-cn.com/problems/reverse-linked-list/ ç®€å•é¢˜ï¼Œé“¾è¡¨é¢˜æŒ‡é’ˆä¸æ€•å¤šï¼ï¼ 1234567891011public ListNode reverseList(ListNode head) { if (head == null) return null; ListNode pre = head, post = null, temp = null; while (pre != null) { temp = pre.next; pre.next = post; post = pre; pre = temp; } return post;} å…¶ä»–é“¾è¡¨ç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/reverse-linked-list/"},{"title":"20-æœ‰æ•ˆçš„æ‹¬å·","text":"åŠ›æ‰£20 https://leetcode-cn.com/problems/valid-parentheses/ ä¹‹å‰çš„æ–‡ç« è¯´è¿‡è¿™ç§æ‹¬å·åŒ¹é…çš„é¢˜ç›®ä¸€èˆ¬éƒ½æ˜¯æ ˆåšï¼Œä½†æ˜¯ç¬”è¯•çš„è¯ä¸ºäº†è¿½æ±‚æ•ˆç‡ï¼Œå¯ä»¥è€ƒè™‘ç”¨ä¸€äº›å­—ç¬¦ä¸²api å·§å¦™çš„å­—ç¬¦ä¸²æ›¿æ¢(ä¸æ¨è) 1234567891011/** * å­—ç¬¦ä¸²æ›¿æ¢ï¼ŒæˆåŠŸåŒ¹é…é‚£ä¹ˆæ¯æ¬¡ä¸€å®šä¼šæœ‰ä¸€å¯¹ç›´åˆ°ä¸ºç©º */public boolean isValid(String s) { while (s.contains(\"()\") || s.contains(\"[]\") || s.contains(\"{}\")){ s = s.replace(\"()\", \"\"); s = s.replace(\"[]\", \"\"); s = s.replace(\"{}\", \"\"); } return s.length() == 0;} å·§å¦™çš„æ ˆåšæ³•(æ¨è)ï¼Œè¿™ä¸ªæ ˆè®¾è®¡çš„å¾ˆå·§å¦™ï¼Œå†™èµ·æ¥æ¯”å­—ç¬¦ä¸²æ›¿æ¢æ›´ç®€å•ï¼Œæ¨è 1234567891011121314/** * å·§å¦™çš„æ ˆï¼Œåªå­˜äº†åº”è¯¥å‡ºæ ˆçš„å³æ‹¬å·ï¼Œå¾ˆæ£’çš„æ€è·¯ï¼Œå¾ˆå¿«ï¼Œå†™èµ·æ¥æ¯”å­—ç¬¦ä¸²æ›¿æ¢æ›´ç®€å• */public boolean isValid(String s) { char[] chars = s.toCharArray(); Deque&lt;Character&gt; stack = new LinkedList&lt;&gt;(); for (char c : chars) { if (c == '{') stack.offerLast('}'); else if (c == '[') stack.offerLast(']'); else if (c == '(') stack.offerLast(')'); else while (stack.isEmpty() || stack.pollLast() != c) return false; } return stack.isEmpty();} å…¶ä»–å­—ç¬¦ä¸²ç±»å‹çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/valid-parentheses/"},{"title":"136-137-260-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—","text":"136-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— https://leetcode-cn.com/problems/single-number/ 137-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—II https://leetcode-cn.com/problems/single-number-ii/ 260-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—III https://leetcode-cn.com/problems/single-number-iii/ å…ˆçœ‹136ï¼Œä½è¿ç®—çš„ç»å…¸é¢˜ï¼ŒçŸ¥ä¹å‡¡æ˜¯æœ‰å¹ä½è¿ç®—çš„å›ç­”çš„ï¼Œæ²¡æœ‰ä¸æ‹¿è¿™é¢˜å¼€åˆ€çš„ã€‚ åŸç†æ˜¯a ^ b ^ b = a 1234567public int singleNumber(int[] nums) { int res = nums[0]; for(int i = 1; i &lt; nums.length; i++){ res ^= nums[i]; } return res;} è·³è¿‡137ï¼Œå…ˆçœ‹260é¢˜ï¼Œç›¸æ¯”136é¢˜å®ƒä»ä¸€ä¸ªæ•°å˜æˆäº†ä¸¤ä¸ªæ•°ï¼Œéš¾åº¦å¤§äº†å¾ˆå¤š æ€è·¯ï¼š æˆ‘ä»¬å‡è®¾åªå‡ºç°ä¸€æ¬¡çš„ä¸¤ä¸ªæ•°ä¸ºa, bï¼ŒæŒ‰ç…§136é¢˜çš„æ€è·¯ï¼Œéå†å¼‚æˆ–ï¼Œå¾—åˆ°çš„ç»“æœåº”è¯¥æ˜¯res = a ^ b resä¸­äºŒè¿›åˆ¶ä¸º1çš„ä½å°±æ˜¯aå’ŒbäºŒè¿›åˆ¶ä¸ä¸€æ ·çš„ä½ï¼Œä¸ç®¡å“ªä¸ª1ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªä½ä¸º1çš„æ‰€æœ‰æ•°å’Œè¿™ä¸ªä½ä¸º0çš„æ‰€æœ‰æ•°åˆ†å¼€ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸¤ç»„æ•° a, c, c b, d, d åˆæˆä¸ºäº†136é¢˜çš„æƒ…å†µ 1234567891011121314151617181920212223242526272829public int[] singleNumber(int[] nums) { int[] res = new int[2]; int orRes = nums[0]; //orRes = a ^ b for (int i = 1; i &lt; nums.length; i++) { orRes ^= nums[i]; } int lowBit1 = findLow1(orRes); //ç”¨lowBit1è¿™ä¸€ä½åˆ†æˆä¸¤ç»„ï¼Œåˆ†åˆ«è¿›è¡Œå¼‚æˆ–ï¼Œå’Œ136é¢˜ä¸€æ · for (int i = 0; i &lt; nums.length; i++) { if ((nums[i] &gt;&gt; lowBit1 &amp; 1) == 1){ res[0] ^= nums[i]; }else { res[1] ^= nums[i]; } } return res;}//æ‰¾ä¸€ä½1ï¼Œå“ªä¸€ä½éƒ½è¡Œï¼Œæˆ‘è¿™é‡Œå–å¾—æ˜¯æœ€ä½ä½ï¼Œæ–¹ä¾¿public int findLow1(int num){ int i = 0; while (num != 0 &amp;&amp; (num &amp; 1) != 1){ num = num &gt;&gt; 1; i++; } return i;} 137é¢˜ è¿™é¢˜æ”¾åˆ°æœ€åè®²æ˜¯å› ä¸ºè¯´å®è¯æ¯”è¾ƒéš¾ï¼Œéš¾åœ¨å‰é¢çš„æ˜¯å…¶ä»–å…ƒç´ å‡ºç°ä¸¤æ¬¡ï¼Œè€Œâ€œå¼‚æˆ–â€è¿™ä¸ªä½è¿ç®—åˆšå¥½ä½¿å¾—b^b=0ã€‚è¿™é¢˜éš¾åœ¨å‡ºç°äº†3æ¬¡ï¼Œæ„å‘³ç€æˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€ä¸ªâ€œè¿ç®—â€ï¼Œä½¿å¾—bâ˜…bâ˜…b=0 è¯„è®ºåŒºçš„ä»£ç å¤§å¤šæ˜¯è¿™æ ·çš„ï¼Œå´æ²¡è§£é‡Šæ¸…æ¥š 12345678public int singleNumber(int[] nums) { int a = 0, b = 0; for (int x : nums) { a = (a ^ x) &amp; ~b; b = (b ^ x) &amp; ~a; } return a;} æˆ‘è®¤ä¸ºè§£é‡Šçš„æœ€å¥½çš„æ˜¯é¢˜è§£çš„è¿™ä¸€ç¯‡ https://leetcode-cn.com/problems/single-number-ii/solution/luo-ji-dian-lu-jiao-du-xiang-xi-fen-xi-gai-ti-si-l/ ç®€å•è§£é‡Šå°±æ˜¯3ç§çŠ¶æ€éœ€è¦ä¸¤ä½ï¼Œæ‰€ä»¥ä»00ï¼Œ01ï¼Œ10ï¼Œ11å››ä¸ªä¸­ä»»é€‰3ä¸ªï¼Œæ¯”å¦‚00ï¼Œ01ï¼Œ10ï¼Œé‚£ä¹ˆéœ€è¦ç”»çœŸå€¼è¡¨ä½¿å…¶æ»¡è¶³00-&gt;01, 01-&gt;10, 10-&gt;00 Zæ˜¯ä»€ä¹ˆï¼ŒZä¸º1ä»£è¡¨è¿™ä¸ªæ•°å‡ºç°äº†ï¼Œé‚£ä¹ˆ ä¸€å¼€å§‹ä¸º00ï¼ŒZç¬¬ä¸€æ¬¡å‡ºç°00-&gt;01ï¼Œç¬¬äºŒæ¬¡å‡ºç°01-&gt;10ï¼Œç¬¬ä¸‰æ¬¡å‡ºç°10-&gt;00 é‚£ä¹ˆå°±å¯ä»¥å†™è¡¨è¾¾å¼äº†ï¼Œæ ¹æ®æ•°ç”µçš„çŸ¥è¯†ï¼Œå†™x_newåªçœ‹x_newä¸º1çš„ äº‹å®ä¸Šï¼Œæˆ‘è®¤ä¸ºåˆ°è¿™ä¸€æ­¥å°±å¤Ÿäº†ï¼ŒåŒ–ç®€ä»€ä¹ˆçš„ä¸€æ—¶åŠä¼šå†™ä¸å‡ºæ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä»¥è¿™ä¸ªä¸ºä¾‹ï¼Œå†™çš„æ—¶å€™è¦æ³¨æ„ï¼Œä¸è¦ç›´æ¥å˜xè€Œæ˜¯ç”¨x_newå­˜èµ·æ¥ï¼Œå¦åˆ™è®¡ç®—y_newæ—¶æ”¹å˜äº†xçš„å€¼ã€‚å½“ç„¶ï¼Œpythonå¯ä»¥a, b = b, aå¦è¯´ 123456789public int singleNumber(int[] nums) { int x = 0, y = 0; for (int z : nums) { int x_new = (x &amp; ~y &amp; ~z) | (~x &amp; y &amp; z); int y_new = (~x &amp; ~y &amp; z) | (~x &amp; y &amp; ~z); x = x_new; y = y_new; } return y;} è‡³äºåŒ–ç®€å®Œï¼Œå°±æ˜¯å‰é¢è´´çš„é‚£ä¸ªæ ·å­äº†ï¼Œæˆ‘æ•°ç”µä¸å¥½ï¼Œé ä½ ä»¬äº† å…¶ä»–é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/single-number/"},{"title":"21-åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨","text":"åŠ›æ‰£21 https://leetcode-cn.com/problems/merge-two-sorted-lists/ 123456789101112131415161718public ListNode mergeTwoLists(ListNode l1, ListNode l2) { //è™šæ‹Ÿå¤´éƒ¨ ListNode root = new ListNode(), cur = root; //å…ˆåˆå¹¶å…¬å…±é•¿åº¦éƒ¨åˆ† while (l1 != null &amp;&amp; l2 != null){ if (l1.val &lt;= l2.val) { cur.next = l1; l1 = l1.next; }else { cur.next = l2; l2 = l2.next; } cur = cur.next; } //å‰©ä¸‹çš„ç›´æ¥æ¥ä¸Š cur.next = (l1 == null) ? l2 : l1; return root.next;} å…¶ä»–é“¾è¡¨ç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/merge-two-sorted-lists/"},{"title":"252-ä¼šè®®å®¤","text":"åŠ›æ‰£252 / lintcode920 / å­—èŠ‚åŸé¢˜ ä¼šè®®å®¤ https://www.lintcode.com/problem/meeting-rooms/description ç»™å®šä¸€ç³»åˆ—çš„ä¼šè®®æ—¶é—´é—´éš”ï¼ŒåŒ…æ‹¬èµ·å§‹å’Œç»“æŸæ—¶é—´[[s1,e1]ï¼Œ[s2,e2]ï¼Œâ€¦(si &lt; ei)ï¼Œç¡®å®šä¸€ä¸ªäººæ˜¯å¦å¯ä»¥å‚åŠ æ‰€æœ‰ä¼šè®®ã€‚ ç¤ºä¾‹1 1234è¾“å…¥: intervals = [(0,30),(5,10),(15,20)]è¾“å‡º: falseè§£é‡Š:(0,30), (5,10) å’Œ (0,30),(15,20) è¿™ä¸¤å¯¹ä¼šè®®ä¼šå†²çª ç¤ºä¾‹2 1234è¾“å…¥: intervals = [(5,8),(9,15)]è¾“å‡º: trueè§£é‡Š:è¿™ä¸¤ä¸ªæ—¶é—´æ®µä¸ä¼šå†²çª æ€è·¯ï¼šæ›¾ç»åšè¿‡åˆå¹¶åŒºé—´ï¼Œç”¨äº†ä¸¤ç§æ–¹æ³•ï¼Œå½“æ—¶æè¿‡ä¸€å®šè¦ä»¥ä»£ç é‡å°‘/é€Ÿåº¦å¿«ä¸ºå‰æï¼ˆè¿™æ˜¯ç¬”è¯•é¢˜ï¼‰ï¼Œå› æ­¤ä¸€å®šè¦æŒ‰å¼€å§‹æ—¶é—´æ’åºï¼Œæ’åºå®Œå°±ç®€å•å¤šäº†ï¼Œéå†åˆ¤æ–­åä¸€ä¸ªçš„å¼€å§‹æ—¶é—´æ˜¯å¦å¤§äºå‰ä¸€ä¸ªçš„ç»“æŸæ—¶é—´ 12345678910111213141516171819202122232425262728293031323334public class nine_two_zero_ä¼šè®®å®¤ { @Test public void test(){ List&lt;Interval&gt; intervals = new ArrayList&lt;&gt;(); intervals.add(new Interval(5,8)); intervals.add(new Interval(9,20)); boolean res = canAttendMeetings(intervals); System.out.println(res); } public boolean canAttendMeetings(List&lt;Interval&gt; intervals) { if (intervals == null || intervals.size() == 0){ return true; } Collections.sort(intervals, (o1, o2) -&gt; (o1.start - o2.start)); int preEnd = -1; for (Interval interval : intervals) { if (interval.start &lt; preEnd){ return false; } preEnd = interval.end; } return true; } public class Interval { int start, end; Interval(int start, int end) { this.start = start; this.end = end; } }} å…¶ä»–æ’åºçš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/meeting-rooms/"},{"title":"24-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹","text":"åŠ›æ‰£24 https://leetcode-cn.com/problems/swap-nodes-in-pairs/ é“¾è¡¨é¢˜è¿˜æ˜¯åšå¤ªå°‘äº†å‘€ 1234567891011121314151617public ListNode swapPairs(ListNode head) { if (head == null || head.next == null) return head; ListNode post = head, pre = post, temp = null; head = head.next; while (pre != null &amp;&amp; pre.next != null){ //äº¤æ¢ pre = post.next.next; post.next.next = post; //ä¸¤æ®µè¿æ¥ if (temp != null) temp.next = post.next; //ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä½ç½® temp = post; post = pre; } temp.next = pre; return head;} åƒtempè¿™ç§è¦å»¶è¿Ÿä¸€è½®çš„ï¼Œå¯ä»¥æŠŠåˆå§‹å€¼è®¾ä¸ºnullï¼Œç„¶åwhileå¾ªç¯ä¸­if (temp != null)ï¼Œå¯ä»¥è¾¾åˆ°å»¶è¿Ÿä¸€è½®çš„æ•ˆæœ æˆ–è€…æ˜¯whileçš„å‘¨æœŸå®‰æ’å¾—æ›´å¥½ä¸€ç‚¹ï¼Œæ¯”å¦‚ä¸‹é¢å¤§ä½¬å†™çš„ 1234567891011121314public ListNode swapPairs2(ListNode head) { ListNode pre = new ListNode(0); pre.next = head; ListNode temp = pre; while(temp.next != null &amp;&amp; temp.next.next != null) { ListNode start = temp.next; ListNode end = temp.next.next; temp.next = end; start.next = end.next; //è¿™æ­¥å…ˆï¼Œå°±å¾ˆå¦™ï¼Œä¸éœ€è¦æ–¹æ³•1é‚£æ ·ä¿ç•™ä¸Šä¸€ä¸ª end.next = start; temp = start; } return pre.next;} å‘¨æœŸå°±å®‰æ’çš„å¾ˆå¥½ temp-&gt;start-&gt;endï¼Œstartå’Œendæ˜¯è¦äº¤æ¢çš„ï¼Œtempæ°¸è¿œåœ¨ä»–ä»¬åé¢ä¸€ä¸ªï¼Œæ–¹ä¾¿å¯¹startè¿™ä¸ªèŠ‚ç‚¹æ“ä½œ è€Œä¸Šé¢æˆ‘å†™çš„å‘¨æœŸä¸º æ–­è£‚çš„ä¸¤ä¸ªèŠ‚ç‚¹ post-&gt;b-&gt;preï¼Œè¦äº¤æ¢çš„æ˜¯postå’Œbï¼Œè¿™æ—¶å€™å°±è¦ç”¨tempå°†æ–­è£‚çš„è¿ä¸Špostï¼Œæ¯”è¾ƒæ†¨ å…¶ä»–é“¾è¡¨ç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/swap-nodes-in-pairs/"},{"title":"3-æ— é‡å¤çš„æœ€é•¿å­—ä¸²","text":"åŠ›æ‰£3/ç‰›å®¢NC41 https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/ è¿™é“é¢˜ï¼Œè¿™ä¸ªæ€è·¯å¾ˆå¦™ ç”¨ä¸€ä¸ªé•¿åº¦ä¸º26çš„æ•°ç»„è®°å½•å‡ºç°çš„å­—ç¬¦æ¬¡æ•°ï¼Œå¦‚alph[0] = 1å°±ä»£è¡¨aå‡ºç°äº†1æ¬¡ æœ€å¤§ä¸é‡å¤å­ä¸²å¯èƒ½å‡ºç°åœ¨å“ªé‡Œï¼Ÿç”¨|ä»£è¡¨ä¸¤ç«¯ï¼Œoä»£è¡¨ä»»æ„å­—ç¬¦ï¼Œxä»£è¡¨é‡å¤å­—ç¬¦ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š |ooxoo|x ä¸‹ä¸€ä¸ªä¸ä¸º0ï¼ˆalph[r + 1] ï¼= 0ï¼‰ï¼Œä¹Ÿå°±æ˜¯|å†…|æœ‰é‡å¤o|oxoo|x å·¦è¾¹ä¸æ–­æ”¶ç¼©ï¼Œå› ä¸ºå·¦è¾¹ç»Ÿè®¡è¿‡ï¼Œå³è¾¹ä¸å¯èƒ½æ›´é•¿oo|xoo|xoox|oo|x å³è¾¹æ‰å¯ä»¥ç»§ç»­å‰è¿›oox|oox|â€¦ 123456789101112131415public int lengthOfLongestSubstring(String s) { int[] alph = new int[256]; int l = 0, r = 0, result = 0; while (r &lt; s.length()){ if (alph[s.charAt(r)] == 0){ result = Math.max(result, r - l + 1); alph[s.charAt(r)]++; r++; }else { alph[s.charAt(l)]--; l++; } } return result;} å…¶ä»–å­—ç¬¦ä¸²ç±»å‹çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/longest-substring-without-repeating-characters/"},{"title":"31-ä¸‹ä¸€ä¸ªæ’åˆ—","text":"åŠ›æ‰£31 https://leetcode-cn.com/problems/next-permutation/ ä¹Ÿå°±æ˜¯æ¯”å½“å‰æ’åˆ—å¤§çš„æœ€å°æ’åˆ—ï¼Œè¿™é¢˜è¯´å®è¯æœ‰ç‚¹è€ƒæ€ç»´ï¼Œæœ‰ç‚¹åƒæ™ºåŠ›é¢˜ æˆ‘ç›´æ¥ç»™å‡ºç»“æœå†åˆ†æ ä»åå¾€å‰æ‰¾ç¬¬ä¸€ä¸ªnums[i] &lt; nums[i + 1]ï¼Œäº¤æ¢ï¼Œå°†[i+1 : n]æ’åº åˆ†æ å…¶å®æˆ‘è¯´å®Œç»“è®ºä½ ç»†æƒ³ç¡®å®æ˜¯è¿™ä¹ˆå›äº‹ ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å‡ ä¸ªæ•°å­—åšæ’åˆ—çš„æ—¶å€™ï¼Œ æƒ³æ’å‡ºæœ€å¤§çš„æ•°å­—ï¼Œè‚¯å®šæ˜¯å¤§æ•°æ”¾å‰é¢ã€‚æ¢å¥è¯è¯´ï¼Œåªè¦ä¸æ˜¯æ»¡è¶³nums[i] &gt; nums[i + 1]ï¼Œå°±ä¸€å®šä¸æ˜¯æœ€å¤§çš„æ’åˆ— æƒ³æ’å‡ºæœ€å°çš„æ•°å­—ï¼Œè‚¯å®šæ˜¯å°æ•°æ”¾å‰é¢ã€‚ é‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³æ‰¾åˆ°æ¯”æŸä¸ªæ’åˆ—å¤§çš„æ’åˆ—ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥éµä»è¿™ä¸ªæ€è·¯ å…ˆä»åå¾€å‰æ‰¾nums[i] &lt; nums[i + 1]ï¼Œäº¤æ¢é‚£ä¹ˆnums[i] &gt; nums[i + 1]ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ä¸€å®šæ¯”å½“å‰çš„å¤§ å°†å‰©ä¸‹çš„[i+1 : n]å‡åºæ’åº ä¸¤æ­¥å¯äº’æ¢ ä¸¾ä¸ªä¾‹å­ï¼š å¦‚æœè¦æ‰¾æ¯”[1, 5, 6, 4]å¤§çš„æ’åˆ—ï¼Œå…ˆæ‰¾åˆ°5 &lt; 6ï¼Œäº¤æ¢ï¼Œ[1,6,5,4]ï¼Œè¿™ä¸ªæ’åˆ—ä¸€å®šæ¯”åŸæ¥çš„å¤§ï¼Œå°†[5,4]å‡åºæ’åºï¼Œ[1,6,4,5]ï¼Œå°±æ‰¾åˆ°äº†æ¯”è¿™ä¸ªæ’åˆ—å¤§çš„æœ€å°æ’åˆ— æ€è·¯æ¸…æ™°ï¼Œè¿™é¢˜å†™èµ·æ¥å¹¶ä¸éš¾ 12345678910111213141516public void nextPermutation(int[] nums) { for (int i = nums.length - 2; i &gt;= 0; i--) { if (nums[i] &lt; nums[i + 1]){ Arrays.sort(nums, i + 1, nums.length); for (int j = i + 1; j &lt; nums.length; j++) { if (nums[j] &gt; nums[i]){ int temp = nums[i]; nums[i] = nums[j]; nums[j] = temp; return ; } } } } Arrays.sort(nums); //é¢˜ç›®è¦æ±‚å·²ç»æ˜¯æœ€å¤§æ’åˆ—çš„è¯ï¼Œå˜å›æœ€å°} å…¶ä»–é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/next-permutation/"},{"title":"297-äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–","text":"åŠ›æ‰£297 / å‰‘æŒ‡offer37 https://leetcode-cn.com/problems/serialize-and-deserialize-binary-tree/ https://leetcode-cn.com/problems/xu-lie-hua-er-cha-shu-lcof/ Java ä¼˜åŒ–åç¨³å®š12ms 12345678ä½ å¯ä»¥å°†ä»¥ä¸‹äºŒå‰æ ‘ï¼š 1 / \\ 2 3 / / 4 5åºåˆ—åŒ–ä¸º &quot;[1,2,3,4,null,5]&quot; è¿™æ˜¯ä¸€é“å›°éš¾é¢˜ï¼Œé¢˜ç›®æ²¡æœ‰è¦æ±‚é‡‡ç”¨ä»€ä¹ˆé¡ºåºè¿›è¡Œåºåˆ—åŒ–ï¼Œåªè¦èƒ½åºåˆ—åŒ–èƒ½è¿˜åŸå°±è¡Œ ç¤ºä¾‹ç”¨çš„æ˜¯å±‚æ¬¡éå†ï¼Œå…¶å®åŠ›æ‰£ä»¥å‰çš„æ ‘é¢˜ç›®ä¹Ÿéƒ½æ˜¯é‡‡ç”¨è¿™ä¸ªï¼Œæœ¬æ–‡ä¹Ÿé‡‡ç”¨è¿™ä¸ª æˆ‘çš„BFSè§£æ³•serialize()ï¼šå°†äºŒå‰æ ‘å±‚æ¬¡éå†åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸² è¦æ³¨æ„å’Œæ™®é€šçš„bfsæ¨¡æ¿ä¸åŒçš„åœ°æ–¹ï¼š å»æ‰if(cur.left != null)ï¼Œè¦æŠŠnullä¹ŸåŠ è¿›æ¥ï¼Œå¹¶append(â€œnull,â€) ç¬¬ä¸€æ­¥æ”¹é€ åä¼šåœ¨queueçš„æœ«å°¾äº§ç”Ÿå¤šä½™nullå€¼ï¼ˆ1,2,3,4,null,5,nullï¼‰ï¼Œè¦å»é™¤å¤šä½™çš„nullåˆ™éœ€æ”¹å˜whileç»“æŸæ¡ä»¶ï¼šè®°å½•æœ‰æ•ˆèŠ‚ç‚¹æ•°è€Œä¸æ˜¯!queue.isEmpty() 1234567891011121314151617181920212223public String serialize(TreeNode root) { if (root == null) return \"[]\"; StringBuilder sb = new StringBuilder(\"[\"); Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); queue.offer(root); int validNum = 1; //è®°å½•æœ‰æ•ˆèŠ‚ç‚¹æ•° while (validNum != 0){ TreeNode cur = queue.poll(); if (cur != null){ validNum--; sb.append(cur.val); queue.offer(cur.left); //nullä¹ŸåŠ è¿›æ¥ if (cur.left != null) validNum++; //nullä¸è®¡å…¥æœ‰æ•ˆèŠ‚ç‚¹ queue.offer(cur.right); //nullä¹ŸåŠ è¿›æ¥ if (cur.right != null) validNum++; //nullä¸è®¡å…¥æœ‰æ•ˆèŠ‚ç‚¹ }else { sb.append(\"null\"); } if (validNum != 0) sb.append(\",\"); } sb.append(\"]\"); return sb.toString(); } ä¼˜åŒ–äº†ä¸€ä¸‹ï¼Œif (validNum != 0) sb.append(&quot;,&quot;);åŸæ¥ä½¿ç”¨sb.setLengthå†…éƒ¨è¿˜æ˜¯è°ƒç”¨äº†Arrays.fillï¼Œé‡Œé¢æ˜¯å¾ªç¯ï¼ŒåŸæ¥åœ¨12-16msæ³¢åŠ¨ deserialize()ï¼šååºåˆ—åŒ–ï¼Œç”¨å±‚æ¬¡éå†å­—ç¬¦ä¸²åºåˆ—é‡æ„äºŒå‰æ ‘ éå†ä¸€éï¼Œå› ä¸ºå­—ç¬¦ä¸²æ˜¯è®°å½•äº†nullçš„ï¼Œå› æ­¤è‚¯å®šæ˜¯ä¸€å·¦ä¸€å³ï¼Œæ ‘è¿™è¾¹ï¼Œéœ€è¦ç”¨é˜Ÿåˆ—è®°å½•æ ¹èŠ‚ç‚¹æ‰çŸ¥é“æŒ‚åˆ°å“ªä¸€æ£µæ ‘ä¸Š 12345678910111213141516171819202122public TreeNode deserialize(String data) { if (data.equals(\"[]\")) return null; String[] nodes = data.substring(1, data.length() - 1).split(\",\"); TreeNode root = new TreeNode(Integer.parseInt(nodes[0])); Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); queue.offer(root); int i = 0; while (i &lt; nodes.length){ TreeNode cur = queue.poll(); i++; if (i &lt; nodes.length &amp;&amp; !\"null\".equals(nodes[i])){ cur.left = new TreeNode(Integer.parseInt(nodes[i])); queue.offer(cur.left); } i++; if (i &lt; nodes.length &amp;&amp; !\"null\".equals(nodes[i])){ cur.right = new TreeNode(Integer.parseInt(nodes[i])); queue.offer(cur.right); } } return root;} DFSè§£æ³•æˆ‘çœ‹åˆ°æ—¶é—´çŸ­çš„è§£æ³•éƒ½æ˜¯DFSï¼Œæˆ‘ä¹Ÿæ²¡æœ‰åšï¼Œæ‰¾äº†ä¸ªæäº¤è®°å½•2msçš„ï¼Œæœ‰æ—¶é—´å†çœ‹ï¼Œè®°å½•ä¸€ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738public class Codec { // Encodes a tree to a single string. StringBuilder res; int i ; public String serialize(TreeNode root) { res = new StringBuilder(); serializeDFS(root); return res.toString(); } public void serializeDFS(TreeNode root) { if (root==null) { res.append(\"#\"); return ; } res.append((char) (root.val+'0')); serializeDFS(root.left); serializeDFS(root.right); } // Decodes your encoded data to tree. public TreeNode deserialize(String data) { return deserializeDFS(data.toCharArray()); } public TreeNode deserializeDFS(char[] chars) { if (chars[i]=='#') { i++; return null; } TreeNode root = new TreeNode(chars[i++]-'0'); root.left = deserializeDFS(chars); root.right = deserializeDFS(chars); return root; }} å¨±ä¹è§£æ³•æäº¤å®Œåæˆ‘å»æäº¤è®°å½•é‡Œçœ‹äº†çœ‹0mså’Œ1msçš„ç¤ºä¾‹â€¦ ä»¥ä¸‹ä»£ç ä»…ä¾›å¨±ä¹ 0ms ç¬‘æ­»æˆ‘äº†ï¼ŒçœŸæ˜¯äººæ‰ï¼Œç”±äºä¸é™å®šåºåˆ—åŒ–çš„æ–¹å¼ï¼Œå› æ­¤åˆ¤é¢˜ç³»ç»Ÿåªåˆ¤æ–­deserializeå‡½æ•° 123456789101112public class Codec { TreeNode node; public String serialize(TreeNode root) { node = root; return \" \"; } public TreeNode deserialize(String data) { return node; }} 32ms cè¯­è¨€å¼ºè½¬ï¼Œçœ‹èµ·æ¥å¯è¡Œï¼Œä½†å®é™…ä¸Šæ˜¯åœ¨å†…å­˜ä¸­å–åœ°å€ï¼Œè·¨æœºå‘é€å’Œç½‘ç»œä¼ è¾“åœ°å€ä¸åŒä¸å¯è¡Œ 1234567char* serialize(struct TreeNode* root) { return (char *)root;}struct TreeNode* deserialize(char* data) { return (struct TreeNode *)data;} å…¶ä»–æ ‘çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/serialize-and-deserialize-binary-tree/"},{"title":"235/236-äºŒå‰æ ‘æœ€è¿‘å…¬å…±ç¥–å…ˆ","text":"åŠ›æ‰£235 https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-search-tree/ äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼šå·¦å­æ ‘&lt;æ ¹&lt;å³å­æ ‘ã€‚å› æ­¤å½“å‰èŠ‚ç‚¹è¦åšçš„äº‹æƒ…å¾ˆç®€å•ï¼š æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­å½“å‰èŠ‚ç‚¹å’Œè¦æ‰¾çš„ä¸¤ä¸ªèŠ‚ç‚¹p, qæ¯”è¾ƒå¤§å° root.valæ¯”p.valå’Œq.valéƒ½å°ï¼Œå…¬å…±èŠ‚ç‚¹è‚¯å®šä¸æ˜¯ä»–ï¼Œåœ¨å³å­æ ‘ root.valæ¯”p.valå’Œq.valéƒ½å¤§ï¼Œå…¬å…±èŠ‚ç‚¹è‚¯å®šä¸æ˜¯ä»–ï¼Œåœ¨å·¦å­æ ‘ root.valåœ¨p.valå’Œq.valä¹‹é—´ï¼Œå…¬å…±èŠ‚ç‚¹è‚¯å®šæ˜¯ä»– å¯¹äºç‰¹æ®Šæƒ…å†µï¼šå…¬å…±ç¥–å…ˆå°±æ˜¯pæˆ–è€…qçš„æƒ…å†µï¼Œå› ä¸ºæˆ‘ä»¬é€’å½’ä»ä¸Šå¾€ä¸‹éå†ï¼Œå…ˆåˆ°è¾¾çš„é‚£ä¸ªæ˜¯på°±è¿”å›pï¼Œæ˜¯qå°±è¿”å›qï¼Œæ‰€ä»¥è¿™ä¸ªç‰¹æ®Šæƒ…å†µçš„åˆ¤æ–­æ”¾åœ¨å‰åºéå†çš„ä½ç½® 123456789101112public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) { if(root == null) return root; if (p == root || q == root) return root; //è¶Šé è¿‘æ ¹çš„é‚£ä¸ªæ˜¯åœ¨å‰åºéå†ä½ç½® if (p.val &lt; root.val &amp;&amp; q.val &lt; root.val) { return lowestCommonAncestor(root.left, p, q); }else if (p.val &gt; root.val &amp;&amp; q.val &gt; root.val) { return lowestCommonAncestor(root.right, p, q); } return root;} å¦™å°±å¦™åœ¨åˆ¤æ–­çš„é¡ºåºï¼Œå…ˆåˆ¤æ–­å…¨å·¦å’Œå…¨å³ï¼Œè¿™æ ·å°±ä¸éœ€è¦åˆ¤æ–­på’Œqå“ªä¸ªå¤§ï¼Œå¤¹åœ¨ä¸­é—´æ—¶p &lt; root &lt; qè¿˜æ˜¯q &lt; root &lt; p åŠ›æ‰£236 https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/ æ€è€ƒè¿‡ç¨‹ï¼šæ²¡æœ‰äº†äºŒå‰æ’åºæ ‘çš„æ€§è´¨ï¼Œé‚£åªèƒ½å·¦å³éå†äº†ï¼Œå½“å‰èŠ‚ç‚¹è¦åšçš„äº‹ï¼šå¦‚æœå·¦å³å­æ ‘åŒ…å«p,qå°±è¯´æ˜å½“å‰èŠ‚ç‚¹æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚é‚£p,qè‚¯å®šä¸ä¼šè¯´ä¸€ç›´éƒ½åœ¨åŒä¸€å±‚ï¼Œæ‰€ä»¥æ˜¯ç”±ä¸‹å±‚è¿”å›çš„æ‰èƒ½åˆ¤æ–­ï¼Œååºéå†ä½ç½®ç†æ‰€å½“ç„¶ æ€è·¯ï¼šååºéå†ä½ç½®ï¼Œå·¦å³é€’å½’åè¿”å›çš„ç»“æœè®°å½•ä¸‹æ¥ï¼Œè¿”å›çš„ç»“æœåº”è¯¥æ˜¯ï¼šå¦‚æœæ˜¯è¦æ‰¾çš„pæˆ–qï¼Œé‚£ä¹ˆä¸€ç›´æ²¿çˆ¶èŠ‚ç‚¹è¿”å›ï¼Œå¦åˆ™ç›´æ¥è¿”å›nullã€‚é‚£ä¹ˆé€’å½’å›æ¥çš„æ—¶å€™ï¼Œå…¬å…±ç¥–å…ˆå·¦å³ä¸¤è¾¹èŠ‚ç‚¹å°±æ˜¯på’Œqï¼Œå¦åˆ™çš„è¯å·¦å³ä¸¤è¾¹ä¸ºnull çœ‹å›¾æ¯”è¾ƒç›´è§‚ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960ååºéå†ï¼Œæ‰€ä»¥ä»å¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œå‡è®¾æ ‘å¦‚ä¸‹ï¼Œè¦æ‰¾çš„èŠ‚ç‚¹æ˜¯8å’Œ4 3 / \\ / \\ / \\ / \\ 5 1 / \\ / \\ / \\ / \\ 6 2 0 8 / \\ 7 4 3 / \\ / \\ / \\ / \\ 5 1 / \\ / \\ / \\ / \\ 6 2 0 8 / \\ null 4 3 / \\ / \\ / \\ / \\ 5 1 / \\ / \\ / \\ / \\ null 4 null 8 / \\ null 4 3 / \\ / \\ / \\ / \\ 4 8 / \\ / \\ / \\ / \\ null 4 null 8 / \\ null 4 3 è¿”å›åˆ°å½“å‰èŠ‚ç‚¹ä¸º3æ—¶ï¼Œå·¦å³éƒ½ä¸ä¸ºnull(ä¸éœ€è¦åˆ¤æ–­å…·ä½“å·¦å’Œå³)ï¼Œæˆäº† / \\ / \\ / \\ / \\ 4 8 / \\ / \\ / \\ / \\ null 4 null 8 / \\ null 4 ä»£ç å¦‚ä¸‹ 12345678910111213public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) { if(root == null) return root; if (p == root || q == root) return root; //æ‰¾åˆ°äº† TreeNode left = lowestCommonAncestor(root.left,p,q); TreeNode right = lowestCommonAncestor(root.right,p,q); if(left!=null &amp;&amp; right != null) return root; //åªéœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºnull else if (left != null) return left; else if (right != null) return right; return null;} å¦™å°±å¦™åœ¨åªéœ€è¦åˆ¤æ–­æ˜¯å¦ä¸ºnullå³å¯è€Œä¸éœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯pè¿˜æ˜¯qï¼Œä¸ä¸ºnullé‚£ä¹ˆä¸€å®šæ˜¯pæˆ–è€…qï¼Œå·¦å³éƒ½ä¸ä¸ºnullä¸€å®šæ˜¯å…¬å…±ç¥–å…ˆ ç‰¹æ®Šæƒ…å†µï¼šp,qæ°å¥½æ˜¯å…¬å…±ç¥–å…ˆçš„ç‰¹åˆ¤åˆšå¥½ä¹Ÿèƒ½åˆ¤åˆ°","link":"/algorithms/lowest-common-ancestor-of-a-binary-tree/"},{"title":"40-ç»„åˆæ€»å’ŒII","text":"åŠ›æ‰£40 https://leetcode-cn.com/problems/combination-sum-ii/ æ— è„‘å¥—å›æº¯æ¨¡æ¿å°±vansäº† è¿™é¢˜èƒ½è¯„ä¸­ç­‰ï¼Œå¤§æ¦‚ç‡æ˜¯å› ä¸ºå»é‡çš„æ–¹å¼å§ é¢˜ç›®æ¯”è¾ƒç®€å•ï¼Œå¥—æ¨¡æ¿äº”åˆ†é’Ÿå°±ç§’æ€äº†å§ï¼Œæˆ‘å°±åªè´´leetcodeæ¨¡å¼ä»£ç äº† 123456789101112131415161718192021222324252627public List&lt;List&lt;Integer&gt;&gt; combinationSum2(int[] candidates, int target) { backtrace(candidates, target, new ArrayList&lt;&gt;(), 0, 0); return new ArrayList&lt;&gt;(res);}private Set&lt;List&lt;Integer&gt;&gt; res = new HashSet&lt;&gt;();public void backtrace(int[] candidates, int target, List&lt;Integer&gt; path, int index, int sum){ //ç»“æŸæ¡ä»¶ï¼šè·¯å¾„ä¸­çš„å’Œç­‰äºtarget if (sum == target){ ArrayList&lt;Integer&gt; re = new ArrayList&lt;&gt;(path); Collections.sort(re); res.add(re); return ; } for (int i = index; i &lt; candidates.length; i++) { //å‰ªæ if (sum &gt; target) return ; //åšé€‰æ‹© sum += candidates[i]; path.add(candidates[i]); //é€’å½’ backtrace(candidates, target, path, i + 1, sum); //æ’¤é”€ sum -= candidates[i]; path.remove(path.size() - 1); }} ä»¥ä¸Šæ–¹æ³•ï¼Œæ…¢ï¼Œä½†ä¸æ˜¯æ…¢åœ¨setå»é‡ï¼Œåšå®¢æ›¾ç»ä¹Ÿæåˆ°è¿‡ï¼ŒSetå»é‡æ•ˆæœæ¯”List.containså¿«äº†ä¸æ­¢ä¸€ä¸ªæ•°é‡çº§ï¼Œå®é™…ä¸Šï¼ŒHashSetå»é‡æ˜¯O(1)çš„ï¼Œå› æ­¤æ˜¯æ…¢åœ¨ç»“æŸæ¡ä»¶çš„Collections.sort(re); å—¯ï¼Œä¸€å¼€å§‹å°±å…ˆå¯¹candidatesæ’åºï¼Œé‚£ä¹ˆå¦‚æœç¬¬äºŒæ¬¡åŠ å…¥çš„å…ƒç´ å’Œå‰ä¸€æ¬¡ä¸€æ ·ï¼Œé‚£ä¹ˆå°±ç›´æ¥continue 12345678910111213141516171819202122232425262728public List&lt;List&lt;Integer&gt;&gt; combinationSum2(int[] candidates, int target) { Arrays.sort(candidates); //ä¸€æ¬¡æ€§æ’åº backtrace2(candidates, target, new ArrayList&lt;&gt;(), 0, 0); return new ArrayList&lt;&gt;(res);}private Set&lt;List&lt;Integer&gt;&gt; res = new HashSet&lt;&gt;();public void backtrace2(int[] candidates, int target, List&lt;Integer&gt; path, int index, int sum){ //ç»“æŸæ¡ä»¶ï¼šè·¯å¾„ä¸­çš„å’Œç­‰äºtarget if (sum == target){ res.add(new ArrayList&lt;&gt;(path)); return ; } for (int i = index; i &lt; candidates.length; i++) { //å‰ªæ if (sum &gt; target) return ; //åšé€‰æ‹© if(i &gt; index &amp;&amp; candidates[i] == candidates[i-1]) continue; //å»é‡ï¼Œç¬¬äºŒæ¬¡åŠ å…¥å’Œå‰ä¸€æ¬¡ä¸€æ ·ï¼Œåˆ™continue sum += candidates[i]; path.add(candidates[i]); //é€’å½’ backtrace2(candidates, target, path, i + 1, sum); //æ’¤é”€ sum -= candidates[i]; path.remove(path.size() - 1); }} å…¶ä»–å›æº¯çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/combination-sum-ii/"},{"title":"357-è®¡ç®—å„ä¸ªä½æ•°ä¸åŒçš„æ•°å­—ä¸ªæ•°","text":"åŠ›æ‰£357 https://leetcode-cn.com/problems/count-numbers-with-unique-digits/ è™½ç„¶æ ‡ç­¾æ—¶å›æº¯ï¼Œä½†æ˜¯ä¸è¦å›æº¯ï¼Œè¿™ä¸€çœ‹å°±æ˜¯æ•°å­¦é¢˜ æ€è·¯ï¼šå¯¹äºnä½çš„æ•°ï¼Œé¦–ä½ï¼ˆç¬¬ä¸€ä½ï¼‰ä¸èƒ½ä¸º0ï¼Œæ‰€ä»¥æœ‰9ç§é€‰æ‹©ï¼ˆ1~9ï¼‰ï¼Œç¬¬äºŒä½åˆ™æœ‰9ç§é€‰æ‹©ï¼Œç¬¬ä¸‰ä½8ç§é€‰æ‹©ï¼Œç¬¬å››ä½7ç§é€‰æ‹©â€¦ ä¸è€ƒè™‘é¦–ä½ï¼Œä»ç¬¬äºŒä½å¼€å§‹ï¼Œé€‰æ‹©æ•°æ˜¯é€’å‡çš„ã€‚æœ€åå†ä¹˜ä¸Šé¦–ä½ä¸€å®šæ˜¯9ç§ã€‚ å½“é¦–ä½ä¸º0æ—¶ï¼Œå®é™…ä¸Šé€€åŒ–ä¸ºn-1ä½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå˜æˆäº†åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œè®°å½•dp[n-1]çš„ç»“æœ ä¸¾ä¸ªä¾‹å­ï¼š å·²çŸ¥n=1æ—¶æœ‰0~9ï¼Œ10ç§æƒ…å†µ n=2ï¼šåä½ä¸ä¸º0(å‡è®¾å–äº†9)ï¼Œä¸ªä½æœ‰9ç§æƒ…å†µ(0~8)ï¼Œä¸ªä½ä¸º0å®é™…ä¸Šå°±æ˜¯n=1çš„10ç§æƒ…å†µï¼Œres = 9 * 9 + 10 = 91 n=3ï¼šç™¾ä½ä¸ä¸º0æ—¶æœ‰9ç§ï¼Œåä½æœ‰9ç§ï¼Œä¸ªä½æœ‰8ç§ï¼Œä¸ªä½ä¸º0æ—¶å®é™…ä¸Šå°±æ˜¯n=2ï¼Œres = 9 * (9 * 8) + 91 = 739 n=1ï¼šres = 9 * (9 * 8 * 7) + 739 ä¹Ÿå°±æ˜¯dpäº†ï¼Œè¿™ç§é¢˜å°±å±äºä¸€å¼€å§‹çœ‹ä¸å‡ºdpé‚£ç§ ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314public int countNumbersWithUniqueDigits(int n) { if(n == 0) return 1; int[] dp = new int[n + 1]; dp[1] = 10; for (int i = 2; i &lt;= n; i++) { int time = i, num = 9, product = 1; while (--time != 0){ product *= num; num--; } dp[i] = 9 * product + dp[i - 1]; //æœ€åå†ä¹˜ä¸Šé¦–ä½çš„9ç§ } return dp[n];} ç›´æ¥åŒç™¾ å…¶ä»–åŠ¨æ€è§„åˆ’çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/count-numbers-with-unique-digits/"},{"title":"404-å·¦å¶å­ä¹‹å’Œ","text":"åŠ›æ‰£404 https://leetcode-cn.com/problems/sum-of-left-leaves/ å½“å‰èŠ‚ç‚¹ï¼šå¦‚æœæ˜¯å·¦å¶å­ï¼ŒåŠ å…¥resï¼Ÿï¼Ÿï¼Ÿå½“ç„¶é”™ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å·¦å¶å­è¿˜æ˜¯å³å¶å­ï¼ˆroot.left == null &amp;&amp; root.right == nullåªèƒ½åˆ¤æ–­æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹ï¼‰ å› æ­¤â€œå½“å‰èŠ‚ç‚¹â€åº”è¯¥æ˜¯ä»ä¸Šä¸€å±‚çš„çˆ¶èŠ‚ç‚¹å¼€å§‹if (root.left != null &amp;&amp; root.left.left == null &amp;&amp; root.left.right == null)ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¾å¾—ç†æ‰€å½“ç„¶äº†ï¼Ÿ 123456789101112private int res = 0;public int sumOfLeftLeaves(TreeNode root) { if (root == null) return 0; //è¿™ä¸ª0æ˜¯éšæ„çš„,åæ­£ç»“æœè·Ÿè¿™ä¸ªä¹Ÿæ²¡å…³ç³» if (root.left != null &amp;&amp; root.left.left == null &amp;&amp; root.left.right == null){ res += root.left.val; } sumOfLeftLeaves(root.left); sumOfLeftLeaves(root.right); return res;} å…¶ä»–æ ‘çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/sum-of-left-leaves/"},{"title":"424-æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦","text":"åŠ›æ‰£424 https://leetcode-cn.com/problems/longest-repeating-character-replacement/ æ»‘åŠ¨çª—å£é¢˜ç›®ï¼Œéœ€è¦ç”¨æ•°ç»„æˆ–è€…mapç»Ÿè®¡æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•° 1234567891011121314151617181920public int characterReplacement2(String s, int k) { int l = 0, r = 0, res = 0, count = 0; //countæ˜¯çª—å£é‡Œæœ€å¤šçš„å­—æ¯çš„ä¸ªæ•° int[] alph = new int[26]; char[] ch = s.toCharArray(); while(r &lt; ch.length){ alph[ch[r] - 'A']++; count = Math.max(count, alph[ch[r] - 'A']); //ç»Ÿè®¡çª—å£é‡Œæœ€å¤šçš„å­—æ¯çš„ä¸ªæ•° r++; // åˆ¤æ–­kæ˜¯å¦å¤Ÿç”¨ï¼Œå¦‚æœr - l &gt; count + kï¼Œé‚£å°±è¯´æ˜çª—å£é‡Œçš„str[r]+å¯ä»¥æ›¿æ¢çš„kéƒ½ä¸å¤Ÿå æ»¡çª—å£ï¼Œçª—å£é‡Œå¿…ç„¶æœ‰å…¶ä»–çš„å­—æ¯ if(r - l &gt; count + k){ alph[ch[l] - 'A']--; l++; } res = Math.max(res, r - l); } return res;} pythonå®ç° 12345678910111213141516171819def characterReplacement(self, s: str, k: int) -&gt; int: l, r, res, count = 0, 0, 0, 0 # countæ˜¯çª—å£é‡Œæœ€å¤šçš„å­—æ¯çš„ä¸ªæ•° alph = {} while r &lt; len(s): if s[r] in alph: alph[s[r]] += 1 else: alph[s[r]] = 1 count = max(count, alph[s[r]]) r += 1 # åˆ¤æ–­kæ˜¯å¦å¤Ÿç”¨ï¼Œå¦‚æœr - l &gt; count + kï¼Œé‚£å°±è¯´æ˜çª—å£é‡Œçš„str[r]+å¯ä»¥æ›¿æ¢çš„kéƒ½ä¸å¤Ÿå æ»¡çª—å£ï¼Œçª—å£é‡Œå¿…ç„¶æœ‰å…¶ä»–çš„å­—æ¯ if r - l &gt; count + k: alph[s[l]] -= 1 l += 1 res = max(count, r - l) return res å…¶ä»–æ»‘åŠ¨çª—å£ç±»å‹çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ å…¶ä»–å­—ç¬¦ä¸²ç±»å‹çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/longest-repeating-character-replacement/"},{"title":"43-å­—ç¬¦ä¸²ç›¸ä¹˜","text":"åŠ›æ‰£43 å­—ç¬¦ä¸²ç›¸ä¹˜ https://leetcode-cn.com/problems/multiply-strings/ æ€è·¯ï¼šæ­¤é¢˜å’Œå¤§æ•°ç›¸åŠ æœ‰äº›ç±»ä¼¼ï¼Œè¿™ç§é€šè¿‡å­—ç¬¦ä¸²æ¨¡æ‹Ÿæ‰‹ç®—åŠ æ³•ä¹˜æ³•çš„ï¼Œä»ç„¶é‡‡ç”¨è¿™ç§ä»é«˜ä½åˆ°ä½ä½ï¼Œè¿›ä½å’ŒåŸºæ•°åˆ†å¼€çš„æ–¹å¼ï¼Œæ›´åŠ ç®€æ´æ–¹ä¾¿ è¿‡ç¨‹å¦‚ä¸‹ ä»£ç å¦‚ä¸‹ è¦æ³¨æ„åŸºæ•°æ•°ç»„å’Œè¿›ä½æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚ä¸Šå›¾æœ€å·¦è¾¹çš„8ï¼Œä¹Ÿå°±æ˜¯æœ‰å¯èƒ½é¦–ä½è¿›ä½ï¼Œå› æ­¤é•¿åº¦æ˜¯len(num1 + num2)è€Œä¸æ˜¯len(num1 + num2 - 1) 1234567891011121314151617181920212223242526272829public String multiply(String num1, String num2) { int[] jiShu = new int[num1.length() + num2.length()]; //åŸºæ•°æ•°ç»„ int[] jinWei = new int[num1.length() + num2.length()]; //è¿›ä½æ•°ç»„ for (int i = 0; i &lt; num1.length(); i++) { for (int j = 0; j &lt; num2.length(); j++) { int bit1 = num1.charAt(i) - '0'; int bit2 = num2.charAt(j) - '0'; int add = bit1 * bit2 + jiShu[i + j + 1]; jiShu[i + j + 1] = add % 10; //å…³é”®æ­¥éª¤ jinWei[i + j] = add / 10 + jinWei[i + j]; //å…³é”®æ­¥éª¤ } } //å°†åŸºæ•°å’Œè¿›ä½ä»ä½ä½å‘é«˜ä½ç›¸åŠ å¾—å‡ºæœ€ç»ˆç»“æœ int[] res = new int[jinWei.length]; for (int i = jinWei.length - 1; i &gt;= 0; i--) { int num = jiShu[i] + jinWei[i] + res[i]; res[i] = num % 10; if (i - 1 &lt; 0) break; res[i - 1] += num / 10; } //è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œæ³¨æ„å¼€å¤´ä¸º0å’Œå…¨0æƒ…å†µ StringBuilder sb = new StringBuilder(); boolean flag = false; //é‡åˆ°å¼€å¤´ä¸ä¸º0æ—¶æ‰èƒ½æ’å…¥ for (int i = 0; i &lt; res.length; i++) { if (res[i] != 0) flag = true; if (flag) sb.append(res[i]); } return \"\".equals(sb.toString()) ? \"0\" : sb.toString();} å…¶ä»–å­—ç¬¦ä¸²ç±»å‹çš„é¢˜ç›®ç‚¹è¿™é‡Œ","link":"/algorithms/multiply-strings/"},{"title":"406-æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—","text":"åŠ›æ‰£406 https://leetcode-cn.com/problems/queue-reconstruction-by-height/ æ€è·¯å¾ˆé‡è¦ å…ˆæ’åºï¼šèº«é«˜ä»ä½åˆ°é«˜æ’åºï¼Œå‰é¢äººæ•°ä»å¤§åˆ°å°æ’åº æ’å®Œå[[4,4],[5,2],[5,0],[6,1],[7,1],[7,0]] ä»åå¾€å‰éå† [7,1]è¡¨ç¤ºå¾€åæŒªä¸€ä¸ªï¼š[[4,4],[5,2],[5,0],[6,1],[7,0],[7,1]] [6,1]è¡¨ç¤ºå¾€åæŒªä¸€ä¸ªï¼š[[4,4],[5,2],[5,0],[7,0],[6,1],[7,1]] ååŒâ€¦ ä»£ç ä¸éš¾ï¼Œæ€ç»´é¢˜ 1234567891011121314151617public int[][] reconstructQueue(int[][] people) { //èº«é«˜ä»ä½åˆ°é«˜æ’åºï¼Œå‰é¢äººæ•°ä»å¤§åˆ°å°æ’åº Arrays.sort(people, (o1, o2) -&gt; { if (o1[0] != o2[0]) return o1[0] - o2[0]; else return o2[1] - o1[1]; }); //ä»åå¾€å‰è°ƒæ•´é¡ºåºï¼Œpeople[i, j]è¡¨ç¤ºpeople[i]å¾€åè°ƒæ•´jä¸ª for (int i = people.length - 2; i &gt;= 0; i--) { int time = people[i][1]; int[] temp = people[i]; for (int j = i; j &lt; i + time; j++) { people[j] = people[j + 1]; } people[i + time] = temp; } return people;} å…¶ä»–é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/queue-reconstruction-by-height/"},{"title":"3Dæ•°å­¦åŸºç¡€å›¾å½¢ä¸æ¸¸æˆç ”å‘ç¬”è®°","text":"æœ¬æ–‡æ‰€æœ‰å…¬å¼éƒ½æ˜¯åœ¨å³æ‰‹ç³»ä¸‹çš„ï¼Œä¹Ÿå°±æ˜¯vâ€™ = M * vã€‚å¦‚æœæ¢æˆå·¦æ‰‹ç³»ï¼Œé‚£ä¹ˆæ ¹æ®çŸ©é˜µè½¬ç½®å…¬å¼vâ€™(T) = v(T) * M(T)å¯å¾—ï¼Œéœ€è¦å°†çŸ©é˜µMè¿›è¡Œä¸€æ¬¡è½¬ç½®å¹¶å°†å·¦ä¹˜æ”¹ä¸ºå³ä¹˜ï¼Œæ­£è§’åº¦ä¹Ÿéœ€è¦ä»é€†æ—¶é’ˆæ”¹ä¸ºé¡ºæ—¶é’ˆ 1. å‘é‡1.1 å‘é‡ç‚¹ä¹˜ä¹Ÿå«ç‚¹ç§¯ï¼Œæ•°é‡ç§¯ï¼Œç»“æœæ˜¯ä¸€ä¸ªæ•°é‡ å‡ ä½•å½¢å¼ï¼ša Â· b = ||a|| * ||b|| * cosÎ¸ ä»£æ•°å½¢å¼ï¼š å›¾å½¢å­¦æ„ä¹‰ï¼š å¯ä»¥è®¡ç®—ä¸€ä¸ªå‘é‡åœ¨å¦ä¸€ä¸ªå‘é‡ä¸Šçš„æŠ•å½± é€šè¿‡è®¡ç®—å¤¹è§’Î¸å¯ä»¥åˆ¤æ–­ä¸¤ä¸ªå‘é‡æ˜¯å¦åŒå‘ï¼Œå¦‚æœç‚¹ä¹˜ç»“æœï¼œ0ï¼Œæˆ–è€…Î¸ï¼90Â°ï¼Œæˆ–è€…cosÎ¸ï¼œ0ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯´ä¸¤ä¸ªå‘é‡åå‘ åœ¨èšå…‰ç¯çš„æ•ˆæœè®¡ç®—ä¸­ï¼Œå¯ä»¥æ ¹æ®ç‚¹ç§¯æ¥å¾—åˆ°å…‰ç…§æ•ˆæœï¼Œå¦‚æœç‚¹ç§¯è¶Šå¤§ï¼Œè¯´æ˜å¤¹è§’è¶Šå°ï¼Œåˆ™ç‰©ä½“ç¦»å…‰ç…§çš„è½´çº¿è¶Šè¿‘ï¼Œå…‰ç…§è¶Šå¼º 1.2 å‘é‡å‰ä¹˜ç»“æœæ˜¯ä¸€ä¸ªå‘é‡ å‡ ä½•å½¢å¼ï¼š||a * b|| = ||a|| * ||b|| * sinÎ¸ï¼Œå…¶æ¨¡é•¿ä¸ºå¦‚ä¸‹å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ ä»£æ•°å½¢å¼ï¼š å›¾å½¢å­¦æ„ä¹‰ï¼š å¯¹äºä¸¤ä¸ªå‘é‡ï¼Œå‰ä¹˜çš„ç»“æœå®é™…ä¸Šæ˜¯ä¸¤ä¸ªå‘é‡ç»„æˆçš„å¹³é¢çš„æ³•çº¿æ–¹å‘ï¼Œæ–¹å‘æ»¡è¶³å³æ‰‹å®šåˆ™ å¯ä»¥åˆ¤æ–­å·¦å³ï¼Œå¯¹äºa, b, cä¸‰ä¸ªç‚¹ï¼Œåˆ¤æ–­cç‚¹æ˜¯å¦åœ¨çº¿æ®µabçš„å·¦è¾¹ï¼Œåªéœ€è¦ä½œå‘é‡ab, ac, åšå‰ç§¯ï¼Œå³æ‰‹å®šåˆ™ç»“æœä¸ºæ­£ï¼ˆæŒ‡å‘å±å¹•å¤–é¢ï¼‰åˆ™åœ¨å·¦è¾¹ è¿›ä¸€æ­¥å¯ä»¥ç”¨æ¥åˆ¤æ–­å†…å¤–/å‰åï¼Œå¯¹äºä¸‰è§’å½¢abcä¸‰ä¸ªé¡¶ç‚¹å¤–åŠ ä¸‰è§’å½¢å†…éƒ¨ä¸€ä¸ªdç‚¹ï¼Œå¦‚æœdç‚¹åœ¨ä¸‰ä¸ªé¡ºæ—¶é’ˆå‘é‡ab, bc, caçš„å·¦è¾¹ï¼Œåˆ™dåœ¨ä¸‰è§’å½¢abcå†…éƒ¨ 2. çŸ©é˜µçŸ©é˜µç›¸ä¹˜ä¸æ»¡è¶³äº¤æ¢å¾‹ å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬æ›´åŠ ä¹ æƒ¯äºå°†å‘é‡çœ‹æˆæ˜¯n * 1çš„çŸ©é˜µï¼Œè€Œä¸”ç»å¸¸ä¼šå°†å‘é‡å’ŒçŸ©é˜µæ··åˆè¿ç®—ï¼ˆæ¯”å¦‚å°†çŸ©é˜µå’Œå‘é‡åšä¸€äº›ä¹˜æ³•ç­‰è¿ç®—ï¼‰ 2.1 å‘é‡ç‚¹ä¹˜å’Œå‰ä¹˜çš„çŸ©é˜µå½¢å¼å¦‚ä¸Šæ‰€è¯´ï¼Œä¸ç®¡æ˜¯ä¸ºäº†æ–¹ä¾¿æ··åˆè¿ç®—ä¹Ÿå¥½æˆ–è€…æ˜¯ä¸ºäº†ä»£ç å®ç°æ›´åŠ ç»Ÿä¸€ä¹Ÿå¥½ï¼Œå‘é‡ç‚¹ä¹˜å’Œå‰ä¹˜ä¹Ÿå¯ä»¥ç»Ÿä¸€å†™æˆâ€œçŸ©é˜µä¹˜æ³•â€å½¢å¼ å‰ä¹˜çš„aå˜æˆçš„è¿™ä¸ªçŸ©é˜µç§°ä¸ºaçš„å¯¹å¶çŸ©é˜µ 3. çº¿æ€§å˜æ¢ä½¿ç”¨ä¸€äº›çŸ©é˜µå·¦ä¹˜åˆ—å‘é‡åœ¨å›¾å½¢å­¦ä¸Šé€šå¸¸æœ‰ä¸€äº›ç‰¹æ®Šçš„æ„ä¹‰ï¼Œæ¯”å¦‚æ—‹è½¬ï¼Œå¹³ç§»ç­‰å˜æ¢ï¼Œéœ€è¦çŸ¥é“ä¸€äº›ç‰¹æ®Šçš„å˜æ¢ï¼ˆä»¥2Dåæ ‡ä¸ºä¾‹ï¼‰ 3.1 ç¼©æ”¾å˜æ¢ 3.2 é•œåƒå˜æ¢ 3.3 åˆ‡å˜å˜æ¢ 3.4 æ—‹è½¬å˜æ¢ 3.5 å¹³ç§»å˜æ¢å¹³ç§»å˜æ¢ç¨å¾®æœ‰ç‚¹ä¸åŒ 3.6 ä½¿ç”¨é½æ¬¡åæ ‡å·§å¦™ç»Ÿä¸€çº¿æ€§å˜æ¢ä¸éš¾å‘ç°ï¼Œå‰é¢å‡ ä¸ªå˜æ¢éƒ½å¯ä»¥å†™æˆxâ€™ = Mxçš„å½¢å¼ï¼Œä½†æ˜¯å¹³ç§»å˜æ¢åªèƒ½å†™æˆxâ€™ = x + bçš„å½¢å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®Œæˆä¸Šè¿°å˜æ¢å¯ä»¥ç»Ÿä¸€å†™æˆxâ€™ = Mx + bçš„å½¢å¼ï¼Œå¦‚ä¸‹ï¼š åé¢è¿™ä¸ªé¡¹ä¸å¤Ÿä¼˜é›…ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å¯¹å…¶æ‰©å±•ä¸€ä¸ªç»´åº¦ï¼Œå°±å¯ä»¥ç»Ÿä¸€å†™æˆxâ€™ = Mxçš„å½¢å¼äº†ã€‚ ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯è¯´å¯¹äºä¸€ä¸ªäºŒç»´åæ ‡(x, y)ï¼Œå†™æˆåˆ—å‘é‡çš„æ—¶å€™æ·»åŠ ä¸€ä¸ªwç»´åº¦ï¼Œ(x, y, 1)Tï¼Œï¼ˆTæ˜¯è½¬ç½®æˆåˆ—å‘é‡çš„æ„æ€ï¼Œå¦åˆ™ç¼–è¾‘å™¨ä¸å¥½å†™åˆ—å‘é‡ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥å‘ç°å¹³ç§»å˜æ¢ä¹Ÿå¯ä»¥å†™æˆå¦‚ä¸‹xâ€™ = Mxçš„å½¢å¼äº† æ˜¯ä¸æ˜¯å¾ˆå·§å¦™ï¼Ÿè¿™ç§å†™æ³•ç§°ä¸ºé½æ¬¡åæ ‡ï¼Œåœ¨é½æ¬¡åæ ‡è¡¨ç¤ºæ³•ä¸‹ï¼Œwç»´åº¦ä¸º1åˆ™è¡¨ç¤ºå‘é‡ï¼Œwä¸º0åˆ™è¡¨ç¤ºä¸€ä¸ªç‚¹ æœ‰äº†é½æ¬¡åæ ‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠä»¥ä¸Šæ‰€æœ‰3.1-3.5çš„å˜æ¢ç»Ÿä¸€å†™æˆxâ€™ = Mxçš„å½¢å¼äº† éå¸¸ä¼˜é›…ï¼ˆä¸»è¦æ˜¯æ–¹ä¾¿ä»£ç å®ç°ï¼‰ è¿™é‡Œabcdæ˜¯ä¸€èˆ¬åŒ–å†™æ³•ï¼Œå‰é¢å‡ ä¸ªç‰¹æ®Šçš„å˜æ¢è¿˜æ˜¯è·Ÿå‰é¢æ˜¯ä¸€æ ·çš„ï¼Œè‡ªå·±æ¨ä¸€ä¸‹å°±èƒ½å†™å‡ºå¦‚ä¸‹å‡ ä¸ªå¸¸ç”¨çš„äº† 3.7 *æ¨å¹¿åˆ°3ç»´åæ ‡ä»¥ä¸Šï¼Œéƒ½æ˜¯ä»¥2Dåæ ‡ä¸ºä¾‹ï¼Œ3ç»´ä¸‹å¤§è‡´ç›¸åŒï¼Œå…¶æ¬¡åæ ‡ä¸º(x, y, z, w)ï¼Œçº¿æ€§å˜åŒ–ä¸€èˆ¬åŒ–å…¬å¼ä¸ºï¼š ç‰¹æ®Šçš„å¦‚ä¸‹ï¼š Shearï¼š 1234567891011Hxy(s, t) = [1 0 s 0 1 t 0 0 1] Hxz(s, t) = [1 s 0 0 1 0 0 t 1] Hyz(s, t) = [1 0 0 s 1 0 t 0 1] Hxy(s, t)è¡¨ç¤ºç”¨zåˆ‡å˜xã€yï¼Œæœ€ç»ˆx += szï¼Œy += tzï¼Œzä¸å˜ 3.8 ç»•ä»»æ„è½´çš„æ—‹è½¬ç»•å•ä½å‘é‡n(nx, ny, nz)é€†æ—¶é’ˆæ—‹è½¬Î¸ æ¨å¯¼è¿‡ç¨‹å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç«  https://zhuanlan.zhihu.com/p/56587491 å†æ¬¡æé†’ï¼šæœ¬æ–‡æ‰€æœ‰å…¬å¼éƒ½æ˜¯åœ¨å³æ‰‹ç³»ä¸‹çš„ï¼Œå¦‚æœæ¢æˆå·¦æ‰‹ç³»ï¼Œé‚£ä¹ˆéœ€è¦å°†çŸ©é˜µè¿›è¡Œä¸€æ¬¡è½¬ç½®å¹¶å°†å·¦ä¹˜æ”¹ä¸ºå³ä¹˜ï¼Œå¹¶æ³¨æ„æ­£è§’åº¦éœ€è¦æ”¹ä¸ºé¡ºæ—¶é’ˆ è¿™ä¸ªå…¬å¼æ¯”è¾ƒå¤æ‚ï¼Œå¯¹äºè®¡ç®—æœºè¿ç®—ä¹Ÿæ¯”è¾ƒæ…¢ï¼Œå¯ä»¥é€šè¿‡æ¬§æ‹‰è§’å’Œå››å…ƒæ•°è¿›è¡Œç»•ä»»æ„è½´çš„æ—‹è½¬æ¯”è¾ƒç®€ä¾¿ï¼Œé™„å½•ä¸­æœ‰ä»‹ç» 3.9 ç»•ä»»æ„è½´çš„é•œåƒå¹³é¢çš„å•ä½æ³•å‘é‡n(nx, ny, nz) 4. è§†å›¾å˜æ¢(View)ç¬¬ä¸‰ç« è¯´çš„çº¿æ€§å˜æ¢æ˜¯å¯¹ç‰©ä½“è¿›è¡Œå˜æ¢ï¼Œä¹Ÿå°±æ˜¯modelï¼ŒåŠ ä¸Šç¬¬å››ç¬¬äº”å¼ ä»‹ç»çš„viewå’Œprojectionï¼Œåˆç§°mvpå˜æ¢ ç”¨ç…§ç›¸çš„ä¾‹å­æ¥æ¯”å–»å°±æ˜¯ï¼š æ‰¾ä¸€ä¸ªå¥½çš„åœ°ç‚¹å¹¶è°ƒæ•´å¥½è¢«æ‹æ‘„è€…çš„å ä½(model) è°ƒæ•´ç›¸æœºè§’åº¦(view) èŒ„å­(projection) æ‰€ä»¥è§†å›¾å˜æ¢å°±æ˜¯ï¼šè°ƒæ•´ç›¸æœºä½ç½®ã€ç¡®å®šæ‹æ‘„æ–¹å‘ã€æ‘†æ­£ç›¸æœºæ°´å¹³è§’åº¦è¿™ä¸ªè¿‡ç¨‹ï¼ˆå½“ç„¶è¦çµæ´»ç‚¹ï¼Œæ‰€è°“ç›¸æœºå°±æ˜¯è§‚æµ‹è€…çš„çœ¼ç›ï¼Œä¸ä¸€å®šéå¾—æ˜¯ç›¸æœºï¼‰ æ€ä¹ˆæ‘†æ­£ç›¸æœºå‘¢ï¼Ÿåœ¨æ•°å­¦ä¸Šæ€ä¹ˆè¡¨ç¤ºå‘¢ï¼Ÿé€šå¸¸æˆ‘ä»¬å°†ç›¸æœºä½ç½®è®¾ä¸ºåŸç‚¹æ„å»ºåæ ‡ç³»ï¼Œç›¸æœºæ‘†æ­£ä¸ºå‚ç›´å‘ä¸Šçš„yæ–¹å‘ï¼Œçœ‹å‘-Zæ–¹å‘ï¼Œé‚£ä¹ˆè‡ªç„¶xçš„æ–¹å‘è™½ç„¶æ²¡æœ‰æ„ä¹‰ï¼Œä½†æ˜¯å°±å¯ä»¥ä½¿ç”¨(g * t)å‰ä¹˜å¾—å‡º 5. æŠ•å½±å˜æ¢(Projection) 5.1 æ­£äº¤æŠ•å½±(Orthographic)æ­£äº¤æŠ•å½±æ¯”è¾ƒç®€å•ï¼ŒæŠ•å½±åˆ°æŸä¸ªé¢ï¼Œå°±æŠŠæ³•çº¿æ–¹å‘çš„â€œæ·±åº¦â€å»æ‰ï¼Œæ¯”å¦‚æŠ•å½±åˆ°xyå¹³é¢ï¼Œå°±æŠŠzå€¼ç½®ä¸º0å³å¯ å½“ç„¶ï¼Œè¿™ä¸ªçŸ©é˜µæ˜¯é»˜è®¤äº†ç‰©ä½“ç»è¿‡åŸç‚¹çš„ï¼Œå¦‚æœçœ‹äº†games101ï¼Œå‘ç°æ­£äº¤æŠ•å½±å¹¶æ²¡æœ‰è¿™ä¹ˆåšï¼Œè€Œåªæ˜¯å°†ç©ºé—´ä¸­çš„ç‰©ä½“ç§»åŠ¨åˆ°ä»¥åŸç‚¹ä¸ºä¸­å¿ƒï¼Œå¹¶ç¼©æ”¾åˆ° [-1, 1]Â³ä¸­ï¼Œå¹¶ä¸”ä¿ç•™äº†zã€‚é‚£è¿™å®Œå…¨ä¸ä¸€æ ·å‘€â€¦ é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬è¯´æŠ•å½±ï¼ŒæŠ•å½±å¹³é¢æ˜¯å±å¹•ï¼ˆæˆ–è€…è¯´æ˜¯C++è¿è¡Œçš„é‚£ä¸ªçª—å£ï¼‰ï¼Œå¦‚æœç‰©ä½“åœ¨è§†é‡å¤–æ²¡æœ‰è¢«çœ‹åˆ°ï¼Œé‚£ä¹ˆæƒ³æŠ•å½±å°±å¿…é¡»å…ˆè¢«ç›¸æœºçœ‹åˆ°ï¼Œæˆ‘ä»¬ä¸ç§»åŠ¨ç›¸æœºï¼Œè€Œæ˜¯ç§»åŠ¨ç‰©ä½“ï¼Œäºæ˜¯æ‰æœ‰äº†games101ä¸­çš„ç§»åŠ¨å¹¶ç¼©æ”¾åˆ° [-1, 1]Â³ï¼Œè€Œä¿ç•™zæ˜¯å› ä¸ºgames101ä¸ä»…ä»…æ˜¯åšæŠ•å½±ï¼Œè¿˜è¦åé¢çš„æ·±åº¦é®æŒ¡ç»˜åˆ¶å’Œå…‰æ …åŒ–ï¼Œæ‰€ä»¥è¿™é‡Œå…ˆä¿ç•™äº†æ·±åº¦å€¼ã€‚å› æ­¤games101ä¸­çš„æŠ•å½±å¹¶æ²¡æœ‰çœŸæ­£çš„æŠ•å½±ï¼Œè€Œæ˜¯å°†ç‰©ä½“è§„æ•´åˆ° [-1, 1]Â³è¿™ä¸ªç©ºé—´ä¸­ï¼Œè®©ç›¸æœºèƒ½å¤Ÿâ€œçœ‹åˆ°â€ ä¸Šé¢è¿™ç§æƒ…å†µæ‰æ˜¯ä¸€èˆ¬æƒ…å†µï¼Œå› ä¸ºé€šå¸¸æˆ‘ä»¬çš„åœºæ™¯è¢«ç§°ä¸ºä¸–ç•Œåæ ‡ï¼ˆè§‚æµ‹è€…åœ¨åŸç‚¹ï¼Œå¯èƒ½å‡ºç°æ­£è´Ÿåæ ‡ï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬æŠ•å½±å®Œæˆååº”è¯¥è¾“å‡ºåœ¨å±å¹•ï¼ˆå·¦ä¸Šè§’ä¸ºåŸç‚¹ï¼Œåªæœ‰æ­£çš„äºŒç»´åæ ‡ï¼‰ï¼Œæ‰€ä»¥games101ä¸­å®é™…ä¸Šåšçš„æ˜¯ä¸–ç•Œåæ ‡-&gt;å±å¹•åæ ‡çš„è½¬æ¢ 5.2 é€è§†æŠ•å½±(Perspective)ä¸Šé¢è¯´è¿‡äº†ä»€ä¹ˆæ˜¯é€è§†æŠ•å½±ï¼Œä¸€èˆ¬åœ¨é€è§†æŠ•å½±æ—¶ï¼Œæˆ‘ä»¬éœ€è¦width, height, zNear, zFarè¿™å‡ ä¸ªå‚æ•°ï¼ŒzNearå’ŒzFarä»£è¡¨äº†è¿œè¿‘å¹³é¢çš„zå€¼ï¼Œåªæœ‰åœ¨è¿™ä¸ªèŒƒå›´å†…çš„ç‰©ä½“æ‰ä¼šè¢«çœ‹åˆ°ã€‚å¯ä»¥è®¤ä¸ºäººçš„çœ¼ç›å°±æ˜¯æ‘„åƒæœºï¼Œç”µè„‘å±å¹•å°±æ˜¯è¿‘å¹³é¢ï¼Œè§†åŠ›è·ç¦»å°±æ˜¯è¿œå¹³é¢ã€‚ è€Œå¯¹äºwidth, heightï¼Œæˆ‘ä»¬é€šå¸¸åªå–ä¸€ä¸ªå€¼æ¯”å¦‚heightï¼Œå¦ä¸€ä¸ªé€šè¿‡å±å¹•çš„å®½é«˜æ¯”è·å–ï¼Œä½†æ˜¯æ›´å¸¸ç”¨çš„æ–¹æ³•æ˜¯è¿heightä¹Ÿä¸ç›´æ¥æŒ‡å‡ºï¼Œè€Œæ˜¯é€šè¿‡fovï¼Œç§°ä¸ºè§†è§’çš„ä¸œè¥¿ç»™å‡ºã€‚è¿™æ˜¯å› ä¸ºæ¯”å¦‚æˆ‘ä»¬è¦åšä¸€ä¸ªççœ¼ç‰¹æ•ˆï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ä¸æ–­çš„æ”¹å˜è§†è§’å¤§å°æœ€åæ‰è¾¾åˆ°å±å¹•é«˜åº¦ï¼ˆå®Œå…¨çå¼€çœ¼ï¼‰ 6. å‡ ä½•å›¾å…ƒä»‹ç»ä¸€äº›å›¾å…ƒçš„å¸¸ç”¨è¡¨ç¤ºæ–¹å¼ ç›´çº¿ 1234class Line3D{ Vector3 origin; //èµ·ç‚¹ Vector3 end; //ç»ˆç‚¹} å°„çº¿ 1234class Ray3D{ Vector3 origin; //èµ·ç‚¹ Vector3 delta; //å•ä½æ–¹å‘å‘é‡} çƒ 1234class Sphere{ Vector3 center; //æ±‚çƒå¿ƒ float radius; //åŠå¾„} AABBï¼ˆè½´å¯¹é½çŸ©å½¢è¾¹ç•Œæ¡†ï¼‰ ä¹Ÿå°±æ˜¯å°†æŸä¸ªä¸è§„åˆ™ç‰©ä½“æ¡†èµ·æ¥çš„é•¿æ–¹ä½“boxï¼Œè®°å½•ä¸¤ä¸ªå¯¹è§’é¡¶ç‚¹çš„å‘é‡ 1234class AABB{ Vector3 min; //xyzæœ€å°é¡¶ç‚¹ Vector3 max; //xyzæœ€å¤§é¡¶ç‚¹} é¡¶ç‚¹é¡ºåºå¦‚ä¸‹å›¾ è¿™ä¸ªé¡ºåºçš„å¥½å¤„æ˜¯å½“æˆ‘ä»¬æ±‚æŸä¸ªé¡¶ç‚¹åæ ‡æ—¶ 123456Vector3 AABB::corner(int i){ assert(i &gt;= 0); assert(i &lt;= 7); return Vector3((i &amp; 1) ? max.x : mix.x, (i &amp; 2) ? max.y : mix.y, (i &amp; 4) ? max.z : mix.z);} å› ä¸ºä»0~7ï¼Œxæ˜¯å°å¤§ä¸€å‘¨æœŸï¼Œyæ˜¯å°å°å¤§å¤§ä¸€å‘¨æœŸï¼Œzæ˜¯å°å°å°å°å¤§å¤§å¤§å¤§ä¸€å‘¨æœŸï¼Œç®—æ˜¯ä¸€ä¸ªå°trick AABBå¯¹äºç‰©ä½“æ—‹è½¬ï¼Œç‰©ä½“æ—‹è½¬ï¼ŒAABBä¹Ÿè·Ÿç€æ—‹è½¬ï¼Œè¦è®¡ç®—çš„æ˜¯æ—‹è½¬åçš„ç‰©ä½“çš„AABBè¿˜æ˜¯åŸæ¥AABBçš„AABB å¦‚æœæ˜¯å‰è€…ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹æ—‹è½¬åçš„ç‰©ä½“é‡æ–°åšAABBå³å¯ã€‚å¦‚æœæƒ³å¾—åˆ°åè€…ï¼Œéœ€è¦å¯¹åŸAABBåšæ—‹è½¬ï¼Œç„¶åå†å¾—å‡ºmaxå’Œminçš„åæ ‡ï¼Œè¿™é‡Œçš„è®¡ç®—ä¹Ÿæœ‰ä¸ªå°trickï¼Œå°±æ˜¯å¹¶ä¸éœ€è¦çœŸæ­£çš„å’Œæ—‹è½¬çŸ©é˜µç›¸ä¹˜ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“æ—‹è½¬çŸ©é˜µä¹˜æ³•åä¸º xâ€™ = m11x + m21y + m31z yâ€™ = m12x + m22y + m32z zâ€™ = m13z + m23y + m33z è§‚å¯Ÿå³å¯çŸ¥é“ï¼Œæƒ³å¾—åˆ°xâ€™maxï¼Œé‚£ä¹ˆå¦‚æœm11ä¸ºæ­£åˆ™å–xmaxï¼Œå¦‚æœä¸º-åˆ™å–xminï¼Œå…¶ä»–åŒç†ï¼Œå› æ­¤å®ç°æ—¶åªéœ€è¦å¯¹9ä¸ªmä¸æ–­ifåˆ¤æ–­å³å¯ 123456789if(m11 &gt; 0.0f){ min.x += m11 * old.min.x; max.x += m11 * old.max.x;}else{ min.x += m11 * old.max.x; max.x += m11 * old.min.x;}... //ç»§ç»­+=å…¶ä»–må¾—å‡ºx,y,z å¹³é¢ æŒ‰ç…§é«˜ä¸­æ•°å­¦ï¼Œå¹³é¢æ–¹ç¨‹æœ‰ä¸€èˆ¬å¼ï¼ˆä¸‰ç‚¹ï¼‰ï¼Œç‚¹æ³•å¼ï¼ˆå¹³é¢ä¸Šä¸€ç‚¹+æ³•å‘é‡ï¼‰ï¼Œæˆªè·å¼ https://zhuanlan.zhihu.com/p/102514602 å¯¹äºä¸€èˆ¬å¼ax+by+cz+d=0ï¼Œåˆ™æ³•å‘é‡æ˜¯(a,b,c) å¦‚æœç‚¹p(x0, y0, z0)æ˜¯å¹³é¢ä¸Šä¸€ç‚¹ï¼Œåˆ™pnä½œä¸ºå‘é‡åšç‚¹ä¹˜ï¼Œå¾—åˆ°dï¼Œdæ˜¯åŸç‚¹åˆ°è¿™ä¸ªå¹³é¢çš„è·ç¦» 3Dä¸­ï¼Œæœ‰æ—¶å€™å¾ˆå¤šä¸ªç‚¹åœ¨ä¸€ä¸ªè¿‘ä¼¼å¹³é¢ä¸Šï¼Œæ±‚ä¸€ä¸ªç¦»æ‰€æœ‰ç‚¹è·ç¦»ä¹‹å’Œæœ€å°çš„â€œæœ€ä½³â€å¹³é¢ï¼Œåšä¸€ä¸ªç±»ä¼¼å›å½’çš„è®¡ç®— å¤šè¾¹å½¢ ç®€å•å¤šè¾¹å½¢ï¼ˆæ²¡æœ‰æ´ï¼‰æè¿°é¡¶ç‚¹åªéœ€è¦ä¾æ¬¡é¡ºæ—¶é’ˆç»™å‡ºåæ ‡ï¼Œä½†æ˜¯å¦‚æœæ˜¯æœ‰æ´çš„å¤šè¾¹å½¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ‡ç¼çš„æ–¹å¼å˜ä¸ºç®€å•å¤šè¾¹å½¢ 7. å‡ ä½•æ£€æµ‹7.1 è·ç¦»æ£€æµ‹ä¸€ä¸ªç‚¹åˆ°xxxçš„æœ€è¿‘ç‚¹ 2Dç›´çº¿ä¸Šçš„æœ€è¿‘ç‚¹ qâ€™ = q + (d - qÂ·n)n å…¶å®å°±æ˜¯ä»ç‚¹påšè¯¥ç›´çº¿çš„å‚çº¿ï¼Œå’Œç›´çº¿ç›¸äº¤çš„ç‚¹ å°„çº¿ä¸Šçš„æœ€è¿‘ç‚¹ qâ€™ = p + (dÂ·(q - p))d å…¶ä¸­pä¸ºå°„çº¿èµ·ç‚¹ï¼Œdä¸ºå°„çº¿æ–¹å‘å•ä½å‘é‡ï¼Œ å¹³é¢ä¸Šçš„æœ€è¿‘ç‚¹ qâ€™ = q + (d - qÂ·n)n å’Œç›´çº¿æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºéƒ½æ˜¯å‚çº¿ çƒä¸Šçš„æœ€è¿‘ç‚¹ qâ€™ = q + (||c - q|| - r) * (c - q) / ||d|| æ˜¯åœ†å¿ƒcå’Œqå‡å»åŠå¾„é‚£æ®µï¼Œæ–¹å‘æ˜¯qæ–¹å‘ AABBä¸Šçš„æœ€è¿‘ç‚¹ è¿™ä¸ªåœ¨æ¸¸æˆå¼€å‘ä¸­æ¯”è¾ƒå¸¸ç”¨ï¼Œæ¯”å¦‚é£æœºæ¸¸æˆï¼Œå½“æˆ‘ä»¬ç„å‡†ä¸€ä¸ªç‰©ä½“çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç„å‡†ç›®æ ‡ç‰©ä½“AABBä¸­æœ€è¿‘çš„ä¸€ä¸ªç‚¹å³å¯ æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥åˆ¤æ–­ç‚¹(x, y, z)å’Œç›®æ ‡ç‰©ä½“æ‰€åœ¨çš„AABBå¤§å°ï¼Œæ¯”å¦‚å°äºAABBçš„minxåˆ™å–minxï¼Œå¤§äºmaxxåˆ™å–maxxï¼Œåœ¨ä¸­é—´åˆ™å–ç›®æ ‡ç‰©ä½“çš„x 7.2 ç›¸äº¤æ£€æµ‹2Dä¸­ä¸¤æ¡ç›´çº¿ç›¸äº¤æ€§æ£€æµ‹ 3Dä¸­ä¸¤æ¡å°„çº¿ç›¸äº¤æ€§æ£€æµ‹ å°„çº¿å’Œå¹³é¢ç›¸äº¤æ€§æ£€æµ‹ ä¸‰ä¸ªå¹³é¢é—´ç›¸äº¤æ€§æ£€æµ‹ å°„çº¿å’Œçƒç›¸äº¤æ€§æ£€æµ‹ ä¸¤ä¸ªçƒ/åœ†ç›¸äº¤æ€§æ£€æµ‹ çƒå’Œå¹³é¢ç›¸äº¤æ€§æ£€æµ‹ //TODO è¿™é‡Œæ¶‰åŠåˆ°å¤§é‡çš„å…¬å¼ï¼Œååºè¡¥ä¸Šï¼Œéƒ½å‡ºè‡ªã€Šå›¾å½¢å›¾åƒç¼–ç¨‹ç²¾ç²¹Iã€‹å’Œã€Š3Dæ•°å­¦åŸºç¡€ï¼šå›¾å½¢ä¸æ¸¸æˆå¼€å‘ã€‹13ç«  8. ä¸‰è§’å½¢å’Œç½‘æ ¼ä¸‰ç»´çš„æ¨¡å‹ä¸€èˆ¬éƒ½ä¼šåˆ†è§£æˆæ— æ•°ä¸ªä¸‰è§’å½¢ç½‘æ ¼ä»¥æ–¹ä¾¿æ¸²æŸ“å¼§é¢å’Œçº¹ç†æ˜ å°„ å…³äºç½‘æ ¼ï¼Œç›®å‰çš„å›¾å½¢åº“ï¼ˆæ¯”å¦‚DirectXå’Œopenglï¼‰å¤§éƒ½è®¾è®¡æˆä»¥ä¸‹ç»“æ„ 1234567class Vertex{ //é¡¶ç‚¹ç±» Vector3 p; //ä¸€ä¸ª3ç»´å‘é‡ï¼Œè¡¨ç¤ºä¸€ä¸ªé¡¶ç‚¹ï¼ŒåŒ…å«xyzåæ ‡ float u, v; //u våæ ‡ç”¨äºçº¹ç†æ˜ å°„ //å…¶ä»–ä¿¡æ¯ Vector3 normal; //ç”¨äºGouraud shadingçš„é¡¶ç‚¹æ³•å‘é‡} 123456class Triangle{ //ä¸‰è§’å½¢ç±» Vertex vtx[3]; //ä¸€ä¸ªä¸‰è§’å½¢åŒ…å«3ä¸ªé¡¶ç‚¹ //å…¶ä»–ä¿¡æ¯ Vector3 normal; //ç”¨äºFlat shadingçš„ä¸‰è§’å½¢æ³•å‘é‡} 1234567891011121314class TriMesh{ //ä¸‰è§’å½¢ç½‘æ ¼ç±» //æ‰€è°“ç½‘æ ¼å…¶å®å°±æ˜¯ä¸‰è§’å½¢åˆ—è¡¨ int vAlloc; //åˆ†é…çš„é¡¶ç‚¹æ•°é‡ï¼Œé€šå¸¸ä¼šæ¯”countå¤šä¸€äº›ï¼Œæ–¹ä¾¿æ‰©å±•ï¼Œç±»ä¼¼äºcapcityå’Œcount int vCount; //éœ€è¦çš„é¡¶ç‚¹æ•°é‡ Vertex *vList; //ä¿å­˜é¡¶ç‚¹åˆ—è¡¨ int tAlloc; //åˆ†é…çš„ä¸‰è§’å½¢æ•°é‡ï¼Œé€šå¸¸ä¼šæ¯”countå¤šä¸€äº›ï¼Œæ–¹ä¾¿æ‰©å±• int tCount; //çœŸæ­£éœ€è¦çš„ä¸‰è§’å½¢æ•°é‡ Tringle *triList; //ä¿å­˜ä¸‰è§’å½¢åˆ—è¡¨ int addTri(Tringle tri); //å¢åŠ ä¸‰è§’å½¢æ–¹æ³•ï¼Œè¿”å›ç´¢å¼• //å…¶ä»–ä¿¡æ¯} å½“ç„¶ï¼Œå› ä¸ºæœ€ç»ˆæ“ä½œçš„å…¶å®æ˜¯ç½‘æ ¼ï¼Œç½‘æ ¼ä¸­å…¶å®æœ‰é¡¶ç‚¹äº†ï¼Œæ‰€ä»¥ä¹Ÿæœ‰äº›åº“çš„ä¸‰è§’å½¢ç±»å¹¶æ²¡æœ‰Vertex vtx[3];è€Œæ˜¯åªå­˜äº†ä¸€ä¸ªindexï¼Œéœ€è¦çš„æ—¶å€™å†ç»Ÿä¸€ä»ç½‘æ ¼ç±»ä¸­æ ¹æ®ä¸‹æ ‡è·å–é¡¶ç‚¹ï¼Œè¿™æ˜¯æ ‡å‡†åšæ³• 8.1 ä¸‰è§’å½¢å’Œé¡¶ç‚¹çš„æ³•å‘é‡å…³äºä¸‰è§’å½¢ç±»å’Œç½‘æ ¼ç±»éƒ½ä¼šæœ‰ä¸€ä¸ªå±æ€§normalï¼Œè¿™ä¸ªæ³•å‘é‡ä¼šç”¨äºshading ä¸‰è§’å½¢æ³•å‘é‡çš„æ±‚æ³•ï¼šä¸‰è§’å½¢ä¸¤ä¸ªè¾¹å‘é‡åšå‰ä¹˜ e1 = v3 - v2 e2 = v1 - v3 n = e1 * e2 é¡¶ç‚¹æ³•å‘é‡çš„æ±‚æ³•ï¼šä¸€ä¸ªé¡¶ç‚¹å¯èƒ½æ˜¯nä¸ªä¸‰è§’å½¢çš„å…¬å…±é¡¶ç‚¹ï¼Œå°†è¿™nä¸ªä¸‰è§’å½¢çš„æ³•å‘é‡æ±‚å’Œå°±æ˜¯è¯¥é¡¶ç‚¹æ³•å‘é‡çš„æ–¹å‘ï¼Œå†åšå½’ä¸€åŒ–ï¼ˆå¾ˆå¤šåœ°æ–¹è¯´æ˜¯ç›¸é‚»ä¸‰è§’å½¢çš„æ³•å‘é‡çš„å¹³å‡æ•°ï¼Œä»”ç»†çœ‹å‘ç°å…¶å®ä¸æ˜¯å¹³å‡æ•°ï¼Œå› ä¸ºæ±‚å’Œåä¸æ˜¯/nè€Œæ˜¯/æ¨¡é•¿ï¼Œä¹Ÿå°±æ˜¯å˜æˆå•ä½å‘é‡ï¼‰ ä»£ç å®ç°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥çŸ¥é“æŸä¸ªé¡¶ç‚¹ä¼šè¿æ¥å“ªå‡ ä¸ªä¸‰è§’å½¢ï¼Œä¸å¯èƒ½éœ€è¦ç®—æŸä¸ªé¡¶ç‚¹æ³•å‘é‡çš„æ—¶å€™å»ä¸´æ—¶éå†ä¸€éæ‰€æœ‰çš„ä¸‰è§’å½¢ã€‚æ‰€ä»¥ä¸€èˆ¬éƒ½è®¡ç®—å®Œä¸‰è§’å½¢çš„æ³•å‘é‡åï¼Œåšä¸€æ¬¡æ±‚æ‰€æœ‰é¡¶ç‚¹çš„æ³•å‘é‡æ“ä½œï¼šéå†æ‰€æœ‰çš„ä¸‰è§’å½¢ï¼Œå¹¶å°†å…¶ä¸‰ä¸ªé¡¶ç‚¹æ³•å‘é‡ç´¯ç§¯ï¼Œæœ€åéå†ä¸€éæ‰€æœ‰çš„é¡¶ç‚¹åšå½’ä¸€åŒ– 12345678910111213141516171819202122void Mesh::computerVertexNormals(){ int i; computeTriNormals(); //å¾—åˆ°æ‰€æœ‰ä¸‰è§’å½¢çš„æ³•å‘é‡ //æ—§å€¼æ¸…é›¶ for(i = 0; i &lt; vCount; i++){ vertex(i).mormal.zero(); } //å°†æ¯ä¸ªä¸‰è§’å½¢çš„æ³•å‘é‡ç´¯åŠ åˆ°å„é¡¶ç‚¹ for(i = 0; i &lt; tCount; i++){ Tri *t = &amp;tri(i); //å…¶å®å°±æ˜¯Tri t = triList[i]ï¼Œæˆ‘ä¸æ˜¯å¾ˆä¹ æƒ¯ç”¨æŒ‡é’ˆ for(int j = 0; j &lt; 3; j++){ //ç´¯è®¡åˆ°å„é¡¶ç‚¹ vertex(t-&gt;v[j].index).normal += t-&gt;normal; //å…¶å®å°±æ˜¯vList[t.v[j].index].normal += t.normal;çœ‹ä¸æ‡‚å¯ä»¥çœ‹ä¸‹é¢çš„è§£é‡Š } } //æ‰€æœ‰é¡¶ç‚¹çš„æ³•å‘é‡å½’ä¸€åŒ– for(i = 0; i &lt; vCount; i++){ vertex(i).normal.normalize(); }} å†è¯´ä¸€ä¸‹ï¼Œt-&gt;v[j]æ˜¯ä¸‰è§’å½¢ç±»é‡Œé¢æœ‰ä¸ªé¡¶ç‚¹ç±»çš„æˆå‘˜vï¼Œ.indexæ˜¯å› ä¸ºå‰é¢è¯´çš„ä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªé¡¶ç‚¹ç±»å¹¶ä¸æ˜¯çœŸæ­£çš„Vertexï¼Œè€Œæ˜¯ä¸€ä¸ªå†…éƒ¨ç±»Verï¼ˆé•¿å¾—éƒ½å·®ä¸å¤šåªæ˜¯æˆå‘˜å‡½æ•°åªæœ‰ç´¢å¼•ï¼‰ï¼Œvertex(index)å°±æ˜¯getå‡½æ•°*vList[index] 8.2 ç½‘æ ¼æ“ä½œ//TODO é¡¶ç‚¹ç„Šæ¥ã€é¢æ‹†åˆ†ï¼Œè¾¹åç¼©ï¼Œç½‘æ ¼å‰Šå‡ç­‰ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œå®ç°è§ä¹¦æœ¬14ç«  9. å›¾å½¢æµæ°´çº¿(å›¾å½¢ç®¡é“) å»ºç«‹åœºæ™¯ å¯è§æ€§æ£€æµ‹ è®¾ç½®æ¸²æŸ“çŠ¶æ€ å‡ ä½•ä½“ç”Ÿæˆä¸æäº¤ å˜æ¢å’Œå…‰ç…§ èƒŒé¢å‰”é™¤ä¸è£å‰ª æŠ•å½±åˆ°å±å¹•ç©ºé—´ å…‰æ …åŒ– åƒç´ ç€è‰² å…¶å®åŸºæœ¬ä¸Šå°±æ˜¯ä»ç¬¬ä¸€è¡Œä»£ç åˆ°æ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ‰€æœ‰è¿‡ç¨‹ è¿™å‡ ä¸ªçš„æ­¥éª¤ä¸æ˜¯å›ºå®šçš„ï¼Œæœ‰äº›æ­¥éª¤å¯ä»¥äº’æ¢ï¼Œæ‰€ä»¥å¦‚æœç”¨ä¸åŒçš„å›¾å½¢åº“ï¼Œä¹Ÿè¦éµå®ˆä»–ä»¬çš„æµæ°´çº¿ openglè¿™é‡Œæ˜¯ç®€åŒ–å›¾ 10. å…‰ç…§å’Œç€è‰²è¿™é‡Œè¯´çš„å…‰ç…§åªå…³æ³¨å…‰çš„æ•ˆæœï¼Œä¸å…³æ³¨å…‰é€ æˆçš„é˜´å½±ï¼Œç§°ä¸ºshadingï¼Œè€Œä¸å…³æ³¨shadow 10.1 å…‰ç…§blinn-phongåå°„æ¨¡å‹ç®€å•çš„è®¤ä¸ºå…‰ç…§ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šç¯å¢ƒå…‰ï¼Œæ¼«åå°„ï¼Œé«˜å…‰ La,Ld,Lsçš„å…·ä½“å†…å®¹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ 10.1.1 æ¼«åå°„diffuseæ¼«åå°„æ˜¯è¯´æ˜¯å…‰ç…§åœ¨ç‰©ä½“ä¸Šç„¶ååå°„åˆ°çœ¼ç›é‡Œé¢å» è¿™ä¸ªå…¬å¼å¦‚ä½•ç†è§£å‘¢ï¼Ÿï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¤§èƒ†çš„ç®€åŒ–æ¨¡å‹ï¼Œä½†æ˜¯æ˜¯æœ‰ä¸€å®šé“ç†çš„ï¼Œå¯ä»¥çœ‹ä¸‹é¢ä¸€æ­¥æ­¥çš„å‡è®¾æ¨å¯¼ æˆ‘ä»¬å¯ä»¥ä»Iå¼€å§‹ï¼Œå‡è®¾ä¸€å¼€å§‹å…‰ç…§å¼ºåº¦æ˜¯Iï¼Œé‚£ä¹ˆç»è¿‡åå°„åå…ˆè§†ä¸ºå¹³è¡Œå…‰ï¼ˆè§†ä¸ºï¼Œä¸æ˜¯çœŸçš„ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯ç®€æ˜“æ¨¡å‹ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå‘ç°å¦‚ä¸‹å›¾ï¼Œè·Ÿç‰©ä½“å¹³é¢æ˜¯å¦æ­£å¯¹ç€å…‰æœ‰å…³ï¼ŒLambertä½™å¼¦æŒ‡å‡ºå¹³é¢æ³•çº¿å’Œå…‰çš„å¤¹è§’ä½™å¼¦å€¼ä¼šå’Œå…‰çš„å¼ºåº¦æˆæ­£æ¯”ï¼Œè¿™ç¡®å®æ˜¯æœ‰é“ç†çš„ï¼Œå¦‚ä¸‹ é‚£ä¹ˆæˆ‘ä»¬å°±å¾—åˆ°äº†Iâ€™ = I*cosÎ¸ï¼ŒcosÎ¸å¯ä»¥æ›¿æ¢æˆä¸¤ä¸ªå‘é‡çš„ç‚¹ä¹˜ï¼ŒåŒæ—¶æ ¹æ®å¸¸è¯†å¯å¾—å…‰æœ€å°ä¸º0è€Œä¸ä¼šä¸ºè´Ÿæ•°ï¼Œä¸º0å°±å…¨é»‘äº†ï¼Œå› æ­¤ Iâ€™ = I * max(IÂ·n) è¿™æ˜¯æˆ‘ä»¬è®¤ä¸ºæ˜¯å¹³é¢å…‰æºçš„æƒ…å†µï¼ˆå…‰æ— é™è¿œæˆ–è€…å…¶ä»–æ‰‹æ®µï¼‰ï¼Œä½†æ˜¯å…‰å…¶å®æ˜¯ç‚¹å…‰æº æˆ‘ä»¬è®¤ä¸ºå…‰å¾€æ¯ä¸ªè§’åº¦å¹³å‡çš„å‘å¤–çƒé¢ä¼ æ’­ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥è®¤ä¸ºå¼ºåº¦ä»¥åœ†çš„åŠå¾„é€Ÿç‡å‡å°‘ å› æ­¤å…‰åˆ°æŸä¸ªç‚¹æ—¶çš„å¼ºåº¦ä¸º Iâ€™ = (I/rÂ²) * max(IÂ·n) æ˜¯ä¸æ˜¯ä¹Ÿæœ‰é‚£ä¹ˆç‚¹é“ç†ï¼Ÿï¼Ÿ æœ€åæˆ‘ä»¬è®¤ä¸ºå¯ä»¥æ§åˆ¶å¼ºåº¦å› å­ï¼Œè¿™ä¸ªæˆ‘è®¤ä¸ºä½ å¯ä»¥æƒ³è±¡æˆé›¾å¤©ä»€ä¹ˆçš„ï¼Œå¯¹å§ï¼Œå…‰è¿˜æ˜¯é‚£ä¹ˆå¼ºï¼Œåªæ˜¯ç»è¿‡äº‘å±‚ç­‰åˆ°è¾¾çš„å¼ºåº¦å°±å‡å°‘äº†ï¼Œæˆ‘ä»¬ç›´æ¥è®¤ä¸ºè¿™ä¸ªä¸ºä¸€ä¸ªå¸¸æ•°å› å­ã€‚å½“ç„¶é›¾åªæ˜¯ä¸ªæ¯”å–»ï¼Œæœ‰äº†è¿™ä¸ªå› å­ä¹‹åå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬æ“æ§å…‰çš„äº®é¢å¤§å° å†æ¬¡æé†’ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯å¤§èƒ†çš„ç®€åŒ–å‡è®¾ï¼Œå¦‚æœä»¥ä¸Šä¸‰æ­¥ä½ éƒ½è®¤ä¸ºç¡®å®å­˜åœ¨ä¸€å®šçš„é“ç†ï¼Œé‚£ä¹ˆä½ å°±å¾—å‡ºä¸Šé¢æ¼«åå°„éƒ¨åˆ†çš„å…¬å¼äº† 10.1.2 é«˜å…‰Specularé«˜å…‰æ˜¯ä¸€ç§é•œé¢åå°„ åœ¨Blinn-phongä¸­ä»ç„¶æ˜¯åœ¨ç®€å•çš„å¤§èƒ†ç®€åŒ–å‡è®¾çš„åŸºç¡€ä¸Šè¿›è¡Œæ¨å¯¼ å‡è®¾æœ‰ä¸€é¢é•œå­åå°„å¤ªé˜³å…‰ï¼Œæˆ‘ä»¬åœ¨ä»€ä¹ˆæ—¶å€™ä¼šæ„Ÿåˆ°åˆºçœ¼ï¼Ÿé‚£å°±æ˜¯çœ¼ç›åˆšå¥½åœ¨åå°„è§’çš„æ—¶å€™ï¼Œå¦‚ä¸‹å›¾ï¼šå¦‚æœçœ¼ç›åœ¨é»„è‰²çº¿ä¸Šï¼Œå°±ä¼šæ„Ÿåˆ°å¾ˆåˆºçœ¼ï¼Œåä¸€ç‚¹ç‚¹ï¼Œä»ç„¶ä¼šåˆºçœ¼ä½†ç¨‹åº¦å°ï¼Œè¶Šè¿œç¦»é»„è‰²çº¿ï¼Œå°±è¶Šæ²¡æœ‰åˆºçœ¼çš„æ„Ÿè§‰ ä¸ºäº†æè¿°è¿™ä¸ªåç¦»çš„è§’åº¦ï¼Œè¿™æ ·å­å°±æ¯”è¾ƒéš¾ï¼Œè¿™é‡Œå¾ˆå·§å¦™çš„å¼•å…¥äº†åŠç¨‹å‘é‡è¿™ç§è¯´æ³• åŠç¨‹å‘é‡éå¸¸å¥½æ±‚ï¼ŒI+vå†å½’ä¸€åŒ–ä¸ºå•ä½å‘é‡å³å¯ï¼Œè¿™ä¸ªå¤¹è§’Î±å’Œåç¦»è§’åº¦è™½ç„¶å·®äº†2å€ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨æ¥æè¿°åå·®å˜›å¯¹å§ å’ŒLdä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ¬¡æ•°pï¼Œè¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ åœ¨ä¹‹å‰æ¼«åå°„çš„æ—¶å€™æˆ‘ä»¬è¯´äº†kdä»£è¡¨æ¼«åå°„å…‰é¢çš„å¤§å°ï¼ŒåŒæ ·çš„è¿™é‡Œçš„ksä¹Ÿä»£è¡¨é«˜å…‰å…‰é¢çš„å¤§å°ï¼Œä½†æ˜¯å¯¹äºé«˜å…‰æ¥è¯´ï¼Œé™¤äº†å…‰é¢è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„å› ç´ å°±æ˜¯äº®åº¦ï¼Œpåˆ™ä»£è¡¨äº†å…‰é¢çš„äº®åº¦ï¼Œè¿™ä»ç„¶æ˜¯æœ‰é“ç†çš„ å…¬å¼ä¸­çš„å…¶ä»–éƒ¨åˆ†å’ŒLdå·®ä¸å¤šï¼Œå°±ä¸è§£é‡Šäº† 10.1.3 ç¯å¢ƒå…‰Ambientæœ€åæ˜¯Laç¯å¢ƒå…‰ï¼Œå½“æˆ‘ä»¬ç”¨æ‰‹æœºå¤œæ‹çš„æ—¶å€™ï¼Œæ²¡æœ‰å¤ªé˜³ä¹Ÿä¸å¼€é—ªå…‰ç¯ï¼Œå”¯ä¸€çš„ä¸€ç‚¹å…‰æºåªæ˜¯è½¬è§’çœ‹ä¸åˆ°çš„è·¯ç¯ï¼Œä½ æ˜¯å¦å¸Œæœ›æ‹å‡ºæ¥çš„ä¸œè¥¿æ˜¯ä¸€ç‰‡é»‘ï¼Ÿï¼Ÿ ä¸å¸Œæœ›å§ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªå¾ˆæš—çš„ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ç‰©ä½“æ¥å—åˆ°ä¸€äº›å¢™é¢æˆ–è€…ä»»ä½•ï¼ˆä¸å…‰æ»‘çš„å¹³é¢ï¼‰åå°„è¿‡æ¥çš„é‚£ä¹ˆä¸€ä¸¢ä¸¢äº®åº¦ è¿™å¾ˆéš¾å¤„ç†ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•çŸ¥é“å››é¢å…«æ–¹æœ‰å¤šå°‘ç‰©ä½“èƒ½å¤Ÿç»™æˆ‘ä»¬æä¾›å…‰æºï¼Œé‚£ä¹ˆæˆ‘ä»¬å¹²è„†ç®€å•çš„è®¤ä¸ºå››é¢å…«æ–¹éƒ½èƒ½æä¾›ä¸€æ ·å¼ºåº¦çš„ä¸€ç‚¹ç‚¹å…‰ å°±æ˜¯è¿™ä¹ˆç®€å•å¤§èƒ†ï¼Œäºæ˜¯å°†ä¸Šè¿°ä¸‰ä¸ªå…¬å¼Ld, La, Lsä¸€ç»„åˆï¼Œä¾¿å¾—åˆ°äº†Blinn-phongæ¨¡å‹çš„å®Œæ•´å…¬å¼ ä¸€åˆ‡éƒ½æ˜¯è¿™ä¹ˆçš„å¦™~å•Š 10.2 ç€è‰²ä¸‰ç»´ç‰©ä½“éƒ½ä¼šè¡¨ç¤ºæˆä¸€å †ä¸‰è§’å½¢çš„æ¨¡å‹ï¼Œåœ¨ç€è‰²æ—¶æˆ‘ä»¬å°±å¯ä»¥é€‰æ‹©å¯¹è¡¨é¢ï¼Œè¿˜æ˜¯é¡¶ç‚¹è¿˜æ˜¯åƒç´  10.2.1 flat shadingå¯¹è¡¨é¢æ±‚æ³•å‘é‡ 10.2.2 Gouraud shadingå¯¹é¡¶ç‚¹æ±‚æ³•å‘é‡ï¼Œæ±‚æ³•é¢ç¬¬8ç« ä¹Ÿè¯´è¿‡äº†ï¼Œæ˜¯è¯¥é¡¶ç‚¹é‚»æ¥ä¸‰è§’å½¢çš„å¹³å‡å€¼ 10.2.3 Phong shadingå¯¹æ¯ä¸ªåƒç´ è¿›è¡Œç€è‰² è¯šç„¶ï¼Œå¯¹åƒç´ ç€è‰²æ•ˆæœæœ€å¥½ï¼Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒä½ï¼Œä½†games101ä¸­æŒ‡å‡ºï¼Œå¹¶ä¸æ˜¯è¯´æˆ‘ä»¬æ¯ä¸ªæ—¶åˆ»éƒ½éœ€è¦phong shadingï¼Œå› ä¸ºè¿™è¿˜å–å†³äºä¸‰è§’å½¢çš„æ•°é‡ï¼Œå¦‚æœä¸‰è§’å½¢è¶³å¤Ÿç»†åŒ–ï¼Œé‚£ä¹ˆflat shadingä¹Ÿæ˜¯å¯ä»¥æœ‰å¾ˆå¥½çš„æ•ˆæœçš„ï¼Œå¹¶ç»™å‡ºäº†å¯¹æ¯”å›¾ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æ¨¡å‹ä¸‰è§’å½¢æ•°é‡è¶³å¤Ÿå¤šçš„æ—¶å€™ï¼Œphong shadingå¸¦æ¥çš„æå‡æ•ˆæœå°±ä¸æ˜æ˜¾äº†ï¼Œç™½ç™½å¢åŠ äº†è®¡ç®—é‡ 10.3 é›¾åŒ–é›¾åŒ–å°±æ˜¯å°†3Då›¾å½¢å’Œé›¾çš„é¢œè‰²ç›¸æ··åˆçš„æ•ˆæœï¼Œä¼šé€ æˆç‰©ä½“é¢œè‰²æ¨¡ç³Šæ•ˆæœ é›¾åŒ–æµ“åº¦å’Œé›¾åŒ–è·ç¦»ç›¸å…³ï¼Œå…¬å¼å¦‚ä¸‹ è®¡ç®—å‡ºé›¾çš„æµ“åº¦åå†æ··å…¥é¢œè‰² 11. çº¹ç†æ˜ å°„ ä¸ç®¡çº¹ç†å›¾ç‰‡å¤§å°å¤šå¤§ï¼Œæˆ‘ä»¬éƒ½é¦–å…ˆç¼©æ”¾åˆ°u, vèŒƒå›´ä¸º[0, 1] ç„¶åæˆ‘ä»¬å¯¹äºuvä¸­é—´çš„å°æ•°æ¯”å¦‚0.25ã€0.5å°±ç”¨æ’å€¼çš„æ–¹æ³•å°†å›¾è´´ä¸Šå» //TODOçº¹ç†æ˜ å°„ä¸­çš„åŒçº¿æ€§æ’å€¼ï¼Œè§£å†³æ’å€¼ä¸­çš„æ¨¡ç³Šé—®é¢˜ 11.3 çº¹ç†å¤ç”¨å¾ˆå¤šæ—¶å€™çº¹ç†è´´å›¾éƒ½æ˜¯å¯ä»¥å¤ç”¨çš„ï¼Œæ¯”å¦‚å¢™å£çš„ç –å—ï¼Œå¦‚æœå¢™å£å¾ˆå¤§ï¼Œä¸ºæ¯ä¸€ä¸ªå¢™å£åˆ¶ä½œçº¹ç†è´´å›¾è‚¯å®šæ˜¯ä¸åˆç†çš„ï¼Œæ‰€ä»¥å‰å®³çš„è§†è§‰è®¾è®¡å¸ˆä¼šå°†çº¹ç†è®¾ç½®æˆè¿™æ ·ï¼š ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯è¯´æˆ‘ç”¨ä¸¤å¼ è¿™æ ·çš„å›¾ç‰‡ä»ä¸Šä¸‹å·¦å³è·Ÿå¦ä¸€å¼ æ‹¼åœ¨ä¸€èµ·ï¼Œç“·ç –çº¹ç†éƒ½èƒ½æ— ç¼æ¥åˆå¦å¤–ä¸€å¼ ï¼Œè¿™æ ·çš„çº¹ç†å°±å¯ä»¥å¤ç”¨è€Œä¸è¿å’Œ 12. åŒç¼“å­˜è®¡ç®—æœºè¾“å‡ºå›¾å½¢æ—¶ä¼šå‡ºç°é—ªçƒï¼ˆç‰©ä½“è¿åŠ¨çš„æ—¶å€™çªç„¶æ¶ˆå¤±ï¼Œç„¶åå‡ºç°åœ¨ä¸‹ä¸€ä¸ªä½ç½®ï¼‰ï¼Œä½¿ç”¨åŒç¼“å­˜å¯ä»¥è§£å†³é—ªçƒ æˆ‘ä»¬è¯´åŒç¼“å­˜ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªç¼“å­˜â€¦å•ç¼“å­˜å®é™…ä¸Šæ˜¯æ²¡æœ‰ç¼“å­˜â€¦å› ä¸ºé»˜è®¤å±å¹•æ˜¾ç¤ºä¸œè¥¿è®¤ä¸ºæ˜¯ä¸€ä¸ªç¼“å­˜â€¦é—ªçƒçš„åŸå› ï¼šåŸæ¥æ˜¯æ“¦é™¤ä¸Šä¸€å¸§çš„å±å¹•å¹¶é‡æ–°ç»˜åˆ¶ï¼Œæ“¦é™¤éœ€è¦æ—¶é—´ï¼Œç»˜åˆ¶ä¹Ÿéœ€è¦æ—¶é—´ï¼Œæ“¦é™¤å®Œäº†æˆ‘ä»¬çœ‹åˆ°åŸç‰©ä½“æ¶ˆå¤±ï¼Œé‡ç»˜å®Œäº†æˆ‘ä»¬çœ‹åˆ°æ–°ä½ç½®ç‰©ä½“å‡ºç°ï¼Œè¿™å°±æ˜¯é—ªçƒã€‚å¦‚æœåŠ å…¥äº†ç¼“å­˜ï¼Œå¯ä»¥ç›´æ¥å°†ä¸‹ä¸€å¸§çš„å›¾ç‰‡å­˜åœ¨ç¼“å†²åŒºä¸­ï¼Œä¸€æ¬¡æ€§è¾“å‡ºåˆ°å±å¹•ã€‚ æ³¨æ„ï¼Œæ“¦é™¤å’Œé‡ç»˜çš„æ—¶é—´è¿˜æ˜¯ä¸€æ ·æ…¢ï¼Œä½†æ˜¯æ“¦é™¤çš„ä¸æ˜¯å±å¹•ï¼Œè€Œæ˜¯ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šä¸€å¸§è¿˜åœ¨å±å¹•ä¸Šï¼Œé‡æ–°ç»˜åˆ¶åˆ°ç¼“å­˜åï¼Œä»ç¼“å­˜åˆ°å±å¹•çš„æ‹·è´æ˜¯ä¸€ç¬é—´çš„äº‹æƒ… å…³äºåŒç¼“å­˜ï¼ŒçŸ¥é“å‡ºç°çš„åŸå› å’Œè§£å†³çš„åŸç†å³å¯ï¼Œå“ªæ€•æ˜¯è‡ªå·±å®ç°ä¹Ÿå°±æ˜¯swapBufferï¼Œç”¨d3dæˆ–è€…openglæ›´ç®€å•äº†ï¼Œä¸€ä¸¤è¡Œä»£ç  13 å¯è§æ€§æ£€æµ‹è¿™é‡Œä¸éœ€è¦è‡ªå·±åšï¼ŒDirectXèƒ½è‡ªåŠ¨è°ƒç”¨ç¡¬ä»¶è¿›è¡Œå¿«é€Ÿçš„å¯è§æ€§æ£€æµ‹ï¼ŒåŸç†éƒ¨åˆ†ä»¥åå†ä»‹ç» //TODO 14 æŠ—é”¯é½¿æ‰€è°“é”¯é½¿ï¼Œå°±æ˜¯ç”±äºå±å¹•åƒç´ å¤ªå°é€ æˆå¦‚ä¸‹ä¸å¹³æ»‘çš„è¾¹ç¼˜ åŸå› æ˜¯å¯¹äºåƒç´ çš„æ¯ä¸ªæ ¼å­ï¼Œç”¨æ ¼å­ä¸­å¿ƒçš„åæ ‡(0.5, 0.5)æ‰€åœ¨çš„é¢œè‰²ä»£è¡¨äº†æ•´ä¸ªåƒç´ æ ¼å­çš„é¢œè‰² è§£å†³æ–¹æ³• ç‰©ç†ï¼šä½¿ç”¨åˆ†è¾¨ç‡æ›´å¥½çš„æ˜¾ç¤ºå™¨ è¶…é‡‡æ ·supersamplingï¼šMsAA å¤šé‡é‡‡æ ·multisamplingï¼šdirectx è¶…é‡‡æ ·å°±æ˜¯å°†æ¯ä¸ªåƒç´ ç»†åˆ†ä¸ºå››ä¸ªå°æ ¼å­ï¼Œå¯¹äºæ¯ä¸ªå°ä¸ªå­éƒ½è®¡ç®—é¢œè‰²å¹³å‡å€¼ä½œä¸ºå½“å‰çš„é¢œè‰²ã€‚å¦‚æœåˆ†ä¸ºå››ä¸ªå°æ ¼å­å°±å«åšMsAA4*4ï¼Œå¯ä»¥æ›´ç»†çš„è·ç¦»è¿›è¡Œé‡‡æ ·ï¼Œç¼ºç‚¹æ˜¯åˆ†çš„è¶Šå¤šè®¡ç®—é‡è¶Šå¤§ ä»¥ä¸‹æ˜¯games101ä½œä¸š2ä¸­çš„ä»£ç ï¼ˆå…·ä½“é€»è¾‘ä¸ç”¨æ·±ç©¶ï¼Œå°±çœ‹æ˜¯ä¸æ˜¯å¤šäº†4å€è®¡ç®—ï¼‰ å¤šäº†ä¸€å±‚forï¼Œå°±æ˜¯ç»†åˆ†çš„æ ¼å­æ•°é‡ï¼Œæ‰€ä»¥è®¡ç®—é‡ä¹Ÿéšä¹‹å¢å¤§ å¤šé‡é‡‡æ ·æ˜¯directxå’Œä¸€äº›å›¾å½¢åº“çš„æŠ—é”¯é½¿æ–¹æ³•ï¼Œå¾ˆå¿«ï¼Œä»ç„¶ä¼šä½¿ç”¨å±å¹•åˆ†è¾¨ç‡4å€å¤§å°çš„åå°ç¼“å†²å’Œæ·±åº¦ç¼“å†²ï¼Œä½†æ˜¯ï¼Œä¸åƒè¶…çº§é‡‡æ ·é‚£æ ·è®¡ç®—æ¯ä¸ªå­åƒç´ çš„é¢œè‰²ï¼Œè€Œæ˜¯åªè®¡ç®—åƒç´ ä¸­å¿ƒé¢œè‰²ä¸€æ¬¡ï¼Œç„¶ååŸºäºå­åƒç´ çš„å¯è§æ€§ï¼ˆåŸºäºå­åƒç´ çš„æ·±åº¦/æ¨¡æ¿æµ‹è¯•ï¼‰å’ŒèŒƒå›´ï¼ˆå­åƒç´ ä¸­å¿ƒåœ¨å¤šè¾¹å½¢ä¹‹å¤–è¿˜æ˜¯ä¹‹å†…ï¼‰å…±äº«é¢œè‰²ä¿¡æ¯ã€‚ å¤šé‡é‡‡æ ·ç›´æ¥å¡«å……Directxçš„ç»“æ„ä½“å³å¯ 12345typedef struct DXGI_SAMPLE_DESC{ UINT Count; //ç”¨äºæŒ‡å®šæ¯ä¸ªåƒç´ çš„é‡‡æ ·æ•°é‡ UINT Quality; //ç”¨äºæŒ‡å®šå¸Œæœ›å¾—åˆ°çš„è´¨é‡çº§åˆ«} DXGI_SAMPLE_DESC, *LPDXGI_SAMPLE_DESC; ä¸åŒç¡¬ä»¶çš„è´¨é‡çº§åˆ«è¡¨ç¤ºçš„å«ä¹‰ä¸ä¸€å®šç›¸åŒï¼Œè´¨é‡çº§åˆ«è¶Šé«˜ï¼Œå ç”¨çš„ç³»ç»Ÿèµ„æºå°±è¶Šå¤šï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åœ¨è´¨é‡å’Œé€Ÿåº¦ä¹‹é—´æƒè¡¡åˆ©å¼Šã€‚å…·ä½“çš„è¯´æ˜åœ¨åé¢çš„d3dæ–‡ç« ä¸­ä»‹ç»ï¼Œè¿™é‡Œåªåšç†è®ºäº†è§£ é™„å½•å¤šåæ ‡ç³»å½“æˆ‘ä»¬è¿›è¡Œä¸‰ç»´åœºæ™¯è®¾è®¡æ—¶ï¼Œæˆ‘ä»¬æƒ³æ—‹è½¬å•ä¸ªç‰©ä½“è€Œä¸èƒ½å½±å“å…¶ä»–ç‰©ä½“ï¼Œå°±ä¸å¯èƒ½å»æ—‹è½¬ä¸–ç•Œåæ ‡ç³»ã€‚å› æ­¤å¼•å…¥äº†ç‰©ä½“åæ ‡ç³»ï¼Œåœ¨ä¸–ç•Œåæ ‡ç³»å’Œç‰©ä½“åæ ‡ç³»ä¸­é—´ä¸ºäº†æ–¹ä¾¿è½¬æ¢è¿˜å¼•å…¥äº†æƒ¯æ€§åæ ‡ç³»ï¼Œå¦‚ä¸‹ï¼Œä¸–ç•Œåæ ‡ç³»å’Œæƒ¯æ€§åæ ‡ç³»çš„è½¬æ¢åªéœ€è¦å¹³ç§»ï¼Œæƒ¯æ€§åæ ‡ç³»å’Œç‰©ä½“åæ ‡ç³»è½¬æ¢åªéœ€è¦æ—‹è½¬ æ—‹è½¬å’Œåæ ‡ç³»å˜æ¢æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªæ˜¯ç†è§£è§’åº¦ä¸åŒï¼Œä¸€ä¸ª active å˜æ¢ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåæ ‡ç³»è½¬æ¢å˜æ¢ï¼Œåä¹‹äº¦ç„¶ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½¿ç”¨å¤šä¸ªåæ ‡ç³»ç»Ÿæ›´ç¬¦åˆæ€ç»´ä¹ æƒ¯ï¼Œæˆ‘ä»¬å¯ä»¥è®©ç‰©ä½“è‡ªèº«ä¿æŒä¸å˜ï¼Œåªæ˜¯ä»ä¸€ä¸ªå‚è€ƒç³»è½¬æ¢åˆ°å¦ä¸€ä¸ªå‚è€ƒç³»ï¼Œç”±äºå‚è€ƒç³»å‘ç”Ÿäº†æ”¹å˜ï¼Œå› æ­¤ç‰©ä½“çš„åæ ‡ä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚åœ¨å¦ä¸€äº›æƒ…å†µä¸­ï¼Œæˆ‘ä»¬ä¸æƒ³æ”¹å˜å‚è€ƒç³»ï¼Œè€Œåªæƒ³åœ¨åŒä¸€ä¸ªå‚è€ƒç³»ä¸­å¯¹ç‰©ä½“è¿›è¡Œå˜æ¢ æ‰€ä»¥æ—‹è½¬çš„ä½œç”¨ä¸ä»…ä»…åœ¨æŸä¸ªåæ ‡ç³»ä¸Šæ—‹è½¬ç‰©ä½“ï¼Œè¿˜å¯ä»¥ç”¨äºæƒ¯æ€§åæ ‡ç³»å’Œç‰©ä½“åæ ‡ç³»ä¹‹é—´çš„åæ ‡è½¬æ¢ï¼Œæ¯”å¦‚å¯¹äºåŒä¸€ä¸ªâ€œi2oè½¬æ¢çŸ©é˜µâ€å¯ä»¥é€šè¿‡å¦‚ä¸‹æ—‹è½¬å…¬å¼ç›¸äº’è½¬æ¢ å…¶å®å’Œæ™®é€šçš„æ—‹è½¬æ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯è¯´ä¸€ä¸‹æ—‹è½¬æœ‰è¿™ç§ä½œç”¨è€Œå·² ä¸ºäº†æ¬§æ‹‰è§’çš„å”¯ä¸€æ€§ï¼ˆå¤šè½¬360Â°è¿˜æ˜¯åŒä¸€ä¸ªè§’åº¦ï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠheadingé™åˆ¶åœ¨-180Â° ~ +180Â°ï¼Œbanké™åˆ¶åœ¨-180Â° ~ +180Â°ï¼Œpitché™åˆ¶åœ¨-90Â° ~ +90Â° æ¬§æ‹‰è§’ä¹‹å‰è¯´è¿‡ç»•ä»»æ„è½´æ—‹è½¬å…¬å¼å¤æ‚ï¼Œè®¡ç®—æœºä¹Ÿéœ€è¦ä¿å­˜9ä¸ªè®¡ç®—å¤æ‚çš„å˜é‡ï¼Œæ¬§æ‹‰è§’å¯¹å…¶è¿›è¡Œäº†ç®€åŒ– æ¬§æ‹‰è§’æ˜¯ç”¨ä¸‰ä¸ªè§’åº¦è¡¨ç¤ºæ–¹ä½å’Œæ—‹è½¬ï¼Œç§°ä¸ºè§’ä½ç§»ï¼š headingè§’ï¼ˆä¹Ÿç§°ä½œyawè§’ï¼‰ï¼šå¸¸ç”¨äºæè¿°ç»•yè½´ï¼ˆå‚ç›´è½´ï¼‰é£æœºæ°´å¹³åèˆª pitchè§’ï¼šå¸¸ç”¨äºæè¿°ç»•xè½´é£æœºä½å¤´æŠ¬å¤´ bankè§’ï¼ˆä¹Ÿç§°ä½œrollè§’ï¼‰ï¼šå¸¸ç”¨äºæè¿°ç»•xè½´é£æœºè‡ªèº«ç¿»æ»š ä¸‰ä¸ªæ—‹è½¬è§’ç»•ç€ä¸‰ä¸ªç›¸äº’å‚ç›´çš„åæ ‡è½´ï¼ˆä¸‰ä¸ªè½´å¯ä»¥æ˜¯ä»»æ„çš„ï¼‰ï¼Œé€šå¸¸æ˜¯ç¬›å¡å°”åæ ‡ç³» æ³¨æ„ï¼šæ¬§æ‹‰è§’æ˜¯åŸºäºç‰©ä½“åæ ‡ç³»æ¥æ—‹è½¬çš„ï¼Œè€Œä¸æ˜¯åŸºäºä¸–ç•Œåæ ‡ç³»æ¥æ—‹è½¬çš„ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬ä½¿ç”¨æ¬§æ‹‰è§’æ—‹è½¬ä¸€ä¸ªç©ºé—´åæ ‡ä¸‹çš„ç‰©ä½“æ—¶ï¼Œè®°å¾—åšæƒ¯æ€§ç³»-&gt;ç‰©ä½“ç³»çš„æ—‹è½¬ ç¼ºç‚¹ è¡¨è¾¾ä¸å”¯ä¸€ï¼Œç»•æŸä¸ªè½´æ—‹è½¬360Â°è¿˜æ˜¯ä¸€æ ·çš„æ–¹ä½ æ’å€¼è®¡ç®—å¤æ‚ ä¸‡å‘é”é—®é¢˜ ä¸‡å‘é”é—®é¢˜å¾ˆå¤šåšå®¢ç”¨æ²¹ç®¡é‚£ä¸ªè‹±æ–‡è§†é¢‘ä¸¾ä¾‹ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿçœ‹è¿‡äº†ï¼Œç®€å•çš„è¯´ï¼Œæœ¬æ¥ä¸‰ä¸ªè§’åº¦æœ‰è‡ªå·±çš„ä½œç”¨ï¼Œå¯ä»¥æ§åˆ¶é£æœºçš„åèˆªã€ä¿¯ä»°ã€æ»šè½¬ã€‚ä½†æ˜¯è½¬åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ—¶å€™ æœ¬æ¥çº¢ç»¿è“ä¸‰ä¸ªåœˆåº”è¯¥æ˜¯ä¸¤ä¸¤å‚ç›´çš„ï¼Œè“å’Œç»¿è‡³å°‘æœ‰ä¸€ä¸ªåœ¨å›¾ä¸­çš„ç°è‰²åœˆé‡Œï¼ˆå‡†ç¡®çš„è¯´åº”è¯¥æ˜¯ç»¿åœˆï¼‰ç”¨äºæ§åˆ¶ä¿¯ä»°æ“ä½œï¼Œä½†æ˜¯ç°åœ¨æ²¡æœ‰äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªç®­å¤´ä¸èƒ½åšåˆ°ä¿¯ä»°æ“ä½œäº†ã€‚è½¬åŠ¨ç»¿åœˆçš„æ•ˆæœå’Œè½¬åŠ¨è“åœˆçš„æ•ˆæœå˜æˆä¸€æ ·äº†ï¼Œç»¿åœˆå°±ä»¿ä½›å¤±å»äº†ä»–çš„ä½œç”¨ã€‚ çŸ©é˜µå’Œæ¬§æ‹‰è§’çš„è½¬æ¢è¿™é‡Œä»¥ç‰©ä½“åæ ‡ç³»è½¬æ¢åˆ°æƒ¯æ€§åæ ‡ç³»ä¸ºä¾‹ï¼Œå…¶ä»–ä¹Ÿä¸€æ · æ¬§æ‹‰è§’-&gt;çŸ©é˜µï¼š å…¶å®å°±æ˜¯åˆ†åˆ«ç»•è½´æ—‹è½¬å†åšçŸ©é˜µä¹˜æ³•ï¼ˆä¸‹é¢è¿™ä¸¤å¼ å›¾æ˜¯å·¦æ‰‹åæ ‡ç³»æ‰€ä»¥çœ‹èµ·æ¥è·Ÿä¹‹å‰çš„ä¸å¤ªä¸€æ ·ï¼Œè‡ªè¡Œè½¬ç½®ï¼‰ çŸ©é˜µä¹˜æ³•ç»“æœå¦‚ä¸‹ï¼š è¿™é‡Œä»¥ç‰©ä½“åæ ‡ç³»è½¬æ¢åˆ°æƒ¯æ€§åæ ‡ç³»ä¸ºä¾‹ï¼Œå¦‚æœæ˜¯æƒ¯æ€§ç³»è½¬æ¢æˆç‰©ä½“åæ ‡ç³»ï¼Œåˆ™åšçŸ©é˜µçš„é€†ï¼Œè¿™é‡Œæ˜¯æ­£äº¤çŸ©é˜µï¼Œæ‰€ä»¥åšè½¬ç½®å³å¯ çŸ©é˜µ-&gt;æ¬§æ‹‰è§’ï¼š å…¶å®å°±æ˜¯é€šè¿‡çŸ©é˜µå¾—åˆ°h,b,pè§’åº¦å¤§å°ï¼Œå¯ä»¥ä»ä¸Šé¢çŸ©é˜µ ç”±m32å¾—ï¼šp = asin(-m32) ç”±m31å’Œm33ç›¸é™¤å¾—ï¼šh = atan(m31 / m33) = atan2(m31, m33) ç”±m12å’Œm22ç›¸é™¤å¾—ï¼šb = atan(m12 / m22) = atan2(m12, m22) åŒç†ï¼Œå¦‚æœæ˜¯æƒ¯æ€§-&gt;ç‰©ä½“åˆ™è½¬ç½® æ¬§æ‹‰è§’å’Œå››å…ƒæ•°çš„è½¬æ¢çœ‹å››å…ƒæ•°åŒç« èŠ‚ å››å…ƒæ•°å››å…ƒæ•°ç±»æ¯”å¤æ•°ï¼Œæ˜¯ä¸‰ç»´ä¸‹çš„å¤æ•° å¯ä»¥è¡¨ç¤ºä¸º[w (x y z)]ï¼Œxyzé€šå¸¸è¡¨ç¤ºæˆå‘é‡ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç®€å†™æˆ[w v] [w (x y z)] = w + xi + yj + zkï¼Œå…¶ä¸­iÂ² + jÂ² + kÂ² = -1 å››å…ƒæ•°çš„ä¸€äº›è¿ç®— è´Ÿå·ï¼š-q = -[w v] = [-w -v] å•ä½å››å…ƒæ•°ï¼š[1 (0 0 0)]å›¾å½¢å­¦è¡¨ç¤ºæ²¡æœ‰è§’ä½ç§»ä¹Ÿå°±æ˜¯æ²¡æœ‰æ—‹è½¬ æ±‚æ¨¡ï¼š||q|| = âˆš(wÂ² + xÂ² + yÂ² + zÂ²)ï¼Œå•ä½å››å…ƒæ•°æ¨¡åœºä¸º1 å…±è½­ï¼šq* = [w (-x -y -z)]å›¾å½¢å­¦è¡¨ç¤ºä¸ºæ²¿è´Ÿæ–¹å‘æ—‹è½¬ é€†ï¼šq^-1 = q* / ||q|| å¯¹æ•°ï¼šq = [cos Î¸/2 (sin Î¸/2)n]åˆ™log q = [0 nÎ¸/2] å·®ï¼šd = a^-1*bï¼Œä¹Ÿå°±æ˜¯d = b/aï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ‰€è°“çš„å·®å…¶å®æ˜¯é™¤æ³•ï¼Œä»£è¡¨çš„æ˜¯è§’ä½ç§»äº†å¤šå°‘ ç‚¹ä¹˜ï¼šq1q2 = w1w2 + x1x2 + y1y2 + z1z2 å›¾å½¢å­¦ä¸­ï¼Œå°†ç‰©ä½“ç»•ä»»æ„è½´çš„å‘é‡næ—‹è½¬ï¼Œå¯ä»¥è¡¨ç¤ºæˆå››å…ƒæ•° q = [cos Î¸/2 (sin Î¸/2)nx (sin Î¸/2)ny (sin Î¸/2)nz] æŠŠç‚¹pæ—‹è½¬qåˆ°ç‚¹pâ€˜ å¹‚ï¼šq^t = e^(t * log q)ï¼Œå‡ ä½•æ„ä¹‰ï¼šq = [cos Î¸/2 sin Î¸/2n]æ—¶è¡¨ç¤ºç»•næ—‹è½¬Î¸Â°ï¼Œåˆ™q^2è¡¨ç¤ºæ—‹è½¬2Î¸Â° çŸ©é˜µå’Œå››å…ƒæ•°çš„è½¬æ¢ä¸‹é¢è¿™ä¸ªçŸ©é˜µæ˜¯å·¦æ‰‹ç³»ä¸‹çš„ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸èƒ½ç›´æ¥å–ç¬¬ä¸€åˆ—çš„å…¬å¼è®¡ç®—wxyzï¼Œå› ä¸ºå¼€æ ¹å·ä¼šä¸¢å¤±æ­£è´Ÿä¿¡æ¯ï¼Œè€Œæ˜¯ç®—å‡ºwxyzæœ€å¤§çš„åï¼Œå†é€šè¿‡å¯¹åº”å³è¾¹çš„å…¬å¼è®¡ç®—å‰©ä½™ä¸‰ä¸ª ç»™å‡ºå…¶ä¸­çš„ä¸€ä¸ªwçš„æ¨å¯¼ï¼Œå…¶ä½™ç±»ä¼¼ï¼š æ¬§æ‹‰è§’å’Œå››å…ƒæ•°çš„è½¬æ¢ å››å…ƒæ•° -&gt; æ¬§æ‹‰è§’ å…ˆåˆ¤æ–­pè§’æ˜¯å¦ä¸º90Â°ï¼ˆæˆ–è€…åˆ¤æ–­sinp == 1ï¼‰ï¼Œæ˜¯çš„è¯ä¼šå‡ºç°ä¸‡å‘é”ï¼Œç›´æ¥p = sinp*pi/2ï¼ˆæ³¨æ„ä¸è¦ç›´æ¥å†™æˆpi/2ï¼Œè¦ç´¯è®¡è¯¯å·®ï¼‰ä¸æ˜¯çš„è¯æ‰æ˜¯ä¸‹é¢çš„å…¬å¼ ä¸‹é¢hè§’å’Œbè§’éƒ½æ˜¯åˆ†äº†ä¸‡å‘é”æƒ…å†µå’Œæ™®é€šæƒ…å†µ å››å…ƒæ•°æ’å€¼ç”¨è¿‡flashå°±çŸ¥é“ï¼Œå¦‚æœå¯¹äºä¸€ä¸ªç‰©ä½“åœ¨t0ã€t10æ—¶åˆ»çš„ä½ç½®ä¸åŒï¼Œä¸­é—´çš„â€œå…³é”®å¸§â€æ˜¯é€šè¿‡æ’å€¼è®¡ç®—å‡ºæ¥çš„ï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬ä¸ºæ¯ä¸ªæ—¶åˆ»éƒ½ç»˜åˆ¶ä¸€å¹…å›¾åƒï¼Œè¿™å°±æ˜¯æ’å€¼ çƒé¢çº¿æ€§æ’å€¼â€œslerpâ€ å¯¹äºå››å…ƒæ•°è¡¨ç¤ºçš„åŸè§’åº¦q0ï¼Œæ–°è§’åº¦q1ï¼Œæ’å€¼å‡½æ•°ä¸º tçš„èŒƒå›´æ˜¯[-1, 1]ï¼Œå…¶å®å¾ˆå¥½ç†è§£ï¼ŒÎ”qå°±æ˜¯åšå·®å˜›ï¼Œå‰é¢è¯´è¿‡å››å…ƒæ•°çš„å·®å…¶å®æ˜¯åšé™¤æ³•ï¼Œtå°±æ˜¯æè¿°äº†ä¸€ä¸ªç±»ä¼¼äºæ—¶é—´çš„ä¸œè¥¿ï¼Œæˆ–è€…ç†è§£ä¸ºä¸­é—´çš„å‡ åˆ†ä¹‹ä¸€ æ—‹è½¬æ’å€¼ å¦ä¸€ç§æ›´ä¾¿äºè®¡ç®—æœºå®ç°çš„æ–¹å¼æ˜¯ä½¿ç”¨è§’åº¦Ï‰è¿›è¡Œæ—‹è½¬æ’å€¼ å¦‚ä¸‹å›¾ä¸¤ä¸ªå•ä½å‘é‡çš„ä½ç½®v0v1ï¼Œæˆ‘ä»¬ä¸å†è®¤ä¸ºv1 = v0 + tÏ‰ï¼Œè€Œæ˜¯è®¤ä¸ºv0å’Œv1éƒ½ä¹˜ä¸€ä¸ªç³»æ•°åå¹³ç§»å†åšå‘é‡åŠ æ³• å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¾¿åªéœ€è¦æ±‚å‡ºk0å’Œk1åˆ°åº•æ˜¯å¤šå°‘å³å¯ï¼š å°†k0k1ä»£å…¥å‰é¢çš„å…¬å¼v1 = k0v0 + k1v1å³å¯ï¼Œè¿™æ˜¯å¯¹äºä¸¤ä¸ªå•ä½å‘é‡ï¼Œç±»æ¯”ä¸€ä¸‹æ¢æˆä¸¤ä¸ªå››å…ƒæ•°å¯å¾— btwï¼šè¿™ä¸ªÏ‰å¯ä»¥é€šè¿‡å››å…ƒæ•°çš„ç‚¹ä¹˜æ±‚å‡ºæ¥ï¼Œå› ä¸ºå››å…ƒæ•°çš„ç‚¹ä¹˜å®é™…ä¸Šè·Ÿå‘é‡çš„ç‚¹ä¹˜å·®ä¸äº†å¤šå°‘ï¼Œåªæ˜¯å¤šäº†ä¸ªwï¼Œé‚£ä¹ˆcosÏ‰ = q0ç‚¹ä¹˜q1 åœ¨å®ç°çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å‰é¢å‘é‡çš„ç‚¹ä¹˜æˆ‘ä»¬è¯´è¿‡coså¯ä»¥ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå‘é‡çš„åŒå‘åå‘ï¼Œè¿™é‡Œè¡¨ç°ä¸ºv0è½¬åˆ°v1æ˜¯é¡ºæ—¶é’ˆå¤§åŠåœˆå‘¢è¿˜æ˜¯é€†æ—¶é’ˆå°åŠåœˆå‘¢ï¼Ÿè™½ç„¶è¿™é‡Œå››å…ƒæ•°æ­£è´Ÿéƒ½æ˜¯åŒä¸€ä¸ªæ–¹ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨é’è§’çš„æƒ…å†µä¸‹æ—‹è½¬åˆ°ä»–çš„åå‘ï¼Œä¹Ÿå°±æ˜¯æ€»æ˜¯æŒ‘æœ€å°çš„é‚£ä¸ªæ–¹å‘è¿›è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å®ç°æ—¶æœ€å¥½æœ‰å¦‚ä¸‹åˆ¤æ–­ 12345678910111213141516//å¦‚æœä¸ºé’è§’ï¼Œé‚£ä¹ˆä¸æ—‹è½¬åˆ°ä»–é‚£é‡Œï¼Œè€Œæ˜¯æ—‹è½¬åˆ°ä»–çš„åå‘if(cosOmega &lt; 0.0f){ q1w = -q1w; q1x = -q1x; q1y = -q1y; q1z = -q1z; cosOmega = -cosOmega;}//å¦‚æœå¤¹è§’å¾ˆå°ï¼Œä¸ºäº†å‡å°è®¡ç®—é‡ï¼Œç›´æ¥è®¤ä¸ºèµ°ç›´çº¿if(cosOmega &gt; 0.9999f){ k0 = 1.0f - t; k1 = t;}else{ //æ—‹è½¬æ’å€¼å…¬å¼} å‡ ç§æ–¹æ³•å¯¹æ¯” ä»»åŠ¡/æ€§è´¨ çŸ©é˜µ æ¬§æ‹‰è§’ å››å…ƒæ•° åæ ‡ç³»é—´æ—‹è½¬ç‚¹ èƒ½ ä¸èƒ½ï¼ˆè½¬æ¢æˆçŸ©é˜µï¼‰ ä¸èƒ½ï¼ˆè½¬æ¢æˆçŸ©é˜µï¼‰ è¿æ¥æˆ–å¢é‡æ—‹è½¬ èƒ½ï¼Œä½†æ¯”å››å…ƒæ•°æ…¢ï¼Œå°å¿ƒçŸ©é˜µè •å˜æƒ…å†µ ä¸èƒ½ èƒ½ï¼Œæ¯”çŸ©é˜µå¿« æ’å€¼ åŸºæœ¬ä¸Šä¸èƒ½ èƒ½ä½†å¯èƒ½é­é‡ä¸‡å‘é” Slerpæä¾›äº†å¹³æ»‘æ’å€¼ æ˜“ç”¨ç¨‹åº¦ éš¾ æ˜“ éš¾ å ç”¨å¤§å° 9ä¸ªæ•° 3ä¸ªæ•° 4ä¸ªæ•° æ˜¯å¦èƒ½å”¯ä¸€è¡¨ç¤ºç»™å®šæ–¹ä½ æ˜¯ ä¸æ˜¯ï¼ŒåŒä¸€æ–¹ä½æœ‰æ— æ•°ç§è¡¨è¾¾ ä¸æ˜¯ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä»–ä»¬ç›¸äº’ä¸ºè´Ÿ å¯èƒ½å¯¼è‡´éæ³• çŸ©é˜µè •å˜ ä»»æ„ä¸‰ä¸ªæ•°éƒ½èƒ½æ„æˆåˆæ³•çš„æ¬§æ‹‰è§’ å¯èƒ½ä¼šå‡ºç°è¯¯å·®ç§¯ç´¯ä»è€Œéæ³• æ²¡æœ‰æœ€å¥½çš„æ–¹æ³•ï¼Œæ ¹æ®éœ€æ±‚ï¼Œå¹¶ä¸”å‡ ç§æ–¹æ³•ä¹‹é—´å¯ä»¥ç›¸äº’è½¬æ¢","link":"/games/3DMath-Primerfor-Graphics-and-Game-Development-note/"},{"title":"456-132æ¨¡å¼","text":"åŠ›æ‰£456 https://leetcode-cn.com/problems/132-pattern/ å•è°ƒæ ˆé¢˜ç›®ï¼Œç”¨çš„å¾ˆå·§å¦™ï¼Œä¸æ˜¯æ™®é€šçš„æ— è„‘å•è°ƒæ ˆï¼Œè¿˜æ¶‰åŠåˆ°å•è°ƒæ ˆçš„ä¸€ä¸ªè§„å¾‹ï¼šå¾ªç¯å‡ºæ ˆæ—¶ï¼Œå‡ºæ ˆçš„åºåˆ—ä¹Ÿæ»¡è¶³åå‘å•è°ƒæ ˆçš„ç‰¹ç‚¹ã€‚æ¯”å¦‚ä¸‹å›¾é€’å‡æ ˆåœ¨4å…¥æ ˆæ—¶ï¼š æ ¹æ®è¿™ä¸€ç°è±¡ï¼Œå¯ä»¥æ‰¾åˆ°ï¼šæ¯”å…¥æ ˆå€¼çš„å¤§/å°çš„æœ€å¤§æœ€å°å€¼ æœ¬é¢˜æ€è·¯ï¼šæ•°ç»„ä¸­æƒ³æ‰¾132ï¼Œæœºä¼šæœ€å¤§çš„å½“ç„¶æ˜¯1è¶Šå°è¶Šå¥½ï¼Œ2è¶Šæ¥è¿‘3è¶Šå¥½ï¼Œ2è¶Šå¤§è¶Šå¥½(ä¹Ÿå¯ä»¥è¯´æˆ3è¶Šå¤§è¶Šå¥½ï¼Œå› ä¸ºâ€œ2è¶Šæ¥è¿‘3è¶Šå¥½â€) æˆ‘ä»¬ä»åå¾€å‰éå†ï¼Œå…ˆæ‰¾æ¯”2å¤§çš„3ï¼Œå› æ­¤æ„é€ å•è°ƒé€’å‡æ ˆï¼Œæ ˆå­˜çš„æ˜¯æ¯ä¸€ä¸ªâ€œ3â€ï¼Œéšç€æ ˆçš„æ…¢æ…¢è¿­ä»£ï¼Œæ ˆé¡¶3ä¼šè¶Šæ¥è¶Šé«˜ï¼Œæ»¡è¶³äº†â€œ3è¶Šå¤§è¶Šå¥½â€çš„é¢˜æ„ã€‚æ ¹æ®å‰é¢æåˆ°çš„æ€§è´¨ï¼Œå‡ºæ ˆçš„åºåˆ—æ˜¯é€’å¢æ ˆï¼Œå½“é‡åˆ°ä¸€ä¸ªå³°é¡¶â€œ3â€æ—¶ï¼Œæœ€åä¸€ä¸ªå‡ºæ ˆçš„å°±æ˜¯æ¯”â€œ3â€å°çš„æœ€å¤§çš„2ï¼Œå­˜èµ·æ¥ï¼Œç»§ç»­éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æ¯”å½“å‰å€¼ï¼ˆ1ï¼‰å’Œå­˜èµ·æ¥çš„ï¼ˆ2ï¼‰ï¼Œå°±çŸ¥é“æ˜¯å¦æ»¡è¶³132æ¨¡å¼äº† 1234567891011121314//ä»å³å¾€å·¦æ„é€ å•è°ƒé€’å‡æ ˆpublic boolean find132pattern(int[] nums) { Deque&lt;Integer&gt; stack = new LinkedList&lt;&gt;();//å•è°ƒé€’å‡æ ˆï¼Œå­˜å€¼æ¯”å­˜ä¸‹æ ‡ç®€å•ï¼Œä»£è¡¨äº†132ä¸­çš„3 int theTwo = Integer.MIN_VALUE; for(int i = nums.length - 1; i &gt;= 0; i--){ if(nums[i] &lt; theTwo) return true; while(!stack.isEmpty() &amp;&amp; nums[i] &gt; stack.peekLast()){ theTwo = stack.pollLast(); //æœ€åä¸€ä¸ªå‡ºçš„è‚¯å®šæ˜¯æ¯”å½“å‰å…¥æ ˆå°çš„æœ€å¤§å€¼ } stack.offerLast(nums[i]); } return false;} æ€»ä¹‹ï¼Œå¾ˆå·§å¦™æˆ‘è§‰å¾— å…¶ä»–å•è°ƒæ ˆç³»åˆ—é¢˜å¯ä»¥ç‚¹è¿™é‡Œ","link":"/algorithms/132-pattern/"},{"title":"48-æ—‹è½¬å›¾åƒ","text":"åŠ›æ‰£48 https://leetcode-cn.com/problems/rotate-image/ æ‰€è°“åŸåœ°æ—‹è½¬ï¼Œå°±æ˜¯ä¸èƒ½æ–°å»ºä¸€ä¸ªæ•°ç»„ æ€è·¯1ï¼šè®¡ç®—æŸä¸ªç‚¹è·ç¦»ä¸Šä¸‹å·¦å³çš„åæ ‡ï¼Œä¸€æ¬¡å¾ªç¯ç¿»è½¬4ä¸ªå€¼ 123456789101112131415161718192021222324252627|- - - - - - - - - - - - - - - - -|| â†‘ || toTop || â†“ || â† toLeft â†’ o â† - - toRight - - â†’|| â†‘ | | | | | toBottom || | | | â†“ | |- - - - - - - - - - - - - - - - -|æ—‹è½¬è¿‡å|- - - - - - - - - - - - - - - - -|| â†‘ || toLeft || â†“ || â† - - toBottom - - â†’ o â† toTop â†’|| â†‘ | | | | | toRight || | | | â†“ | |- - - - - - - - - - - - - - - - -|å››ä¸ªä¸€å‘¨æœŸç‚¹aæ—‹è½¬åå äº†bçš„ä½ç½®ï¼Œbå äº†cçš„ä½ç½®ï¼Œcå äº†dçš„ä½ç½®ï¼Œdä¸€å®šä¼šå›åˆ°açš„ä½ç½® ç”¨ä¸ªå˜é‡è®°å½•ä¸‹æ¥ï¼Œæˆ–è€…pythonçš„è¯å¯ä»¥ç›´æ¥a, b, c, d = b, c, d, a 1234567891011121314public void rotate(int[][] matrix) { int row = (matrix.length % 2 == 0) ? (matrix.length / 2) : (matrix.length / 2 + 1); for (int i = 0; i &lt; row; i++) { for (int j = 0; j &lt; matrix[0].length / 2; j++) { int toTop = i, toRight = matrix[0].length - j - 1, toBottom= matrix.length - i - 1, toLeft = j; //å››ä¸ªæ—‹è½¬åæ ‡äº¤æ¢ int temp = matrix[toTop][toLeft]; matrix[toTop][toLeft] = matrix[toRight][toTop]; matrix[toRight][toTop] = matrix[toBottom][toRight]; matrix[toBottom][toRight] = matrix[toLeft][toBottom]; matrix[toLeft][toBottom] = temp; } }} æ€è·¯2ï¼šè½¬ç½®+å¯¹ç§° é¡ºæ—¶é’ˆï¼šè½¬ç½®+å·¦å³å¯¹ç§° 180Â°ï¼šä¸Šä¸‹å¯¹ç§°+å·¦å³å¯¹ç§° é€†æ—¶é’ˆï¼šè½¬ç½®+ä¸Šä¸‹å¯¹ç§° 12345678910111213141516171819public void rotate2(int[][] matrix) { //çŸ©é˜µè½¬ç½® for(int i=0;i&lt;matrix.length;i++){ for(int j=0;j&lt;i;j++){ int tem=matrix[j][i]; matrix[j][i]=matrix[i][j]; matrix[i][j]=tem; } } //å·¦å³ç¿»è½¬ for(int i=0;i&lt;matrix.length;i++){ for(int j = 0; j &lt; matrix.length / 2; j++){ int tem = matrix[i][matrix.length - 1 - j]; matrix[i][matrix.length - 1 - j] = matrix[i][j]; matrix[i][j] = tem; } }} å…¶ä»–é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/rotate-image/"},{"title":"54-èºæ—‹çŸ©é˜µ","text":"åŠ›æ‰£54 https://leetcode-cn.com/problems/spiral-matrix/ æˆ‘è®°å¾—æ˜¯åœ¨acwingé‡Œé¢å­¦çš„ï¼Œdx,dyä½œä¸ºå¯¼å‘ï¼Œæ¯æ¬¡åªè¦x += dx[t]å³å¯ï¼Œä¸ç”¨ä¸Šä¸‹å·¦å³è€ƒè™‘æ˜¯åŠ è¿˜æ˜¯å‡ï¼Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ 1234567891011121314151617181920212223public List&lt;Integer&gt; spiralOrder(int[][] matrix) { List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); if(matrix == null || matrix.length == 0 || matrix[0].length == 0) return res; int[] dx = {0, 1, 0, -1}; //æ–¹å‘æŒ‡å¼• int[] dy = {1, 0, -1, 0}; int x = 0, y = -1, t = 0; //tä»£è¡¨ç¬¬å‡ æ¬¡æ–¹å‘ï¼Œx,yåˆå€¼æ˜¯å› ä¸ºä¸€å¼€å§‹å¾€å³èµ° boolean[][] isPass = new boolean[matrix.length][matrix[0].length]; for(int i = 0; i &lt; matrix.length * matrix[0].length; i++){ if(!check(matrix, x + dx[t], y + dy[t], isPass)){ //è½¬å‘ t = (t + 1) % 4; } x += dx[t]; y += dy[t]; res.add(matrix[x][y]); isPass[x][y] = true; } return res;}public boolean check(int[][] matrix, int x, int y, boolean[][] isPass){ return x &gt;= 0 &amp;&amp; x &lt; matrix.length &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; matrix[0].length &amp;&amp; !isPass[x][y];} å…¶ä»–é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/spiral-matrix/"},{"title":"496-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ I","text":"åŠ›æ‰£496 https://leetcode-cn.com/problems/next-greater-element-i/ å•è°ƒæ ˆç®€å•é¢˜ï¼Œæ‰¾ä¸‹ä¸€ä¸ªæœ€å¤§å€¼ï¼Œå› æ­¤ç”¨é€’å‡æ ˆéå†nums2ï¼Œå› ä¸ºnums1è¦å®šä½æŸ¥ï¼Œæ‰€ä»¥å°†ç»“æœæ”¾å…¥mapä¸­ è¿™é¢˜æ²¡ä»€ä¹ˆå¥½è®²çš„äº†ï¼Œæ‰€è°“ç®€å•é¢˜ï¼Œæ¨¡æ¿ä¸€å¥—å°±vansäº† 12345678910111213141516public int[] nextGreaterElement(int[] nums1, int[] nums2) { Deque&lt;Integer&gt; stack = new LinkedList&lt;&gt;(); Map&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(); //æ•°å­—ï¼šä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  for (int i = 0; i &lt; nums2.length; i++) { while (!stack.isEmpty() &amp;&amp; nums2[i] &gt; stack.peekLast()){ //æ‰¾åˆ°äº†æ¯”ä»–å¤§çš„å…ƒç´  map.put(stack.pollLast(), nums2[i]); } stack.offerLast(nums2[i]); } //ä»åœ¨æ ˆä¸­è€Œä¸åœ¨mapä¸­çš„å…ƒç´ å°±æ˜¯-1 int[] res = new int[nums1.length]; for (int i = 0; i &lt; nums1.length; i++) { res[i] = map.getOrDefault(nums1[i], -1); } return res;} å…¶ä»–å•è°ƒæ ˆç³»åˆ—é¢˜å¯ä»¥ç‚¹è¿™é‡Œ","link":"/algorithms/next-greater-element-i/"},{"title":"5-æœ€é•¿å›æ–‡å­ä¸²","text":"åŠ›æ‰£5 https://leetcode-cn.com/problems/longest-palindromic-substring/ æ€è·¯å¾ˆæœ‰æ„æ€å¾ˆé«˜é¢‘çš„ä¸€é“é¢˜ï¼Œæˆ‘çš„æ€è·¯å†ç¨‹æ˜¯è¿™æ ·çš„ï¼š ç¡®å®šå·¦å³ç„¶åå¯¹åŒºé—´åˆ¤æ–­ï¼Ÿ ä¸å¯¹â€”&gt;åº”è¯¥æ˜¯ä»¥iä¸ºä¸­é—´å¾€ä¸¤è¾¹æ‰©æ•£ â€œabaâ€å’Œâ€abbaâ€å¥½åƒä¸ä¸€æ ·å•Šï¼Ÿ åªæ˜¯lå’Œråˆå§‹å€¼ä¸èƒ½æ˜¯ç­‰äºiï¼Œè€Œæ˜¯ç›¸åŒå­—æ¯çš„å·¦å³è¾¹ç•Œï¼Œè¿™æ ·ä¸¤ç§æƒ…å†µå°±ä¸€æ ·äº† æƒ³æ˜ç™½äº†è¿™ä¸¤ç‚¹ 1234567891011121314151617181920212223public String longestPalindrome(String s) { if (s == null || s.length() == 0) return \"\"; char[] chars = s.toCharArray(); int[] idx = new int[2]; //ç”¨æ¥å­˜æœ€é•¿çš„ç»“æœçš„å·¦å³ä¸‹æ ‡ï¼Œä¸è¦æ¯æ¬¡éƒ½substringï¼Œè¿™æ ·å¤ªæ…¢ for (int i = 0; i &lt; chars.length; i++) { int l = i, r = i; //ä»ä¸­é—´å‘ä¸¤è¾¹æ‰¾ //lå’Œråˆå§‹å€¼åº”è¯¥æ˜¯ç›¸åŒå­—æ¯çš„å·¦å³è¾¹ç•Œ while (l - 1 &gt;= 0 &amp;&amp; chars[l - 1] == chars[i]) l--; while (r + 1 &lt; chars.length &amp;&amp; chars[r + 1] == chars[i]) r++; while (l - 1 &gt;= 0 &amp;&amp; r + 1 &lt; chars.length){ if (chars[l - 1] != chars[r + 1]){ break; } l--; //å·¦å³æ‰©æ•£ r++; } if ((r - l) &gt; (idx[1] - idx[0])){ idx[0] = l; idx[1] = r; } } return s.substring(idx[0], idx[1] + 1);} ä¼˜åŒ–[a]ä»£è¡¨å½“å‰éå†åˆ°äº†å“ªé‡Œ å¯¹äºb[b]bbbå’Œ bb[b]bbæˆ‘ä»¬å¯ä»¥å‘ç°å…¶å®å®šä½lå’Œrçš„åˆå§‹å€¼åæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è·³è¿‡è¿™å‡ ç§ï¼Œå…·ä½“æœ‰ä»¥ä¸‹ä¸¤ç‚¹è¦åš å®šä½å®Œråï¼Œç›´æ¥è®©i = rï¼Œè·³è¿‡ä¸­é—´çš„æ‰€æœ‰bï¼ˆ[b]bbbbâ€”&gt;bbbb[b]ï¼‰ è¿™æ ·æ“ä½œåå®é™…ä¸Šæ²¡æœ‰iåœ¨ä¸­é—´çš„æƒ…å†µï¼ˆb[b]bbbï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬å®é™…ä¸Šåªæ‰¾äº†æœ€å·¦è¾¹é‚£æ¬¡ï¼Œæ‰€ä»¥å¯ä»¥ä¸ç”¨å†å®šä½lï¼Œåªéœ€è¦å®šä½r 1234567891011121314151617181920212223public String longestPalindrome(String s) { if (s == null || s.length() == 0) return \"\"; char[] chars = s.toCharArray(); int[] idx = new int[2]; for (int i = 0; i &lt; chars.length; i++) { int l = i, r = i; //while (l - 1 &gt;= 0 &amp;&amp; chars[l - 1] == chars[i]) l--; //ä¼˜åŒ–2ï¼Œå®é™…ä¸Šä¸éœ€è¦æ‰¾å·¦è¾¹äº† while (r + 1 &lt; chars.length &amp;&amp; chars[r + 1] == chars[i]) r++; i = r; //ä¼˜åŒ–1ï¼Œè·³è¿‡ä¸­é—´éƒ¨åˆ†ï¼Œç›´æ¥å®šä½åˆ°åŒå­—æ¯çš„æœ€åä¸€ä¸ª while (l - 1 &gt;= 0 &amp;&amp; r + 1 &lt; chars.length){ if (chars[l - 1] != chars[r + 1]){ break; } l--; r++; } if ((r - l) &gt; (idx[1] - idx[0])){ idx[0] = l; idx[1] = r; } } return s.substring(idx[0], idx[1] + 1);} åè®°ï¼Œå‡†å¤‡å°†åŸæ¥çš„ä¸€äº›é¢˜ç›®é‡åšä¸€ä¸‹ï¼Œæœ‰ä¸€äº›é¢˜ç›®çœŸçš„æ˜¯æ„Ÿè§‰å¾—å‡ºä¸€å®šæ˜¯é«˜é¢‘é¢˜ï¼Œæ¯”å¦‚é“¾è¡¨åè½¬ï¼Œæœ€é•¿å›æ–‡ï¼Œæœ€é•¿ä¸é‡å¤ï¼Œæœ€å¤§å­æ•°ç»„â€¦æ¥ä¸‹æ¥ä¼šé‡åšè¿™äº›é¢˜ç›® å‚è€ƒ è¯„è®ºåŒºç³–ä¸¶7çš„æ–¹æ³• å…¶ä»–å­—ç¬¦ä¸²ç±»å‹çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/longest-palindromic-substring/"},{"title":"480-æ»‘åŠ¨çª—å£ä¸­ä½æ•°","text":"åŠ›æ‰£480 https://leetcode-cn.com/problems/sliding-window-median/ é¦–å…ˆè€ƒè™‘æš´åŠ›æ³•ï¼Œæ¯æ¬¡æˆªå–å…¶ä¸­çš„çª—å£å¹¶è¿›è¡Œæ’åºï¼Œç„¶åå–ä¸­ä½æ•°ï¼ŒO(n^2 * logn) 123456789101112131415161718192021public double[] medianSlidingWindow(int[] nums, int k) { if (nums == null || nums.length == 0){ return new double[]{0.0}; } double[] res = new double[nums.length - k + 1]; for (int i = 0; i &lt; nums.length - k + 1; i++) { int[] arr = new int[k]; System.arraycopy(nums, i, arr, 0, k); //æ’åº Arrays.sort(arr); int mid = k / 2; if (k % 2 == 0){ res[i] = arr[mid - 1] / 2.0 + arr[mid] / 2.0; }else{ res[i] = arr[mid]; } } return res;} æ»‘åŠ¨çª—å£æ–¹æ³•ï¼Œç¬¬ä¸€æ¬¡çª—å£å¡«å€¼å¹¶æ’å¥½åºï¼Œåé¢çš„åªéœ€è¦åˆ é™¤æ—§çš„çª—å£å…ƒç´ å’ŒåŠ å…¥æ–°çš„çª—å£å…ƒç´ ï¼Œä¸”åŠ å…¥æ–°çª—å£å…ƒç´ æ—¶å¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾åº”è¯¥æ’å…¥çš„ä½ç½®ï¼ŒO(n^2) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public double[] medianSlidingWindow2(int[] nums, int k) { if (nums == null || nums.length == 0){ return new double[0]; } double[] res = new double[nums.length - k + 1]; int mid = k / 2; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; k; i++) { list.add(nums[i]); } Collections.sort(list); for (int i = 0; i &lt; nums.length - k + 1; i++) { //åŠ å…¥ç»“æœé›† if (k % 2 == 0){ res[i] = list.get(mid - 1) / 2.0 + list.get(mid) / 2.0; }else{ res[i] = list.get(mid); } if (i + k == nums.length) break; //å»æ‰ä¸€ä¸ª list.remove(Integer.valueOf(nums[i])); //æ’å…¥æ–°çš„ int idx = findIndex(list, nums[i + k]); list.add(idx, nums[i + k]); } return res;}/** * äºŒåˆ†æŸ¥æ‰¾ */public int findIndex(List&lt;Integer&gt; nums, int target){ int l = 0, r = nums.size() - 1, mid; while(l &lt;= r){ mid = l + (r - l) / 2; if(target &lt; nums.get(mid)) r = mid - 1; else if(target == nums.get(mid)) return mid; else if(target &gt; nums.get(mid)) l = mid + 1; } return l;} æœ€ç»ˆä¼˜åŒ–ï¼šå’Œ2æ€æƒ³ä¸€æ ·ï¼Œåªæ˜¯è¯¥é¢˜å…¶å®çª—å£ä»å¤´åˆ°å°¾éƒ½æ˜¯æœ‰åºçš„ï¼Œç»†èŠ‚ä¼˜åŒ–ä¸ºå…¨å±€éƒ½ä½¿ç”¨äºŒåˆ†ï¼ŒO(n * logn) ä¼˜åŒ–1ï¼šç¬¬ä¸€æ¬¡çª—å£å¡«å€¼å°±å¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ’å…¥å¯¹åº”ä½ç½®ï¼Œæ— éœ€æ’åº ä¼˜åŒ–2ï¼šä¸æ­¢æ˜¯åŠ å…¥æ–°å…ƒç´ çš„æ—¶å€™ç”¨äºŒåˆ†ï¼Œåˆ é™¤æ—§å…ƒç´ çš„æ—¶å€™ä¹Ÿå¯é€šè¿‡äºŒåˆ†æŸ¥æ‰¾ä½ç½®ï¼Œè¿™æ ·è°ƒç”¨removeå°±ä¸ç”¨éå†æŸ¥æ‰¾äº† 1234567891011121314151617181920212223242526272829303132333435363738public double[] medianSlidingWindow3(int[] nums, int k) { if (nums == null || nums.length == 0){ return new double[0]; } double[] res = new double[nums.length - k + 1]; int mid = k / 2; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; k; i++) { //ä¼˜åŒ–ï¼šæ’å…¥çš„æ—¶å€™å°±å¯ä»¥å†åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾é¡ºä¾¿æ’å¥½åº int idx = findIndex(list, nums[i]); list.add(idx, nums[i]); } for (int i = 0; i &lt; nums.length - k + 1; i++) { //åŠ å…¥ç»“æœé›† if (k % 2 == 0){ res[i] = list.get(mid - 1) / 2.0 + list.get(mid) / 2.0; }else{ res[i] = list.get(mid); } if (i + k == nums.length) break; //å»æ‰ä¸€ä¸ª //ä¼˜åŒ–ï¼šå»æ‰çš„æ—¶å€™ä¹Ÿå¯ä»¥åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾åˆ é™¤ï¼Œå°±å¯ä»¥removeä¸‹æ ‡è€Œä¸æ˜¯removeå…ƒç´  int idx = findIndex(list, nums[i]); list.remove(idx); //æ’å…¥æ–°çš„ idx = findIndex(list, nums[i + k]); list.add(idx, nums[i + k]); } return res;}//findIndexæ–¹æ³•å’Œè§£æ³•2å®Œå…¨ä¸€è‡´ pythonå®ç° 123456789101112131415161718192021222324252627282930313233343536373839404142434445def medianSlidingWindow3(self, nums: List[int], k: int) -&gt; List[float]: if nums is None or len(nums) == 0: return [] mid = k // 2 res = [] li = nums[: k] li.sort() for i, num in enumerate(nums): # åŠ å…¥ç»“æœé›† if k % 2 == 0: res.append(li[mid - 1] / 2 + li[mid] / 2) else: res.append(li[mid]) if i + k == len(nums): break # å»æ‰ä¸€ä¸ª idx = self.find_index(li, nums[i]) del(li[idx]) # æ’å…¥æ–°çš„ idx = self.find_index(li, nums[i + k]) li.insert(idx, nums[i + k]) return resdef find_index(self, nums, target) -&gt; int: \"\"\" äºŒåˆ†æŸ¥æ‰¾ \"\"\" l, r, mid = 0, len(nums) - 1, 0 while l &lt;= r: mid = l + (r - l) // 2 if target &lt; nums[mid]: r = mid - 1 elif target == nums[mid]: return mid else: l = mid + 1 return l å…¶ä»–æ»‘åŠ¨çª—å£ç±»å‹çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/sliding-window-median/"},{"title":"515-åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼","text":"åŠ›æ‰£515 https://leetcode-cn.com/problems/find-largest-value-in-each-tree-row/ ä¹Ÿå°±æ˜¯æ‰¾æ¯è¡Œçš„æœ€å¤§å€¼ æ€è·¯ä¸€ï¼šbfså±‚æ¬¡éå†æ¯è¡Œå˜›ï¼Œæ‰¾æœ€å¤§å€¼å¹¶åŠ å…¥res æ€è·¯äºŒï¼šdfsæ·±åº¦ä¼˜å…ˆï¼Œresä¸­è®°å½•æ¯è¡Œçš„æœ€å¤§å€¼ï¼Œé€šè¿‡levelå›æº¯å‚æ•°å®šä½ç°åœ¨æ˜¯ç¬¬å‡ è¡Œï¼Œæ›´æ–°res.set(level - 1, max(res.get(level - 1), å½“å‰èŠ‚ç‚¹å€¼)); bfså†™æ³• 123456789101112131415161718public List&lt;Integer&gt; largestValues(TreeNode root) { List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); if (root == null) return res; Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); queue.offer(root); while(!queue.isEmpty()){ int levelMax = Integer.MIN_VALUE; int size = queue.size(); for(int i = 0; i &lt; size; i++){ //åˆ†å±‚å±‚æ¬¡éå†æ¨¡æ¿ TreeNode cur = queue.poll(); levelMax = Math.max(levelMax, cur.val); if(cur.left != null) queue.offer(cur.left); if(cur.right != null) queue.offer(cur.right); } res.add(levelMax); } return res;} dfså†™æ³• 12345678910111213141516private List&lt;Integer&gt; res = new ArrayList&lt;&gt;();public List&lt;Integer&gt; largestValues2(TreeNode root) { dfs(root, 1); return res;}public void dfs(TreeNode node, int level){ if (node == null) return ; if (level == res.size() + 1){ res.add(node.val); }else{ res.set(level - 1, Math.max(res.get(level - 1), node.val)); } dfs(node.left, level + 1); dfs(node.right, level + 1);} dfsç¡®å®æ¯”bfså¿«ï¼Œç”±4msæé«˜åˆ°1msï¼Œæ–‡å¾·æå‡ºçš„è¿™ä¸ªdfsè§£æ³•è¿˜æ˜¯ä¸é”™çš„ å…¶ä»–æ ‘çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/find-largest-value-in-each-tree-row/"},{"title":"53-æœ€å¤§å­åºå’Œ","text":"åŠ›æ‰£53 https://leetcode-cn.com/problems/maximum-subarray/ å­åºdpç³»åˆ—çœŸçš„å¾ˆé¡¶ çœ‹[4,-1,2]éƒ¨åˆ†ï¼Œå¯ä»¥è§‚å¯Ÿå‡ºè¿™éƒ¨åˆ†æœ€å¤§å­åºå’Œæ˜¯5ï¼Œè¦å¾—åˆ°5ï¼Œæ‰€ä»¥dp[i] = dp[i - 1] + nums[i] çœ‹[-2,1]ï¼Œæœ€å¤§å­åºå’Œåº”è¯¥ç›´æ¥å–1ï¼Œä¹Ÿå°±æ˜¯åŠ äº†ä¸å¦‚ä¸åŠ ï¼Œå› ä¸ºä¸å¦‚å½“å‰çš„ï¼Œæ‰€ä»¥æ˜¯dp[i] = max(dp[i-1] + nums[i], nums[i]) æƒ³ä¸€æƒ³å°±çŸ¥é“éœ€è¦ä¸ä¸€æ ·çš„ä¸¤æ®µä¹‹é—´æ¯”å¤§å°ï¼Œæ‰€ä»¥ä¸æ˜¯ä¸€ç›´ç´¯åŠ dpï¼Œè€Œæ˜¯è¦maxå˜é‡è®°å½• 12345678910public int maxSubArray(int[] nums) { int res = nums[0]; int[] dp = new int[nums.length]; dp[0] = nums[0]; for (int i = 1; i &lt; nums.length; i++) { dp[i] = Math.max(dp[i - 1] + nums[i], nums[i]); res = Math.max(dp[i], res); } return res;} å…¶ä»–åŠ¨æ€è§„åˆ’çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/maximum-subarray/"},{"title":"56-åˆå¹¶åŒºé—´","text":"åŠ›æ‰£56 https://leetcode-cn.com/problems/merge-intervals/ ç»™å‡ºä¸€ä¸ªåŒºé—´çš„é›†åˆï¼Œè¯·åˆå¹¶æ‰€æœ‰é‡å çš„åŒºé—´ã€‚ ç¤ºä¾‹1 123è¾“å…¥: intervals = [[1,3],[2,6],[8,10],[15,18]]è¾“å‡º: [[1,6],[8,10],[15,18]]è§£é‡Š: åŒºé—´ [1,3] å’Œ [2,6] é‡å , å°†å®ƒä»¬åˆå¹¶ä¸º [1,6]. ç¤ºä¾‹ 2: 123è¾“å…¥: intervals = [[1,4],[4,5]]è¾“å‡º: [[1,5]]è§£é‡Š: åŒºé—´ [1,4] å’Œ [4,5] å¯è¢«è§†ä¸ºé‡å åŒºé—´ã€‚ æ€è·¯1ï¼šæŒ‰å·¦ç«¯ç‚¹å‡åºæ’åºï¼Œæ¨èè¿™æ ·åšï¼Œå› ä¸ºè¿™æ ·æ¯”è¾ƒçœäº‹ã€‚æ’åºåéå†ï¼Œåä¸€ä¸ªçš„å¼€å§‹&lt;=å‰ä¸€ä¸ªçš„ç»“æŸï¼Œè¯´æ˜æœ‰äº¤é›†ï¼Œåˆå¹¶ï¼ˆåˆå¹¶ç»†èŠ‚ï¼šå› ä¸ºä¸€ç›´å¾€åéå†ï¼Œå› æ­¤åªéœ€è¦å°†åä¸€ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹æ”¹ä¸ºå‰ä¸€ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹ï¼Œå³ç«¯ç‚¹æ”¹ä¸ºè¾ƒå¤§çš„é‚£ä¸ªï¼‰ å¦‚ï¼š[1, 3], [2, 4] =&gt; [1, 3], [1, 4]ï¼Œå¯ä»¥çœ‹åˆ°å‰ä¸€ä¸ªå…¶å®æ˜¯ä¸éœ€è¦ç®¡çš„ï¼Œåä¸€ä¸ªçš„å·¦ç«¯ç‚¹å˜æˆäº†å‰ä¸€ä¸ªçš„å·¦ç«¯ç‚¹ï¼Œå³ç«¯ç‚¹æ˜¯4&gt;3æ‰€ä»¥æ˜¯4ï¼Œè¿™æ ·å®ç°äº†â€œåˆå¹¶â€ 123456789101112131415public int[][] merge(int[][] intervals) { List&lt;int[]&gt; res = new ArrayList&lt;&gt;(); Arrays.sort(intervals, (o1, o2) -&gt; o1[0] == o2[0] ? o1[1] - o2[1] : o1[0] - o2[0]); for (int i = 1; i &lt; intervals.length; i++) { if (intervals[i - 1][1] &gt;= intervals[i][0]){ intervals[i][0] = intervals[i - 1][0]; intervals[i][1] = Math.max(intervals[i - 1][1], intervals[i][1]); }else { res.add(intervals[i - 1]); } } res.add(intervals[intervals.length - 1]); return res.toArray(new int[0][]);} æ€è·¯2ï¼šæ•°è½´æ³•ï¼Œå…¶å®è¿™ä¸ªä¹Ÿå¥½æƒ³ï¼Œç”šè‡³æ¯”æ€è·¯1å…ˆæƒ³åˆ°ï¼ˆå› ä¸ºè¯´åˆ°åŒºé—´åˆå¹¶ä¼šå…ˆæƒ³åˆ°æ•°è½´ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿæ•°è½´ï¼Œè¿›è¡ŒåŒºé—´æŸ“è‰²ï¼šåŒºé—´å¤´éƒ¨ä¸º2ï¼Œåé¢ä¸º1ï¼Œå¦‚[1,3]ä¸º[0,2,1,1,â€¦] è¿™é‡Œè¦æ³¨æ„ä¸¤ç‚¹ï¼š æ•°è½´æ˜¯æ— é™å¤§çš„ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿæ•°è½´åªæ¨¡æ‹Ÿç¨å¾®å¤§ä¸€ç‚¹çš„æ•°å°±è¡Œï¼šint[] flag = new int[10005]; è¦æ³¨æ„åŒºåˆ†å¤´éƒ¨ï¼ˆ2ï¼‰å’Œå°¾éƒ¨ï¼ˆ1ï¼‰ï¼Œä¸èƒ½ä¸ºåŒæ ·çš„æ ‡è¯†ï¼Œå¦åˆ™ä¸¤ä¸ªä¸åŒçš„åŒºé—´å®¹æ˜“æ··æ·† 123456789101112131415161718192021222324252627282930313233343536373839public int[][] merge(int[][] intervals) { if (intervals.length == 0 || intervals[0].length == 0){ return intervals; } int[] flag = new int[10005]; //flagä»£è¡¨ä¸€æ¡æ•°è½´ int max = intervals[0][1]; //ç»“æŸæ¡ä»¶ä¸ºéå†åˆ°æœ€å¤§å€¼ //æ•°è½´æŸ“è‰²,åŒºé—´å¤´éƒ¨ä¸º2ï¼Œåé¢ä¸º1ï¼Œå¦‚[1,3]ä¸º[0,2,1,1,...] for (int[] interval : intervals) { int j = interval[0]; if (flag[j] == 0) { flag[j] = 2; } while (++j &lt;= interval[1]) { flag[j] = 1; } max = Math.max(interval[1], max); } //éå†æ•°è½´ boolean border = true; int index = 0; List&lt;int[]&gt; res = new ArrayList&lt;&gt;(); int[] a = new int[2]; while (index &lt;= max + 1){ //å³è¾¹ç•Œ if ((flag[index] == 0 || flag[index] == 2) &amp;&amp; !border){ a[1] = index - 1; res.add(Arrays.copyOf(a, a.length)); border = true; } //å·¦è¾¹ç•Œ if (flag[index] == 2 &amp;&amp; border){ a[0] = index; border = false; } index++; } return res.toArray(new int[0][]);} å…¶ä»–æ’åºçš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/merge-intervals/"},{"title":"61-æ—‹è½¬é“¾è¡¨","text":"åŠ›æ‰£61 https://leetcode-cn.com/problems/rotate-list/ æ¯”è¾ƒç®€å•ï¼Œåˆ«é‚£ä¹ˆå‚»æ¯æ¬¡éƒ½äº¤æ¢ï¼Œå…ˆå¾€åæ‰¾åˆ°è¯¥å»çš„ä½ç½®ï¼Œæˆªæˆä¸¤æ®µï¼Œç›´æ¥å¯¹è°ƒ 123456789101112131415public ListNode rotateRight(ListNode head, int k) { if (head == null || head.next == null) return head; ListNode pre = head, post = head; while (k-- != 0){ pre = pre.next != null ? pre.next : head; } while (pre.next != null){ //å‰åä¸€èµ·ç§»åŠ¨æ‰¾åˆ°åˆ†å‰²ç‚¹post pre = pre.next; post = post.next; } pre.next = head; head = post.next; post.next = null; return head;} 1707 ms 37.8 MB Java ä¼˜åŒ–ä¸€ä¸‹ï¼Œåˆ«é‚£ä¹ˆå‚»ï¼Œkå¯èƒ½å¾ˆå¤§ï¼Œå¤´å°¾å¾ªç¯1000å¤šæ¬¡â€¦ï¼Œç›´æ¥å¾ªç¯ä¸€æ¬¡ï¼Œå¾—å‡ºé“¾è¡¨çš„å¤§å°ï¼Œç„¶åk % countå³å¯å¾—åˆ°è¯¥å»çš„ä½ç½®äº† 1234567891011121314151617181920public ListNode rotateRight(ListNode head, int k) { if (head == null || head.next == null) return head; ListNode pre = head, post = head; int count = 1; while (pre.next != null){ //éå†1æ¬¡è·å¾—é“¾è¡¨é•¿åº¦ pre = pre.next; count++; } k = k % count; //è®¡ç®—ä½ç½® pre = head; while (k-- != 0) pre = pre.next; //å°±ä¸ç”¨å¤´å°¾å¾ªç¯äº† while (pre.next != null){ pre = pre.next; post = post.next; } pre.next = head; head = post.next; post.next = null; return head;} å…¶ä»–é“¾è¡¨ç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/rotate-list/"},{"title":"63-ä¸åŒè·¯å¾„II","text":"åŠ›æ‰£63 https://leetcode-cn.com/problems/unique-paths-ii/submissions/ dpé¢˜ï¼Œä¸åŒè·¯å¾„åŠ å…¥äº†éšœç¢ç‰©ï¼Œä½†å½±å“ä¸äº†å¤šå°‘ï¼Œåªå¤šäº†åˆ¤æ–­æ¡ä»¶ï¼š å¦‚æœå½“å‰ä¸ºéšœç¢ï¼Œdp[i][j]ä¸º0 å¦‚æœå·¦è¾¹ä¸ºéšœç¢ï¼Œdp[i][j] = ä¸Šé¢ å¦‚æœä¸Šé¢ä¸ºéšœç¢ï¼Œdp[i][j] = å·¦è¾¹ å¦åˆ™æ‰æ˜¯dp[i][j] = å·¦è¾¹ + ä¸Šé¢ å› ä¸ºéšœç¢çš„åˆ¤æ–­åˆšå¥½æ˜¯0ï¼Œå› æ­¤ä»ç„¶å¯ä»¥ç›´æ¥åŠ ï¼Œå…¶å®åªæœ‰ä¸¤ä¸ªæ¡ä»¶ 12345678910111213141516171819202122232425262728public int uniquePathsWithObstacles(int[][] obstacleGrid) { int row = obstacleGrid.length; int col = obstacleGrid[0].length; if (col == 0) return 0; int[][] dp = new int[row][col]; //dp[i][j]ä»£è¡¨åˆ°è¯¥ç‚¹æœ‰å¤šå°‘ç§èµ°æ³• //åˆå§‹åŒ– boolean check = true; //èƒ½èµ° for (int i = 0; i &lt; row; i++) { if(obstacleGrid[i][0] == 1) check = false; dp[i][0] = check ? 1 : 0; } check = true; for (int i = 0; i &lt; col; i++) { if(obstacleGrid[0][i] == 1) check = false; dp[0][i] = check ? 1 : 0; } //å¼€å§‹dp for (int i = 1; i &lt; row; i++) { for (int j = 1; j &lt; col; j++) { if (obstacleGrid[i][j] == 1){ dp[i][j] = 0; }else { dp[i][j] = dp[i - 1][j] + dp[i][j - 1]; } } } return dp[row - 1][col - 1];} è§£æ³•å€’æ˜¯å¾ˆç®€å•ï¼Œä½†æ˜¯ä¼šæœ‰æ™ºéšœæŠŠéšœç¢æ”¾åœ¨å…¥å£å’Œå‡ºå£ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨dpé—®é¢˜ä¸­ï¼Œå¾ˆå¤šäººä¼šé‡‡å–dp[m + 1][n + 1]çš„å†™æ³•æ¥å¸®åŠ©æ›´å¥½çš„ç¬¦åˆç”Ÿæ´»å½¢å¼ï¼ˆ1å¼€å¤´è€Œä¸æ˜¯0å¼€å¤´ï¼‰ï¼Œå¦å¤–å°±æ˜¯å¯ä»¥ç®€åŒ–åˆå§‹åŒ–è¿‡ç¨‹ï¼Œdp[0]å’Œdp[n][0]ä½œä¸ºåˆå§‹åŒ–ï¼Œåˆ™dp[1]ä¹Ÿå¯ç¬¦åˆé€’æ¨å…³ç³»å¼ï¼Œæ— éœ€é¢å¤–åˆå§‹åŒ–ã€‚ å¦å¤–å°±æ˜¯éƒ¨åˆ†äººä¼šé‡‡ç”¨é™ä¸€ç»´æ¥å‡å°‘ç©ºé—´å¤æ‚åº¦ï¼Œåªè®°å½•dp[n] è¿™äº›æŠ€å·§æ€§å¾ˆå¼ºçš„ä¸œè¥¿æˆ‘åœ¨è¿™é‡Œä¸å¤šè¯´äº†ï¼Œè¯„è®ºåŒºä¸€æŠ“ä¸€å¤§æŠŠï¼Œå¶å°”å¯ä»¥å­¦å­¦ä¼˜åŒ–ä¸€ä¸‹ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘åªå¸Œæœ›è®°å½•æœ€é€šç”¨ã€æœ€æœ¬è´¨ã€æœ€æ¨¡æ¿çš„æ–¹æ³•ï¼Œä»¥ä¾¿èƒ½åœ¨ä¸€ä¸ªâ€œå¤æ‚åº¦å…è®¸çš„èŒƒå›´å†…æœ€å¿«é€Ÿåº¦åšå‡ºé¢˜ç›®â€ã€‚ å…¶ä»–åŠ¨æ€è§„åˆ’çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/submissions/"},{"title":"60-ç¬¬kä¸ªæ’åˆ—","text":"åŠ›æ‰£60 https://leetcode-cn.com/problems/permutation-sequence/ è¿™é¢˜è™½ç„¶æ˜¯ä¸€é“å›æº¯é¢˜ï¼Œä½†å¦‚æœåªæ˜¯ä»…ä»…ç®€å•çš„å›æº¯ä¸€ä¸‹ï¼Œä¼šè¶…æ—¶ï¼Œç»è¿‡å‰ªæå’Œä¼˜åŒ–å¯ä»¥åˆ°13%ã€‚æ­¤é¢˜å¯ä»¥æ•°å­¦ä¼˜åŒ–ï¼Œè¿˜æ˜¯æœ‰ç‚¹æŒ‘æˆ˜æ€§çš„ã€‚å†è¯´äº†ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šäººå’Œæˆ‘ä¸€æ ·çœ‹åˆ°é¢˜ç›®ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„è‚¯å®šæ˜¯å…ˆè®¡ç®—å‡ºå¼€å¤´æ•°å­—ï¼Œä½†æ˜¯å†™èµ·æ¥è¿˜æ˜¯å›æº¯â€¦ 1. æš´åŠ›å›æº¯+å‰ªæå…ˆæ¥çœ‹çœ‹æœ€lowçš„å›æº¯ï¼Œè¿™ä»½æäº¤æ˜¯ä¼šè¶…æ—¶çš„ï¼Œè€Œä¸”è¿˜åšäº†å‰ªæï¼ˆåˆ°kä¸ªåé¢çš„å°±ä¸ç»§ç»­äº†ï¼‰ 123456789101112131415161718192021222324252627282930313233class Solution { public String getPermutation(int n, int k) { int[] nums = new int[n]; for (int i = 0; i &lt; n; i++) { nums[i] = i + 1; } backtrace(nums, new StringBuilder(), k); return res.get(res.size() - 1); } private List&lt;String&gt; res = new ArrayList&lt;&gt;(); private boolean max = false; public void backtrace(int[] nums, StringBuilder track, int k) { //ç»“æŸæ¡ä»¶ if (track.length() == nums.length) { res.add(track.toString()); if (res.size() == k) max = true; return; } for (int i = 0; i &lt; nums.length; i++) { //å‰ªæ if (max) return ; if (track.indexOf(String.valueOf(nums[i])) != -1) continue; //åšé€‰æ‹© track.append(nums[i]); //é€’å½’ backtrace(nums, track, k); //æ’¤é”€ track.deleteCharAt(track.length() - 1); } }} 2. æå‰ç»“æŸæ¡ä»¶ä¼˜åŒ–å¯ä»¥çœ‹åˆ°ï¼Œå‰ªæä¹Ÿè¶…æ—¶ï¼Œåˆ†æä¸€ä¸‹ï¼Œå¯ä»¥çœ‹å‡ºtrack.indexOfè¿™å¥å¯èƒ½ä¼šå½±å“æ€§èƒ½ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸ºæ ‡è®°æ•°ç»„ï¼ŒæŸ¥æ‰¾çš„æ—¶å€™O(1)ï¼Œå¹¶ä¸”åšäº†ç©ºé—´ä¸Šçš„ä¼˜åŒ– 12345678910111213141516171819202122232425262728293031323334class Solution { public String getPermutation(int n, int k) { int[] nums = new int[n]; for (int i = 0; i &lt; n; i++) { nums[i] = i + 1; } backtrace2(nums, new boolean[n], new StringBuilder(), k); return res; } private String res = \"\"; //ä¼˜åŒ–ä¸€ä¸‹ç©ºé—´ï¼Œç»“æœåªå­˜ä¸€ä¸ª private int num = 0; public void backtrace2(int[] nums, boolean[] flag, StringBuilder track, int k){ //ç»“æŸæ¡ä»¶ if (track.length() == nums.length){ res = track.toString(); num++; return ; } for (int i = 0; i &lt; nums.length; i++) { //å‰ªæ if (k == num) return ; if (flag[i]) continue; //åšé€‰æ‹© track.append(nums[i]); flag[i] = true; //é€’å½’ backtrace2(nums, flag, track, k); //æ’¤é”€ track.deleteCharAt(track.length() - 1); flag[i] = false; } }} 3. æ•°å­¦ä¼˜åŒ–äº‹å®ä¸Šå†™èµ·æ¥å¹¶ä¸éš¾ï¼Œè€Œä¸”æˆ‘ç›¸ä¿¡å¤§å¤šæ•°äººç¬¬ä¸€çœ¼çœ‹åˆ°é¢˜ç›®æƒ³åˆ°çš„åº”è¯¥æ˜¯è¿™ä¸ªï¼Œä¸è¿‡å†™çš„è¿˜æ˜¯å›æº¯ï¼ˆå› ä¸ºç¬”è¯•éœ€è¦æ—¶é—´ï¼Œä¸€èˆ¬ä¸æ•¢å†’é™©ï¼Œé€‰æ‹©äº†è‡ªå·±ç†Ÿæ‚‰çš„æ–¹æ³•â€¦ï¼‰ 3.1 æ€»ä½“æ€è·¯å’Œè¿‡ç¨‹ä»¥æ­£å¸¸äººçš„æ€ç»´ï¼Œæ‰‹å†™å¯èƒ½çš„æ’åˆ—çš„æ—¶å€™ä¸€å®šæ˜¯è¿™æ ·çš„é¡ºåºï¼š å…ˆå›ºå®šç¬¬ä¸€ä½æ˜¯1ï¼Œåä¸‰ä½æŒ‰é¡ºåºæ’åˆ— 234 243 324 342 423 432 ä¹Ÿå°±æ˜¯è¯´1å¼€å¤´ï¼Œé‚£ä¹ˆå‰©ä¸‹3ä½è¿›è¡Œæ’åˆ—ï¼Œå…±éœ€A(3, 3) = 3! = 6 é‚£ä¹ˆç¬¬ä¸€ä½æƒ³è¦ä¸º2å¿…é¡»å…ˆç»å†å®Œ1å¼€å¤´çš„ï¼Œä¸”2å¼€å¤´çš„ä¹Ÿæœ‰6æ¡æ•°æ® åŒæ ·çš„ï¼Œç¬¬ä¸€ä½æƒ³è¦æ˜¯3ï¼Œé‚£ä¹ˆéœ€ç»å†å¼€å¤´1å’Œ2ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœnä½ï¼Œé‚£ä¹ˆç¬¬ä¸€ä½éœ€è¦å˜æˆa1ï¼Œé‚£ä¹ˆå‰é¢æœ‰(n - 1)! * (a1 - 1) åè¿‡æ¥ï¼Œå·²çŸ¥k = 9ï¼Œé‚£ä¹ˆk / 6 = 1ä½™3ï¼Œè¯´æ˜ç¬¬ä¸€ä½è‚¯å®šå·²ç»è¶…è¿‡äº†1çš„é‚£6æ¡ï¼Œå› æ­¤ç¬¬ä¸€ä½æ˜¯2 æ¥ä¸‹æ¥ç¡®å®šç¬¬äºŒä½ï¼Œé‚£ä¹ˆå˜æˆäº†å­é—®é¢˜ï¼šæ­¤æ—¶å¯ä¾›é€‰æ‹©çš„é€‰æ‹©åˆ—è¡¨æŠŠ2å»é™¤äº†å˜ä¸º134ï¼Œkä¸ºä½™æ•°3ï¼Œè¯´äººè¯å°±æ˜¯ï¼šç¬¬ä¸€ä½çš„2å·²ç»ç¡®å®šäº†ï¼Œåœ¨å‰©ä¸‹çš„134ä¸­æ‰¾åˆ°ç¬¬3æ¡æ•°æ®ã€‚ å½“ç„¶ï¼Œç¨‹åºçš„è¯å°±ä¸ç”¨å†å†™äº†ï¼Œè¿™æ˜¯å­é—®é¢˜ï¼Œä¹‹å‰å·²ç»å†™å¥½äº†ï¼Œé‡æ–°éå†ä¸Šé¢çš„å³å¯ 3.2 javaå®ç°æ­¥éª¤ä¸‹é¢æ˜¯javaä»£ç ï¼Œæˆ‘å…ˆè´´å®Œæ•´ä»£ç ï¼ˆå¯ä»¥ä¸çœ‹å…ˆï¼Œå…ˆçœ‹è®²è§£ï¼‰ï¼Œå†ä¸€æ­¥æ­¥è®²è§£ï¼š 12345678910111213141516171819202122232425262728293031public class six_zero_ç¬¬kä¸ªæ’åˆ—_other { @Test public void test(){ String res = getPermutation(4, 9); System.out.println(res); } public String getPermutation(int n, int k) { //ç”Ÿæˆæ’åˆ—æ•°åˆ—è¡¨ paiLie[0] = 0! paiLie[1] = 1! ç”±æ’åˆ—å…¬å¼å¯å¾—n! = n * (n - 1)! int[] paiLie = new int[n + 1]; List&lt;Integer&gt; nums = new LinkedList&lt;&gt;(); //é€‰æ‹©åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯1234ï¼Œæ¯æ¬¡è¢«é€‰æ‹©ä¸€ä½åè¿™é‡Œå°±ä¼šå‡å°‘ä¸€ä½ paiLie[0] = 1; for (int i = 1; i &lt;= n; i++) { paiLie[i] = paiLie[i - 1] * i; //n! = n * (n - 1)! nums.add(i); } //å‡†å¤‡å®Œæ¯•ï¼Œå¼€å§‹ä»å·¦åˆ°å³æ‰¾åˆ°æ¯ä¸€ä½ String res = \"\"; k--; //è¿™ä¸ªå¯ä»¥å›è¿‡å¤´æ¥çœ‹ï¼Œå› ä¸ºä¸‹é¢kçš„è®¡ç®—æ˜¯è·Ÿè·³è¿‡çš„ä¸ªæ•°onceSkipç›¸å…³çš„ï¼ŒonceSkipæ˜¯ä¸‹æ ‡ï¼Œå› æ­¤è¦å…ˆ-1æˆä¸‹æ ‡ while (nums.size() != 0){ int onceSkip = paiLie[(nums.size() - 1)]; //ä¹Ÿå°±æ˜¯1å¼€å¤´çš„æœ‰6æ¡ï¼Œè¿™å°±æ˜¯è¿™ä¸ª6ï¼Œå½“ç„¶ç¬¬äºŒä½çš„æ—¶å€™å°±æ˜¯(n - 1)!äº† int index = k / onceSkip; res += nums.get(index); //åé¢é‡å¤ï¼Œnumså˜ä¸ºå°‘äº†å½“å‰åŠ çš„è¿™ä¸ªå€¼ï¼Œkä¹Ÿä¼šå‡å»è·³è¿‡çš„ä¸ªæ•° nums.remove(index); k -= index * onceSkip; //æ€»å…±è·³è¿‡çš„æ¡æ•° } return res; }} åˆ«æ€¥ï¼Œä¸€æ­¥æ­¥æ¥åšï¼š paiLie[]ï¼šå…ˆè¦ç”Ÿæˆä¸Šé¢è¯´çš„æ’åˆ—æ•°åˆ—è¡¨ï¼Œå› ä¸ºæ¯æ¬¡éƒ½æ˜¯n! = (n - 1)! * nï¼Œéœ€è¦å‰ä¸€ä¸ªé˜¶ä¹˜ä½œä¸ºåŸºç¡€ï¼Œæ‰€ä»¥ä¸€å¼€å§‹ç”Ÿæˆæ¯”è¾ƒå¥½ï¼Œè€Œä¸æ˜¯ä¸´æ—¶ç®—ã€‚ numsï¼šåŒæ—¶è¿˜è¦ç”Ÿæˆä¸Šé¢è¯´çš„é€‰æ‹©åˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯ä¸€å¼€å§‹ä¸º1234ï¼Œç¬¬ä¸€è½®è¢«é€‰å‡º2ä¹‹åå‰©ä¸‹134çš„è¿™ä¸ªä¸œè¥¿ 1234567891011public String getPermutation(int n, int k) { //ç”Ÿæˆæ’åˆ—æ•°åˆ—è¡¨ paiLie[0] = 0! paiLie[1] = 1! ç”±æ’åˆ—å…¬å¼å¯å¾—n! = n * (n - 1)! int[] paiLie = new int[n + 1]; List&lt;Integer&gt; nums = new LinkedList&lt;&gt;(); //é€‰æ‹©åˆ—è¡¨ï¼Œç¬¬ä¸€è½®ä¸º1234 paiLie[0] = 1; for (int i = 1; i &lt;= n; i++) { paiLie[i] = paiLie[i - 1] * i; nums.add(i); } return \"\";} æ‰“ä¸ªæ–­ç‚¹çœ‹çœ‹æ•ˆæœ å®Œç¾ï¼ˆç¬‘ï¼‰ å‡†å¤‡å·¥ä½œå®Œæˆï¼Œä¸‹é¢çœ‹æˆ‘ä»¬è¦å®Œæˆçš„è®¡ç®—å…¬å¼ æ€»è·³è¿‡æ•°ï¼šä¹‹å‰è¯´äº†ç¬¬ä¸€ä½éœ€è¦å˜æˆa1ï¼Œé‚£ä¹ˆå‰é¢æœ‰(n - 1)! * (a1 - 1)ï¼Œ(n - 1)!ä¹Ÿå°±æ˜¯å¼€å¤´ä¸º1çš„è¿™ä¸€ç»„ä¼šæœ‰å¤šå°‘æ¡ï¼Œèµ·åonceSkipï¼Œå¯¹åº”çš„ä»£ç å°±æ˜¯onceSkip = paiLie[(nums.size() - 1)]æ²¡é”™å§ï¼Œè‡³äºa1 - 1ï¼Œä¹Ÿå°±æ˜¯è·³è¿‡äº†å¤šå°‘ç»„ï¼Œèµ·åindexï¼Œä¹Ÿå°±æ˜¯index = k / onceSkip æ‰“ä¸ªæ–­ç‚¹çœ‹çœ‹ï¼šreså·²ç»å°†ç¬¬ä¸€ä½2åŠ è¿›æ¥äº† éœ€è¦æ³¨æ„çš„æ˜¯é¢˜ç›®ç»™çš„kæ˜¯ç°å®çš„kï¼Œä½†æ˜¯æˆ‘ä»¬kè®¡ç®—ç›¸å…³çš„æ˜¯nums.get(index)ï¼Œç”¨çš„æ˜¯ä¸‹æ ‡ï¼Œå› æ­¤ä¸€å¼€å§‹åšäº†ä¸€æ¬¡k - 1ï¼Œè‡ªå·±è¯•ä¸‹å°±çŸ¥é“äº†ã€‚ æœ¬è½®ç»“æŸç¬¬ä¸€ä½å·²åŠ å…¥resï¼Œå¼€å§‹ç¡®å®šç¬¬äºŒä½ï¼Œå­é—®é¢˜ï¼Œè¿›å…¥å‰ä¿®æ”¹ä¸€ä¸‹é€‰æ‹©åˆ—è¡¨numsï¼šå»é™¤å·²åŠ å…¥çš„2ï¼Œä¿®æ”¹kï¼škä»£è¡¨çš„æ˜¯å‰©ä½™å‡ æ¡æ•°æ®ï¼Œå› æ­¤è¦å‡å»å·²ç»è·³è¿‡çš„index * onceSkip çœ‹ä»£ç  å°±å®Œæˆäº†ï¼Œä»£ç å…¶å®éå¸¸ç®€å•ï¼Œå°±æ˜¯è®¡ç®—åˆ«æé”™äº†ã€‚ åŠ›æ‰£2msï¼Œå®˜æ–¹çš„ä»£ç 1msï¼Œä½†æ˜¯æ€è·¯ä¸€æ ·çš„ å…¶ä»–å›æº¯ç³»åˆ—é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/permutation-sequence/"},{"title":"654-æœ€å¤§äºŒå‰æ ‘","text":"åŠ›æ‰£654 https://leetcode-cn.com/problems/maximum-binary-tree/ å½“å‰èŠ‚ç‚¹ä»»åŠ¡ï¼šæ•°ç»„ä¸­æ‰¾åˆ°æœ€å¤§çš„å¹¶æ„é€ èŠ‚ç‚¹ï¼Œé€’å½’å·¦å³ä¸¤è¾¹å­æ•°ç»„æ„é€ å‡ºå·¦å³èŠ‚ç‚¹ ç”±äºé»˜è®¤å‡½æ•°æ²¡æœ‰å¿…è¦çš„å‚æ•°ï¼Œæ‰€ä»¥å¾—è‡ªå·±å†™ä¸€ä¸ªï¼Œå¿…è¦çš„å‚æ•°å¦‚ä¸Šé¢æ‰€è¯´ï¼šå·¦å³å­æ•°ç»„ï¼Œæ‰€ä»¥éœ€è¦startå’Œendå‚æ•° 12345678910111213141516171819202122public TreeNode constructMaximumBinaryTree(int[] nums) { return buildTree(nums, 0, nums.length - 1);}public TreeNode buildTree(int[] nums, int start, int end) { if (start &gt; end) return null; int rootIdx = findMax(nums, start, end); TreeNode root = new TreeNode(nums[rootIdx]); root.left = buildTree(nums, start, rootIdx - 1); root.right = buildTree(nums, rootIdx + 1, end); return root;}public int findMax(int[] nums, int start, int end){ int maxIdx = start; for (int i = start; i &lt;= end; i++) { if (nums[i] &gt; nums[maxIdx]){ maxIdx = i; } } return maxIdx;} å…¶ä»–æ ‘çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/654-maximum-binary-tree/"},{"title":"70-çˆ¬æ¥¼æ¢¯ä»¥åŠè¿›åŒ–ç‰ˆ","text":"åŠ›æ‰£70 https://leetcode-cn.com/problems/climbing-stairs/ åŠ¨æ€è§„åˆ’ç»å…¸é¢˜ï¼Œæ²¡æœ‰ä¹‹ä¸€ è¿˜æ˜¯é‚£ä¸‰å¥è¯ å®šä¹‰åŠ¨æ€è§„åˆ’æ•°ç»„çš„å«ä¹‰ æ‰¾å‡ºå…³ç³»å¼ æ‰¾åˆå§‹å€¼ å› ä¸ºæ­¤é¢˜å®åœ¨ç®€å•ï¼Œç›´æ¥ç»™å‡ºjavaä»£ç  12345678910111213public int climbStairs(int n) { if (n &lt;= 1) return 1; int[] dp = new int[n + 1]; //1.dp[i]è¡¨ç¤ºåˆ°ç¬¬ié˜¶çš„æ–¹æ³•æ•° //3.åˆå§‹å€¼ï¼Œä¸å¯èƒ½å‡ºç°dp[-1]ï¼Œdp[0],dp[1]è¦æ³¨æ„ï¼Œdp[1],dp[2] dp[0] = 0; dp[1] = 1; dp[2] = 2; //2.â€å…ˆåˆ°è¾¾å†è¯´â€œï¼Œç°åœ¨åœ¨ç¬¬5é˜¶æ¥¼æ¢¯ï¼Œå¯ä»¥ä»3é˜¶è·³ä¸Šæ¥ï¼Œå¯ä»¥ä»ç¬¬4é˜¶è·³ä¸Šæ¥ã€‚ for (int i = 3; i &lt;= n; i++) { dp[i] = dp[i - 2] + dp[i - 1]; } return dp[n];} æœ¬æ¥æ­¤é¢˜å¦‚æ­¤ç®€å•ï¼Œä¸å€¼å¾—è®°å½•ï¼Œä½†æ˜¯ï¼ï¼é‡ç‚¹æ¥äº†ï¼Œå­—èŠ‚è·³åŠ¨2020ç§‹æ‹›9æœˆç¬”è¯•é¢˜ å¤šäº†ä¸€ä¸ªæ¡ä»¶ï¼šä¸èƒ½è¿ç»­è·³ä¸¤æ­¥ å¥½å®¶ä¼™ï¼Œæ—©å°±å¬è¯´å­—èŠ‚å–œæ¬¢è€ƒåŸé¢˜ï¼Œå¦™å•ŠçœŸæ˜¯å¦™è›™ç§å­åƒç€å¦™è„†è§’è¿›äº†ç±³å¥‡å¦™å¦™å±‹â€”å¦™åˆ°å®¶äº† å‘ç°è‡ªå·±çœŸçš„æ˜¯çŸ¥å…¶ç„¶ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œçœ‹çŸ¥ä¹çš„æ•°å­¦æ¨å¯¼ï¼š https://www.zhihu.com/question/275079633 ä»£ç å°±ä¸è´´äº†ï¼Œæ²¡ä»€ä¹ˆäº†ï¼ŒæŠŠä¸Šé¢çš„dpé€’æ¨å…³ç³»å¼æ”¹ä¸€ä¸‹dp[i] = dp[i - 3] + dp[i - 1];ï¼Œåˆå§‹æ¡ä»¶æ‰‹ç®—ä¸€ä¸‹ï¼Œå°±å¯ä»¥äº†ï¼Œå…³é”®æ˜¯æ€ç»´å’Œæ•°å­¦æ¨å¯¼ å…¶ä»–åŠ¨æ€è§„åˆ’çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/climbing-stairs/"},{"title":"739-æ¯æ—¥æ¸©åº¦","text":"åŠ›æ‰£735 https://leetcode-cn.com/problems/daily-temperatures/submissions/ è‡ªä»ä¸Šæ¬¡åšäº†æœ€å¤§çŸ©å½¢å•è°ƒæ ˆé¢˜ç›®ä¹‹åï¼Œæœ€è¿‘ç¬”è¯•è§äº†ä¸¤é¢˜å•è°ƒæ ˆçš„é¢˜ç›®äº†ï¼Œå¿ƒç†ä½œç”¨ï¼Ÿï¼Ÿèµ¶ç´§è¡¥å§â€¦ é¢˜ç›®æè¿°çš„ä¸æ˜¯å¾ˆæ¸…æ¥šï¼ˆå¯ä»¥çœ‹è‹±æ–‡ç‰ˆæ¯”è¾ƒæ˜ç™½ï¼‰ï¼Œæ€»ä¹‹ï¼Œæ˜¯è¯´å¾€åæ‰¾åˆ°æ¯”å½“å‰å¤§çš„ï¼ˆæ¸©åº¦é«˜çš„ï¼‰ï¼Œç„¶åè®°å½•ä¸‹æ ‡è·ç¦»ã€‚ å¾ˆæ˜¾ç„¶æ˜¯å•è°ƒæ ˆçš„é¢˜ç›®ï¼šâ€å¾€åæ‰¾åˆ°ç¬¬ä¸€ä¸ªâ€è¿™æ ·çš„å­—æ · æ€è·¯ä¹Ÿæ¯”è¾ƒç®€å•ï¼š å¾€åæ‰¾ç¬¬ä¸€ä¸ªæ¯”å½“å‰å¤§çš„ï¼Œå› æ­¤é‡‡ç”¨é€’å‡æ ˆã€‚ æ ˆä¸­è®°å½•ä¸‹æ ‡ï¼ˆå› ä¸ºè¦æ±‚çš„æ˜¯ä¸‹æ ‡å·®è€Œä¸”é€šè¿‡ä¸‹æ ‡å¯ä»¥ç›´æ¥åœ¨T[i]ä¸­å¾—å‡ºå€¼ä½œæ¯”è¾ƒåä¹‹åˆ™å›°éš¾ï¼Œå¥½å¤šå•è°ƒæ ˆçš„é¢˜ç›®éƒ½æ˜¯è¿™æ ·è®°å½•çš„ï¼‰ é‡åˆ°æ¯”æ ˆé¡¶å¤§åˆ™è®°å½•å½“å‰ä¸æ ˆé¡¶å…ƒç´ çš„è·ç¦»ï¼Œå‡ºæ ˆï¼Œå¾ªç¯ç›´è‡³æ»¡è¶³é€’å‡æ ˆ å½“å‰å…ƒç´ å…¥æ ˆã€‚ javaä»£ç  1234567891011121314151617181920212223242526272829public class seven_three_nine_æ¯æ—¥æ¸©åº¦ { @Test public void test(){ int[] T = {73, 74, 75, 71, 69, 72, 76, 73}; int[] res = dailyTemperatures(T); System.out.println(Arrays.toString(res)); } public int[] dailyTemperatures(int[] T) { int[] res = new int[T.length]; if (T == null || T.length == 0) return res; Deque&lt;Integer&gt; deque = new ArrayDeque&lt;&gt;(); //æ ˆä¸­å­˜ä¸‹æ ‡è€Œä¸æ˜¯å€¼ï¼Œå€¼é€šè¿‡T[ä¸‹æ ‡]å¾—å‡º deque.offerLast(0); for (int i = 1; i &lt; T.length; i++) { if (T[i] &lt;= T[deque.peekLast()]){ //æ»¡è¶³é€’å‡æ ˆï¼Œå½“å‰ä¸‹æ ‡ç›´æ¥å…¥æ ˆ deque.offerLast(i); }else { //ä¸æ»¡è¶³ï¼Œå‡ºæ ˆï¼Œè®°å½•è·ç¦»ï¼Œå¾ªç¯ç›´è‡³æ»¡è¶³å•è°ƒæ ˆ while (deque.size() != 0 &amp;&amp; T[i] &gt; T[deque.peekLast()]){ Integer beginIndex = deque.pollLast(); //å°çš„å‡ºæ¥ res[beginIndex] = i - beginIndex; } deque.offerLast(i); //å½“å‰çš„å…¥æ ˆ } } return res; }} psï¼šæ ˆç”¨Stackä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå…·ä½“æˆ‘åœ¨åšå®¢ä¸­æœ‰è®°å½•ï¼ŒåŒç«¯é˜Ÿåˆ—çš„é€Ÿåº¦ç†è®ºä¸Šä¼šæ¯”Vectorçš„å­ç±»Stackå¿« å…¶ä»–å•è°ƒæ ˆç³»åˆ—é¢˜å¯ä»¥ç‚¹è¿™é‡Œ","link":"/algorithms/daily-temperatures/"},{"title":"84-æŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§çŸ©å½¢","text":"å‰è¨€ï¼šå®ä¹ çš„å…¬å¸çœŸæ˜¯ä¸ªå­¦ä¹ çš„å¥½åœ°æ–¹ï¼Œå±•å—å®‰æ’ä»»åŠ¡æ…¢æ…¢å¼€å§‹å¯¹æ¥æµ‹è¯•äººå‘˜ï¼Œå­¦å®‡æ•™æˆ‘ä¸Šç­åˆ’åˆ’æ°´ï¼æœ‰é—®é¢˜å°±å»çƒ¦èŒèŒï¼å˜¿å˜¿ï¼Œä»Šå¤©çœ‹åˆ°èŒèŒåœ¨åˆ·åŠ›æ‰£ï¼Œç»™æˆ‘å‘æ¥äº†è¿™é“é¢˜ åŠ›æ‰£åŸé¢˜https://leetcode-cn.com/problems/largest-rectangle-in-histogram/ é¢˜ç›®æˆ‘å°±ä¸è´´äº†ï¼Œå…³é”®æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°å•è°ƒæ ˆã€‚ 1. æš´åŠ›æ³•æ€è·¯å¾ˆç®€å•ï¼Œéå†ï¼Œå‘å·¦å‘å³æ‰¾åˆ°æ¯”å½“å‰heights[i]ä½çš„æŸ±ï¼Œä¸‹æ ‡ä¸ºleftå’Œrightï¼Œç„¶ååº•(right - left - 1) * é«˜(heights[i]) 123456789101112public int largestRectangleArea(int[] heights) { if (heights == null || heights.length == 0) return 0; int max = Integer.MIN_VALUE; for (int i = 0; i &lt; heights.length; i++) { //å¾€å·¦æ‰¾ï¼Œå¾€å³æ‰¾ int left = i, right = i; while (left &gt;= 0 &amp;&amp; heights[left] &gt;= heights[i]) left--; while (right &lt; heights.length &amp;&amp; heights[right] &gt;= heights[i]) right++; max = Math.max(max, heights[i] * (right - left - 1)); } return max;} ç”¨æ—¶1034msï¼åªæœ‰javaèƒ½è¿‡ï¼Œpythonä½¿ç”¨è¿™ç§æ–¹æ³•è¶…æ—¶ã€‚ 2. å•è°ƒæ ˆç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªæ¦‚å¿µï¼Œä½†æ˜¯å…¶å®å¹¶ä¸æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦å•è°ƒæ ˆçš„é¢˜ç›®ã€‚è¿™ä¸ªä¸æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œåªæ˜¯ä¸€ç§æ€ç»´ï¼Œè®©æ ˆçš„å…ƒç´ å•è°ƒé€’å¢æˆ–è€…é€’å‡ï¼Œä½¿ç”¨çš„åœºæ™¯æœ‰ï¼šéå†åˆ°iæ—¶ï¼Œéœ€è¦å¾€å/å‰çœ‹ï¼Œçœ‹åˆ°æ»¡è¶³æŸä¸ªæ¡ä»¶æ—¶éœ€è¦è·Ÿiä½œæ¯”è¾ƒã€‚ é€šè¿‡ä¸€äº›å…·ä½“é¢˜ç›®æ¥çœ‹ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼š æœ¬é¢˜ï¼šåœ¨æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚éå†åˆ°iæ—¶ï¼Œå¾€åæ‰¾heights[right]æ¯”heights[i]å°çš„å…ƒç´ ï¼Œè¯´æ˜iå¤„æœ€å¤§çš„çŸ©å½¢é«˜ä¸ºheights[i]ï¼Œå®½ä¸ºright - i - 1 èƒ½çœ‹çš„åˆ°çš„æ¥¼ï¼šè¶‹åŠ¿ç§‘æŠ€ç§‹æ‹›ç¬”è¯•é¢˜ï¼Œå¤§æ¦‚æ˜¯æœ‰ä¸€æ’é«˜ä½ä¸åŒçš„æ¥¼ï¼Œäººä¾æ¬¡ç«™åœ¨æ¯æ ‹æ¥¼çš„æ¥¼é¡¶å¾€åçœ‹ï¼Œèƒ½çœ‹åˆ°å¤šå°‘æ ‹æ¥¼çš„æ¥¼é¡¶ï¼ˆè¶‹åŠ¿ç§‘æŠ€æ”¹äº†é¢˜ç›®ï¼Œå¯ä»¥å¾€å‰çœ‹ä¹Ÿå¯ä»¥å¾€åçœ‹ï¼Œå½“æ—¶ä¸çŸ¥é“å•è°ƒæ ˆçš„æ¦‚å¿µï¼‰ å¤§ä½¬è®²è§£https://leetcode-cn.com/problems/largest-rectangle-in-histogram/solution/bao-li-jie-fa-zhan-by-liweiwei1419/ æˆ‘ç›´æ¥è´´å®Œæ•´ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * å•è°ƒæ ˆï¼Œæ€è·¯ï¼š * æ ˆä¸­å­˜çš„æ˜¯ä¸‹æ ‡ï¼Œä»£è¡¨äº†çŸ©å½¢å®½åº¦çš„èµ·ç‚¹start,iä»£è¡¨endä½ç½®ï¼Œheights[i]ä»£è¡¨äº†å½“å‰æŸ±çŠ¶å›¾çš„é«˜åº¦ï¼Œheights[stack.peek]å°±ä»£è¡¨æ ˆé¡¶é«˜åº¦ * ä½é«˜ï¼ˆ12ï¼‰ç±»å‹ï¼Œå…¥æ ˆï¼šå› æ­¤æ ˆé¡¶çš„å€¼å°±æ˜¯ï¼šä»¥æ ˆé¡¶æŸ±çŠ¶å›¾é«˜åº¦ï¼ˆheights[stack.peek]ï¼‰ä¸ºçŸ©å½¢çš„èµ·ç‚¹start * é«˜ä½ï¼ˆ21ï¼‰ç±»å‹ï¼Œå‡ºæ ˆï¼šé‡åˆ°æ¯”æ ˆé¡¶å¯¹åº”çš„é«˜åº¦å°çš„ï¼ˆheights[i] &lt; heights[stack.peek]ï¼‰ï¼Œè¯´æ˜ä»¥heights[stack.peek]ä¸ºé«˜çš„çŸ©å½¢è¢«ç¡®å®šï¼Œå®½åº¦ä¸ºi - stack.peek() - 1 * å¾ªç¯ä¸Šè¿°å‡ºæ ˆè¿‡ç¨‹ç›´åˆ°æ»¡è¶³12ç±»å‹ï¼Œæ¯æ¬¡å‡ºæ ˆå¯¹æ¯”ç´¯è®¡æœ€å¤§å€¼å’Œå½“å‰çŸ©å½¢æœ€å¤§å€¼ * å“¨å…µçš„æ·»åŠ ï¼šæœ€åæ ˆä¸­å‰©ä¸‹çš„æ»¡è¶³12ç±»å‹ï¼Œä¸ºäº†æ–¹ä¾¿ç»§ç»­æ¯”è¾ƒï¼Œåˆ™å¢åŠ æœ«å°¾å“¨å…µä¸º0å˜æˆ120ï¼Œäºæ˜¯éå†åˆ°0çš„æ—¶å€™20æ»¡è¶³äº†21ç±»å‹ï¼Œ2å‡ºæ ˆï¼Œ10ä¹Ÿæ»¡è¶³21ç±»å‹ï¼Œç»“æŸã€‚ */public class eight_four_æŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§çŸ©å½¢_other { @Test public void test(){ int[] heights = {2, 1, 5, 6, 2, 3}; int res = largestRectangleArea(heights); System.out.println(res); } public int largestRectangleArea(int[] heights) { int len = heights.length; if (len == 0) return 0; if (len == 1) return heights[0]; int res = 0; int[] newHeights = new int[len + 2]; newHeights[0] = 0; System.arraycopy(heights, 0, newHeights, 1, len); newHeights[len + 1] = 0; len += 2; heights = newHeights; Deque&lt;Integer&gt; stack = new ArrayDeque&lt;&gt;(len); // å…ˆæ”¾å…¥å“¨å…µï¼Œåœ¨å¾ªç¯é‡Œå°±ä¸ç”¨åšéç©ºåˆ¤æ–­ stack.addLast(0); for (int i = 1; i &lt; len; i++) { while (heights[i] &lt; heights[stack.peekLast()]) { int curHeight = heights[stack.pollLast()]; int curWidth = i - stack.peekLast() - 1; res = Math.max(res, curHeight * curWidth); } stack.addLast(i); } return res; }} 10msï¼Œä¼°è®¡æ—¶é—´çš„æ¶ˆè€—åœ¨System.arraycopyï¼Œè¿˜æœ‰åˆ«çš„å†™æ³•ï¼Œå å‘ã€‚ 3. å…¶ä»–å•è°ƒæ ˆç³»åˆ—é¢˜ç›®å…¶ä»–å•è°ƒæ ˆç³»åˆ—é¢˜å¯ä»¥ç‚¹è¿™é‡Œ","link":"/algorithms/largest-rectangle-in-histogram/"},{"title":"784-å­—æ¯å¤§å°å†™å…¨æ’åˆ—","text":"åŠ›æ‰£784 https://leetcode-cn.com/problems/letter-case-permutation/ æœ¬é¢˜å’Œ1219 é»„é‡‘çŸ¿å·¥ç±»ä¼¼ï¼Œå±äºæšä¸¾å‹å›æº¯ æšä¸¾ï¼šå½“æ•°å­—æ—¶è¿›è¡Œä¸€æ¬¡é€‰æ‹©ã€é€’å½’ã€æ’¤é”€ï¼Œå½“å­—æ¯æ—¶è¿›è¡Œä¸¤æ¬¡ï¼ˆä¸€æ¬¡å¤§å†™ä¸€æ¬¡å°å†™ï¼‰é€‰æ‹©ã€é€’å½’ã€æ’¤é”€ è¿™é¢˜æœ‰è¯´ä»…ç”±æ•°å­—å’Œå­—æ¯ç»„æˆï¼Œæ‰€ä»¥ç›´æ¥åˆ¤æ–­æ•°å­—æ¯”è¾ƒç®€å•ï¼Œelseä¸ºå­—æ¯ æ€»ä½“æ¯”è¾ƒç®€å•ï¼Œç›´æ¥è´´æ ¸å¿ƒä»£ç  12345678910111213141516171819202122232425262728public List&lt;String&gt; letterCasePermutation(String S) { backtrace(S, 0, new StringBuilder()); return res;}private List&lt;String&gt; res = new ArrayList&lt;&gt;();public void backtrace(String s, int index, StringBuilder path){ //ç»“æŸæ¡ä»¶ï¼špath.length == s.length if (path.length() == s.length()){ res.add(path.toString()); return ; } //å¼€å§‹æšä¸¾å›æº¯ if (Character.isDigit(s.charAt(index))){ //æ•°å­— path.append(s.charAt(index)); //é€‰æ‹© backtrace(s, index + 1, path); //é€’å½’ path.deleteCharAt(path.length() - 1); //æ’¤é”€ }else { //å­—æ¯ //å¤§å†™ path.append(String.valueOf(s.charAt(index)).toUpperCase()); //é€‰æ‹© backtrace(s, index + 1, path); //é€’å½’ path.deleteCharAt(path.length() - 1); //æ’¤é”€ //å°å†™ path.append(String.valueOf(s.charAt(index)).toLowerCase()); //é€‰æ‹© backtrace(s, index + 1, path); //é€’å½’ path.deleteCharAt(path.length() - 1); //æ’¤é”€ }} å…¶ä»–å›æº¯ç³»åˆ—é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/letter-case-permutation/"},{"title":"901-è‚¡ç¥¨ä»·æ ¼è·¨åº¦","text":"åŠ›æ‰£901 https://leetcode-cn.com/problems/online-stock-span/ å•è°ƒæ ˆé¢˜ç›®ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šåŠ›æ‰£çš„è¾“å…¥æ ·ä¾‹æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯ç›´æ¥return 1çš„è¯å¯ä»¥æµ‹è¯•ä¸€ä¸‹çœ‹åˆ°å·²ç»è¿”å›äº†null, 1, 1â€¦å› æ­¤å¯ä»¥åˆ¤æ–­åªéœ€è¦å®Œæˆè¿™ä¸ªç±»çš„nextæ–¹æ³•å³å¯ 123456789101112131415161718class StockSpanner { private Deque&lt;int[]&gt; stack = new LinkedList&lt;&gt;(); //é€’å‡æ ˆ public StockSpanner() { } public int next(int price) { int num = 1; int[] node = new int[2]; while (!stack.isEmpty() &amp;&amp; price &gt;= stack.peekLast()[0]){ int lastNum = stack.pollLast()[1]; num += lastNum; } node[0] = price; node[1] = num; stack.offerLast(node); return num; }} å…¶ä»–å•è°ƒæ ˆç³»åˆ—é¢˜å¯ä»¥ç‚¹è¿™é‡Œ","link":"/algorithms/online-stock-span/"},{"title":"JSä»urlä¸­è·å–è¯·æ±‚å‚æ•°å·¥å…·ç±»","text":"è¿™æ˜¯ä¸€ä¸ªä»URLä¸­è·å–å‚æ•°å€¼çš„å·¥å…·ä¾‹å¦‚URLä¸ºhttp://localhost/index.html?id=5&amp;name=å¼ ä¸‰ é‚£ä¹ˆåœ¨htmlä¸­å¼•å…¥è¯¥å¤´æ–‡ä»¶ &lt;script src=&quot;js/getParameter.js&quot;&gt;&lt;/script&gt; åå°±å¯ä»¥é€šè¿‡jsä»£ç ä¼ å…¥å‚æ•°è·å¾—å‚æ•°å€¼äº† 1var id = getParameter(\"id\"); ä¸‹é¢ç»™å‡ºå·¥å…·ç±»getParameter.jsçš„ä»£ç  123456//æ ¹æ®ä¼ é€’è¿‡æ¥çš„å‚æ•°nameè·å–å¯¹åº”çš„å€¼function getParameter(name) { var reg = new RegExp(\"(^|&amp;)\" + name + \"=([^&amp;]*)(&amp;|$)\",\"i\"); var r = location.search.substr(1).match(reg); if (r!=null) return (r[2]); return null;}","link":"/frontend/JS%E4%BB%8Eurl%E4%B8%AD%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%B7%A5%E5%85%B7%E7%B1%BB/"},{"title":"JavaäºŒå‰æ ‘çš„å±‚æ¬¡éå†","text":"1. å±‚æ¬¡éå†å’ŒBFSä¹‹å‰å†™è¿‡äºŒå‰æ ‘çš„å‰ä¸­ååºéå†ï¼Œä¸æ‡‚çš„ç‚¹è¿™é‡Œï¼Œä»Šå¤©ä»‹ç»çš„æ˜¯å±‚æ¬¡éå†ï¼Œå±‚æ¬¡éå†æ¦‚å¿µå¾ˆç®€å•ï¼Œæˆ‘ç›´æ¥ç›—ç”¨åŠ›æ‰£ä¸Šé¢çš„å›¾äº†ï¼Œé‡‡ç”¨BFSä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ 2. BFSæ¨¡æ¿è¿˜æ˜¯æˆ‘ä»¬æœ€å–œæ¬¢çš„å¥—è·¯æ¨¡æ¿ç¯èŠ‚ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä»£ç  123456789void bfs(TreeNode root) { Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); queue.offer(root); while (!queue.isEmpty()) { TreeNode node = queue.poll(); // Java çš„ pop å†™ä½œ poll() if (node.left != null) queue.offer(node.left); if (node.right != null) queue.offer(node.right); }} BFSå’Œå…³é”®æ˜¯é˜Ÿåˆ—ï¼Œé€šè¿‡å…ˆè¿›å…ˆå‡ºçš„æœºåˆ¶å®Œæˆå¹¿åº¦ä¼˜å…ˆ https://leetcode-cn.com/leetbook/read/data-structure-binary-tree/xej9yc/ é€šè¿‡è¿™ä¸ªå¹»ç¯ç‰‡å°±å¯ä»¥å¾ˆå¥½çš„è§£é‡Šäº†é˜Ÿåˆ—åœ¨äºŒå‰æ ‘å±‚æ¬¡éå†ä¸­çš„ä½¿ç”¨ï¼šæ¯å½“ä¸€ä¸ªæ ¹èŠ‚ç‚¹å‡ºé˜Ÿï¼Œå°±æŠŠå·¦å³å­èŠ‚ç‚¹å…¥é˜Ÿï¼Œä¸æ–­å¾ªç¯ 3. é¢˜ç›®ï¼šåŠ›æ‰£102 https://leetcode-cn.com/problems/binary-tree-level-order-traversal/ ç”±äºé¢˜ç›®ä¸ä»…è¦æ±‚å±‚æ¬¡éå†ï¼Œè¿˜è¦æŒ‰è¾“å‡ºè§„åˆ™è¿”å›List&lt;List&lt;Integer&gt;&gt; 12345[ [3], [9,20], [15,7]] å› æ­¤æˆ‘ä»¬éœ€è¦è®°å½•æ¯å±‚æœ‰å¤šå°‘ä¸ªï¼Œç„¶åéå†è¿™ä¹ˆå¤šä¸ªå¹¶åŠ å…¥æ¯å±‚listï¼Œéå†å®Œåæ‰å°†è¿™ä¸ªliståŠ å…¥æœ€ç»ˆç»“æœresï¼Œç›´æ¥ç»™ideå¯ä»¥æµ‹è¯•çš„ä»£ç  1234567891011121314151617181920212223242526272829303132public class one_zero_two_äºŒå‰æ ‘çš„å±‚æ¬¡éå† { @Test public void test(){ TreeNode root = new TreeNode(3); root.left = new TreeNode(9); root.right = new TreeNode(20); root.right.left = new TreeNode(15); root.right.right = new TreeNode(7); List&lt;List&lt;Integer&gt;&gt; lists = levelOrder(root); System.out.println(lists.toString()); } private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;(); public List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) { if(root == null) return res; Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;(); queue.offer(root); while(!queue.isEmpty()){ List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); int size = queue.size(); //è¿™é‡Œå’Œä¸‹é¢çš„forå¾ªç¯å°±æ˜¯è®°å½•æ¯å±‚çš„listï¼Œå…¶ä»–éƒ½æ˜¯ä¸Šé¢çš„æ¨¡æ¿ for(int i = 0; i &lt; size; i++){ root = queue.poll(); list.add(root.val); if(root.left != null) queue.offer(root.left); if(root.right != null) queue.offer(root.right); } res.add(list); } return res; }} å…¶ä»–æ ‘çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/hierarchical-traversal-binary-tree-with-java/"},{"title":"GC","text":"1. å¦‚ä½•å®šä½åƒåœ¾åƒåœ¾å°±æ˜¯æ²¡æœ‰å¼•ç”¨çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå¦‚ä½•ç¡®å®šæ˜¯å¦è¿˜å­˜åœ¨å¼•ç”¨å‘¢ å¼•ç”¨è®¡æ•°(ReferenceCount)ï¼šå­˜åœ¨å¾ªç¯å¼•ç”¨é—®é¢˜ æ ¹å¯è¾¾ç®—æ³•(RootSearching)ï¼šä»è·Ÿå¼€å§‹å¯»æ‰¾(çº¿ç¨‹æ ˆå˜é‡ï¼Œé™æ€å˜é‡ï¼Œå¸¸é‡æ± ï¼ŒJNIæŒ‡é’ˆ)ï¼Œæ‰¾ä¸åˆ°çš„å°±ç®—åƒåœ¾ 2. åƒåœ¾å›æ”¶ç®—æ³• æ ‡è®°æ¸…é™¤(mark sweep) - ä½ç½®ä¸è¿ç»­ äº§ç”Ÿç¢ç‰‡ æ•ˆç‡åä½ï¼ˆä¸¤éæ‰«æï¼‰ æ‹·è´ç®—æ³• (copying) - æ²¡æœ‰ç¢ç‰‡ï¼Œæµªè´¹ç©ºé—´ æ ‡è®°å‹ç¼©(mark compact) - æ²¡æœ‰ç¢ç‰‡ï¼Œæ•ˆç‡åä½ï¼ˆä¸¤éæ‰«æï¼ŒæŒ‡é’ˆéœ€è¦è°ƒæ•´ï¼‰ 3. JVMä¸­çš„åƒåœ¾å›æ”¶å™¨10ç§å¦‚ä¸‹ï¼ŒJVMå›æ”¶å†…å­˜é€šå¸¸æ˜¯ç»„åˆä½¿ç”¨ï¼Œä¸åŒçš„åƒåœ¾å›æ”¶å™¨é‡‡ç”¨ä¸åŒçš„ç­–ç•¥ å·¦è¾¹6ä¸ªåˆ†ä»£æ¨¡å‹ä¸­ï¼Œä¸‹é¢çš„æ˜¯è€å¹´ä»£ï¼Œä¸Šé¢çš„æ˜¯å¹´è½»ä»£ï¼Œä¸€èˆ¬æ˜¯å¦‚å›¾æ‰€ç¤ºæ­é…ï¼ˆä½†ä¹Ÿå¯ä»¥æ··æ‚æ­é…ï¼Œçœ‹å…¶ä»–è™šçº¿ï¼‰ 1.8é»˜è®¤æ˜¯PS+POï¼ˆæ–°ç”Ÿä»£Parallel Scavengeï¼Œè€å¹´ä»£Parallel Oldï¼‰ï¼Œä½†æ˜¯å¯ä»¥ç”¨åˆ†åŒºæ¨¡å‹G1ï¼ˆæ¨èï¼Œæœ‰äº›å…¬å¸è¿ç»´æœ‰JVMè°ƒä¼˜ç»éªŒçš„è¯è¯´ä¸å®šä¼šç”¨è¿™ä¸ªï¼‰ ä¸‹é¢ä»‹ç»ä¸€ä¸‹å„ä¸ªç»„åˆ 3.1 åˆ†ä»£æ¨¡å‹-Serialç³»åˆ—å¦‚å›¾è§£é‡Šçš„å¾ˆæ¸…æ¥šï¼Œå½“åƒåœ¾å›æ”¶çº¿ç¨‹æ¥äº†ï¼Œå·¥ä½œçº¿ç¨‹STWï¼Œåƒåœ¾å›æ”¶çº¿ç¨‹å®Œäº†ï¼Œå·¥ä½œçº¿ç¨‹æ‰èƒ½ç»§ç»­ STWï¼šStop The Worldï¼Œå¦‚å­—é¢æ„æ€ï¼Œé©¬ä¸Šï¼ï¼åœæ­¢ï¼ï¼ï¼ ä¸ºä»€ä¹ˆæœ‰æ—¶å€™æœºå™¨ä¼šçªç„¶å¡é¡¿ä¸€ä¸‹ï¼Œå°±æ˜¯å› ä¸ºSTWäº† 3.2 åˆ†ä»£æ¨¡å‹-Parallelç³»åˆ—éšç€å†…å­˜è¶Šæ¥è¶Šå¤§ï¼ŒSerialæœ‰ç‚¹æ…¢ï¼Œäºæ˜¯å‡ºç°äº†Parallel å’ŒSerialå·®ä¸å¤šä¹Ÿæ˜¯STWï¼Œä¸è¿‡Parallelå˜›ï¼Œåƒåœ¾å›æ”¶çº¿ç¨‹æ˜¯å¤šä¸ªä¸”å¹¶è¡Œçš„ 3.3 åˆ†ä»£æ¨¡å‹-CMSç³»åˆ—è¿˜æ˜¯éšç€å†…å­˜çš„è¶Šæ¥è¶Šå¤§ï¼ŒParallelå¾ˆæ…¢ï¼ŒåŸå› ï¼šçº¿ç¨‹æ•°å’Œæ•ˆç‡ä¸æ˜¯çº¿æ€§æå‡çš„ï¼Œå› ä¸ºçº¿ç¨‹éœ€è¦ä¸Šä¸‹æ–‡åˆ‡æ¢ContextSwitchï¼Œåˆ°è¾¾ä¸€å®šæ•°é‡åï¼Œçº¿ç¨‹å¤šåè€Œè€—è´¹äº†å¤§é‡æ—¶é—´åœ¨æ­¤ CMSï¼šconcurrent mark sweep Parnewå’ŒParallel ScavengeåŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯ä¸ºäº†é…åˆCMSè€Œäº§ç”Ÿçš„ CMSè¿‡ç¨‹å¦‚ä¸‹ï¼š åˆå§‹æ ‡è®°ä¹Ÿæ˜¯STWï¼Œä½†æ˜¯åªGCRootæ‰«ææ ¹ï¼ˆå‰é¢è¯´çš„æ ¹å¯è¾¾ç®—æ³•å¯è¿˜è®°å¾—ï¼Ÿï¼‰ï¼Œå¾ˆå°‘æ‰€ä»¥æ—¶é—´å¯ä»¥æ¥å— é‡æ–°æ ‡è®°ä¹Ÿæ˜¯STWï¼Œè¿™é‡Œæœ‰ä¸ªbugï¼Œåé¢è®² CMSä¸‰è‰²æ ‡è®°æ³•å’Œé”™æ ‡é—®é¢˜å¹¶å‘æ ‡è®°å­˜åœ¨é—®é¢˜ï¼Œå°±æ˜¯é”™æ ‡ æƒ…å†µ1ï¼šåœ¨æ ‡è®°çš„æ—¶å€™çªç„¶æœ‰ä¸ªå¯¹è±¡å¼•ç”¨æ²¡äº†ï¼ˆæˆä¸ºäº†åƒåœ¾ï¼Œç§°ä¸ºæµ®åŠ¨åƒåœ¾ï¼‰ï¼Œè¿™ç§å°±æ˜¯æ¼æ ‡äº†ï¼Œè¿™ç§é—®é¢˜ä¸å¤§ï¼Œå¤§ä¸äº†ä¸‹æ¬¡gcå†æ¸…ç†å°±æ˜¯äº† æƒ…å†µ2ï¼šä¸€ä¸ªå¯¹è±¡æœ¬æ¥æ˜¯åƒåœ¾ï¼Œçªç„¶åˆæœ‰å¼•ç”¨äº†ï¼ˆå­˜åœ¨è¿™ç§æƒ…å†µå˜›ï¼Ÿæœ‰çš„ï¼Œç¼“å­˜ï¼‰ï¼Œè¿™ç§é”™æ ‡å°±æ¯”è¾ƒä¸¥é‡äº† æ‰€ä»¥å­˜åœ¨é‡æ–°æ ‡è®°çš„è¿‡ç¨‹ ä¸‰è‰²æ ‡è®°æ³• é»‘è‰²ï¼šå¯¹è±¡æ ‡è®°ï¼Œæˆå‘˜fieldä¹Ÿè¢«æ ‡è®° ç°è‰²ï¼šå¯¹è±¡æ ‡è®°ï¼Œæˆå‘˜è¿˜æœªæ ‡è®° ç™½è‰²ï¼šæ²¡æœ‰éå†åˆ°çš„å­—æ®µ æ ‡è®°æ˜¯æ€ä¹ˆæ ‡è®°çš„å‘¢ï¼ŸCMSæ ‡è®°é‡‡ç”¨ä¸‰è‰²æ ‡è®°æ³•ï¼Œé‡æ–°æ ‡è®°é˜¶æ®µæ‰«æå°±æ˜¯æ‰«æç°è‰²çš„å¯¹è±¡ã€‚è¯´å›æƒ…å†µ2ï¼Œå¦‚æœç¬¬ä¸€æ¬¡æ ‡è®°åé»‘è‰²çš„å¯¹è±¡æœ‰ä¸ªæŒ‡é’ˆåŸŸæŒ‡å‘äº†æŸä¸ªç™½è‰²å¯¹è±¡ï¼Œå†æ¬¡æ ‡è®°çš„æ—¶å€™ä¸ä¼šå†æ‰«æé»‘è‰²å¯¹è±¡ï¼Œæ­¤æ—¶å°±äº§ç”Ÿäº†é”™æ ‡ è§£å†³åŠæ³• CMSè§£å†³åŠæ³•ï¼šincremental updateï¼šç®€å•çš„è¯´å°±æ˜¯Aå¼•ç”¨å˜äº†çš„æ—¶å€™é‡æ–°å°†Aç½®ä¸ºç°è‰²ï¼Œè¿™æ ·å°±å¯ä»¥é‡æ–°æ‰«æåˆ°äº† è¿™ç§åŠæ³•å­˜åœ¨ä¸€ä¸ªbugï¼Œå°±æ˜¯è¯´å¯¹è±¡Aæœ‰ä¸¤ä¸ªfieldï¼Œå¤šçº¿ç¨‹çš„æ—¶å€™åƒåœ¾å›æ”¶çº¿ç¨‹æ ‡è®°äº†field1ä¸æ˜¯åƒåœ¾ï¼Œç„¶åæ‰«æfield2ï¼Œå·¥ä½œçº¿ç¨‹ä½¿å¾—field1é‡æ–°æŒ‡å‘äº†ä¸€ä¸ªåƒåœ¾å¯¹è±¡Dï¼Œè¿™æ ·æœ¬æ¥Aåº”è¯¥è¢«æ ‡è®°ä¸ºç°è‰²ï¼Œä½†æ˜¯åƒåœ¾å›æ”¶çº¿ç¨‹ä¸çŸ¥é“filed1æ”¹å˜äº†ï¼Œæ ‡è®°å®Œfield2åå°†Aç½®ä¸ºé»‘è‰² å› æ­¤æ‰éœ€è¦remarkè¿‡ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹å¯¼è‡´CMSè¿™ä¸ªåŸæœ¬å·ç§°â€œè§£å†³STWâ€çš„ç®—æ³•äº§ç”Ÿäº†å†å²ä¸Šæœ€é•¿çš„STWï¼Œä¹Ÿå°±æ˜¯å› ä¸ºè¿™æ ·ï¼ŒCMSå¹¶æ²¡æœ‰ä½œä¸ºä»»ä½•ä¸€ä¸ªJDKç‰ˆæœ¬çš„é»˜è®¤åƒåœ¾å›æ”¶å™¨ G1è§£å†³åŠæ³•ï¼šSATB 3.4 JVMçš„å †å†…å­˜æ¨¡å‹JVMå †çš„å…·ä½“å†…å­˜åˆ†åŒºå¦‚ä¸‹ï¼Œå›¾ä¸­çš„æ•°å­—æ˜¯å¤§å°æ¯”ä¾‹ å¯ä»¥çœ‹åˆ°æ–°ç”Ÿä»£ç”¨çš„æ‹·è´ç®—æ³•ï¼Œä½†ä¸æ˜¯ä¸€èˆ¬çš„æ‹·è´ï¼Œæ˜¯eden:survivor1:survivor2=8:1:1ï¼Œç¬¬ä¸€æ¬¡gcä»edenåˆ°s1ï¼Œç„¶ååœ¨s1å’Œs2ä¹‹é—´æ¥å›è·³ï¼Œåˆ°è¾¾ä¸€å®šçš„æ¬¡æ•°åè¿›å…¥è€å¹´ä»£ï¼ˆè¿™ä¸ªæ¬¡æ•°é»˜è®¤15ï¼ŒCMSé»˜è®¤6ï¼Œå¯ä»¥é€šè¿‡-XX:MaxTenuringThresholdé…ç½®ï¼‰ 4. JVMè°ƒä¼˜å®æˆ˜ç»éªŒ æœåŠ¡å™¨å‡çº§åŠ å¤§äº†å†…å­˜ï¼Œåè€Œæ›´åŠ å¡é¡¿ã€‚åŸå› æ˜¯å†…å­˜è¶Šå¤§ï¼ŒFGCæ—¶é—´è¶Šé•¿ã€‚è§£å†³åŠæ³•ï¼šPS -&gt; PN + CMS æˆ–è€… G1 çº¿ä¸ŠCPUçªç„¶100%ã€‚é‚£ä¹ˆä¸€å®šæœ‰çº¿ç¨‹åœ¨å ç”¨ç³»ç»Ÿèµ„æºï¼Œ æ‰¾å‡ºå“ªä¸ªè¿›ç¨‹cpué«˜ï¼ˆtopï¼‰ è¯¥è¿›ç¨‹ä¸­çš„å“ªä¸ªçº¿ç¨‹cpué«˜ï¼ˆtop -Hpï¼‰ å¯¼å‡ºè¯¥çº¿ç¨‹çš„å †æ ˆ (jstack) æŸ¥æ‰¾å“ªä¸ªæ–¹æ³•ï¼ˆæ ˆå¸§ï¼‰æ¶ˆè€—æ—¶é—´ (jstack) å·¥ä½œçº¿ç¨‹å æ¯”é«˜ | åƒåœ¾å›æ”¶çº¿ç¨‹å æ¯”é«˜ ç³»ç»Ÿå†…å­˜é£™é«˜ï¼Œå¦‚ä½•æŸ¥æ‰¾é—®é¢˜ï¼Ÿï¼ˆé¢è¯•é«˜é¢‘ï¼‰ å¯¼å‡ºå †å†…å­˜ (jmap) åˆ†æ (jhat jvisualvm mat jprofiler â€¦ ) å¦‚ä½•ç›‘æ§JVM jstat jvisualvm jprofiler arthas topâ€¦ é™„å½•1. å¯¹è±¡åˆ†é…è¿‡ç¨‹ ä¸€äº›åŸºæœ¬ç±»å‹çš„å˜é‡æ˜¯æœ‰æœºä¼šåˆ†é…åœ¨æ ˆä¸Šçš„æ¯”å¦‚å±€éƒ¨å˜é‡ï¼Œæ€ä¹ˆåˆ¤å®šæ˜¯å¦èƒ½åˆ†é…åœ¨æ ˆä¸Šï¼Ÿå¦‚æœé€ƒé€¸åˆ†ææ²¡æœ‰é€ƒé€¸ï¼Œæ ‡é‡æ›¿æ¢å¯ä»¥æ›¿æ¢ï¼Œåˆ™åˆ†é…åœ¨æ ˆä¸Š é€ƒé€¸åˆ†æï¼šçœ‹é™„å½•2 æ ‡é‡æ›¿æ¢ï¼šå³ä¸€ä¸ªå¯¹è±¡å¯ä»¥ç”¨ä¸¤ä¸ªåŸºæœ¬ç±»å‹çš„å˜é‡æ¥æ›¿æ¢å®ƒï¼Œå°±ç§°ä¸ºå¯ä»¥æ ‡é‡æ›¿æ¢ï¼Œæ¯”å¦‚ä¸€ä¸ªå¯¹è±¡åªæœ‰ä¸¤ä¸ªintçš„ç±»å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ä¸¤ä¸ªintå˜é‡ä»£æ›¿è¿™ä¸ªç±»ï¼ˆç»“æ„ä½“ï¼‰ å¦‚æœå¯¹è±¡å¤ªå¤§ï¼Œç›´æ¥è€å¹´ä»£ï¼Œå¦åˆ™ä¼šå…ˆTLABï¼ˆThreadLocalAllocationBufferçº¿ç¨‹æœ¬åœ°åˆ†é…ç¼“å†²åŒºï¼‰ï¼Œè¿™ä¸ªç»†èŠ‚ä¸€èˆ¬ä¸ä¼šæœ‰äººé—®èµ·ï¼Œä½†æ˜¯ç¡®å®å­˜åœ¨çš„ï¼ŒEdenåŒºæœ‰ä¸€éƒ¨åˆ†TLABï¼Œçº¿ç¨‹äº‰ç”¨åæ‰è¿›å…¥EdenåŒºçš„å…¬å…±ç©ºé—´ 2. é€ƒé€¸åˆ†æé€ƒé€¸åˆ†æçš„åŸºæœ¬è¡Œä¸ºå°±æ˜¯åˆ†æå¯¹è±¡åŠ¨æ€ä½œç”¨åŸŸï¼šå½“ä¸€ä¸ªå¯¹è±¡åœ¨æ–¹æ³•ä¸­è¢«å®šä¹‰åï¼Œå®ƒå¯èƒ½è¢«å¤–éƒ¨æ–¹æ³•å¼•ç”¨ï¼Œä¾‹å¦‚ä½œä¸ºè°ƒç”¨å‚æ•°ä¼ é€’åˆ°å…¶ä»–æ–¹æ³•ä¸­ï¼Œç§°ä¸ºæ–¹æ³•é€ƒé€¸ã€‚ç”šè‡³è¿˜æœ‰å¯èƒ½è¢«å¤–éƒ¨çº¿ç¨‹è®¿é—®åˆ°ï¼Œè­¬å¦‚èµ‹å€¼ç»™ç±»å˜é‡æˆ–å¯ä»¥åœ¨å…¶ä»–çº¿ç¨‹ä¸­è®¿é—®çš„å®ä¾‹å˜é‡ï¼Œç§°ä¸ºçº¿ç¨‹é€ƒé€¸ã€‚å¦‚æœèƒ½è¯æ˜ä¸€ä¸ªå¯¹è±¡ä¸ä¼šé€ƒé€¸åˆ°æ–¹æ³•æˆ–çº¿ç¨‹ä¹‹å¤–ï¼Œä¹Ÿå°±æ˜¯åˆ«çš„æ–¹æ³•æˆ–çº¿ç¨‹æ— æ³•é€šè¿‡ä»»ä½•é€”å¾„è®¿é—®åˆ°è¿™ä¸ªå¯¹è±¡ï¼Œåˆ™å¯èƒ½ä¸ºè¿™ä¸ªå˜é‡è¿›è¡Œä¸€äº›é«˜æ•ˆçš„ä¼˜åŒ–ï¼š æ ˆä¸Šåˆ†é… Javaè™šæ‹Ÿæœºä¸­ï¼Œå¦‚æœç¡®å®šä¸€ä¸ªå¯¹è±¡ä¸ä¼šé€ƒé€¸å‡ºæ–¹æ³•ä¹‹å¤–ï¼Œé‚£è®©è¿™ä¸ªå¯¹è±¡åœ¨æ ˆä¸Šåˆ†é…å†…å­˜å°†ä¼šæ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„ä¸»æ„ï¼Œå¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´å°±å¯ä»¥éšæ ˆå¸§å‡ºæ ˆè€Œé”€æ¯ã€‚åœ¨ä¸€èˆ¬åº”ç”¨ä¸­ï¼Œä¸ä¼šé€ƒé€¸çš„å±€éƒ¨å¯¹è±¡æ‰€å çš„æ¯”ä¾‹å¾ˆå¤§ï¼Œå¦‚æœèƒ½ä½¿ç”¨æ ˆä¸Šåˆ†é…ï¼Œé‚£å¤§é‡çš„å¯¹è±¡å°±ä¼šéšç€æ–¹æ³•çš„ç»“æŸè€Œè‡ªåŠ¨é”€æ¯äº†ï¼Œåƒåœ¾æ”¶é›†ç³»ç»Ÿçš„å‹åŠ›å°†ä¼šå°å¾ˆå¤šã€‚ åŒæ­¥æ¶ˆé™¤ çº¿ç¨‹åŒæ­¥æœ¬èº«æ˜¯ä¸€ä¸ªç›¸å¯¹è€—æ—¶çš„è¿‡ç¨‹ï¼Œå¦‚æœé€ƒé€¸åˆ†æèƒ½å¤Ÿç¡®å®šä¸€ä¸ªå˜é‡ä¸ä¼šé€ƒé€¸å‡ºçº¿ç¨‹ï¼Œæ— æ³•è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ï¼Œé‚£è¿™ä¸ªå˜é‡çš„è¯»å†™è‚¯å®šå°±ä¸ä¼šæœ‰ç«äº‰ï¼Œå¯¹è¿™ä¸ªå˜é‡å®æ–½çš„åŒæ­¥æªæ–½ä¹Ÿå°±å¯ä»¥æ¶ˆé™¤ã€‚ æ ‡é‡æ›¿æ¢ æ ‡é‡æ˜¯æŒ‡ä¸€ä¸ªæ•°æ®å·²ç»æ— æ³•å†åˆ†è§£æˆæ›´å°çš„æ•°æ®æ¥è¡¨ç¤ºäº†ï¼ŒJavaè™šæ‹Ÿæœºçš„åŸå§‹æ•°æ®ç±»å‹éƒ½ä¸èƒ½å†è¿›ä¸€æ­¥åˆ†è§£ï¼Œå®ƒä»¬å°±å¯ä»¥ç§°ä¸ºæ ‡é‡ã€‚å¦‚æœé€ƒé€¸åˆ†æè¯æ˜ä¸€ä¸ªå¯¹è±¡ä¸ä¼šè¢«å¤–éƒ¨è®¿é—®ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡å¯ä»¥è¢«æ‹†æ•£çš„è¯ï¼Œé‚£ç¨‹åºçœŸæ­£æ‰§è¡Œçš„æ—¶å€™å°†å¯èƒ½ä¸åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼Œè€Œæ”¹ä¸ºç›´æ¥åˆ›å»ºå®ƒçš„è‹¥å¹²ä¸ªè¢«è¿™ä¸ªæ–¹æ³•ä½¿ç”¨çš„æˆå‘˜å˜é‡æ¥ä»£æ›¿ã€‚é™¤äº†å¯ä»¥è®©å¯¹è±¡çš„æˆå‘˜å˜é‡åœ¨æ ˆä¸Šï¼ˆæ ˆä¸Šå­˜å‚¨çš„æ•°æ®ï¼Œæœ‰å¾ˆå¤§çš„æ¦‚ç‡ä¼šè¢«è™šæ‹Ÿæœºåˆ†é…åˆ°ç‰©ç†æœºå™¨é«˜é€Ÿå¯„å­˜å™¨ä¸­å­˜å‚¨ï¼‰åˆ†é…å’Œè¯»å†™ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä¸ºåç»­è¿›ä¸€æ­¥çš„ä¼˜åŒ–æ‰‹æ®µåˆ›å»ºæ¡ä»¶ã€‚ 3. JVMå¸¸ç”¨å‘½ä»¤3.1 ç›‘æ§ç›¸å…³åŸºç¡€å‘½ä»¤ jpsï¼šæŸ¥è¯¢è¿è¡Œä¸­çš„javaè¿›ç¨‹ç¼–å·å’Œåç§°ï¼Œç›¸å½“äºpså‘½ä»¤ï¼Œä½†åªæœ‰javaç›¸å…³çš„ jinfo pidï¼šä½œç”¨ä¸å¤§ï¼Œå¯ä»¥æŸ¥çœ‹æŸä¸ªè¿›ç¨‹çš„jdkä¿¡æ¯ï¼Œæ¯”å¦‚jdkç‰ˆæœ¬å•Šclasspathå•Šencodingå•Šå½“å‰çš„vmå‚æ•°å•Šç­‰ç­‰ jstack pidï¼šjavaå †æ ˆä¿¡æ¯ï¼Œç±»ä¼¼äºideaé‡Œé¢çš„debugæ§åˆ¶å°å·¦è¾¹ï¼Œæ˜¾ç¤ºäº†æŸä¸ªè¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹è¿è¡Œäº†å“ªä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥æŸ¥æ­»é” jmap -histo pidï¼šæŸ¥çœ‹æŸä¸ªjavaè¿›ç¨‹å†…å­˜åˆ†é…çŠ¶å†µ jstatï¼šå¯ä»¥è§‚å¯Ÿåˆ°classloaderï¼Œcompilerï¼Œgcç›¸å…³ä¿¡æ¯ï¼Œå®æ—¶ç›‘æ§èµ„æºå’Œæ€§èƒ½ å·¥å…·ï¼ˆarthasï¼‰ä¸Šé¢ä»‹ç»çš„åŸºæœ¬å‘½ä»¤åŸºæœ¬ä¸Šä¸ç”¨ï¼Œå› ä¸ºé€šå¸¸éƒ½ç”¨å·¥å…·ï¼Œå°±å¾ˆåƒgitï¼Œä¸€èˆ¬éƒ½ç”¨sourcetreeæˆ–è€…ideaè€Œä¸æ˜¯çº¯å‘½ä»¤è¡Œï¼Œå› ä¸ºå·¥å…·æ›´åŠ å¼ºå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥çœ‹çœ‹ guiå·¥å…·ï¼šjconsole, jvisualvmè¿™äº›å¯è§†åŒ–å·¥å…·éƒ½å¾ˆä¸é”™ï¼Œè€Œä¸”æ˜¯jdkè‡ªå¸¦çš„ï¼Œä½†æ˜¯åªèƒ½åœ¨æœ¬åœ°å¼€å‘å‹æµ‹å’Œdebugç”¨ï¼Œçº¿ä¸ŠæœåŠ¡å™¨é€šå¸¸æ²¡æœ‰guiï¼Œæ‰€ä»¥ç”¨çš„æ›´å¤šçš„æ˜¯arthasï¼ˆé˜¿é‡Œå¼€æºçš„å·¥å…·ï¼Œä¸‹è½½å¹¶å¯åŠ¨jaråŒ…ï¼Œjava -jar arthas-boot.jarï¼Œåœ¨é»‘æ¡†ä¸Šæ¨¡æ‹Ÿå›¾å½¢åŒ–ç•Œé¢ï¼‰ ä¸‹é¢ä»‹ç»arthasä¸€äº›å‘½ä»¤ helpï¼šå¸®åŠ©æ–‡æ¡£ dashboardï¼šä»ªè¡¨ç›˜æ¨¡æ‹Ÿå›¾å½¢ç•Œé¢ï¼Œå¾ˆå¼ºï¼Œå¯ä»¥ç›‘æ§CPUå’Œå†…å­˜ï¼Œç›¸å½“äºtopï¼Œçœ‹å›¾ jvmï¼šç›¸å½“äºjinfoï¼Œæ˜¾ç¤ºäº†jvmç›¸å…³ä¿¡æ¯ï¼Œåƒåœ¾å›æ”¶å™¨ç­‰ thread [çº¿ç¨‹id]ï¼šç›¸å½“äºjstackï¼Œåªåˆ—å‡ºäº†çº¿ç¨‹åˆ—è¡¨ï¼Œè¦çœ‹æŸä¸ªçº¿ç¨‹çš„è¯¦æƒ…å¯ä»¥thread çº¿ç¨‹idï¼Œè¦æ‰¾æ­»é”ï¼Œç›´æ¥thread -bå¯ä»¥çœ‹åˆ°æŸä¸ªæ­»é”é˜»å¡çŠ¶å†µ heapdumpï¼šå°†å†…å­˜å ç”¨ä¿¡æ¯å¯¼å‡ºåˆ°å…·ä½“çš„æ–‡ä»¶å¤¹ï¼Œç”¨äºæŸ¥oomï¼Œå¦‚æœç–¯ç‹‚fgcï¼Œæˆ–è€…å·²ç»å‡ºç°äº†oomï¼Œé‚£ä¹ˆå¯ä»¥heapdumpå¯¼å‡ºåˆ°å…·ä½“çš„æ–‡ä»¶å¤¹ï¼Œç„¶åç”¨å‰é¢è¯´çš„guiå·¥å…·æ‰“å¼€è¿›è¡Œæœ¬åœ°åˆ†æï¼Œç›¸å½“äºjmapå‘½ä»¤ æ³¨æ„ï¼šarthasçš„headdumpå’Œjmapåœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ½ä¸å¤ªèƒ½ç”¨ï¼Œå› ä¸ºå†…å­˜æœ‰å¯èƒ½å¾ˆå¤§ï¼Œå®Œæ•´dumpå¤‡ä»½ä¸€æ¬¡è¦å¾ˆä¹…ï¼Œç”Ÿäº§ç¯å¢ƒé€šå¸¸ä½¿ç”¨XX:+HeapDumpOnOutOfMemoryErrorï¼Œä»£è¡¨åœ¨oomä¹‹å‰è‡ªåŠ¨å¯¼å‡º 3.2 GCå¸¸ç”¨å‚æ•° -Xmn -Xms -Xmx -Xsså¹´è½»ä»£ æœ€å°å † æœ€å¤§å † æ ˆç©ºé—´ -XX:+UseTLABä½¿ç”¨TLABï¼Œé»˜è®¤æ‰“å¼€ -XX:+PrintTLABæ‰“å°TLABçš„ä½¿ç”¨æƒ…å†µ -XX:TLABSizeè®¾ç½®TLABå¤§å° -XX:+DisableExplictGCSystem.gc()ä¸ç®¡ç”¨ ï¼ŒFGC -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintHeapAtGC -XX:+PrintGCTimeStamps -XX:+PrintGCApplicationConcurrentTime (ä½)æ‰“å°åº”ç”¨ç¨‹åºæ—¶é—´ -XX:+PrintGCApplicationStoppedTime ï¼ˆä½ï¼‰æ‰“å°æš‚åœæ—¶é•¿ -XX:+PrintReferenceGC ï¼ˆé‡è¦æ€§ä½ï¼‰è®°å½•å›æ”¶äº†å¤šå°‘ç§ä¸åŒå¼•ç”¨ç±»å‹çš„å¼•ç”¨ -verbose:classç±»åŠ è½½è¯¦ç»†è¿‡ç¨‹ -XX:+PrintVMOptions -XX:+PrintFlagsFinal -XX:+PrintFlagsInitialå¿…é¡»ä¼šç”¨ -Xloggc:opt/log/gc.log -XX:MaxTenuringThresholdå‡ä»£å¹´é¾„ï¼Œæœ€å¤§å€¼15 é”è‡ªæ—‹æ¬¡æ•° -XX:PreBlockSpin çƒ­ç‚¹ä»£ç æ£€æµ‹å‚æ•°-XX:CompileThreshold é€ƒé€¸åˆ†æ æ ‡é‡æ›¿æ¢ â€¦è¿™äº›ä¸å»ºè®®è®¾ç½® Parallelå¸¸ç”¨å‚æ•° -XX:SurvivorRatio -XX:PreTenureSizeThresholdå¤§å¯¹è±¡åˆ°åº•å¤šå¤§ -XX:MaxTenuringThreshold -XX:+ParallelGCThreadså¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°ï¼ŒåŒæ ·é€‚ç”¨äºCMSï¼Œä¸€èˆ¬è®¾ä¸ºå’ŒCPUæ ¸æ•°ç›¸åŒ -XX:+UseAdaptiveSizePolicyè‡ªåŠ¨é€‰æ‹©å„åŒºå¤§å°æ¯”ä¾‹ CMSå¸¸ç”¨å‚æ•° -XX:+UseConcMarkSweepGC -XX:ParallelCMSThreadsCMSçº¿ç¨‹æ•°é‡ -XX:CMSInitiatingOccupancyFractionä½¿ç”¨å¤šå°‘æ¯”ä¾‹çš„è€å¹´ä»£åå¼€å§‹CMSæ”¶é›†ï¼Œé»˜è®¤æ˜¯68%(è¿‘ä¼¼å€¼)ï¼Œå¦‚æœé¢‘ç¹å‘ç”ŸSerialOldå¡é¡¿ï¼Œåº”è¯¥è°ƒå°ï¼Œï¼ˆé¢‘ç¹CMSå›æ”¶ï¼‰ -XX:+UseCMSCompactAtFullCollectionåœ¨FGCæ—¶è¿›è¡Œå‹ç¼© -XX:CMSFullGCsBeforeCompactionå¤šå°‘æ¬¡FGCä¹‹åè¿›è¡Œå‹ç¼© -XX:+CMSClassUnloadingEnabled -XX:CMSInitiatingPermOccupancyFractionè¾¾åˆ°ä»€ä¹ˆæ¯”ä¾‹æ—¶è¿›è¡ŒPermå›æ”¶ GCTimeRatioè®¾ç½®GCæ—¶é—´å ç”¨ç¨‹åºè¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯” -XX:MaxGCPauseMillisåœé¡¿æ—¶é—´ï¼Œæ˜¯ä¸€ä¸ªå»ºè®®æ—¶é—´ï¼ŒGCä¼šå°è¯•ç”¨å„ç§æ‰‹æ®µè¾¾åˆ°è¿™ä¸ªæ—¶é—´ï¼Œæ¯”å¦‚å‡å°å¹´è½»ä»£ G1å¸¸ç”¨å‚æ•° -XX:+UseG1GC -XX:MaxGCPauseMilliså»ºè®®å€¼ï¼ŒG1ä¼šå°è¯•è°ƒæ•´YoungåŒºçš„å—æ•°æ¥è¾¾åˆ°è¿™ä¸ªå€¼ -XX:GCPauseIntervalMillisï¼ŸGCçš„é—´éš”æ—¶é—´ -XX:+G1HeapRegionSizeåˆ†åŒºå¤§å°ï¼Œå»ºè®®é€æ¸å¢å¤§è¯¥å€¼ï¼Œ1 2 4 8 16 32ã€‚éšç€sizeå¢åŠ ï¼Œåƒåœ¾çš„å­˜æ´»æ—¶é—´æ›´é•¿ï¼ŒGCé—´éš”æ›´é•¿ï¼Œä½†æ¯æ¬¡GCçš„æ—¶é—´ä¹Ÿä¼šæ›´é•¿ZGCåšäº†æ”¹è¿›ï¼ˆåŠ¨æ€åŒºå—å¤§å°ï¼‰ G1NewSizePercentæ–°ç”Ÿä»£æœ€å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º5% G1MaxNewSizePercentæ–°ç”Ÿä»£æœ€å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º60% GCTimeRatioGCæ—¶é—´å»ºè®®æ¯”ä¾‹ï¼ŒG1ä¼šæ ¹æ®è¿™ä¸ªå€¼è°ƒæ•´å †ç©ºé—´ ConcGCThreadsçº¿ç¨‹æ•°é‡ InitiatingHeapOccupancyPercentå¯åŠ¨G1çš„å †ç©ºé—´å ç”¨æ¯”ä¾‹","link":"/Java%E5%9F%BA%E7%A1%80/GC/"},{"title":"Javaå®ç°æ ‘çš„éå†åŠäºŒå‰æ ‘å¯è§†åŒ–","text":"1. æ ‘çš„éå†è¯´æ˜ å‰åºéå†ï¼ˆæ ¹å·¦å³ï¼‰ ä¸­åºéå†ï¼ˆå·¦æ ¹å³ï¼‰ ååºéå†ï¼ˆå·¦å³æ ¹ï¼‰ å±‚æ¬¡éå†ï¼ˆä¸€å±‚å±‚ï¼‰ å±‚æ¬¡éå†ä½¿ç”¨çš„æ˜¯BFSï¼Œè€Œå‰ä¸­åæ˜¯DFSï¼Œæ‰€ä»¥å•ç‹¬å¼€ä¸€ç¯‡ ä¸éš¾å‘ç°ï¼Œå…¶å®åå­—ä¸­çš„â€œå‰ä¸­åâ€æŒ‡çš„æ˜¯â€œæ ¹â€çš„ä½ç½® 2. javaå®ç°ï¼ˆé€’å½’å’Œæ ˆï¼‰é€’å½’æ–¹å¼æˆ‘å°±ä¸å¤šè¯´äº†ï¼Œæ ˆæ–¹å¼çš„è¯æŒ‰ç…§å¦‚ä¸‹é¡ºåºï¼š æ ¹èŠ‚ç‚¹å…¥æ ˆ è¿›å…¥å·¦èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¸ä¸ºç©ºåˆ™å…¥æ ˆï¼Œé‡å¤ç›´åˆ°èŠ‚ç‚¹ä¸ºç©ºåˆ™å‡ºæ ˆï¼ˆæ­¤æ—¶å‡ºçš„è¿™ä¸ªæ˜¯æœ€åä¸€ä¸ªä¸ä¸ºç©ºçš„èŠ‚ç‚¹ï¼‰ è¿›å…¥å³èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¸ä¸ºç©ºåˆ™å…¥æ ˆï¼Œé‡å¤ç›´åˆ°æ ˆä¸ºç©ºç»“æŸ é€šç”¨æ¨¡æ¿ 123456789101112131415private List&lt;Integer&gt; res = new ArrayList&lt;&gt;();public List&lt;Integer&gt; traversal(TreeNode root) { Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); while (!stack.empty() || root != null){ if(root!=null){ stack.push(root); root = root.left; }else { root = stack.pop(); root = root.right; } } return res;} ä¸è¦ä¹±å†™ä»£ç ï¼Œç›´æ¥èƒŒä¸‹è¿™å¥—æ¨¡æ¿ï¼Œå‰ä¸­ååºéå†åªå·®ä¸€å¥res.add(root.val);åªæ˜¯ä½ç½®ä¸åŒè€Œå·² 2.1 å‰åºéå†åŠ›æ‰£åŸé¢˜https://leetcode-cn.com/problems/binary-tree-preorder-traversal/ é€’å½’æ–¹å¼ 123456789101112class Solution { private List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); public List&lt;Integer&gt; preorderTraversal(TreeNode root) { if(root != null){ res.add(root.val); preorderTraversal(root.left); preorderTraversal(root.right); } return res; }} æ ˆæ–¹å¼ 123456789101112131415161718class Solution { private List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); public List&lt;Integer&gt; preorderTraversal(TreeNode root) { Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); while(!stack.empty() || root != null){ if (root != null){ res.add(root.val); //å‰åºåŠ åœ¨è¿™é‡Œ stack.push(root); root = root.left; }else { root = stack.pop(); root = root.right; } } return res; }} 2.2 ä¸­åºéå†åŠ›æ‰£åŸé¢˜https://leetcode-cn.com/problems/binary-tree-inorder-traversal/ é€’å½’æ–¹å¼ 1234567891011class Solution { private List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); public List&lt;Integer&gt; inorderTraversal(TreeNode root) { if(root != null){ inorderTraversal(root.left); res.add(root.val); inorderTraversal(root.right); } return res; }} æ ˆæ–¹å¼ 123456789101112131415161718class Solution { private List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); public List&lt;Integer&gt; inorderTraversal(TreeNode root) { Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); while(!stack.empty() || root != null){ if(root != null){ stack.push(root); root = root.left; }else { root = stack.pop(); res.add(root.val); //ä¸­åºåŠ åœ¨è¿™é‡Œ root = root.right; } } return res; }} 2.3 ååºéå†é€’å½’æ–¹å¼ 1234567891011class Solution { private List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); public List&lt;Integer&gt; postorderTraversal(TreeNode root) { if(root != null){ postorderTraversal(root.left); postorderTraversal(root.right); res.add(root.val); } return res; }} æ ˆæ–¹å¼ ååºéå†ä½¿ç”¨æ ˆæ–¹å¼æœ‰ç‚¹ä¸åŒï¼Œæ ˆæ–¹å¼éƒ½æ˜¯ï¼šæ ¹èŠ‚ç‚¹å…¥æ ˆï¼Œå·¦èŠ‚ç‚¹å…¥æ ˆå‡ºæ ˆï¼Œå³èŠ‚ç‚¹å…¥æ ˆå‡ºæ ˆã€‚res.add(root.val);å‰åºåªéœ€è¦åŠ åœ¨æ ¹èŠ‚ç‚¹å…¥æ ˆå‰ï¼Œä¸­åºåªéœ€è¦åŠ åœ¨å³èŠ‚ç‚¹å‡ºæ ˆå‰ã€‚è€Œå¯¹äºååºéå†ï¼ŒæŒ‰ç†æ¥è¯´åº”è¯¥åŠ è½½å³èŠ‚ç‚¹å‡ºæ ˆåï¼Œä½†æ˜¯å·¦èŠ‚ç‚¹å‡ºæ ˆå’Œå³èŠ‚ç‚¹å‡ºæ ˆéƒ½æ˜¯åŒä¸€æ®µä»£ç æ®µï¼Œæˆ‘ä»¬æ— æ³•åˆ¤æ–­root = stack.pop();æ˜¯å·¦èŠ‚ç‚¹å‡ºæ ˆè¿˜æ˜¯å³èŠ‚ç‚¹å‡ºæ ˆï¼Œå› æ­¤æˆ‘ä»¬è¦åœ¨å³èŠ‚ç‚¹å…¥æ ˆæ—¶è®°å½•ä¸‹æ¥ï¼Œå¦‚æœå‡ºæ ˆæ—¶==è®°å½•ï¼Œé‚£ä¹ˆè¯´æ˜æ˜¯å³èŠ‚ç‚¹å‡ºæ ˆã€‚ 12345678910111213141516171819202122232425class Solution { private List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); public List&lt;Integer&gt; postorderTraversal(TreeNode root) { Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); TreeNode stored = null; //ç”¨æ¥è®°å½•å³èŠ‚ç‚¹ while(!stack.empty() || root != null){ if (root != null){ stack.push(root); root = root.left; }else{ root = stack.peek(); //è¿™é‡Œä¸åŒï¼Œä¸è¦ç›´æ¥pop if (root.right == null || root.right == stored){ //è¿™å°±è¯´æ˜æ˜¯å³èŠ‚ç‚¹å·²ç»éå†è¿‡äº†ï¼Œå‡†å¤‡å‡ºæ ˆäº† res.add(root.val); //ååºåŠ åœ¨è¿™é‡Œ stack.pop(); stored = root; //è®°å½•ä¸‹æ¥ root = null; }else { root = root.right; } } } return res; }} å½“ç„¶ï¼Œå¦‚æœä½ åªè®°å¾—æ¨¡æ¿ï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‰åºéå†æ”¹é€ æˆæ ¹å³å·¦ï¼ˆroot = root.leftå’Œroot.rightæ¢ä¸€ä¸‹ä½ç½®ï¼‰ï¼Œç„¶åreverseè¿™ä¸ªåˆ—è¡¨ 123456789101112131415161718192021class Solution { private List&lt;Integer&gt; res = new ArrayList&lt;&gt;(); public List&lt;Integer&gt; postorderTraversal(TreeNode root) { Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); while(!stack.empty() || root != null){ if (root != null){ res.add(root.val); //å‰åºåŠ åœ¨è¿™é‡Œ stack.push(root); root = root.right; //å…ˆå³ }else { root = stack.pop(); root = root.left; //å†å·¦ } } // ç²¾é«“ï¼ -- æ¢ä¸€ç§æ€è·¯æ¥è§£é¢˜ -- é€šè¿‡ä¸€ä¸ªæ–¹å‘ç›¸åçš„è¿‘ä¼¼è§£ï¼Œæœ€ååœ¨ç­”æ¡ˆåŸºç¡€ä¸Šåšåè½¬ // åè½¬ç»“æœï¼Œå¾—åˆ° ï¼š å·¦ -&gt; å³ -&gt; æ ¹ Collections.reverse(res); return res; }} è¿™ç¯‡æ–‡ç« å¯¹æ ˆçš„è¯´æ˜å†™çš„éå¸¸ä¸é”™https://www.cnblogs.com/bigsai/p/11393609.html 2.4 å±‚æ¬¡éå†å±‚æ¬¡éå†å’Œå‰ä¸­ååºæ€æƒ³å’Œå†™æ³•éƒ½å®Œå…¨ä¸åŒ å‰ä¸­ååºï¼šDFS/æ ˆ å±‚æ¬¡éå†ï¼šBFSå’Œé˜Ÿåˆ— ä¸“é—¨å¼€äº†ä¸€ç¯‡æ¥å†™å±‚æ¬¡éå† â€“&gt; ä¼ é€é—¨ é™„å½• å…¶ä»–å†™æ³•1. é¢œè‰²æ ‡è®°æ³•ï¼ˆå¤§ä½¬è¯´å¯ä»¥å‰ä¸­ååºéå†éƒ½ç›¸åŒçš„ä»£ç ï¼‰12345678910class Solution: def inorderTraversal(self, root: TreeNode) -&gt; List[int]: stack,rst = [root],[] while stack: i = stack.pop() if isinstance(i,TreeNode): stack.extend([i.right,i.val,i.left]) elif isinstance(i,int): rst.append(i) return rst javaå®ç°è¯¦è§ https://leetcode-cn.com/problems/binary-tree-inorder-traversal/solution/yan-se-biao-ji-fa-yi-chong-tong-yong-qie-jian-ming/ 2. å¦ä¸€å¥—æ¨¡æ¿ç½‘ä¸Šæœ‰äº›å¾ˆç®€æ´çš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªé£æ ¼æˆ‘æ˜¯æ¯”è¾ƒå–œæ¬¢çš„ï¼Œå‰åºå¦‚ä¸‹ï¼Œè‡ªå·±æ‘¸ç´¢ 1234567891011121314151617class Solution { public List&lt;Integer&gt; preorderTraversal(TreeNode root) { ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(); if(root == null) return list; //åŠ›æ‰£ä¸“å±æµ‹è¯•ç”¨ä¾‹ Stack&lt;TreeNode&gt; stack = new Stack&lt;&gt;(); stack.push(root); while (!stack.isEmpty()) { TreeNode node = stack.pop(); if(node == null) continue; // è¿™æ ·çš„è¾“å‡ºé¡ºåºæ˜¯ï¼šæ ¹ -&gt; å·¦ -&gt; å³ list.add(node.val); stack.push(node.right); stack.push(node.left); } return list; }} 3. äºŒå‰æ ‘çš„å¯è§†åŒ–æ ¹æ®ç½‘ä¸Šçš„ä»£ç ä¿®æ”¹è€Œæˆï¼Œå®Œç¾åˆ‡åˆåŠ›æ‰£æ ¼å¼ï¼Œæœ‰æ—¶å€™åœ¨åŠ›æ‰£åšç®—æ³•é¢˜æ—¶ï¼Œåœ¨æµ‹è¯•çš„æ—¶å€™é€šå¸¸è¦å…ˆæ„é€ ä¸€æ£µæ ‘ï¼Œä½†æ˜¯åˆæ²¡åŠæ³•æŸ¥çœ‹å°±å¾ˆæ— å¥ˆï¼Œåˆ›å»ºä¸¤ä¸ªç±» ä»£ç å·²ç»ä¸Šä¼ åˆ°githubï¼Œé™„å¸¦ä¸€ä¸ªåŠ›æ‰£é¢˜ç›®ä½œä¸ºdemoï¼Œhttps://github.com/wjwABCDEFG/TreeUtil ä»¥ä¸‹æ˜¯ä»£ç å…³é”®éƒ¨åˆ†è§£é‡Šè¯´æ˜ ä¸ºäº†åŒ¹é…ä»»ä½•ç±»å‹ï¼Œè¿™é‡Œç”¨äº†æ³›å‹ 1234567891011/** * æ ‘èŠ‚ç‚¹ */public class Node&lt;T extends Comparable&lt;?&gt;&gt; { public Node&lt;T&gt; left, right; public T data; public Node(T data) { this.data = data; }} TreeVisualUtilä»£ç ï¼Œç›´æ¥å¤åˆ¶å³å¯é£Ÿç”¨ï¼Œè¦æ”¹çš„åœ°æ–¹æˆ‘ç”¨æ³¨é‡Šæ ‡å¥½äº† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117import org.junit.Test;import java.util.ArrayList;import java.util.Collections;import java.util.List;public class TreeVisualUtil { public static &lt;T extends Comparable&lt;?&gt;&gt; void printNode(Node&lt;T&gt; root) { int maxLevel = TreeVisualUtil.maxLevel(root); printNodeInternal(Collections.singletonList(root), 1, maxLevel); } private static &lt;T extends Comparable&lt;?&gt;&gt; void printNodeInternal(List&lt;Node&lt;T&gt;&gt; nodes, int level, int maxLevel) { if (nodes.isEmpty() || TreeVisualUtil.isAllElementsNull(nodes)) { return; } int floor = maxLevel - level; int endgeLines = (int) Math.pow(2, (Math.max(floor - 1, 0))); int firstSpaces = (int) Math.pow(2, (floor)) - 1; int betweenSpaces = (int) Math.pow(2, (floor + 1)) - 1; TreeVisualUtil.printWhitespaces(firstSpaces); List&lt;Node&lt;T&gt;&gt; newNodes = new ArrayList&lt;Node&lt;T&gt;&gt;(); for (Node&lt;T&gt; node : nodes) { if (node != null) { System.out.print(node.data); newNodes.add(node.left); newNodes.add(node.right); } else { newNodes.add(null); newNodes.add(null); System.out.print(\" \"); } TreeVisualUtil.printWhitespaces(betweenSpaces); } System.out.println(\"\"); for (int i = 1; i &lt;= endgeLines; i++) { for (Node&lt;T&gt; node : nodes) { TreeVisualUtil.printWhitespaces(firstSpaces - i); if (node == null) { TreeVisualUtil.printWhitespaces(endgeLines + endgeLines + i + 1); continue; } if (node.left != null) { System.out.print(\"/\"); } else { TreeVisualUtil.printWhitespaces(1); } TreeVisualUtil.printWhitespaces(i + i - 1); if (node.right != null) { System.out.print(\"\\\\\"); } else { TreeVisualUtil.printWhitespaces(1); } TreeVisualUtil.printWhitespaces(endgeLines + endgeLines - i); } System.out.println(\"\"); } printNodeInternal(newNodes, level + 1, maxLevel); } private static void printWhitespaces(int count) { for (int i = 0; i &lt; count; i++) { System.out.print(\" \"); } } private static &lt;T extends Comparable&lt;?&gt;&gt; int maxLevel(Node&lt;T&gt; node) { if (node == null) { return 0; } return Math.max(TreeVisualUtil.maxLevel(node.left), TreeVisualUtil.maxLevel(node.right)) + 1; } private static &lt;T&gt; boolean isAllElementsNull(List&lt;T&gt; list) { for (Object object : list) { if (object != null) { return false; } } return true; } /** * åªéœ€è¦ä¿®æ”¹è¿™é‡ŒæŒ‰éƒ¨å°±ç­æ„é€ è‡ªå·±çš„æ ‘ï¼Œè¿è¡Œmainæ–¹æ³•å³å¯ */ private static Node&lt;String&gt; myTree() { Node&lt;String&gt; root = new Node&lt;&gt;(\"A\"); root.left = new Node&lt;&gt;(\"B\"); root.right = new Node&lt;&gt;(\"C\"); root.left.left = new Node&lt;&gt;(\"D\"); root.left.right = new Node&lt;&gt;(\"E\"); root.left.right.left = new Node&lt;&gt;(\"F\"); return root; } @Test public void test() { //è¦åœ¨åˆ«çš„ç±»ä¸­ä½¿ç”¨åªéœ€è¦è°ƒç”¨ä¸‹é¢è¿™å¥è¯å³å¯ï¼Œå‚æ•°ä¼ å…¥è‡ªå·±çš„rootèŠ‚ç‚¹ TreeVisualUtil.printNode(myTree()); }} æ•ˆæœå¦‚ä¸‹ï¼Œè¿˜ä¸é”™ï¼ å…¶ä»–æ ‘çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/traverse-and-visualize-binary-tree-with-java/"},{"title":"Quillç¬”è®°","text":"1.ä»€ä¹ˆæ˜¯å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç™¾åº¦ç™¾ç§‘ï¼š é€šä¿—æ¥è¯´ï¼šå¯Œæ–‡æœ¬ï¼Œå°±æ˜¯æ¯”è¾ƒä¸°å¯Œçš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚æ™®é€šçš„æ¡†åªèƒ½è¾“å…¥æ–‡å­—ï¼Œè€Œå¯Œæ–‡æœ¬è¿˜èƒ½ç»™æ–‡å­—åŠ é¢œè‰²æ ·å¼ç­‰ã€‚ å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ï¼šKindEditorã€Ueditorã€‚ä½†å¹¶ä¸åŸç”Ÿæ”¯æŒvue ä½†æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è¯´çš„ï¼Œæ˜¯ä¸€æ¬¾æ”¯æŒVueçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼švue-quill-editor 2.Vue-Quill-EditorGitHubçš„ä¸»é¡µï¼šhttps://github.com/surmon-china/vue-quill-editor Vue-Quill-Editoræ˜¯ä¸€ä¸ªåŸºäºQuillçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼šQuillçš„å®˜ç½‘ 3.ä½¿ç”¨æŒ‡å—ä½¿ç”¨éå¸¸ç®€å•ï¼šå·²ç»åœ¨é¡¹ç›®ä¸­é›†æˆã€‚ä»¥ä¸‹æ­¥éª¤ä¸éœ€æ“ä½œï¼Œä»…ä¾›å‚è€ƒ ç¬¬ä¸€æ­¥ï¼šå®‰è£…ï¼Œä½¿ç”¨npmå‘½ä»¤ï¼š 1npm install vue-quill-editor --save ç¬¬äºŒæ­¥ï¼šåŠ è½½ï¼Œåœ¨jsä¸­å¼•å…¥ï¼š å…¨å±€å¼•å…¥ï¼š 123456import Vue from 'vue'import VueQuillEditor from 'vue-quill-editor'const options = {}; /* { default global options } */Vue.use(VueQuillEditor, options); // optionså¯é€‰ å±€éƒ¨å¼•å…¥ï¼š 1234567891011import 'quill/dist/quill.core.css'import 'quill/dist/quill.snow.css'import 'quill/dist/quill.bubble.css'import {quillEditor} from 'vue-quill-editor'var vm = new Vue({ components:{ quillEditor }}) æˆ‘ä»¬è¿™é‡Œé‡‡ç”¨å±€éƒ¨å¼•ç”¨ï¼š ç¬¬ä¸‰æ­¥ï¼šé¡µé¢ä½¿ç”¨ï¼š 1&lt;quill-editor v-model=\"goods.spuDetail.description\" :options=\"editorOption\"/&gt; 4.è‡ªå®šä¹‰çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸è¿‡è¿™ä¸ªç»„ä»¶æœ‰ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯å›¾ç‰‡ä¸Šä¼ çš„æ— æ³•ç›´æ¥ä¸Šä¼ åˆ°åå°ï¼Œå› æ­¤æˆ‘ä»¬å¯¹å…¶è¿›è¡Œäº†å°è£…ï¼Œæ”¯æŒäº†å›¾ç‰‡çš„ä¸Šä¼ ã€‚ ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼š 123&lt;v-stepper-content step=\"2\"&gt; &lt;v-editor v-model=\"goods.spuDetail.description\" upload-url=\"/upload/image\"/&gt;&lt;/v-stepper-content&gt; upload-urlï¼šæ˜¯å›¾ç‰‡ä¸Šä¼ çš„è·¯å¾„ v-modelï¼šåŒå‘ç»‘å®šï¼Œå°†å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„å†…å®¹ç»‘å®šåˆ°goods.spuDetail.description 5.æ•ˆæœ","link":"/frontend/Quill%E7%AC%94%E8%AE%B0/"},{"title":"MySQLåŸºç¡€","text":"1. MySQLåŸºæœ¬æ¶æ„ è¿æ¥å™¨å®¢æˆ·ç«¯æ¯å‘èµ·ä¸€ä¸ªè¿æ¥è¯·æ±‚ï¼Œé¦–å…ˆç»è¿‡è¿æ¥å™¨ï¼Œå»ºç«‹tcpè¿æ¥ï¼Œæ ¡éªŒè´¦å·å¯†ç ã€‚è¿æ¥å™¨ä¼šç»´æŠ¤è¿æ¥åˆ—è¡¨processlist å¯ä»¥é€šè¿‡show processlistæŸ¥çœ‹ï¼Œå…¶ä¸­åˆšå¼€å¯çš„çº¿ç¨‹å¤„äºsleepçŠ¶æ€ Timeä»£è¡¨å·²Sleepçš„æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡äº†wait_timeoutéœ€è¦é‡è¿ï¼Œé»˜è®¤8å°æ—¶ï¼Œå¯ä»¥é€šè¿‡show variables like '%timeout%'å‘½ä»¤æŸ¥çœ‹ ä¸ºäº†é˜²æ­¢æ–­çº¿é‡è¿ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š é•¿è¿æ¥ï¼šç”±äºè¿æ¥åœ¨å†…å­˜ä¸­ï¼Œå®¹æ˜“é€ æˆOOMå¼‚å¸¸ï¼Œmysqlé‡å¯ï¼Œjvmä¼šFull GC é‡ç½®è¿æ¥èµ„æºï¼šé€šè¿‡å‘½ä»¤mysql_reset_connectionï¼Œå¯ä»¥åœ¨ä¸æ–­çº¿çš„æƒ…å†µä¸‹é‡ç½®è¿æ¥èµ„æº ps: è¦æ³¨æ„è®©springé…ç½®è¿æ¥æ± beançš„æ—¶å€™è®¾ç½®çš„maxIdleTimeå±æ€§ï¼ˆä¸åŒè¿æ¥æ± å±æ€§åå¯èƒ½ä¸ä¸€æ ·ï¼‰è¦å°äºmysqlçš„wait_timeout ç¼“å­˜k-vå½¢å¼ï¼Œå¦‚æœå‘½ä¸­ï¼Œç›´æ¥è¿”å›æ•°æ®ï¼Œå¦‚æœæœªå‘½ä¸­ï¼Œèµ°åˆ†æå™¨ï¼Œå¹¶åœ¨è·å–ç»“æœåç¼“å­˜ï¼Œä»¥ä¾¿ç¬¬äºŒæ¬¡æŸ¥ã€‚å› ä¸ºç”¨çš„å°‘ï¼ˆç¼“å­˜éƒ½èµ°redisäº†ï¼‰8.0åå–æ¶ˆäº†ï¼Œ8.0ä¹‹å‰ï¼Œexplainç´¢å¼•åˆ†æçš„æ—¶å€™è®°å¾—åŠ ä¸ŠSQL_NO_CACHEå…³æ‰ åˆ†æå™¨è¯æ³•åˆ†æï¼ˆæŸ¥è¯¢è¿˜æ˜¯åˆ«çš„æ“ä½œï¼Œå“ªå¼ è¡¨ï¼Œå“ªåˆ—ç­‰ï¼‰ï¼Œè¯­æ³•åˆ†æï¼ˆè¿è¡Œæ—¶ä¼šæŠ¥SQL syntaxè¯­æ³•é”™è¯¯ï¼‰ ä¼˜åŒ–å™¨æ˜¯å¦ä½¿ç”¨ç´¢å¼•ï¼Œä½¿ç”¨ä»€ä¹ˆç´¢å¼•ã€‚æœ‰æ—¶å€™ä¼šç”¨é”™ç´¢å¼•ï¼Œä½¿ç”¨analyze table table_nameæˆ–è€…å¼ºåˆ¶èµ°ç´¢å¼•force index æ‰§è¡Œå™¨æ“ä½œå¼•æ“æ‰§è¡ŒSQL å¼•æ“ å‚è€ƒ https://baijiahao.baidu.com/s?id=1655327558614401593&amp;wfr=spider&amp;for=pc https://zhuanlan.zhihu.com/p/53619907 é€šè¿‡show engines;å°±å¯ä»¥æŸ¥çœ‹æ”¯æŒçš„å¼•æ“ï¼Œæœ‰9ç§ï¼Œå¸¸è§çš„æœ‰3ï¼Œ4ç§ï¼ˆInnoDBï¼ŒMyISAMï¼ŒCSVï¼ŒMEMORYï¼‰ æŸ¥çœ‹æŸå¼ è¡¨çš„å¼•æ“ç­‰ä¿¡æ¯å¯ä»¥ç”¨show table status like â€˜userâ€™ \\G ä¸€å¼ è¡¨æ¨ªå‘å¯¹æ¯” InnoDB MySQLé»˜è®¤çš„äº‹åŠ¡å‹å¼•æ“ ç”¨æ¥å¤„ç†å¤§é‡çŸ­æœŸäº‹åŠ¡ï¼ŒçŸ­æœŸäº‹åŠ¡å¤§éƒ¨åˆ†æ˜¯æ­£å¸¸æäº¤çš„ï¼Œå¾ˆå°‘å›æ»š é€šè¿‡é—´éš™é”ï¼ˆnext-key lockingï¼‰é˜²æ­¢å¹»è¯»çš„å‡ºç° åŸºäºèšç°‡ç´¢å¼•å»ºç«‹ï¼Œä¸å…¶ä»–å­˜å‚¨å¼•æ“æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œèšç°‡ç´¢å¼•å¯¹ä¸»é”®æŸ¥è¯¢æœ‰å¾ˆé«˜çš„æ€§èƒ½ï¼Œä¸è¿‡å®ƒçš„äºŒçº§ç´¢å¼•ï¼ˆsecondary indexï¼Œéä¸»é”®ç´¢å¼•ï¼‰å¿…é¡»åŒ…å«ä¸»é”®åˆ—ã€‚æ‰€ä»¥å¦‚æœä¸»é”®åˆ—å¾ˆå¤§çš„è¯ï¼Œç´¢å¼•ä¼šå¾ˆå¤§ æ€§èƒ½é«˜ è‡ªåŠ¨å´©æºƒæ¢å¤ InnoDBé¡µç»“æ„ï¼Œ16kb ç´¢å¼•B+æ ‘ä¸­â¼€ä¸ªèŠ‚ç‚¹ä¸ºâ¼€â»šæˆ–â»šçš„å€æ•°æœ€ä¸ºåˆé€‚ï¼Œå¦‚æœè¯»å–1.2é¡µä¹Ÿè¦è¯»å–2é¡µ MyISAM 5.1ä¹‹å‰ï¼ŒMyISAMæ˜¯é»˜è®¤çš„å¼•æ“ é€‚ç”¨äºäº›åªè¯»æ•°æ®ï¼Œæˆ–è€…è¡¨ç©ºé—´è¾ƒå° ç‰¹æ€§ï¼šå…¨æ–‡ç´¢å¼•ã€æ”¯æŒå‹ç¼©ã€ç©ºé—´å‡½æ•°ã€‚å…¨æ–‡ç´¢å¼•ï¼šåŸºäºåˆ†è¯åˆ›å»ºçš„ç´¢å¼•ï¼Œä¹Ÿå¯ä»¥æ”¯æŒå¤æ‚çš„æŸ¥è¯¢ã€‚å‹ç¼©ï¼šå¦‚æœæ•°æ®åœ¨å†™å…¥åä¸ä¼šä¿®æ”¹ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨é€‚åˆMyISAMå‹ç¼©è¡¨ã€‚å¯ä»¥ä½¿ç”¨myisampackå¯¹MyISAMè¡¨è¿›è¡Œæ‰“åŒ…ï¼Œå‹ç¼©è¡¨æ˜¯ä¸å¯ä»¥ä¿®æ”¹æ•°æ®çš„ï¼Œå¯ä»¥å‡å°‘ç£ç›˜IOï¼Œæå‡æ€§èƒ½ï¼Œå‹ç¼©è¡¨ä¹Ÿæ”¯æŒç´¢å¼•ï¼Œä½†æ˜¯ç´¢å¼•ä¹Ÿæ˜¯åªè¯»çš„ ä¸æ”¯æŒäº‹åŠ¡å’Œè¡Œçº§é”ï¼ˆåç»­ç‰ˆæœ¬ä¸­æ”¯æŒäº†äº‹åŠ¡ï¼‰ï¼Œå¯¹æ•´ä¸ªè¡¨åŠ é”ï¼Œè€Œä¸æ˜¯è¡Œé”ï¼Œè¯»å–çš„æ—¶å€™å¯¹è¡¨åŠ å…±äº«é”ï¼Œå†™å…¥çš„æ—¶å€™åŠ æ’ä»–é”ï¼Œä½†æ˜¯å¯ä»¥åŒæ—¶è¯»å†™ã€‚ä½†æ˜¯ç”±äºæ²¡æœ‰è¡Œé”æœºåˆ¶ï¼Œæ‰€ä»¥åœ¨æµ·é‡å†™å…¥çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´æ‰€æœ‰æŸ¥è¯¢å¤„äºLockedçŠ¶æ€ã€‚ å°†è¡¨å­˜å‚¨åœ¨ä¸¤ä¸ªæ–‡ä»¶ä¸­ï¼šæ•°æ®æ–‡ä»¶ã€ç´¢å¼•æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯.MYDã€.MYIåç¼€ è¡Œè®°å½•æ•°å–å†³äºç£ç›˜ç©ºé—´å’Œæ“ä½œç³»ç»Ÿä¸­çš„å•ä¸ªæ–‡ä»¶æœ€å¤§å°ºå¯¸ å³ä½¿æ˜¯Blobï¼ŒTextç­‰ç­‰é•¿å­—æ®µï¼Œä¹Ÿå¯ä»¥åŸºäºå‰500å­—ç¬¦åˆ›å»ºç´¢å¼• å¯ä»¥é€‰æ‹©å»¶è¿Ÿæ›´æ–°ç´¢å¼•é”®ï¼Œåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™æŒ‡å®šdelay_key_writeé€‰é¡¹ï¼Œåœ¨æ¯æ¬¡ä¿®æ”¹æ‰§è¡Œå®Œæˆæ—¶ï¼Œä¸ä¼šç«‹åˆ»å°†ä¿®æ”¹çš„ç´¢å¼•æ•°æ®å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯å†™åˆ°ç¼“å­˜åŒºï¼Œåªæœ‰åœ¨æ¸…ç†ç¼“å­˜åŒºæˆ–è€…å…³é—­è¡¨çš„æ—¶å€™æ‰ä¼šå°†ç´¢å¼•å†™å…¥ç£ç›˜ã€‚è¿™å¯ä»¥æå¤§çš„æå‡å†™å…¥æ€§èƒ½ï¼Œä½†æ˜¯åœ¨ä¸»æœºå´©æºƒæ—¶ä¼šé€ æˆç´¢å¼•æŸåï¼Œéœ€è¦æ‰§è¡Œä¿®å¤æ“ä½œã€‚ CSV CSVå¼•æ“å¯ä»¥å°†æ™®é€šçš„CSVæ–‡ä»¶ä½œä¸ºMySQLè¡¨æ¥å¤„ç† ä¸æ”¯æŒç´¢å¼• CSVå¯ä»¥åœ¨æ•°æ®åº“è¿è¡Œæ—¶æ‹·è´æˆ–è€…æ‹·å‡ºæ–‡ä»¶ï¼Œå¯ä»¥å°†Excelç­‰ç”µå­è¡¨æ ¼ä¸­çš„æ•°æ®å­˜å‚¨ä¸ºCSVæ–‡ä»¶ï¼Œç„¶åå¤åˆ¶åˆ°MySQLä¸­ï¼Œå°±èƒ½åœ¨MySQLä¸­æ‰“å¼€ä½¿ç”¨ã€‚ åŒæ ·ï¼Œå¦‚æœå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªCSVå¼•æ“è¡¨ï¼Œå…¶ä»–å¤–éƒ¨ç¨‹åºä¹Ÿå¯ä»¥ä»è¡¨çš„æ•°æ®æ–‡ä»¶ä¸­è¯»å–CSVçš„æ•°æ®ã€‚å› æ­¤CSVå¯ä»¥ä½œä¸ºæ•°æ®äº¤æ¢æœºåˆ¶ã€‚éå¸¸å¥½ç”¨ã€‚ Memory æ‰€æœ‰çš„æ•°æ®éƒ½ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸éœ€è¦è¿›è¡Œç£ç›˜I/O Memoryè¡¨çš„ç»“æ„åœ¨é‡å¯ä»¥åè¿˜ä¼šä¿ç•™ï¼Œä½†æ•°æ®ä¼šä¸¢å¤± éœ€è¦å¿«é€Ÿåœ°è®¿é—®æ•°æ®ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®ä¸ä¼šè¢«ä¿®æ”¹ï¼ˆä¾‹å¦‚å°†é‚®ç¼–å’Œå·åæ˜ å°„çš„è¡¨ï¼‰ æ¯”MyISAMè¡¨è¦å¿«ä¸€ä¸ªæ•°é‡çº§ï¼ˆå› ä¸ºåœ¨å†…å­˜ä¸­ï¼‰ 2. MySQLç´¢å¼•å’ŒSQLè°ƒä¼˜å…³äºç´¢å¼•ï¼Œå†…å®¹æ¯”è¾ƒå¤šï¼Œå¦å¤–å¼€äº†ä¸€ç¯‡æ–‡ç« ==&gt;mysqlç´¢å¼• 3. æ—¥å¿—ç³»ç»Ÿ3.1 redo logå†…å®¹ï¼šè®°å½•æ•°æ®ä¿®æ”¹æ“ä½œï¼ˆäº‹åŠ¡å°šæœªæäº¤ï¼‰ ä½œç”¨ï¼šå¼‚å¸¸å®•æœºæˆ–è€…ä»‹è´¨æ•…éšœåçš„æ•°æ®æ¢å¤ï¼ˆcrash safeï¼‰ å±‚çº§ï¼šinnoDBå±‚é¢ è§£é‡Šï¼š æ›´æ–°è¯­å¥â€“&gt;å†™redo logâ€“&gt;æ›´æ–°å†…å­˜æ•°æ®â€“&gt;ç©ºé—²/æŒ‰ç­–ç•¥å°†redo logå†™å…¥ç£ç›˜ï¼Œè¿™ç§å…ˆå†™æ—¥å¿—å†å†™ç£ç›˜çš„æŠ€æœ¯ç§°ä¸ºWAL(Write Ahead logging) redo logå¤§å°æ˜¯å›ºå®šçš„ï¼Œå¾ªç¯å†™ã€‚write posèµ°åœ¨å‰é¢ï¼Œè¡¨ç¤ºå½“å‰å†™å…¥redo logçš„ä½ç½®ã€‚checkpointè¡¨ç¤ºåŒæ­¥åˆ°ç£ç›˜çš„ä½ç½®ã€‚å¦‚ä¸‹å›¾ æœ‰ä¸€æ¡updateè¯­å¥æ‰§è¡Œï¼Œredo logä»write poså¼€å§‹å¾€å³å†™ï¼Œåˆ°å¤´åå¾ªç¯åˆ°æœ€å·¦è¾¹ç»§ç»­ï¼Œå½“ç¢°åˆ°check pointè¯´æ˜redo logæ»¡äº†ï¼Œä¼šç«‹å³åŒæ­¥åˆ°ç£ç›˜ã€‚ åŒæ ·çš„ï¼Œå¦‚æœç©ºé—²äº†ä¹Ÿä¼šåŒæ­¥åˆ°ç£ç›˜ï¼Œcheckpointä¹Ÿä¼šå¾€å³ç§»ï¼Œå½“ç¢°åˆ°write posè¯´æ˜redo logç©ºäº†ã€‚ 3.2 undo logå†…å®¹ï¼šè®°å½•äº‹åŠ¡å¼€å§‹å‰çš„å€¼ ä½œç”¨ï¼šç”¨äºå›æ»šï¼ŒåŒæ—¶å¯ä»¥æä¾›å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ä¸‹çš„è¯»ï¼ˆMVCCï¼‰ï¼Œä¹Ÿå³éé”å®šè¯» å±‚çº§ï¼šinnoDBå±‚é¢ 3.3 bin logå†…å®¹ï¼šè®°å½•äºŒè¿›åˆ¶ ä½œç”¨ï¼šä¸»ä»å¤åˆ¶åŒæ­¥ï¼Œæ—¶é—´ç‚¹è¿˜åŸ å±‚çº§ï¼šMySQL Serverå±‚é¢ 3. äº‹åŠ¡ã€éš”ç¦»çº§åˆ«å’ŒMVCCäº‹åŠ¡ åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡ï¼ˆtransactionï¼‰ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆï¼Œå‘ç”Ÿé”™è¯¯ä¼šè¢«å›æ»šï¼ˆRollbackï¼‰åˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ã€‚ ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šåœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®åº“çš„å®Œæ•´æ€§æ²¡æœ‰è¢«ç ´åã€‚è¿™è¡¨ç¤ºå†™å…¥çš„èµ„æ–™å¿…é¡»å®Œå…¨ç¬¦åˆæ‰€æœ‰çš„é¢„è®¾è§„åˆ™ã€‚æ¯”å¦‚è½¬è´¦ä¸€è¾¹-100å¦ä¸€è¾¹+100ï¼Œæ€»ä½“ä¸å˜å°±æ˜¯å…¶ä¸­ä¸€ç§é¢„è®¾è§„åˆ™ã€‚ éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šæ•°æ®åº“å…è®¸å¤šä¸ªå¹¶å‘äº‹åŠ¡åŒæ—¶å¯¹å…¶æ•°æ®è¿›è¡Œè¯»å†™å’Œä¿®æ”¹çš„èƒ½åŠ›ï¼Œéš”ç¦»æ€§å¯ä»¥é˜²æ­¢å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ç”±äºäº¤å‰æ‰§è¡Œè€Œå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚äº‹åŠ¡éš”ç¦»åˆ†ä¸ºä¸åŒçº§åˆ«ï¼ŒåŒ…æ‹¬è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰ã€è¯»æäº¤ï¼ˆread committedï¼‰ã€å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰å’Œä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰ã€‚ æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹æ•°æ®çš„ä¿®æ”¹å°±æ˜¯æ°¸ä¹…çš„ï¼Œå³ä¾¿ç³»ç»Ÿæ•…éšœä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ éš”ç¦»çº§åˆ«å‡ ç§éš”ç¦»çº§åˆ« è¯»æœªæäº¤ï¼ˆREAD UNCOMMITTEDï¼‰ ï¼šâ¼€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤æ—¶ï¼Œå®ƒåšçš„å˜æ›´å°±èƒ½è¢«åˆ«çš„äº‹åŠ¡çœ‹åˆ°ã€‚ è¯»æäº¤ï¼ˆREAD COMMITTEDï¼‰ ï¼šâ¼€ä¸ªäº‹åŠ¡æäº¤ä¹‹åï¼Œå®ƒåšçš„å˜æ›´æ‰ä¼šè¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°ã€‚ å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰ï¼šâ¼€ä¸ªäº‹åŠ¡æ‰§â¾è¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œæ€»æ˜¯è·Ÿè¿™ä¸ªäº‹åŠ¡åœ¨å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯â¼€è‡´çš„ã€‚å½“ç„¶åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œæœªæäº¤å˜æ›´å¯¹å…¶ä»–äº‹åŠ¡ä¹Ÿæ˜¯ä¸å¯è§çš„ã€‚ ä¸²è¡ŒåŒ–ï¼ˆSERIALIZABLEï¼‰ï¼šå¯¹äºåŒâ¼€è¡Œè®°å½•ï¼Œâ€œå†™â€ä¼šåŠ â€œå†™é”â€ï¼Œâ€œè¯»â€ä¼šåŠ â€œè¯»é”â€ï¼Œå½“å‡ºç°è¯»å†™é”å†²çªçš„æ—¶å€™ï¼Œåè®¿é—®çš„äº‹åŠ¡å¿…é¡»ç­‰å‰â¼€ä¸ªäº‹åŠ¡æ‰§â¾å®Œæˆï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚ é€šè¿‡ä»¥ä¸‹mysqlè¯­å¥æ›´æ”¹ 1SET [GLOBAL|SESSION] TRANSACTION ISOLATION LEVEL ä¸Šé¢å‡ ç§level; å¹¶å‘é—®é¢˜ è„è¯»ï¼ˆdirty readï¼‰ ï¼šå¦‚æœâ¼€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å¦â¼€ä¸ªæœªæäº¤äº‹åŠ¡ä¿®æ”¹è¿‡çš„æ•°æ®ã€‚ ä¸å¯é‡å¤è¯»ï¼ˆnon-repeatable readï¼‰ï¼šå¦‚æœâ¼€ä¸ªäº‹åŠ¡åªèƒ½è¯»åˆ°å¦â¼€ä¸ªå·²ç»æäº¤çš„äº‹åŠ¡ä¿®æ”¹è¿‡çš„æ•°æ®ï¼Œå¹¶ä¸”å…¶ä»–äº‹åŠ¡æ¯å¯¹è¯¥æ•°æ®è¿›â¾â¼€æ¬¡ä¿®æ”¹å¹¶æäº¤åï¼Œè¯¥äº‹åŠ¡éƒ½èƒ½æŸ¥è¯¢å¾—åˆ°æœ€æ–°å€¼ã€‚ å¹»è¯»ï¼ˆphantom readï¼‰ï¼šå¦‚æœâ¼€ä¸ªäº‹åŠ¡å…ˆæ ¹æ®æŸäº›æ¡ä»¶æŸ¥è¯¢å‡ºâ¼€äº›è®°å½•ï¼Œä¹‹åå¦â¼€ä¸ªäº‹åŠ¡â¼œå‘è¡¨ä¸­æ’â¼Šäº†ç¬¦åˆè¿™äº›æ¡ä»¶çš„è®°å½•ï¼ŒåŸå…ˆçš„äº‹åŠ¡å†æ¬¡æŒ‰ç…§è¯¥æ¡ä»¶æŸ¥è¯¢æ—¶ï¼Œèƒ½æŠŠå¦â¼€ä¸ªäº‹åŠ¡æ’â¼Šçš„è®°å½•ä¹Ÿè¯»å‡ºæ¥ã€‚ psï¼šä¸å¯é‡å¤è¯»å’Œå¹»è¯»æœ‰ç‚¹åƒï¼Œä¸»è¦åŒºåˆ«åœ¨äºä¸å¯é‡å¤è¯»æ˜¯ä¸¤æ¬¡æŸ¥è¯¢æŸä¸€æ¡æ•°æ®çš„ä¿®æ”¹ï¼Œå¹»è¯»æ˜¯æŸ¥è¯¢æ•´å¼ è¡¨å‡ºç°çš„æ–°å¢ã€‚ä¹Ÿå°±æ˜¯æ–°å¢é‚£è¡ŒåŸæ¥ä¸å­˜åœ¨æ‰€ä»¥é”ä¸ä½ï¼Œæ§åˆ¶çš„æ‰‹æ®µä¹Ÿä¼šä¸ä¸€æ ·ã€‚ å¯¹åº”è§£å†³ è¯»æœªæäº¤ï¼šå•¥éƒ½ä¸èƒ½è§£å†³ è¯»æäº¤ï¼šè§£å†³è„è¯»ï¼Œäº‹åŠ¡Aè¯»å–çš„æ˜¯äº‹åŠ¡Bå¼€å§‹å‰å’Œæäº¤åçš„æ•°æ® å¯é‡å¤è¯»ï¼šè§£å†³è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œäº‹åŠ¡Aæ•´ä¸ªè¿‡ç¨‹è¯»å–çš„éƒ½æ˜¯äº‹åŠ¡Bå¼€å§‹å‰çš„æ•°æ® ä¸²è¡ŒåŒ–ï¼šè§£å†³è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼Œäº‹åŠ¡Aè¿‡ç¨‹ä¸­äº‹åŠ¡Båªèƒ½ç­‰å¾… MVCCè¯»æäº¤å’Œå¯é‡å¤è¯»ä¸ºä»€ä¹ˆå¯ä»¥è¯»å–å¦ä¸€ä¸ªäº‹åŠ¡å¼€å§‹å‰çš„æ•°æ®å‘¢ï¼Ÿè¿™é‡Œå°±è¦æåˆ°MVCCï¼ˆMulti-Version Concurrency Control ï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ï¼Œåœ¨äº‹åŠ¡åœ¨å¯åŠ¨çš„æ—¶å€™å°±â€œæ‹äº†ä¸ªå¿«ç…§â€ï¼Œè¿™ä¸ªå¿«ç…§è¢«ç§°ä¸ºä¸€è‡´æ€§è§†å›¾ã€‚ é‚£å¿«ç…§æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå½“ç„¶ä¸éœ€è¦å®Œå…¨å¤åˆ¶ä¸€å¼ è¡¨ï¼Œè€Œæ˜¯ä½¿ç”¨äº†undo logä¸­ä¸€ä¸ªå«ç‰ˆæœ¬é“¾çš„ä¸œè¥¿ï¼Œäº‹å®ä¸Šæ¯ä¸€è¡Œæ•°æ®éƒ½æœ‰éšè—çš„trx_idè®°å½•äº†æ¯ä¸€ä¸ªç‰ˆæœ¬ï¼Œè¿˜æœ‰ä¸€ä¸ªroll_pointeræŒ‡é’ˆåŸŸæŒ‡å‘æ—§ç‰ˆæœ¬ï¼Œå½¢æˆä¸€ä¸ªundo logé“¾è¡¨ MVCCå°±æ˜¯æ ¹æ®æŸä¸€ä¸ªç‰ˆæœ¬ç”Ÿæˆå¯¹åº”çš„ä¸€è‡´æ€§è§†å›¾ å¦‚æœæ˜¯è¯»æäº¤ï¼Œåˆ™åœ¨æ¯ä¸ªSQLæ‰§è¡Œå‰ç”Ÿæˆ å¦‚æœæ˜¯å¯é‡å¤è¯»ï¼Œåˆ™åªåœ¨ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„æ—¶å€™ç”Ÿæˆä¸€æ¬¡ å‚è€ƒæœ¬æ–‡å‚è€ƒ ä¸‰å¤ªå­æ•–ä¸™å…¬ä¼—å·MySQLç³»åˆ—æ–‡ç«  CSDNåšå®¢:äºŒåå…­ç”»ç”Ÿçš„åšå®¢ï¼ˆhttps://blog.csdn.net/u010002184/article/details/88526708ï¼‰ CSDNåšå®¢:cwjokakaï¼ˆhttps://blog.csdn.net/u013295276/article/details/79105163ï¼‰","link":"/Mysql/MySQL%E5%9F%BA%E7%A1%80/"},{"title":"JWT+RSAéå¯¹ç§°åŠ å¯†å®ç°æ— çŠ¶æ€ç™»å½•","text":"1. é—®é¢˜ä»¥å‰æˆ‘ä»¬çš„ç™»å½•éƒ½æ˜¯å°†å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯æ”¾åœ¨sessionä¸­ï¼Œä½†æ˜¯sessionæ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨çš„ï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹æœåŠ¡å™¨ä¸åªæœ‰ä¸€å°ï¼Œé‚£å°±å®¹æ˜“æ‰¾ä¸åˆ°ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯ä¹Ÿå°±æ˜¯cookieä¸­çš„ï¼Œä½†æ˜¯å­˜åœ¨cookieä¸­æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¦è¿›è¡Œä¸€äº›æ“ä½œæ—¶éœ€è¦è·å–å½“å‰ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œé‚£ä¹ˆè¦å°†cookieä¸­çš„userå‘é€è¿‡å»ï¼Œè¿™ä¸€æ¥äºŒå»è€æ˜¯æºå¸¦ç€æ˜æ–‡çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå°±å¾ˆä¸å®‰å…¨ï¼Œä¼šè¢«äººç”¨ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ‹¦æˆªï¼Œé‚£ä¹ˆå°±è·å–äº†ä½ çš„è´¦å·å¯†ç ä¿¡æ¯ã€‚ éšåå°±äº§ç”Ÿäº†ä¸€äº›åŠ å¯†æŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯è¯´cookieä¸­å­˜çš„userä¿¡æ¯æ˜¯å¯†æ–‡ï¼ˆæ­¤æ—¶ç§°ä¸ºtokenï¼‰ï¼Œå°±ç®—è¢«æ‹¦æˆªäº†æ²¡æœ‰ç ´è§£æ–¹æ³•ï¼ˆç§°ä¸ºå¯†é’¥ï¼‰ä¹Ÿæ²¡æœ‰ç”¨ã€‚ 1. RSAéå¯¹ç§°åŠ å¯†æŠ€æœ¯çœ‹å¤§ä½¬çš„è®²è§£ https://www.zhihu.com/question/304030251 å½“ç„¶ï¼Œåé¢è¿˜æ¶‰åŠåˆ°ä¸€äº›æ›´æ·±å…¥çš„ä¸œè¥¿ï¼ˆä¸­é—´äººæ”»å‡»ï¼ŒCAè®¤è¯ä¸­å¿ƒç­‰ï¼‰ï¼Œæœ‰æ—¶é—´å†è¡¥ç¬”è®°(â—â€™â—¡â€™â—)è®¡ç½‘çš„ç¬”è®°å…ˆåŸ‹ä¸ªå‘æ…¢æ…¢å¡« è¿½æ›´ï¼šè®¡ç½‘çš„ç¬”è®°ç‚¹å‡»è¿™é‡Œ 2. JWTæ˜¯tokençš„ä¸€ç§ï¼Œå…¨ç§°æ˜¯Json Web Tokenï¼Œ æ˜¯JSONé£æ ¼è½»é‡çº§çš„æˆæƒå’Œèº«ä»½è®¤è¯è§„èŒƒã€‚æ ¼å¼æ˜¯è¿™æ ·çš„ï¼ˆå¤´éƒ¨ï¼šæˆ‘æ˜¯JWTæ ¼å¼çš„tokenï¼Œè½½è·ï¼šç”¨æˆ·ä¿¡æ¯ï¼Œç­¾åï¼šå¤´éƒ¨å’Œè½½è·åˆåœ¨ä¸€èµ·å†åŠ å¯†ï¼‰ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç™»å½•çš„æµç¨‹ æˆ‘ä»¬é¦–å…ˆåˆ©ç”¨RSAç”Ÿæˆå…¬é’¥å’Œç§é’¥ã€‚ç§é’¥ä¿å­˜åœ¨æˆæƒä¸­å¿ƒï¼Œå…¬é’¥ä¿å­˜åœ¨Zuulå’Œå„ä¸ªä¿¡ä»»çš„å¾®æœåŠ¡ ç”¨æˆ·è¯·æ±‚ç™»å½• æˆæƒä¸­å¿ƒæ ¡éªŒï¼Œé€šè¿‡åç”¨ç§é’¥å¯¹ç”¨æˆ·ä¿¡æ¯è¿›è¡Œç­¾ååŠ å¯†ç”Ÿæˆjwt è¿”å›jwtç»™ç”¨æˆ·å¹¶ä¿å­˜åœ¨cookieä¸­ ç”¨æˆ·æºå¸¦JWTè®¿é—® Zuulç›´æ¥é€šè¿‡å…¬é’¥è§£å¯†JWTï¼Œè¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åˆ™æ”¾è¡Œ è¯·æ±‚åˆ°è¾¾å¾®æœåŠ¡ï¼Œå¾®æœåŠ¡ç›´æ¥ç”¨å…¬é’¥è§£æJWTï¼Œè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæ— éœ€è®¿é—®æˆæƒä¸­å¿ƒ 3. å…·ä½“å®ç°åŠç™»å½•åŠŸèƒ½ç»†èŠ‚3.1 åŠ å¯†ç”Ÿæˆjwtéƒ¨åˆ†å®ç° åˆ›å»ºè½½è·å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯jwtä¸­çš„è½½è·éƒ¨åˆ†ï¼Œæ— éœ€åŒ…å«å¯†ç å’Œç›ï¼ˆä½¿ç”¨äº†rsaä»¥åï¼Œåªè¦å…¬é’¥èƒ½è§£æä¸å‡ºé”™å°±è¯´æ˜è®¤è¯æˆåŠŸäº†ï¼‰ ä¼šç”¨åˆ°çš„ä¾èµ– 123456789101112131415161718&lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt; &lt;version&gt;3.3.2&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt; &lt;artifactId&gt;jjwt&lt;/artifactId&gt; &lt;version&gt;0.9.1&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;joda-time&lt;/groupId&gt; &lt;artifactId&gt;joda-time&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;&lt;/dependency&gt; å››ä¸ªå·¥å…·ç±» RsaUtilsï¼šç”Ÿæˆrsaå¯†é’¥ï¼ˆä¸€ä¸ªå…¬é’¥ä¸€ä¸ªç§é’¥ï¼‰æ–¹æ³•ï¼Œè¯»å–å…¬é’¥å¯†é’¥æ–¹æ³• JwtUtilsï¼šå°†ç”¨æˆ·ä¿¡æ¯ä½¿ç”¨ç§é’¥åŠ å¯†æˆjwtæ ¼å¼çš„tokenæ–¹æ³•ï¼Œä½¿ç”¨å…¬é’¥è§£ætokenè·å¾—ç”¨æˆ·ä¿¡æ¯æ–¹æ³• ä»£ç å¤ªå¤šäº†ï¼Œåæ­£æ˜¯å·¥å…·ç±»ï¼Œè¿™é‡Œç»™ä¸ªä¸‹è½½é“¾æ¥ï¼Œç›´æ¥ä¸‹è½½ç²˜è´´å³å¯é£Ÿç”¨ http://39.106.175.70/owncloud/index.php/s/xcW47RaFFiSjfQ0 è¿è¡Œæµ‹è¯•ç±»ï¼Œç›´æ¥å¤åˆ¶å³å¯é£Ÿç”¨ è¦æ›¿æ¢çš„åœ°æ–¹å·²ç”¨æ³¨é‡Šæ ‡æ˜ 1234567891011121314151617181920212223242526272829303132333435363738394041public class JwtTest { //rsaå…¬é’¥ç§é’¥ä½ç½® private static final String pubKeyPath = \"C:\\\\Users\\\\wjw\\\\.leyoursa\\\\rsa.pub\"; private static final String priKeyPath = \"C:\\\\Users\\\\wjw\\\\.leyoursa\\\\rsa.pri\"; private PublicKey publicKey; private PrivateKey privateKey; @Test public void testRsa() throws Exception { RsaUtils.generateKey(pubKeyPath, priKeyPath, \"234\"); //ç”Ÿæˆrsaå¯†é’¥ï¼Œæœ€åä¸€ä¸ªæ˜¯ç›ï¼Œéšä¾¿ç»™ï¼Œè¶Šå¤æ‚è¶Šå¥½ } //ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶æ²¡æœ‰æ–‡ä»¶æ‰€ä»¥æ³¨é‡Šæ‰ï¼Œæ‰§è¡Œå®Œä¸Šé¢é‚£ä¸ªå‡½æ•°åæ”¾å¼€beforeæ³¨é‡Š //@Before public void testGetRsa() throws Exception { this.publicKey = RsaUtils.getPublicKey(pubKeyPath); this.privateKey = RsaUtils.getPrivateKey(priKeyPath); } @Test public void testGenerateToken() throws Exception { // ç”¨ç§é’¥åŠ å¯†userä¿¡æ¯ç”Ÿæˆtoken String token = JwtUtils.generateToken(new UserInfo(20L, \"jack\"), privateKey, 5); System.out.println(\"token = \" + token); } @Test public void testParseToken() throws Exception { //ä½¿ç”¨å…¬é’¥è§£å¯†token //æ”¹æˆä¸Šé¢é‚£ä¸ªå‡½æ•°ç”Ÿæˆçš„tokenè¯•è¯•è§£å¯† String token = \"eyJhbGciOiJSUzI1NiJ9.eyJpZCI6MjAsInVzZXJuYW1lIjoiamFjayIsImV4cCI6MTU5NTIzMzI4OX0.IhrxQJ9vmdME2EaOiGl-IEI6JybKDo6y7UlCp0pBWwfusUHbY3xjMFnGnnRvQ2keOU7AFetBhMPw03T4pUbUil8tmzc38mk5etYs0kxkoa2_qmeu80qqQUBVvfexYmZkvo3nOjz66IFfX716CWgZ-9Ew8zAib1o0TFkJ4RnjV5w\"; // è§£ætoken UserInfo user = JwtUtils.getInfoFromToken(token, publicKey); System.out.println(\"id: \" + user.getId()); System.out.println(\"userName: \" + user.getUsername()); }} åŠ å¯†è§£å¯†æµ‹è¯•æ•ˆæœï¼š 3.2 cookieéƒ¨åˆ†å®ç°åŠ å¯†è¿™éƒ¨åˆ†æµ‹è¯•æˆåŠŸä¹‹åæˆ‘ä»¬æ³¨æ„åˆ°ç™»å½•åŠŸèƒ½è¿˜éœ€è¦ä¿å­˜åˆ°cookieä¸­ ä¹Ÿæä¾›ä¸€ä¸ªå·¥å…·ç±»ï¼Œç›´æ¥å¤åˆ¶å³å¯é£Ÿç”¨ http://39.106.175.70/owncloud/index.php/s/Y2tQJoCMUILK0ZY 3.3 ç™»å½•æµç¨‹ä¸šåŠ¡é€»è¾‘å®ç°rsa,jwt,cookieéƒ½å¼„å¥½åï¼Œå°±å¯ä»¥å®ç°ç™»å½•åŠŸèƒ½äº† å…¶å®ç™»å½•å°±æ¯”è¾ƒç®€å•ï¼Œcontroller serviceé‚£äº›ï¼Œè·Ÿç€ä¹‹å‰æµç¨‹æ¥å°±è¡Œ ä¸è¿‡æµ‹è¯•ç”¨ä¾‹å†™æ­»äº†ä¸ä¼˜é›…ï¼Œå¯ä»¥ä½¿ç”¨yml+é…ç½®ç±»è¯»å–ï¼ˆå½“ç„¶ä½ å¯ä»¥æš´åŠ›ï¼‰ yml é…ç½®ç±» ç»™å‡ºä»£ç ï¼Œçœç•¥ç¯‡å¹…ï¼ŒåŒ…è‡ªå·±å¼•å…¥ä¸€ä¸‹ï¼Œgetter/setterè‡ªå·±åˆ›å»ºä¸€ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142@ConfigurationProperties(prefix = \"leyou.jwt\")public class JwtProperties { private String secret; // å¯†é’¥ private String pubKeyPath;// å…¬é’¥ private String priKeyPath;// ç§é’¥ private int expire;// tokenè¿‡æœŸæ—¶é—´ private String cookieName; private PublicKey publicKey; // å…¬é’¥ private PrivateKey privateKey; // ç§é’¥ private static final Logger logger = LoggerFactory.getLogger(JwtProperties.class); /** * @PostContructï¼šåœ¨æ„é€ æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œè¯¥æ–¹æ³• */ @PostConstruct public void init(){ try { File pubKey = new File(pubKeyPath); File priKey = new File(priKeyPath); if (!pubKey.exists() || !priKey.exists()) { // ç”Ÿæˆå…¬é’¥å’Œç§é’¥ RsaUtils.generateKey(pubKeyPath, priKeyPath, secret); } // è·å–å…¬é’¥å’Œç§é’¥ this.publicKey = RsaUtils.getPublicKey(pubKeyPath); this.privateKey = RsaUtils.getPrivateKey(priKeyPath); } catch (Exception e) { logger.error(\"åˆå§‹åŒ–å…¬é’¥å’Œç§é’¥å¤±è´¥ï¼\", e); throw new RuntimeException(); } } //get,setè‡ªå·±ç”Ÿæˆä¸€ä¸‹} åé¢çš„æ²¡ä»€ä¹ˆå¥½è¯´äº†ï¼Œä»£ç å¤ªç®€å•ï¼Œæœ‰æ‰‹å°±è¡Œï¼Œæˆ‘è´´å›¾åˆ†æå§ controller service 3.4 cookieç»†èŠ‚çš„å¤„ç†cookieæ˜¯ä¿å­˜åœ¨æœ¬åœ°çš„ï¼Œé‚£ä¹ˆé€šè¿‡localhostè®¿é—®å°±æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯é€šè¿‡åŸŸåè®¿é—®å°±æœ‰é—®é¢˜ ä»¥ä¸‹æ˜¯å¯¹æ¯”å›¾ å…ˆè§£å†³æ–¹æ³•å†åˆ†æåŸå› ï¼š nginxé…ç½®æ–‡ä»¶çš„ç½‘å…³éƒ¨åˆ†æ·»åŠ proxy_set_header Host $host; zuulçš„yml åŸå› ï¼šæˆ‘ä»¬é€šè¿‡è°ƒè¯•å¯ä»¥çœ‹åˆ°cookieçš„domainNameæ˜¯è®¡ç®—æœºåç§°è€Œä¸æ˜¯leyou.com è¿™ä¸ªè®¡ç®—æœºåæ˜¯å“ªæ¥çš„å‘¢ï¼Œå› ä¸ºzuulåˆ°ç™»å½•å¾®æœåŠ¡æ˜¯é€šè¿‡eurekaæ³¨å†Œä¸­å¿ƒçš„ è®¿é—®æµç¨‹æ˜¯nginx=&gt;zuul=&gt;ç™»å½•å¾®æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬è¦è®©è®¡ç®—æœºåå¸¦ç€è®¿é—®è·¯å¾„ä¸€èµ·èµ°æ‰å¯¹ï¼Œæ‰€ä»¥æ‰æœ‰äº†ä¸Šé¢çš„è®¾ç½®ï¼Œè§£å†³åçš„æ•ˆæœ 3.5 tokenè¿‡æœŸå¤„ç†çš„æ€è·¯tokenå’Œcookieéƒ½æœ‰è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœç”¨æˆ·åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ“ä½œé‚£ä¹ˆè¿‡æœŸäº†å°±éœ€è¦é‡æ–°ç™»å½•ï¼Œæ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœä¸€ç›´åœ¨æ“ä½œï¼ˆæ¯”å¦‚é€‰è´­å•†å“é€‰äº†å¾ˆä¹…ï¼Œæœ€åä¸‹å•çš„æ—¶å€™å‘ç°cookieè¿‡æœŸäº†ï¼Œæ‹¿ä¸åˆ°ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œå°±å¾ˆå°´å°¬ï¼‰ã€‚ è§£å†³æ€è·¯æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸ç®¡è¿›è¡Œä»€ä¹ˆæ“ä½œï¼Œvueå¯ä»¥æ”¾åœ¨createdé’©å­å‡½æ•°ä¸­ï¼Œåªè¦åŠ è½½äº†é¡µé¢ï¼Œå°±è°ƒç”¨verifyè¿™ä¸ªæ–¹æ³•ï¼šéªŒè¯æ˜¯å¦æœ‰tokenï¼Œå¦‚æœè¿˜æœ‰ï¼Œåˆ™è¯´æ˜ç”¨æˆ·æ­£åœ¨æ“ä½œï¼Œé‡æ–°æ›´æ–°ä¸€étokenå’Œcookieï¼Œé˜²æ­¢è¿‡æœŸ 1234567891011121314151617181920212223242526/** * éªŒè¯æ˜¯å¦è¿˜åœ¨ç™»å½•çŠ¶æ€ï¼Œä¸ç®¡è¿›è¡Œä»€ä¹ˆæ“ä½œï¼Œæ¯”å¦‚æœç´¢å•Šä¸‹å•å•Šï¼Œæµè§ˆå•Šï¼Œéƒ½åº”è¯¥è°ƒç”¨ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼Œä»¥è¡¨æ˜ç”¨æˆ·è¿˜åœ¨æ“ä½œ * åªè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå°±éªŒè¯æ˜¯å¦æœ‰tokenï¼Œç„¶åé‡æ–°æ›´æ–°ä¸€étokenï¼Œé˜²æ­¢è¿‡æœŸ */@GetMapping(\"verify\")public ResponseEntity&lt;UserInfo&gt; verify( @CookieValue(\"LY_TOKEN\") String token, HttpServletRequest request, HttpServletResponse response){ try { //ä½¿ç”¨å…¬é’¥è§£æjwt UserInfo user = JwtUtils.getInfoFromToken(token, this.jwtProperties.getPublicKey()); if (user == null){ return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build(); } //åˆ·æ–°jwtå’Œcookieä¸­çš„æœ‰æ•ˆæ—¶é—´ï¼Œä¸é€€å‡ºå°±ä¸€ç›´ç™»å½• token = JwtUtils.generateToken(user, this.jwtProperties.getPrivateKey(), this.jwtProperties.getExpire()); CookieUtils.setCookie(request, response, jwtProperties.getCookieName(), token, jwtProperties.getExpire() * 60); return ResponseEntity.ok(user); } catch (Exception e) { e.printStackTrace(); return ResponseEntity.status(HttpStatus.UNAUTHORIZED).build(); }} 3.6 zuulç½‘å…³æ‹¦æˆªæ³¨å†Œï¼Œç™»å½•ï¼Œæœç´¢ç­‰åŠŸèƒ½ä¸éœ€è¦æ‹¦æˆª ä¸‹å•ç­‰åŠŸèƒ½éœ€è¦æ‹¦æˆªåˆ¤æ–­æ˜¯å¦å·²ç™»å½• ç½‘å…³å¾®æœåŠ¡åªéœ€è¦å…¬é’¥å’Œcookieåå­—ï¼Œä»¥åŠç™½åå• 123456789101112leyou: jwt: pubKeyPath: C:\\Users\\wjw\\.leyoursa\\rsa.pub # å…¬é’¥åœ°å€ cookieName: LY_TOKEN filter: allowPaths: # ç™½åå• - /api/auth - /api/search - /api/user/register - /api/user/check - /api/user/code - /api/item å¤åˆ¶ä¸€ä»½è¯»å–ymlçš„é…ç½®ç±»åˆ°ç½‘å…³å¾®æœåŠ¡ï¼Œéœ€è¦ç›¸åº”ä¿®æ”¹ï¼Œåªè¯»å–ä¸åˆ›å»º 123456789101112131415161718192021222324252627@ConfigurationProperties(prefix = \"leyou.jwt\")public class JwtProperties { private String pubKeyPath;// å…¬é’¥ private String cookieName; private PublicKey publicKey; // å…¬é’¥ private static final Logger logger = LoggerFactory.getLogger(JwtProperties.class); /** * @PostContructï¼šåœ¨æ„é€ æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œè¯¥æ–¹æ³• */ @PostConstruct public void init(){ try { // è·å–å…¬é’¥å’Œç§é’¥ this.publicKey = RsaUtils.getPublicKey(pubKeyPath); } catch (Exception e) { logger.error(\"åˆå§‹åŒ–å…¬é’¥å’Œç§é’¥å¤±è´¥ï¼\", e); throw new RuntimeException(); } } //çœç•¥getter,setter} è¯»å–ç™½åå•çš„é…ç½®ç±»å•ç‹¬å‡ºæ¥ 12345678910111213141516/** * ç™½åå•é…ç½®ç±» */@ConfigurationProperties(prefix = \"leyou.filter\")public class FilterProperties { private List&lt;String&gt; allowPaths; public List&lt;String&gt; getAllowPaths() { return allowPaths; } public void setAllowPaths(List&lt;String&gt; allowPaths) { this.allowPaths = allowPaths; }} æœ‰äº†è¿™ä¸¤ä¸ªé…ç½®ç±»å°±å¯ä»¥è¯»å–ymlå‚æ•°äº†ï¼Œä¸»è¦å®Œæˆä¸‹é¢è¿™ä¸ªæ‹¦æˆªå™¨å³å¯ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/** * é™¤äº†æ³¨å†Œï¼Œç™»å½•ï¼Œå‘çŸ­ä¿¡ï¼Œæœç´¢ç­‰åŠŸèƒ½ä»¥å¤–ï¼Œæ‰€æœ‰çš„å¾®æœåŠ¡è¿›å…¥å‰éƒ½è¦åˆ¤æ–­æ˜¯å¦å·²ç™»å½• */@Component@EnableConfigurationProperties({JwtProperties.class, FilterProperties.class})public class LoginFilter extends ZuulFilter { @Autowired private JwtProperties jwtProperties; @Autowired private FilterProperties filterProperties; @Override public String filterType() { return \"pre\"; } @Override public int filterOrder() { return 10; } @Override public boolean shouldFilter() { //ç™½åå•ä¸æ‹¦æˆª List&lt;String&gt; allowPaths = this.filterProperties.getAllowPaths(); //åˆå§‹åŒ–è¿è¡Œä¸Šä¸‹æ–‡è·å–requestå’Œresponse RequestContext context = RequestContext.getCurrentContext(); HttpServletRequest request = context.getRequest(); String url = request.getRequestURL().toString(); for (String allowPath : allowPaths) { if (StringUtils.contains(url, allowPath)) { return false; //ä¸æ‹¦æˆª } } return true; } @Override public Object run() throws ZuulException { //è·å–token //åˆå§‹åŒ–è¿è¡Œä¸Šä¸‹æ–‡è·å–requestå’Œresponse RequestContext context = RequestContext.getCurrentContext(); String token = CookieUtils.getCookieValue(context.getRequest(), this.jwtProperties.getCookieName()); if (StringUtils.isBlank(token)){ context.setSendZuulResponse(false); context.setResponseStatusCode(HttpStatus.UNAUTHORIZED.value()); } //è§£æ try { JwtUtils.getInfoFromToken(token, this.jwtProperties.getPublicKey()); } catch (Exception e) { e.printStackTrace(); context.setSendZuulResponse(false); context.setResponseStatusCode(HttpStatus.UNAUTHORIZED.value()); } return null; }} 3.7 æœ€ç»ˆæ•ˆæœçœ‹çœ‹é¡µé¢ä¸Šï¼Œcookieæœ‰äº†ï¼Œvalueæ˜¯jwtï¼ŒåŸŸåä¹Ÿå¯¹äº†ï¼Œæ³¨å†Œå’Œç™»å½•ä¹Ÿä¸æ‹¦æˆªäº†ï¼Œè…°ä¸é…¸è…¿ä¸ç—›äº† å—¯ï¼æ˜¯ä¸»æµç™»å½•çš„å®ç°æ•ˆæœ~","link":"/SpringCloud/JWT+RSA%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E5%AE%9E%E7%8E%B0%E6%97%A0%E7%8A%B6%E6%80%81%E7%99%BB%E5%BD%95/"},{"title":"SpringMVCæ¥æ”¶å‰ç«¯å‚æ•°ä¸ºnullçš„æ¢ç´¢","text":"åœ¨ä½¿ç”¨SpringMVCæ—¶æ¥æ”¶å‰ç«¯å‚æ•°æœ‰æ—¶åä¼šæ— æ³•å°è£…ï¼Œè·å¾—nullå€¼ï¼ŒæŠ¥415é”™è¯¯çš„é—®é¢˜ï¼ŒåŸå› å°±æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬æä¸æ‡‚jsonå¯¹è±¡ã€jsonå­—ç¬¦ä¸²ã€å‚æ•°å­—ç¬¦ä¸²ä¹‹é—´çš„åŒºåˆ«ã€‚ æäº¤æ–¹å¼ï¼šform/urlï¼Œajax è¯·æ±‚æ–¹å¼ï¼šgetï¼Œpost æ¥æ”¶æ–¹å¼ï¼šä¸€ä¸ªä¸ªå‚æ•°æ¥æ”¶ï¼Œå°è£…å®ä½“ç±»(Beanç±»å‹) æ–‡ç« å°†ä¼šæ’åˆ—ç»„åˆ= =ï¼Œä¸¾ä¾‹è¯´æ˜å„ç§æ­é…å¦‚ä½•æˆåŠŸæ¥æ”¶æ•°æ®ã€‚ form/url + get + ä¸€ä¸ªä¸ªæ¥æ”¶/Beanç±»å‹getè¯·æ±‚åŸºæœ¬æ²¡æœ‰ä»€ä¹ˆå‘ï¼Œcontrollerå±‚ä¸€ä¸ªä¸ªæ¥å’Œç”¨å®ä½“ç±»æ¥éƒ½æ²¡æœ‰é—®é¢˜ html 123456&lt;form action=\"testGet\"&gt; å•ä¸ª&lt;input type=\"text\" name=\"a\"&gt;&lt;br&gt; å§“åï¼š&lt;input type=\"text\" name=\"username\"&gt;&lt;br&gt; å¹´é¾„ï¼š&lt;input type=\"text\" name=\"age\"&gt;&lt;br&gt; &lt;input type=\"submit\" value=\"æäº¤\"&gt;&lt;/form&gt; controller 1234567@RequestMapping(\"/testGet\")public String testGet(int a, User user){ System.out.println(\"testGetæ–¹æ³•æ‰§è¡Œäº†\"); System.out.println(a); System.out.println(user); return \"success\";} form + post + å­—ç¬¦ä¸²ç±»å‹ç”¨ä¸€æ•´ä¸ªString bodyæ¥æ”¶ html 12345&lt;form action=\"testPostString\" method=\"post\"&gt; å§“å&lt;input type=\"text\" name=\"username\" /&gt;&lt;br&gt; å¹´é¾„&lt;input type=\"text\" name=\"age\" /&gt;&lt;br&gt; &lt;input type=\"submit\" value=\"æäº¤\" /&gt;&lt;/form&gt; controller 123456@RequestMapping(\"/testPostString\")public String testPostString(@RequestBody String body){ System.out.println(\"testPostStringæ–¹æ³•æ‰§è¡Œäº†\"); System.out.println(body); return \"success\";} å¯ä»¥çœ‹åˆ°formè¡¨å•å‘é€çš„æ•°æ®æ ¼å¼ è¿™ç§ç±»ä¼¼äºgetè¯·æ±‚æ—¶å‘é€urlæ ¼å¼çš„å‚æ•°æˆ‘ç§°ä¸ºâ€œå‚æ•°å­—ç¬¦ä¸²â€ï¼Œç”¨ä¸€ä¸ªString bodyæ¥æ”¶æ˜¯æ²¡é—®é¢˜çš„ã€‚å°±æ˜¯éº»çƒ¦äº†ä¸€ç‚¹ï¼Œéœ€è¦æ¥æ”¶åå†å¤„ç†æˆjsonå¯¹è±¡ form + post + Beanç±»å‹è¿™ä¸ªç»„åˆè·å–ä¸åˆ°å€¼ä¼šæŠ¥415ï¼Œå°±æ˜¯ç±»å‹ä¸åŒ¹é…(Stringå’ŒUser)ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨controlleræ–¹æ³•çš„å‚æ•°ä¸ŠåŠ @ModelAttributeæ³¨è§£ html 12345&lt;form action=\"testPostBean\" method=\"post\"&gt; å§“å&lt;input type=\"text\" name=\"username\" /&gt;&lt;br&gt; å¹´é¾„&lt;input type=\"text\" name=\"age\" /&gt;&lt;br&gt; &lt;input type=\"submit\" value=\"æäº¤\" /&gt;&lt;/form&gt; controller 123456@RequestMapping(\"/testPostBean\")public String testPostBean(@ModelAttribute User user){ System.out.println(\"testPostBeanæ–¹æ³•æ‰§è¡Œäº†\"); System.out.println(user); return \"success\";} åŠ äº†æ³¨è§£å°±å¯ä»¥è‡ªåŠ¨å°è£… ajax + get/post + beanç±»å‹å¼‚æ­¥çš„è¯·æ±‚ï¼Œå‘é€ç»™åå°çš„å°±æ˜¯ä¸¤ç§ï¼šjsonæˆ–è€…jsonå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªæˆ‘è§‰å¾—çœŸçš„æœ‰ç‚¹å‘ è¿™ç¯‡csdnåšå®¢å†™çš„å¾ˆè¯¦ç»†ï¼šhttps://blog.csdn.net/qq_37960007/article/details/79542727 æ ¹æ®è¿™ä½åšä¸»çš„æè¿°æˆ‘ç›´æ¥ç»™å‡ºè¿™ä¸¤ç§çš„å†™æ³•ï¼Œå†åšè¯´æ˜ ä¸¤ç§å¯è¡ŒåŠæ³• jsonå­—ç¬¦ä¸² + contentTypeæŒ‡å®šä¸ºjson + Beanæ¥æ”¶ jsonå¯¹è±¡ + contentTypeä¸æŒ‡å®š + Beanæ¥æ”¶ æ³•1ajax 1234567891011$.ajax({ url: \"testAjax\", contentType: \"application/json;charset=utf-8\", data:'{\"username\": \"haha\", \"age\": 20}', dataType: \"json\", type: \"post\", success:function (data) { alert(data); alert(data.age); }}); controller 1234567@RequestMapping(\"/testAjax\")public @ResponseBody User testAjax(@RequestBody User user){ System.out.println(\"testAjaxæ–¹æ³•æ‰§è¡Œäº†\"); System.out.println(user); user.setAge(100); return user;} åŒæ—¶éœ€è¦jacksonçš„mavenåæ ‡ 123456789101112131415&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.10.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-core&lt;/artifactId&gt; &lt;version&gt;2.10.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt; &lt;version&gt;2.10.3&lt;/version&gt;&lt;/dependency&gt; æ•ˆæœå¦‚ä¸‹ï¼Œç¡®å®èƒ½æ¥æ”¶ï¼ˆ@ResponseBodyæ³¨è§£æ˜¯å°†Userç±»å˜æˆjsonæ ¼å¼è¿”å›ç»™å‰ç«¯ï¼Œè¿™ä¸ªä¸æ˜¯æ¥æ”¶ï¼Œä¸æ˜¯æˆ‘ä»¬è¦è®¨è®ºçš„ï¼‰ æ³•2ajax 12345678910$.ajax({ url: \"testAjax2\", data:{\"username\": \"haha\", \"age\": 20}, dataType: \"json\", type: \"post\", success:function (data) { alert(data); alert(data.age); }}); controller 1234567@RequestMapping(\"/testAjax2\")public @ResponseBody User testAjax2(@ModelAttribute User user){ System.out.println(\"testAjaxæ–¹æ³•æ‰§è¡Œäº†\"); System.out.println(user); user.setAge(100); return user;} ä¹Ÿæ˜¯å¯ä»¥çš„ åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ jsonå­—ç¬¦ä¸²å’Œjsonå¯¹è±¡ ä½ ä¸è¦é—®é‚£äº›é”®åŠ ä¸åŠ åŒå¼•å·è¡Œä¸è¡Œï¼Œå€¼åŠ ä¸åŠ åŒå¼•å·è¡Œä¸è¡Œï¼Œå…¶å®éƒ½å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœä½ å†™çš„æ ‡å‡†çš„è¯ä»–ä»¬å°±ç›¸å·®ä¸€å¯¹å•å¼•å·ï¼ æ˜¯å¦æœ‰contentType: &quot;application/json;charset=utf-8&quot; è¿™ä¸ªæ˜¯æŒ‡å®šå‘é€ç»™åå°çš„ç±»å‹ï¼Œå¦‚æœæŒ‡å®šäº†jsonï¼Œé‚£ä¹ˆè¯´æ˜ï¼šåº”è¯¥å†™jsonå­—ç¬¦ä¸²ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨å¸®ä½ è½¬æ¢è¿™ä¸ªå­—ç¬¦ä¸² å¦‚æœæ²¡æŒ‡å®šï¼Œåˆ™åº”è¯¥ç›´æ¥å†™jsonå¯¹è±¡ï¼Œå› ä¸ºå®ƒä¸ä¼šå¸®ä½ è½¬æ¢ï¼Œåˆ«å¼„åäº† controllerå±‚çš„åŒºåˆ« å¦‚æœæ˜¯ç”¨jsonå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆcontrollerå°±åº”è¯¥å¯¼å…¥jacksonçš„jaråŒ…ï¼Œé€šè¿‡å®ƒæ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆæ˜ å°„ å¦‚æœæ˜¯ç”¨jsonå¯¹è±¡ï¼Œé‚£ä¹ˆcontrollerå°±ä½¿ç”¨@ModelAttributeï¼Œæƒ…å†µå°±è¡Œæ™®é€špostçš„Beanå°è£… çœŸçš„æ˜¯å¤©å‘ï¼ï¼ï¼ï¼ psï¼šjsonå¯¹è±¡ -&gt; jsonå­—ç¬¦ä¸²å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²çš„æ‹¼æ¥æˆ–è€…JSON.stringify() â€‹ jsonå­—ç¬¦ä¸² -&gt; jsonå¯¹è±¡å¯ä»¥æ‰‹åŠ¨å»é™¤å­—ç¬¦ä¸²æˆ–è€…JSON.parse() axios + post + å­—ç¬¦ä¸²/beanç±»å‹ä½¿ç”¨axioså·¥å…·ï¼Œå¦‚æœå‘é€postè¯·æ±‚ï¼Œä¸”ä¸ç”¨urlæ‹¼æ¥å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œè€Œæ˜¯è¯•å›¾å‘é€æ•´ä¸ªjsonå¯¹è±¡ï¼Œå¦‚ä¸‹ é‚£ä¹ˆéœ€è¦å€ŸåŠ©ä¸Šé¢å›¾ä¸­è¿™æ ·çš„qså·¥å…·ï¼Œåªéœ€è¦åœ¨main.jsï¼ˆä¹Ÿå¯ä»¥éšä¾¿æ‰¾ä¸ªå…¨å±€çš„jsæ–‡ä»¶ï¼‰å¼•å…¥è¿™ä¸ªå·¥å…· è¿™æ ·å°±å¯ä»¥åƒä¸Šé¢å›¾ç¤ºé‚£æ ·å‘é€æ•´ä¸ªå¯¹è±¡äº†ï¼Œåå°èƒ½æ¥åˆ°","link":"/Spring/SpringMVC%E6%8E%A5%E6%94%B6%E5%89%8D%E7%AB%AF%E5%8F%82%E6%95%B0%E4%B8%BAnull%E7%9A%84%E6%8E%A2%E7%B4%A2/"},{"title":"SpringMVCå…¥é—¨ç¬”è®°1","text":"å…ˆè®²ä¸€äº›è‡ªå·±çš„ç†è§£å’Œæ¦‚å¿µæ€§çš„ä¸œè¥¿ï¼Œå¯ä»¥è·³è¿‡ç›´æ¥çœ‹ç¬¬3éƒ¨åˆ† 1. SpringMVCçš„ä½œç”¨SpringMVCå®é™…ä¸Šå°±æ˜¯ä»£æ›¿äº†åŸæ¥Servletä¸­çš„ä½œç”¨ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨SpringMVCï¼Œå…¶å®æˆ‘ä»¬å†…å¿ƒä¹Ÿå¾ˆæ¸…æ¥šï¼ŒåŸæ¥å†™Servletçš„æ—¶å€™è¦ä¹ˆæ˜¯ç»§æ‰¿äº†Servletæ¥å£å¤å†™5ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆinit service â€¦ destoryï¼‰ï¼Œè¦ä¹ˆç»§æ‰¿HttpServletæ¥å£å¤å†™doGetå’ŒdoPostæ–¹æ³•ï¼Œéå¸¸ç¹çã€‚æˆ–è€…é«˜çº§ä¸€ç‚¹çš„è¿›è¡ŒservletæŠ½å–ï¼Œé€šè¿‡æ–¹æ³•åä»£è¡¨è®¿é—®è·¯å¾„ï¼Œå…¶å®è¿™å°±ç›¸å½“äºspringmvcçš„ç®€æ˜“æ¨¡å‹ã€‚ è€ŒSpringMVCå°±æ˜¯å®Œæˆäº†*â€œä¸€ä¸ªæ™®é€šç±»ä¹Ÿå¯ä»¥å¤„ç†httpè¯·æ±‚â€ *è¿™ä¹ˆä¸€ä¸ªåŠŸèƒ½ã€‚ ä½œç”¨å’Œservletä¸€æ ·ï¼Œæ¥æ”¶å‰ç«¯è¯·æ±‚å‚æ•°ï¼Œè°ƒç”¨serviceå±‚æ–¹æ³•ï¼Œè¿”å›jsonæ•°æ® 1.1 MVCæ¨¡å‹ MVCå…¨åæ˜¯Model View Controller æ¨¡å‹è§†å›¾æ§åˆ¶å™¨ï¼Œæ¯ä¸ªéƒ¨åˆ†å„å¸å…¶èŒã€‚ Modelï¼šæ•°æ®æ¨¡å‹ï¼ŒJavaBeançš„ç±»ï¼Œç”¨æ¥è¿›è¡Œæ•°æ®å°è£…ã€‚ Viewï¼šæŒ‡JSPã€HTMLç”¨æ¥å±•ç¤ºæ•°æ®ç»™ç”¨æˆ· Controllerï¼šç”¨æ¥æ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚ï¼Œæ•´ä¸ªæµç¨‹çš„æ§åˆ¶å™¨ã€‚ç”¨æ¥è¿›è¡Œæ•°æ®æ ¡éªŒç­‰ã€‚ 1.2 SpringMVCä¸­çš„ä¸€äº›ç»„ä»¶ å‰ç«¯æ§åˆ¶å™¨ï¼ˆDispatcherServletï¼‰ å¤„ç†å™¨æ˜ å°„å™¨ï¼ˆHandlerMappingï¼‰ å¤„ç†å™¨ï¼ˆHandlerï¼‰ å¤„ç†å™¨é€‚é…å™¨ï¼ˆHandlAdapterï¼‰ è§†å›¾è§£æå™¨ï¼ˆView Resolverï¼‰ è§†å›¾ï¼ˆViewï¼‰ æµç¨‹å¦‚ä¸‹ 2. webé¡¹ç›®çš„ç¯å¢ƒæ­å»ºæ—¢ç„¶æ˜¯webåº”ç”¨ï¼Œå½“ç„¶è¦ä½¿ç”¨Mavenéª¨æ¶åˆ›å»ºä¸€ä¸ªwebappé¡¹ç›®ï¼Œè¿™æ ·ç»“æ„æ¯”è¾ƒæ ‡å‡†ï¼æ³¨æ„ä¸è¦é€‰é”™äº† è¿™é‡Œæ·»åŠ archetypeCatalogå‚æ•°çš„å€¼ä¸ºinternalå¯ä»¥å¿«ä¸€ç‚¹ åé¢å°±ä¸€è·¯nextäº† æ³¨æ„ï¼Œç”±äºä½¿ç”¨éª¨æ¶åˆ›å»ºçš„é¡¹ç›®æ²¡æœ‰javaå’Œresourcesç›®å½•ï¼Œè€Œæˆ‘ä»¬ç†Ÿæ‚‰çš„é¡¹ç›®ç»“æ„æ˜¯ â””â”€src &nbsp;&nbsp;&nbsp;&nbsp;â””â”€main &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€java &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â”œâ”€resources &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â””â”€webapp &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â””â”€WEB-INF æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åˆ›å»ºjavaå’Œresourcesç›®å½•å¹¶æŠŠä»–ä»¬æ ‡è®°æˆsource rootå’Œresources rootï¼Œå¦åˆ™çš„è¯æ²¡æœ‰åŠæ³•åˆ›å»ºjavaç±»å’Œé…ç½®æ–‡ä»¶ï¼Œå…·ä½“åšæ³•å¦‚ä¸‹ é…ç½®å¥½tomcatå°±å¯ä»¥äº†ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº† â€‹ 3. SpringMVCä½¿ç”¨3.1 pomåæ ‡123456789101112131415161718192021222324252627282930313233343536&lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;!--ç‰ˆæœ¬é”å®š--&gt; &lt;spring.version&gt;5.2.3.RELEASE&lt;/spring.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;version&gt;2.0&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; â€‹ 3.2 web.xmlä¸­çš„é…ç½®1234567891011121314151617181920212223242526272829303132&lt;web-app&gt; &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt; &lt;!--é…ç½®å‰ç«¯æ§åˆ¶å™¨--&gt; &lt;servlet&gt; &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;!--é…ç½®å­—ç¬¦è¿‡æ»¤å™¨--&gt; &lt;filter&gt; &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt;&lt;/web-app&gt; â€‹ 3.3 resourcesæ–‡ä»¶å¤¹ä¸‹æ–°å»ºspringmvc.xmlæ–‡ä»¶å¹¶å†™å…¥1234567891011121314151617181920212223242526&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;!--å¼€å¯æ³¨è§£æ‰«æ--&gt; &lt;context:component-scan base-package=\"com.wjw\"&gt;&lt;/context:component-scan&gt; &lt;!--é…ç½®è§†å›¾è§£æå™¨--&gt; &lt;bean id=\"internalResourceViewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt; &lt;property name=\"prefix\" value=\"/WEB-INF/pages/\"&gt;&lt;/property&gt; &lt;property name=\"suffix\" value=\".jsp\"&gt;&lt;/property&gt; &lt;/bean&gt; &lt;!--å¼€å¯SpringMVCæ¡†æ¶æ³¨è§£çš„æ”¯æŒ--&gt; &lt;mvc:annotation-driven/&gt;&lt;/beans&gt; å…¶ä¸­internalResourceViewResolverä¸­é…ç½®çš„è·¯å¾„å°±æ˜¯Controllerç±»ä¸­returnè‡ªåŠ¨è·³è½¬çš„å¯¹åº”é¡µé¢ â€‹ 3.4 æ™®é€šçš„ç±»ä»£æ›¿servletjavaæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºcontrollerçš„åŒ…å’Œä¸€ä¸ªHelloControllerç±»ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„controllerå±‚ï¼‰ï¼Œå¦‚æœç±»ä¸Šæ–¹ä¹Ÿæœ‰@RequestMapping(â€œ/userâ€)æ ‡ç­¾ï¼Œåˆ™è¡¨ç¤ºå¤šçº§ç›®å½•ï¼Œé‚£ä¹ˆå‰ç«¯é¡µé¢éœ€è¦è®¿é—®user/hello èƒ½è‡ªåŠ¨å¯¹åº”ä¸Šå‰ç«¯é¡µé¢çš„åç§°æ˜¯å› ä¸ºspringmvc.xmlä¸­è§†å›¾è§£æå™¨ä¸­å†™æ˜äº†è·¯å¾„ â€‹ 3.5 éšä¾¿å†™ä¸€ä¸ªhtml/jspé¡µé¢æäº¤è¯·æ±‚ è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨tomcatè®¿é—®index.jspäº†ï¼Œå¦‚æ— æ„å¤–ä½ å°±å¯ä»¥çœ‹åˆ°æ§åˆ¶å°æ‰“å°äº†aaa,è¾¾åˆ°è·Ÿservletä¸€æ ·çš„æ•ˆæœäº† â€‹ 4. é™æ€èµ„æºçš„è®¿é—®æ–¹æ³•html/css/js/imgç­‰å±äºé™æ€èµ„æºï¼Œè¦è®¿é—®ä»–ä»¬ï¼Œå¿…é¡»è®¾ç½®é™æ€èµ„æºä¸æ‹¦æˆªã€‚ä»¥ä¸‹ç»™å‡ºä¸¤ç§æ–¹æ³•ã€‚ 4.1 è®¾ç½®servlet-mappingåœ¨web.xmlå¯¹åº”ä½ç½®ï¼ˆservlet-mappingçš„ä½ç½®ä½ æ‡‚çš„å§ï¼‰ä¸­æ·»åŠ  123456789101112131415161718192021222324&lt;servlet-mapping&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;url-pattern&gt;*.js&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;url-pattern&gt;*.png&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;url-pattern&gt;*.jpg&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;url-pattern&gt;*.gif&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;default&lt;/servlet-name&gt; &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; åŒç†ï¼Œå…¶ä»–æ ¼å¼çš„è‡ªå®šä¹‰ 4.2 mvcæä¾›çš„æ–¹å¼springmvcæä¾›äº†ä¸€ç§æ ‡ç­¾å¯ä»¥è®¾ç½®é™æ€èµ„æºä¸æ‹¦æˆª 1234&lt;!-- è®¾ç½®é™æ€èµ„æºä¸è¿‡æ»¤ --&gt;&lt;mvc:resources location=\"/css/\" mapping=\"/css/**\"/&gt; &lt;!-- æ ·å¼ --&gt;&lt;mvc:resources location=\"/images/\" mapping=\"/images/**\"/&gt; &lt;!-- å›¾ç‰‡ --&gt;&lt;mvc:resources location=\"/js/\" mapping=\"/js/**\"/&gt; &lt;!-- javascript --&gt; æ ¹ç›®å½•æ˜¯æŒ‡webappç›®å½•ï¼ŒhtmlåŒç†ï¼ŒåŠ ä¸Šå°±å¥½ 5. è¯·æ±‚å‚æ•°ç»‘å®šå˜é‡å’Œå®ä½“ç±»å‰ç«¯çš„è¯·æ±‚æ•°æ®æ€»ä¼šå¸¦ä¸Šå‚æ•°ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å°†å‚æ•°å°è£…ï¼Œspringmvcæ˜¯é€šè¿‡å˜é‡åå­—æ¥è‡ªåŠ¨å¯¹åº”çš„ï¼Œçœå»äº†åŸæ¥ç”¨request.getParameter()çš„éº»çƒ¦ã€‚ é‚£ä¹ˆå‰ç«¯æäº¤çš„nameå°±å¿…é¡»åƒä¸‹é¢é‚£æ ·å†™ Controllerå±‚ 6. è·å–åŸç”ŸServletçš„APIï¼ˆrequestå’Œresponseï¼‰ä¸€èˆ¬å¾ˆå°‘ç”¨ï¼Œç›´æ¥ç»™controllerçš„æ–¹æ³•æ·»åŠ ä¸¤ä¸ªå½¢å‚ï¼šHttpServletRequest requestå’ŒHttpServletRequest response responseå°±å¯ä»¥ä½¿ç”¨äº† 7. å¸¸è§çš„æ³¨è§£@RequestMappingä¸Šé¢å·²ç»ç”¨è¿‡äº†ï¼Œå®ƒè¿˜æœ‰è¿™ä¹ˆä¸€äº›å±æ€§ path/valueï¼šæŒ‡æ˜è¯·æ±‚urlï¼Œå¦‚æœåªæœ‰è¿™ä¸ªå‚æ•°åˆ™å¯ä»¥ä¸å†™ mthodï¼šå¯ä»¥æŒ‡å®šPOSTå’ŒGETä¸¤ç§æ–¹å¼ paramsï¼šæŒ‡å®šå‰ç«¯å¿…é¡»è¦ä¼ é€’è¿›æ¥çš„å‚æ•° headersï¼šæŒ‡å®šè¯·æ±‚ä¸­å¿…é¡»åŒ…å«çš„è¯·æ±‚å¤´ @RequestParams(value=â€œnameâ€)è§£å†³urlå‚æ•°å¯ä»¥å’Œæ¥æ”¶çš„å‚æ•°åå­—ä¸åŒ¹é…çš„é—®é¢˜ æ¯”å¦‚å‰ç«¯å‚æ•°æ˜¯name åå°æ˜¯usernameï¼Œå¯¹åº”ä¸ä¸Šï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªæ³¨è§£æŒ‡å®šurlæ¥æ”¶å @RequestBodyåŒä¸Šï¼Œä¸è¿‡æ˜¯å¯¹postè¯·æ±‚ï¼ˆå‰ç«¯é€šè¿‡è¡¨å•æäº¤ä¸”method=â€postâ€ï¼Œæˆ–è€…ajaxå¼‚æ­¥æ—¶ä½¿ç”¨postï¼‰ åå°æ–¹æ³•å½¢å‚è¿˜æ˜¯ä¸€ä¸ªString bodyï¼Œè¿™ä¸ªbodyåŒ…æ‹¬ï¼šusername=å“ˆå“ˆ&amp;age=13 @PathVariable(value=â€idâ€)è¿™ä¸ªæ³¨è§£ä¸ºäº†restfulé£æ ¼è€Œç”Ÿï¼ˆä¸€ç§å€¡å¯¼/root/user/10è€Œä¸æ˜¯/root/user?id=10çš„é£æ ¼ï¼‰ Controllerå±‚ï¼Œå±æ€§valueæˆ–è€…nameéƒ½ä¸€æ · å‰ç«¯ä¼ å€¼çš„æ—¶å€™çš„è·¯å¾„ @RequestHeaderç”¨æ³•å’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œéƒ½æ˜¯åŠ åœ¨å­—ç¬¦ä¸²å½¢å‚å‰é¢ï¼Œç”¨å¤„æ˜¯è·å¾—æŸä¸ªè¯·æ±‚å¤´çš„å€¼ï¼Œå¦‚@RequestHeader(value=â€Acceptâ€) @CookieValueä½¿ç”¨æ–¹æ³•åŒä¸Šï¼Œç”¨äºè·å–Cookieå€¼ @ModelAttributeå†™åœ¨æ–¹æ³•ä¸Šï¼Œä¹Ÿå¯ä»¥å†™åœ¨å‚æ•°ä¸Šã€‚å†™åœ¨æ–¹æ³•ä¸Šæ—¶ï¼Œä½œç”¨æ˜¯ä¼˜å…ˆäºåŸæ¥å‰ç«¯è¯·æ±‚çš„å¯¹åº”æ–¹æ³•ï¼Œå‰ç«¯è¯·æ±‚çš„å‚æ•°ä¼šè¿›å…¥è¯¥æ–¹æ³•çš„å½¢å‚ï¼Œè¯¥æ–¹æ³•è¿”å›å€¼ä¼šè¿›å…¥åŸå…ˆè¯·æ±‚çš„æ–¹æ³•çš„å½¢å‚ æœ‰ç§æ‹¦æˆªçš„å‘³é“ å¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¯¥æ–¹æ³•å½¢å‚æ·»åŠ ä¸€ä¸ªmapï¼Œæ–¹æ³•å†…ç”¨mapé›†åˆå­˜ä½è¿”å›å€¼ï¼Œè¿™æ—¶å¯ä»¥å°†@ModelArrtibuteå†™åœ¨åŸå…ˆè¯·æ±‚çš„æ–¹æ³•çš„å½¢å‚å‚æ•°ä¸Šï¼Œå±æ€§å°±æ˜¯mapçš„key @SessionAttributesåŒæ ·çš„ï¼Œå­˜å…¥sessionåŸŸä¸­ 8. è¿”å›ç»™å‰ç«¯çš„ä¿¡æ¯å‰é¢è¯´å®Œäº†æ¥æ”¶è¯·æ±‚ï¼Œç°åœ¨æ¥è¯´ä¸€ä¸‹è¿”å›æ•°æ®ï¼ŒControllerå±‚çš„æ–¹æ³•å¯ä»¥æœ‰å¤šç§è¿”å›å€¼åº”å¯¹ä¸ç”¨çš„å“åº”éœ€æ±‚ 8.1 é¡µé¢è·³è½¬å‹8.1.1 è¿”å›å€¼ä¸ºStringç±»å‹returnçš„å€¼ä¸ºâ€successâ€ï¼Œä¼šç»è¿‡è§†å›¾è§£æå™¨ï¼Œæ‰¾åˆ°success.jsp è¿˜æœ‰ä¸€ç§ä¸å¤ªå¸¸ç”¨çš„æ–¹æ³•ï¼Œä½¿ç”¨requestå’Œresponseè½¬å‘å’Œé‡å®šå‘ return &quot;forward:/WEB-INF/pages/success.jsp&quot;; æˆ–è€…æ˜¯ return &quot;redirect:/index.jsp&quot;; 8.1.2 è¿”å›å€¼ä¸ºvoidç±»å‹åˆ™ä¼šé»˜è®¤è·³è½¬æ–¹æ³•ä¸Šé¢çš„RequestMappingçš„è·¯å¾„.jspï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šæŠ¥404é”™è¯¯ã€‚æˆ–è€…å¯ä»¥ä½¿ç”¨requestå’Œresponseè½¬å‘å’Œé‡å®šå‘è·å–servletçš„apiï¼Œå¦‚æ­¤åˆ™è‡ªå·±å†™è¦è·³è½¬çš„é¡µé¢ï¼Œæ³¨æ„ï¼šå› ä¸ºè¿™æ ·ä¸å†ç»è¿‡è§†å›¾è§£æå™¨ï¼Œæ³¨æ„è·¯å¾„ä¸èƒ½å†å†™successï¼Œè€Œæ˜¯/WEB-INF/pages/success.jspï¼Œå¦‚æœæ˜¯responseè¿˜è¦æ³¨æ„åŠ ä¸Šresponse.getContextPath()è¿”å›å€¼ä¸º 8.1.3 è¿”å›å€¼ä¸ºModelAndViewç±»å‹è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥å¤„ç†é¡µé¢è·³è½¬è¿”å›çš„ç±»ï¼Œå…¶å®å°±æ˜¯Stringè¿”å›ç±»å‹+Modelç±»çš„åˆä½“ï¼Œé€šè¿‡addObjectæ–¹æ³•å­˜å…¥requeståŸŸå’ŒsessionåŸŸä¸­ï¼Œé€šè¿‡setViewNameæ–¹æ³•å¯ä»¥é€šè¿‡è§†å›¾è§£æå™¨æŒ‡å®šè·³è½¬é¡µé¢ 8.2 jsonå‹æ­£å¸¸ç‚¹ï¼Œè¿™ç§ä¸€èˆ¬éƒ½æ˜¯å¯¹åº”å¼‚æ­¥è¯·æ±‚ è¦å…ˆæ”¾å¼€é™æ€èµ„æºï¼ˆjsï¼Œå›¾ç‰‡ï¼Œcssï¼‰ï¼Œå¦åˆ™ä¼šè¢«æ‹¦æˆªï¼Œåšæ³•æ˜¯åœ¨springmvc.xmlä¸­æ·»åŠ  1234&lt;!-- è®¾ç½®é™æ€èµ„æºä¸è¿‡æ»¤ --&gt;&lt;mvc:resources location=\"/css/\" mapping=\"/css/**\"/&gt; &lt;!-- æ ·å¼ --&gt;&lt;mvc:resources location=\"/images/\" mapping=\"/images/**\"/&gt; &lt;!-- å›¾ç‰‡ --&gt;&lt;mvc:resources location=\"/js/\" mapping=\"/js/**\"/&gt; &lt;!-- javascript --&gt; @ResponseBodyä½œç”¨æ˜¯å°†è¿”å›å€¼ä»¥jsonçš„æ ¼å¼å‘é€ç»™å‰ç«¯ï¼Œå†™åœ¨æ–¹æ³•è¿”å›å€¼ç±»å‹ä¸Š å‰ç«¯ajaxè¯·æ±‚ä»£ç  12345678910111213$.ajax({ url: \"user/testAjax\", contentType: \"application/json;charset=utf-8\", data:'{\"username\": \"hehe\", ' + '\"password\": \"123\", ' + '\"age\": \"20\"}', dataType: \"json\", type: \"post\", success:function (data) { alert(data); alert(data.age); }}); jsonå­—ç¬¦ä¸²å’ŒJavaBeanå¯¹è±¡äº’ç›¸è½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä»¥ä¸‹jacksonåæ ‡ 123456789101112131415&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt; &lt;version&gt;2.10.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-core&lt;/artifactId&gt; &lt;version&gt;2.10.3&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt; &lt;version&gt;2.10.3&lt;/version&gt;&lt;/dependency&gt; å…³äºjsonå¯¹è±¡å’Œjsonå­—ç¬¦ä¸²å’Œæ™®é€šå­—ç¬¦ä¸²ä¼ è¾“æ—¶é€ æˆnullå€¼çš„ä¸€äº›å‘ï¼Œå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ","link":"/Spring/SpringMVC%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B01/"},{"title":"SpringMVCå…¥é—¨ç¬”è®°2","text":"1. SpringMVCçš„æ–‡ä»¶ä¸Šä¼ 1.1 æ–‡ä»¶ä¸Šä¼ çš„å¿…è¦å‰æ formè¡¨å•çš„enctypeå–å€¼å¿…é¡»æ˜¯ï¼šmuitipart/form-dataï¼ˆé»˜è®¤å€¼æ˜¯ï¼šapplication/x-www-form-urlencodedï¼‰ï¼Œenctypeï¼šæ˜¯è¡¨å•è¯·æ±‚æ­£æ–‡çš„ç±»å‹ å¿…é¡»æ˜¯POSTè¯·æ±‚ htmlä¸­é€šè¿‡&lt;input type=&quot;file&quot; /&gt; æ¥æäº¤ commons-fileuploadä¸¤ä¸ªåº“ 1.2 SpringMVCå®ç°æ–‡ä»¶ä¸Šä¼  æ·»åŠ mavenä¾èµ–åæ ‡ 12345678910&lt;dependency&gt; &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; &lt;version&gt;1.4&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;commons-io&lt;/groupId&gt; &lt;artifactId&gt;commons-io&lt;/artifactId&gt; &lt;version&gt;2.6&lt;/version&gt;&lt;/dependency&gt; springmvc.xmlä¸­é…ç½®æ–‡ä»¶è§£æå™¨ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„idå¿…é¡»å«åšmultipartResolverï¼Œä¸èƒ½è‡ªå·±ä¹±æ”¹ 123&lt;bean id=\"multipartResolver\" class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"&gt; &lt;property name=\"maxUploadSize\" value=\"10485760\" /&gt; &lt;!--å•ä½æ˜¯å­—èŠ‚--&gt;&lt;/bean&gt; html æ³¨æ„è¿™é‡Œçš„ method=â€postâ€ enctype=â€multipart/form-dataâ€ ä¸èƒ½å˜ name=â€uploadâ€å¯ä»¥æ”¹ï¼Œä½†æ˜¯è¦å’Œä¸‹é¢çš„controllerå±‚æ¥æ”¶æ–¹æ³•çš„å‚æ•°åä¸€è‡´ 1234&lt;form action=\"user/fileUpload2\" method=\"post\" enctype=\"multipart/form-data\"&gt; é€‰æ‹©æ–‡ä»¶ï¼š&lt;input type=\"file\" name=\"upload\" /&gt;&lt;br /&gt; &lt;input type=\"submit\" value=\"ä¸Šä¼ \"&gt;&lt;/form&gt; controller æ³¨æ„è¿™é‡Œçš„å‚æ•°åuploadè¦å’Œhtmlè¡¨å•çš„æ–‡ä»¶çš„nameå±æ€§åä¸€è‡´ 1234567891011121314151617181920@RequestMapping(\"/fileUpload2\")public String fileUpload2(HttpServletRequest request, MultipartFile upload) thro //springmvcæ–¹å¼ä¸Šä¼ æ–‡ä»¶ //ä¸Šä¼ çš„ä½ç½®(æ–‡ä»¶å¤¹ç›®å½•) String path = request.getSession().getServletContext().getRealPath(\"/uploads File file = new File(path); //å¦‚æœä¸å­˜åœ¨ï¼Œå°±åˆ›å»º if (!file.exists()){ //åˆ›å»ºæ–‡ä»¶å¤¹ file.mkdirs(); } //è·å–ä¸Šä¼ æ–‡ä»¶åç§° String fileName = upload.getOriginalFilename(); //ä¸ºäº†ä¸¤æ¬¡ä¸Šä¼ å¯¼è‡´æ–‡ä»¶åç›¸åŒè€Œå†²çªï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨uuidè®¾ç½®filename String uuid = UUID.randomUUID().toString().replace(\"-\", \"\"); // å®Œæˆæ–‡ä»¶ä¸Šä¼  fileName = uuid + \"_\" + fileName; upload.transferTo(new File(path, fileName)); return \"success\";} 1.3 jerseyè·¨æœåŠ¡å™¨ä¸Šä¼ åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šæœ‰å¾ˆå¤šå¤„ç†ä¸åŒåŠŸèƒ½çš„æœåŠ¡å™¨ã€‚ä¾‹å¦‚ï¼š åº”ç”¨æœåŠ¡å™¨ï¼šè´Ÿè´£éƒ¨ç½²æˆ‘ä»¬çš„åº”ç”¨ æ•°æ®åº“æœåŠ¡å™¨ï¼šè¿è¡Œæˆ‘ä»¬çš„æ•°æ®åº“ ç¼“å­˜å’Œæ¶ˆæ¯æœåŠ¡å™¨ï¼šè´Ÿè´£å¤„ç†å¹¶å‘è®¿é—®çš„ç¼“å­˜å’Œæ¶ˆæ¯ æ–‡ä»¶æœåŠ¡å™¨ï¼šè´Ÿè´£å­˜å‚¨ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„æœåŠ¡å™¨ã€‚ 1.3.1 æ­¥éª¤ æ–°å¢pomåæ ‡ 12345678910&lt;dependency&gt; &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt; &lt;artifactId&gt;jersey-client&lt;/artifactId&gt; &lt;version&gt;1.19.4&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt; &lt;artifactId&gt;jersey-core&lt;/artifactId&gt; &lt;version&gt;1.19.4&lt;/version&gt;&lt;/dependency&gt; åˆ›å»ºæ–°çš„moduleæˆ–è€…projectä½œä¸ºå›¾ç‰‡æœåŠ¡å™¨ï¼Œå¹¶é…ç½®å¥½tomcatï¼ˆè¯¦æƒ…ç•¥ï¼‰ï¼Œè¦æ³¨æ„åœ¨targetä¸­æ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶å¤¹,tomcatä¸¤ä¸ªç«¯å£ä¸èƒ½å†²çª htmlåŒä¸Š 1234&lt;form action=\"user/fileUpload3\" method=\"post\" enctype=\"multipart/form-data\"&gt; é€‰æ‹©æ–‡ä»¶ï¼š&lt;input type=\"file\" name=\"upload\" /&gt;&lt;br /&gt; &lt;input type=\"submit\" value=\"ä¸Šä¼ \"&gt;&lt;/form&gt; controller 123456789101112131415161718@RequestMapping(\"/fileUpload3\")public String fileUpload3(MultipartFile upload) throws Exception { //è·¨æœåŠ¡å™¨æ–¹å¼ä¸Šä¼ æ–‡ä»¶ //å®šä¹‰ä¸Šä¼ æ–‡ä»¶æœåŠ¡å™¨è·¯å¾„ String path = \"http://localhost:9090/uploads/\"; //è·å–ä¸Šä¼ æ–‡ä»¶åç§° String fileName = upload.getOriginalFilename(); //ä¸ºäº†ä¸¤æ¬¡ä¸Šä¼ å¯¼è‡´æ–‡ä»¶åç›¸åŒè€Œå†²çªï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨uuidè®¾ç½®filename String uuid = UUID.randomUUID().toString().replace(\"-\", \"\"); fileName = uuid + \"_\" + fileName; //åˆ›å»ºå®¢æˆ·ç«¯å¯¹è±¡ Client client = Client.create(); //å’Œå›¾ç‰‡æœåŠ¡å™¨è¿›è¡Œè¿æ¥ WebResource webResources = client.resource(path + fileName); //ä¸Šä¼ æ–‡ä»¶ webResources.put(upload.getBytes()); return \"success\";} 1.3.2 å¸¸è§é”™è¯¯çš„è§£å†³ï¼š403é”™è¯¯æƒé™é—®é¢˜ æ‰“å¼€tomcatå®‰è£…ç›®å½•apache-tomcat-8.5.46\\conf\\web.xmlï¼Œctrl+Fæœç´¢&lt;servlet-name&gt;default&lt;/servlet-name&gt;æ‰¾åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä½ç½®ï¼Œåœ¨å¦‚ä¸‹å›¾ä½ç½®åŠ å…¥ 1234&lt;init-param&gt; &lt;param-name&gt;readonly&lt;/param-name&gt; &lt;param-value&gt;false&lt;/param-value&gt;&lt;/init-param&gt; æ•ˆæœå¦‚ä¸‹ 404é”™è¯¯ç›®å½•é—®é¢˜ï¼Œfileuploadçš„tomcaté…ç½®æ”¹ä¸ºæ ¹ç›®å½•å³å¯ æˆ–è€…ä½ ä¸æƒ³æ”¹è™šæ‹Ÿç›®å½•ï¼Œé‚£å°±è¦åœ¨åº”ç”¨æœåŠ¡å™¨è¿™è¾¹æŠŠä¸Šä¼ çš„å›¾ç‰‡æœåŠ¡å™¨çš„è·¯å¾„ä¸­åŠ å…¥åˆšåˆšçš„è™šæ‹Ÿç›®å½•ä¹Ÿæ˜¯å¯ä»¥çš„ 405é”™è¯¯åŒ403é”™è¯¯ 409é”™è¯¯æ–‡ä»¶å¤¹ä¸ºç©ºé—®é¢˜ï¼Œå› ä¸ºä¸Šä¼ å›¾ç‰‡çš„ç›®å½•æ˜¯uploadsï¼Œæ‰€ä»¥æ‰‹åŠ¨åœ¨å›¾ç‰‡æœåŠ¡å™¨çš„targetç›®å½•åˆ›å»ºuploadsæ–‡ä»¶å¤¹ 500é”™è¯¯åŸå› å¤æ‚ 2. SpringMVCå¼‚å¸¸å¤„ç†ä¸ºäº†é¿å…æµè§ˆå™¨ç›´æ¥å¼¹å‡ºé”™è¯¯ è®©ç•Œé¢å‹å¥½ä¸€ç‚¹ï¼ˆæ¯”å¦‚é¡µé¢æç¤ºç³»ç»Ÿæ­£åœ¨ç»´æŠ¤ä¸­ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼‚å¸¸å¤„ç†å™¨æ¥è·³è½¬é”™è¯¯é¡µé¢ springmvc.xmlä¸­ idåªèƒ½æ˜¯è¿™ä¸ªåå­—sysExceptionResolverï¼Œä¸èƒ½ä¹±æ”¹ 12&lt;!--é…ç½®å¼‚å¸¸å¤„ç†å™¨--&gt;&lt;bean id=\"sysExceptionResolver\" class=\"com.wjw.exception.SysExceptionResolver\"/&gt; æ¥ä¸‹æ¥æˆ‘ä»¬åˆ›å»ºå¹¶å®Œæˆè¿™ä¸¤ä¸ªç±» è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ç±»SysExceptionï¼Œç»§æ‰¿Exceptionï¼ˆåƒå®ä½“ç±»é‚£æ ·çš„ï¼‰ 1234567891011121314151617public class SysException extends Exception { //å­˜å‚¨æç¤ºä¿¡æ¯ private String message; public SysException(String message) { this.message = message; } @Override public String getMessage() { return message; } public void setMessage(String message) { this.message = message; }} SysExceptionResolverç±» å®ç°HandlerExceptionResolveræ¥å£ï¼Œå¼‚å¸¸å¤„ç†å™¨ 12345678910111213141516171819202122232425public class SysExceptionResolver implements HandlerExceptionResolver { /** * å¤„ç†å¼‚å¸¸çš„ä¸šåŠ¡é€»è¾‘ * @param httpServletRequest * @param httpServletResponse * @param o * @param e * @return */ @Override public ModelAndView resolveException(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e) { // è·å–åˆ°å¼‚å¸¸å¯¹è±¡ SysException ex = null; if (e instanceof SysException){ ex = (SysException)e; }else { ex = new SysException(\"ç³»ç»Ÿæ­£åœ¨ç»´æŠ¤\"); } ModelAndView mv = new ModelAndView(); mv.addObject(\"errorMsg\", e.getMessage()); mv.setViewName(\"error\"); return mv; }} ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ 3. SpringMVCæ‹¦æˆªå™¨è·Ÿservletä¸­çš„è¿‡æ»¤å™¨filterä¸€æ ·ï¼Œæ”¹åæ‹¦æˆªå™¨ã€‚æœ‰ä¸€ä¸¢ä¸¢ä¸åŒï¼Œæ‹¦æˆªå™¨ä¸ä¼šæ‹¦jspï¼Œhtmlï¼Œcssï¼Œimagesç­‰é™æ€èµ„æºï¼Œä½†æ˜¯è¿‡æ»¤å™¨å¦‚æœé…ç½®äº†/*ï¼Œå…¨éƒ¨éƒ½ä¼šæ‹¦ä¸‹æ¥ã€‚ 3.1 xmlæ–¹å¼ springmvc.xmlä¸­ 1234567891011&lt;!--é…ç½®æ‹¦æˆªå™¨--&gt;&lt;mvc:interceptors&gt; &lt;!--é…ç½®æ¯ä¸ªæ‹¦æˆªå™¨--&gt; &lt;mvc:interceptor&gt; &lt;!--æ‹¦æˆªå…·ä½“æ–¹æ³•--&gt; &lt;mvc:mapping path=\"/user/*\"/&gt; &lt;!--ä¸æ‹¦æˆªçš„æ–¹æ³•--&gt; &lt;!--&lt;mvc:exclude-mapping path=\"\"/&gt;--&gt; &lt;bean class=\"com.wjw.interceptor.MyInterceptor\"/&gt; &lt;/mvc:interceptor&gt;&lt;/mvc:interceptors&gt; å¯ä»¥ä½¿ç”¨å¤šä¸ª&lt;mvc:interceptor&gt;æ ‡ç­¾æ¥æŒ‡å®šå¤šä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªå™¨çš„é¡ºåºå°±æ˜¯é…ç½®é¡ºåº mvc:mappingå’Œmvc:exclude-mappingæ˜¯ä¸€ç»„ç›¸å¯¹çš„æ ‡ç­¾ï¼Œè®¾ç½®æ‹¦æˆªè·¯å¾„å’Œä¸æ‹¦æˆªè·¯å¾„ è‡ªå®šä¹‰æ‹¦æˆªå™¨ç±» å®ç°HandlerInterceptoræ¥å£ preHandleï¼šé¢„å¤„ç† controlleræ–¹æ³•å‰æ‰§è¡Œ postHandleï¼šåå¤„ç† controlleræ–¹æ³•åï¼Œjsp/htmlæ‰§è¡Œä¹‹å‰ afterCompletionï¼šæœ€åå¤„ç† é¡µé¢æ‰§è¡Œåæ‰§è¡Œçš„æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class MyInterceptor implements HandlerInterceptor { /** * é¢„å¤„ç† controlleræ–¹æ³•å‰æ‰§è¡Œ * return trueä¸ºæ”¾è¡Œï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨æˆ–controlleræ–¹æ³• * return falseåˆ™ä¸æ”¾è¡Œï¼Œå¯ä»¥é€šè¿‡requestå’Œresponseæ¥è·³è½¬ * @param request * @param response * @param handler * @return * @throws Exception */ @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception { System.out.println(\"æ‹¦æˆªå™¨é¢„å¤„ç†è¿è¡Œäº†\"); //request.getRequestDispatcher(\"/WEB-INF/pages/error.jsp\").forward(request, response); return true; } /** * åå¤„ç† controlleræ–¹æ³•åï¼Œjsp/htmlæ‰§è¡Œä¹‹å‰ * @param request * @param response * @param handler * @param modelAndView * @throws Exception */ @Override public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception { System.out.println(\"æ‹¦æˆªå™¨åå¤„ç†\"); } /** * é¡µé¢æ‰§è¡Œåæ‰§è¡Œçš„æ–¹æ³• * @param request * @param response * @param handler * @param ex * @throws Exception */ @Override public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception { System.out.println(\"afterCompletionæ–¹æ³•\"); }} å®ç°HandlerInterceptoræ¥å£éœ€è¦å®ç°ä¸‰ä¸ªæ–¹æ³•ï¼Œä¸ºäº†å·æ‡’ï¼Œå¯ä»¥ extends HandlerInterceptorAdapter HandlerInterceptorAdapteræ˜¯HandlerInterceptoræ¥å£çš„é»˜è®¤å®ç°ç±»ï¼Œé‚£ä¹ˆä½ éœ€è¦å“ªä¸ªæ–¹æ³•å°±overwriteå“ªä¸ªæ–¹æ³•å°±è¡Œï¼Œå…¶ä»–å†™æ³•ä¸Šæ˜¯ä¸€æ ·çš„ã€‚ ä¸ä½¿ç”¨xmlçš„æ–¹å¼springå½“ç„¶ä¹Ÿæ”¯æŒjavaé…ç½®ç±»çš„æ–¹å¼ï¼Œä½•å†µå¦‚æœä½¿ç”¨äº†springbootä½¿ç”¨javaé…ç½®ç±»å°±æ›´å¤šäº† æ‹¦æˆªå™¨è¿˜æ˜¯è·Ÿä¸Šé¢ä¸€æ ·å®ç°HandlerInterceptoræ¥å£æˆ–è€…ç»§æ‰¿HandlerInterceptorAdapteç±»ï¼Œä½†æ˜¯è¦åœ¨ç±»ä¸Šæ–¹åŠ ä¸Š@Componentæ³¨è§£ xmlä¸éœ€è¦äº†ï¼Œåˆ›å»ºä¸€ä¸ªjavaé…ç½®ç±»ï¼Œå®ç°WebMvcConfigureræ¥å£ï¼Œå¤å†™addInterceptorsæ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š 1234567891011@Configurationpublic class WjwMvcConfiguration implements WebMvcConfigurer { @Autowired private LoginInterceptor loginInterceptor; @Override public void addInterceptors(InterceptorRegistry registry) { registry.addInterceptor(loginInterceptor).addPathPatterns(\"/**\"); //æ‹¦æˆªæ‰€æœ‰è·¯å¾„ }}","link":"/Spring/SpringMVC%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B02/"},{"title":"Springå…¥é—¨ç¬”è®°1","text":"1. ç¨‹åºè€¦åˆåº¦/springçš„ä½œç”¨/iocçš„åŸç†ä»¥å‰çš„ç¨‹åºå­˜åœ¨ä¸¤ç‚¹ä¸è¶³ï¼š è¯¸å¦‚ä¸€äº›é…ç½®ä¿¡æ¯å†™åœ¨äº†ç±»ä¸­ï¼Œç¼–è¯‘åæ”¹ä¸äº†äº†ï¼Œæ¯”å¦‚æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ï¼Œå¦‚æœæ˜¯å†™åœ¨ç±»ä¸­ï¼Œä»¥åæƒ³æ¢æ•°æ®åº“å°±åªèƒ½åŠ¨æ‰‹æ”¹æºç ã€‚è§£å†³åŠæ³•å°±æ˜¯é€šè¿‡è¯»å–xmlæˆ–è€…propertiesçš„æ–¹å¼ï¼Œç¼–è¯‘åxmlä¹Ÿè¿˜åœ¨ï¼Œä»¥åæƒ³ä¿®æ”¹æ•°æ®åº“å°±å¯ä»¥åªæ”¹å˜xmlçš„å†…å®¹ã€‚ åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æˆ‘ä»¬é€šè¿‡newçš„æ–¹å¼ï¼Œæ¯”å¦‚åœ¨å†™serviceå±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦new userDao()ï¼Œè¿™æ ·å­çš„è¯ï¼Œå¦‚æœæ²¡æœ‰å…ˆå†™å¥½daoå±‚ï¼Œæˆ–è€…è¯´ä¸¤ä¸ªäººè´Ÿè´£ç¼–å†™ä¸¤ä¸ªå±‚ç­‰ç­‰ï¼Œå°±å¿…é¡»ç­‰å¦ä¸€ä¸ªäººå…ˆå†™å®Œï¼Œè¿™æ ·å°±ä¸å¥½ã€‚åæ¥æˆ‘ä»¬çš„è§£å†³åŠæ³•æ˜¯ç”¨å·¥å‚æ¨¡å¼è§£è€¦ï¼Œå°†newä¸€ä¸ªå®ä¾‹äº¤ç»™å·¥å‚ç±»ã€‚è¿™æ ·ç¡®å®è§£è€¦äº†ï¼Œä½†æ˜¯å·¥å‚ç±»è¿˜æ˜¯è¦æ”¹æºç ï¼Œæœ€å¥½çš„æ–¹å¼è¿˜æ˜¯åƒxmlä¸€æ ·éœ€è¦çš„æ—¶å€™æ¥è¯»å–ã€‚ è¿™å°±æ˜¯æ‰€è°“çš„è€¦åˆåº¦ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œ springçš„iocç§°ä¸ºæ§åˆ¶åè½¬ï¼Œå°±æ˜¯è§£å†³äº†newçš„é—®é¢˜ï¼Œå°†å¯¹è±¡æ‰€åœ¨çš„ç±»çš„è·¯å¾„å†™åœ¨xmlä¸­ï¼Œéœ€è¦ç”¨åˆ°å¯¹è±¡çš„æ—¶å€™é€šè¿‡åå°„æ¥åˆ›å»ºå¯¹è±¡ï¼Œç›¸å½“äºç¼–å†™äº†ä¸€ä¸ªå·¥å‚ç±»çš„ä½œç”¨ã€‚ springçš„diç§°ä¸ºä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯é€šè¿‡xmlçš„æ–¹å¼ç»™å‡½æ•°ä¸­çš„å…ƒç´ èµ‹å€¼ï¼Œè§£å†³äº†ä½ ä¸çŸ¥é“ä½•æ—¶éœ€è¦ä»å·¥å‚ç±»ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„é—®é¢˜ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥æ¥å‘ŠçŸ¥ä½ æƒ³ä»€ä¹ˆæ—¶å€™åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦ç”¨åˆ°çš„æ—¶å€™è‡ªåŠ¨ä»iocå®¹å™¨ä¸­è·å–è€Œä¸æ˜¯newã€‚ å€Ÿç”¨ç½‘ä¸Šçš„ä¸€å¼ å›¾ å›¾ç‰‡æ¥æºhttps://www.cnblogs.com/superjt/p/4311577.htmlï¼Œè¿™ç¯‡åšå®¢å¯¹IOCçš„æ¦‚å¿µè®²çš„å¾ˆæ£’ 2. å¦‚ä½•é€šè¿‡springçš„iocæ¥åˆ›å»ºå¯¹è±¡ä»è€Œä»£æ›¿new2.1 xmlæ–¹å¼bean.xml serviceå±‚ è¡¨ç°å±‚ï¼ˆå½“ç„¶æˆ‘ä»¬ä»¥åæ•´åˆspringmvcæ—¶ä¸ä¼šåœ¨controlleré‡Œé¢è¿™ä¹ˆå†™ï¼Œè€Œæ˜¯ç”¨spring-webåŒ…å®Œæˆï¼Œé‚£æ˜¯åè¯äº†ï¼‰ 2.2 æ³¨è§£æ–¹å¼å…³äºæ³¨è§£æ–¹å¼ï¼Œåªæ˜¯æ–¹å¼ä¸åŒï¼Œæˆ‘ä»¬è®²æ€æƒ³å’Œæ¦‚å¿µçš„æ—¶å€™ä»¥xmlçš„æ–¹å¼è®²ï¼Œç¬¬7éƒ¨åˆ†ç»Ÿä¸€è®²æ³¨è§£æ–¹å¼ã€‚ 3. ApplicationContextç±»3.1 ApplicationContextçš„ä¸‰ä¸ªå¸¸ç”¨å®ç°ç±» ClassPathXmlApplicationContextï¼šå®ƒå¯ä»¥åŠ è½½ç±»è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œè¦æ±‚é…ç½®æ–‡ä»¶å¿…é¡»åœ¨ç±»è·¯å¾„ä¸‹ã€‚ä¸åœ¨çš„è¯ï¼ŒåŠ è½½ä¸äº†ã€‚(æ›´å¸¸ç”¨) FileSystemXmlApplicationContextï¼šå®ƒå¯ä»¥åŠ è½½ç£ç›˜ä»»æ„è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶(å¿…é¡»æœ‰è®¿é—®æƒé™ï¼‰ AnnotationConfigApplicationContextï¼šå®ƒæ˜¯ç”¨äºè¯»å–æ³¨è§£åˆ›å»ºå®¹å™¨çš„ã€‚ 3.2 ApplicationContextï¼ˆä»£è¡¨iocï¼‰å’ŒBeanFactoryï¼ˆä»£è¡¨å·¥å‚ï¼‰åŠ è½½å¯¹è±¡çš„åŒºåˆ«ï¼ˆäº†è§£ï¼‰äº†è§£ä¸€ä¸‹å³å¯ ApplicationContextï¼šå•ä¾‹å¯¹è±¡é€‚ç”¨ é‡‡ç”¨æ­¤æ¥å£ï¼Œå®ƒåœ¨æ„å»ºæ ¸å¿ƒå®¹å™¨æ—¶ï¼Œåˆ›å»ºå¯¹è±¡é‡‡å–çš„ç­–ç•¥æ˜¯é‡‡ç”¨ç«‹å³åŠ è½½çš„æ–¹å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä¸€è¯»å–å®Œé…ç½®æ–‡ä»¶é©¬ä¸Šå°±åˆ›å»ºé…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å¯¹è±¡ã€‚ BeanFactoryï¼šå¤šä¾‹å¯¹è±¡é€‚ç”¨ å®ƒåœ¨æ„å»ºæ ¸å¿ƒå®¹å™¨æ—¶ï¼Œåˆ›å»ºå¯¹è±¡é‡‡å–çš„ç­–ç•¥æ˜¯é‡‡ç”¨å»¶è¿ŸåŠ è½½çš„æ–¹å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»€ä¹ˆæ—¶å€™æ ¹æ®idè·å–å¯¹è±¡äº†ï¼Œä»€ä¹ˆæ—¶å€™æ‰çœŸæ­£çš„åˆ›å»ºå¯¹è±¡ã€‚ è¿™ç‚¹æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªaccountServiceç±»çš„ä¸€ä¸ªæ„é€ å‡½æ•°è¾“å‡ºä¸€å¥è¯æ¥éªŒè¯ã€‚ 4. åˆ›å»ºBeançš„ä¸‰ç§æ–¹å¼4.1 ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºä¹Ÿå°±æ˜¯ä¸Šé¢é‚£æ ·çš„ åœ¨springçš„é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨beanæ ‡ç­¾ï¼Œé…ä»¥idå’Œclasså±æ€§ä¹‹åï¼Œä¸”æ²¡æœ‰å…¶ä»–å±æ€§å’Œæ ‡ç­¾æ—¶ é‡‡ç”¨çš„å°±æ˜¯é»˜è®¤æ„é€ å‡½æ•°åˆ›å»ºbeanå¯¹è±¡ï¼Œæ­¤æ—¶å¦‚æœç±»ä¸­æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°ï¼Œåˆ™å¯¹è±¡æ— æ³•åˆ›å»ºã€‚ 4.2 ä½¿ç”¨æ™®é€šå·¥å‚ä¸­çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆä½¿ç”¨æŸä¸ªç±»ä¸­çš„æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œå¹¶å­˜å…¥springå®¹å™¨ï¼‰æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨äº†å·¥å‚æ¨¡å¼ï¼Œåˆæˆ–è€…ä½¿ç”¨äº†åˆ«äººçš„jaråŒ…ï¼Œè¿™æ—¶å€™å‘ç°æŸä¸ªç±»æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°ï¼Œåªæœ‰å¸¦å‚æ„é€ å‡½æ•°æˆ–è€…æ„é€ å‡½æ•°äº¤ç»™äº†å·¥å‚ç±»æ¥åˆ›å»ºã€‚ è¿™æ—¶å€™å°±è¦è¿™æ ·åˆ›å»ºå¯¹è±¡ 4.3 ä½¿ç”¨å·¥å‚ä¸­çš„é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼ˆä½¿ç”¨æŸä¸ªç±»ä¸­çš„é™æ€æ–¹æ³•åˆ›å»ºå¯¹è±¡ï¼Œå¹¶å­˜å…¥springå®¹å™¨)å¯¹äºé™æ€æ–¹æ³• é‚£ä¹ˆéœ€è¦è¿™æ ·ä½¿ç”¨ 5. beançš„ä½œç”¨èŒƒå›´å’Œç”Ÿå‘½å‘¨æœŸï¼ˆäº†è§£ï¼‰ä½œç”¨èŒƒå›´beançš„ä½œç”¨èŒƒå›´è°ƒæ•´ beanæ ‡ç­¾çš„scopeå±æ€§ï¼š &nbsp;&nbsp;&nbsp;&nbsp;ä½œç”¨ï¼šç”¨äºæŒ‡å®šbeançš„ä½œç”¨èŒƒå›´ &nbsp;&nbsp;&nbsp;&nbsp;å–å€¼ï¼š å¸¸ç”¨çš„å°±æ˜¯å•ä¾‹çš„å’Œå¤šä¾‹çš„ singletonï¼šå•ä¾‹çš„ï¼ˆé»˜è®¤å€¼ï¼‰ prototypeï¼šå¤šä¾‹çš„ requestï¼šä½œç”¨äºwebåº”ç”¨çš„è¯·æ±‚èŒƒå›´ sessionï¼šä½œç”¨äºwebåº”ç”¨çš„ä¼šè¯èŒƒå›´ global-sessionï¼šä½œç”¨äºé›†ç¾¤ç¯å¢ƒçš„ä¼šè¯èŒƒå›´ï¼ˆå…¨å±€ä¼šè¯èŒƒå›´ï¼‰ï¼Œå½“ä¸æ˜¯é›†ç¾¤ç¯å¢ƒæ—¶ï¼Œå®ƒå°±æ˜¯session ä¼¼ä¹æ˜¯åˆ¶å®šäº†å¤šä¾‹ï¼Œå°±ä¼šåƒbeanFactoryä¸€æ ·åœ¨éœ€è¦æ—¶æ‰åˆ›å»ºå¯¹è±¡ ç”Ÿå‘½å‘¨æœŸ å•ä¾‹å¯¹è±¡ â€‹ å‡ºç”Ÿï¼šå½“å®¹å™¨åˆ›å»ºæ—¶å¯¹è±¡å‡ºç”Ÿ â€‹ æ´»ç€ï¼šåªè¦å®¹å™¨è¿˜åœ¨ï¼Œå¯¹è±¡ä¸€ç›´æ´»ç€ â€‹ æ­»äº¡ï¼šå®¹å™¨é”€æ¯ï¼Œå¯¹è±¡æ¶ˆäº¡ â€‹ æ€»ç»“ï¼šå•ä¾‹å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œå®¹å™¨ç›¸åŒ å¤šä¾‹å¯¹è±¡ â€‹ å‡ºç”Ÿï¼šå½“æˆ‘ä»¬ä½¿ç”¨å¯¹è±¡æ—¶springæ¡†æ¶ä¸ºæˆ‘ä»¬åˆ›å»º â€‹ æ´»ç€ï¼šå¯¹è±¡åªè¦æ˜¯åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å°±ä¸€ç›´æ´»ç€ã€‚ â€‹ æ­»äº¡ï¼šå½“å¯¹è±¡é•¿æ—¶é—´ä¸ç”¨ï¼Œä¸”æ²¡æœ‰åˆ«çš„å¯¹è±¡å¼•ç”¨æ—¶ï¼Œç”±Javaçš„åƒåœ¾å›æ”¶å™¨å›æ”¶ 6. ä¾èµ–æ³¨å…¥Dependence Injectionæˆ‘ä»¬ç°åœ¨åªæ˜¯åœ¨è§†å›¾å±‚ï¼ˆservletå±‚ï¼‰é€šè¿‡iocåˆ›å»ºäº†å¯¹è±¡ï¼Œå¯ä»¥æ‰“å°å‡ºå¯¹è±¡çš„åœ°å€ï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¯è¦åœ¨serviceå±‚è°ƒç”¨daoçš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¦å‘Šè¯‰serviceå±‚æœ‰äº†daoå±‚çš„å¯¹è±¡ï¼Œæ€»ä¸èƒ½åœ¨serviceå±‚å»getBeanå§ï¼Œè¿™æ ·æ²¡æœ‰è§£è€¦è¿˜ä¸å¦‚ç›´æ¥åœ¨serviceå±‚new daoå‘¢ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™å°±æ˜¯ä¾èµ–æ³¨å…¥çš„ä½œç”¨ ç®€å•çš„è¯´ï¼Œä¾èµ–æ³¨å…¥å°±æ˜¯é€šè¿‡xmlçš„æ–¹å¼ç»™å‡½æ•°ä¸­çš„å…ƒç´ èµ‹å€¼ æ¯”å¦‚æˆ‘ä»¬è¦åœ¨servletä¸­åˆ›å»ºserviceå¯¹è±¡ï¼Œé‚£æˆ‘ä»¬ä»¥å‰å°±ä¼šnew service(name, age, birthday)ï¼Œæˆ–è€…å‡½æ•°æ²¡æœ‰æä¾›å‚æ•°æ„é€ ï¼Œåªæœ‰é»˜è®¤æ„é€ ï¼Œä½†æ˜¯æš´éœ²äº†setæ–¹æ³•ï¼ˆæ¯”å¦‚å®ä½“ç±»ï¼‰ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„new service() setName() setAge() setBirthday()ã€‚ ä¾èµ–æ³¨å…¥ä¹Ÿæ˜¯ä¸€æ ·éœ€è¦ä¾é è¿™äº›æ–¹æ³•ï¼Œåªæ˜¯ä¸éœ€è¦ä¸»åŠ¨è°ƒç”¨è€Œå·²ï¼Œæ”¹ä¸ºåœ¨xmlä¸­ç»™å‚æ•°æ³¨å…¥å€¼ 6.1 èƒ½æ³¨å…¥çš„æ•°æ®ç±»å‹ï¼šæœ‰ä¸‰ç±» åŸºæœ¬ç±»å‹å’ŒString å…¶ä»–beanç±»å‹ï¼ˆåœ¨é…ç½®æ–‡ä»¶ä¸­æˆ–è€…æ³¨è§£é…ç½®è¿‡çš„beanï¼‰ å¤æ‚ç±»å‹/é›†åˆç±»å‹ ä¸‰ç§ç±»å‹çš„æ³¨å…¥è¿åŒä¸‹é¢çš„æ³¨å…¥æ–¹å¼ä¸€èµ·è®²ï¼Œå¾€ä¸‹çœ‹ 6.2 æ„é€ å‡½æ•°æ³¨å…¥ 6.3 setæ–¹æ³•æ³¨å…¥ï¼ˆæ›´å¸¸ç”¨ï¼‰6.3.1 åŸºæœ¬ç±»å‹å’ŒBeanç±»å‹çš„æ³¨å…¥ 6.3.2 å¤æ‚ï¼ˆé›†åˆç±»å‹ï¼‰çš„æ³¨å…¥ å½’ä¸ºä¸¤å¤§ç±» åŒä¸€å¤§ç±»çš„å¯ä»¥äº’æ¢ï¼Œä½†ä¸è¦è¿™ä¹ˆåš 7. æ³¨è§£æ–¹å¼IOCå’ŒDIå…¶å®æˆ‘ä»¬å›é¡¾xmlæ–¹å¼ï¼Œå…¶å®springçš„iocå’Œdiå°±å¸®æˆ‘ä»¬å®Œæˆäº†å¦‚ä¸‹å‡ ä»¶äº‹ã€‚ &lt;bean&gt;æ ‡ç­¾å®ç°äº†å¯¹è±¡çš„åˆ›å»ºï¼ˆä»£æ›¿äº†newï¼‰ &lt;property&gt;æ ‡ç­¾å®ç°äº†æ•°æ®çš„æ³¨å…¥ï¼ˆä»£æ›¿äº†è°ƒç”¨å‡½æ•°å’Œå®å‚ï¼‰ scopeå±æ€§æŒ‡å®šäº†beançš„ä½œç”¨èŒƒå›´ init-methodå’Œdestory-methodæŒ‡å‡ºäº†åˆå§‹åŒ–å‡½æ•°å’Œé”€æ¯å‡½æ•°ï¼ˆä¸é‡è¦ï¼‰ å› æ­¤æˆ‘ä»¬ç”¨æ³¨è§£çš„æ–¹å¼ä¹Ÿä¼šå®ç°è¿™äº›æ“ä½œ 7.1 è¦ä½¿ç”¨æ³¨è§£ï¼Œå¿…é¡»å°†bean.xmlæ”¹æˆä»¥ä¸‹çº¦æŸ12345678910111213&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\"&gt; &lt;!--å‘ŠçŸ¥springåœ¨åˆ›å»ºå®¹å™¨æ—¶è¦æ‰«æçš„åŒ…ï¼Œé…ç½®æ‰€éœ€è¦çš„æ ‡ç­¾ä¸æ˜¯åœ¨beansçš„çº¦æŸä¸­ï¼Œè€Œæ˜¯ä¸€ä¸ªåç§°ä¸º contextåç§°ç©ºé—´å’Œçº¦æŸä¸­--&gt; &lt;context:component-scan base-package=\"com.wjw\"&gt;&lt;/context:component-scan&gt;&lt;/beans&gt; åŒ…åè®°å¾—æ”¹ 7.2 @Componentä½œç”¨ï¼šå’Œ&lt;bean&gt;æ ‡ç­¾ä¸€æ ·ï¼Œç”¨äºæŠŠå½“å‰ç±»çš„å¯¹è±¡å­˜å…¥springå®¹å™¨ä¸­ å†™åœ¨ç±»ä¸Šï¼Œè¦newçš„ç±»ä¸Š å…¶ä¸­çš„valueå±æ€§å°±æ˜¯idï¼Œè‹¥ä¸æŒ‡å®šï¼Œé»˜è®¤å€¼ä¸ºé¦–å­—æ¯å°å†™ç±»å ç”±äºåªæœ‰ä¸€ä¸ªå±æ€§ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å†™@Component(â€œaccountDao1â€) getBeanæ—¶çš„å®å‚å°±æ˜¯ä¸Šé¢çš„id 7.2.1 @Controllerï¼šä¸€èˆ¬ç”¨åœ¨è¡¨ç°å±‚7.2.2 @Serviceï¼šä¸€èˆ¬ç”¨åœ¨ä¸šåŠ¡å±‚7.2.3 @Repositoryï¼šä¸€èˆ¬ç”¨åœ¨æŒä¹…å±‚ä»¥ä¸Šä¸‰ä¸ªæ³¨è§£ä»–ä»¬çš„ä½œç”¨å’Œå±æ€§ä¸Componentä¸€æ¨¡ä¸€æ ·ã€‚ ä»–ä»¬ä¸‰ä¸ªæ˜¯springæ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›æ˜ç¡®çš„ä¸‰å±‚ä½¿ç”¨çš„æ³¨è§£ï¼Œä½¿æˆ‘ä»¬çš„ä¸‰å±‚å¯¹è±¡æ›´åŠ æ¸…æ™°ã€‚ 7.3 @Autowiredå†™åœ¨è°ƒç”¨æ–¹çš„æ–¹æ³•/å˜é‡ä¸Š Autowiredä¸ºä»€ä¹ˆå«autoå‘¢ï¼Œå› ä¸ºä»–ä¼šè‡ªåŠ¨æ³¨å…¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªdaoå®ç°ç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªæ³¨å…¥ä¼šè‡ªåŠ¨æ ¹æ®ç±»å‹åŒ¹é…åˆ°è¿™ä¸ªå®ç°ç±»ï¼Œå¦‚ä¸‹å›¾ï¼š è‡ªåŠ¨æŒ‰ç±»å‹æ³¨å…¥ï¼šæ˜¯ä¸ç®¡keyï¼Œç›´æ¥åœ¨valueä¸­æ‰¾ç±»å‹çš„ å¦‚æœæœ‰ä¸¤ä¸ªdaoå®ç°ç±»daoImpl1å’ŒdaoImpl2ï¼Œé‚£ä¹ˆä¼šå…ˆæ ¹æ®ç±»å‹æ‰¾å‡ºè¿™ä¸¤ä¸ªdaoï¼Œç„¶åæ ¹æ®keyï¼ˆä¸¤ä¸ªdaoå®ç°ç±»çš„@Repositoryçš„idï¼‰æ‰¾åˆ°å¯¹åº”çš„ç±» 7.3.1 @Qualifier(value=â€accountDaoImpl1â€)ï¼šæŒ‡å®šidä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶æˆ‘æœ‰ä¸¤ä¸ªdaoå®ç°ç±»ï¼Œä½†æ˜¯æˆ‘åªç”¨1ä¸ªï¼Œå¦‚æœæˆ‘ä¸æƒ³åœ¨å˜é‡åç§°é‡Œé¢å†™dao1 dao2ï¼Œå˜é‡åæˆ‘å°±æƒ³å†™accountDaoï¼Œé‚£å°±è¦é€šè¿‡è¿™ä¸ª@AutowiredåŠ ä¸Š@Qualifier(value=â€å®ç°ç±»iocçš„idâ€) å¦å¤–ï¼Œåªæœ‰åœ¨Qualifierç»™å˜é‡æ³¨å…¥æ—¶æ‰éœ€è¦å’ŒAutowiredä¸€èµ·å†™ï¼Œå¦‚æœæ˜¯ä½œä¸ºæ–¹æ³•å‚æ•°æ—¶æ˜¯å¯ä»¥å•ç‹¬ä½¿ç”¨çš„ 7.3.2 @Resource(name=â€accountDaoImpl1â€)å¦‚æœæˆ‘ä¸æƒ³å†™ä¸¤ä¸ª@ï¼Œåˆæƒ³å®ç°@Qualifierçš„åŠŸèƒ½æ€ä¹ˆåŠï¼Œå°±ç”¨è¿™ä¸ªæ³¨è§£ æ³¨æ„ï¼šä»¥ä¸Šä¸‰ä¸ªæ³¨å…¥éƒ½åªèƒ½æ³¨å…¥å…¶ä»–beanç±»å‹çš„æ•°æ®ï¼Œè€ŒåŸºæœ¬ç±»å‹å’ŒStringç±»å‹æ— æ³•ä½¿ç”¨ä¸Šè¿°æ³¨è§£å®ç°ã€‚ å¦å¤–ï¼Œé›†åˆç±»å‹çš„æ³¨å…¥åªèƒ½é€šè¿‡XMLæ¥å®ç°ã€‚ 7.3.3 @Value(value=${SpELè¡¨è¾¾å¼})ç”¨äºæ³¨å…¥åŸºæœ¬ç±»å‹å’ŒStringç±»å‹çš„æ•°æ® 7.3 @Scopeä»–ä»¬çš„ä½œç”¨å°±å’Œåœ¨beanæ ‡ç­¾ä¸­ä½¿ç”¨scopeå±æ€§å®ç°çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„ å†™åœ¨ç±»ä¸Šï¼ˆ@Componentä¸‹æ–¹ï¼‰ï¼Œç”¨äºæ”¹å˜beançš„ä½œç”¨èŒƒå›´ å–å€¼ä¾ç„¶æ˜¯singletonï¼ˆé»˜è®¤ï¼‰ â€‹ prototype â€‹ â€¦ 7.4 @Predistroyå’Œ@PostConstructä»–ä»¬çš„ä½œç”¨å°±å’Œåœ¨beanæ ‡ç­¾ä¸­ä½¿ç”¨init-methodå’Œdestroy-methodeçš„ä½œç”¨æ˜¯ä¸€æ ·çš„ å†™åœ¨æ–¹æ³•ä¸Šæ–¹ï¼Œé”€æ¯å’Œåˆå§‹åŒ– ä»¥ä¸‹ä¸ºå®Œå…¨ä¸ç”¨XMLçš„æ–¹å¼ 7.5 @Configurationã€@Beanã€@ComponentScan(basePackages = â€œcom.wjwâ€)æˆ‘ä»¬å‘ç°ï¼Œæ¯”å¦‚è¦åœ¨Serviceä¸­æ³¨å…¥daoåˆ™éœ€è¦åœ¨serviceImplä¸­çš„å®šä¹‰daoè¯­å¥ä¸Šé¢åŠ ä¸Š@Autowiredã€‚ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬ç”¨çš„æ˜¯jaråŒ…ä¸­çš„ç±»ï¼Œæ¯”å¦‚åœ¨queryRunnerä¸­ä¼ å…¥è¿æ¥æ± å¯¹è±¡ï¼Œè¿™æ—¶å€™queryRunnerå’ŒdataSourceéƒ½ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ç±»ï¼Œé‚£è¦å¦‚ä½•æ³¨å…¥å’Œæ”¾è¿›iocå®¹å™¨å‘¢ï¼Ÿ æˆ‘ä»¬åªèƒ½è‡ªå·±å†™ä¸€ä¸ªç±»åˆ›å»ºqueryRunnerå¯¹è±¡å¹¶åŠ å…¥iocå®¹å™¨ä¸­ åŒæ—¶ï¼Œæµ‹è¯•çš„æ—¶å€™applicationContextè¦æ”¹æˆæ³¨è§£AnnotationConfigApplicationContextç±» è¿™æ—¶å€™bean.xmlå¯ä»¥ä¸éœ€è¦äº† 7.6 å¤šä¸ªé…ç½®ç±»å’Œ@Importå…¶å®åªæœ‰ä¸€ä¸ªé…ç½®ç±»çš„æ—¶å€™@ConfigurationåŠ ä¸åŠ éƒ½è¡Œï¼ˆæœ€å¥½åŠ ï¼‰ï¼Œä½†æ˜¯å¦‚æœæœ‰å¤šä¸ªé…ç½®ç±»ï¼Œåˆ™ä¸€å®šè¦åŠ ï¼Œå¤šä¸ªé…ç½®ç±»å®ç°æœ‰ä¸‰ç§æ–¹å¼ï¼š æŒ‡å®šå¤šä¸ªç±»åº§ä½é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯è¿™æ ·ä¸¤ä¸ªé…ç½®ç±»ç†è§£æˆâ€œå…„å¼Ÿå…³ç³»â€ï¼Œä½†å…¶å®æ˜¯åŒ…å«å…³ç³» é…ç½®ç±»aä¸­æ‰«æé…ç½®ç±»bçš„åŒ…åï¼ŒåŒæ—¶é…ç½®ç±»bä¹Ÿè¦æœ‰@Configuration @Importï¼Œåœ¨éœ€è¦çš„ä¸€ä¸ªé…ç½®ç±»ä¸­å¯¼å…¥å¦ä¸€ä¸ªé…ç½®ç±»ï¼Œå½¢æˆæˆ‘ä»¬ç†è§£ä¸Šçš„â€œä»å±å…³ç³»â€ 7.7 @PropertySourceã€@Value ä¸è¦å†™æ­»è¿æ¥ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•é€šè¿‡å¤–éƒ¨æ–‡ä»¶ï¼ˆ.propertiesæ¥è·å–ä¿¡æ¯ï¼Œé€šè¿‡SpELè¡¨è¾¾å¼ï¼‰ å¦‚æœpropertiesæ–‡ä»¶åœ¨åŒ…ä¸‹é‚£ä¹ˆå°±classpath:packagename/xxx.properties classpath: è¿™æ˜¯çœŸå®è·¯å¾„ï¼Œæ–‡ä»¶ç¼–è¯‘ååœ¨target/classesç›®å½•ä¸‹ åšå®Œè¿™äº›ä¸€çœ‹ï¼Œå“¦å¼ï¼Œè¿˜ä¸å¦‚xmlæ–¹å¼ï¼Œæ‰€ä»¥æœ€ç®€å•çš„æ–¹æ³•æ˜¯è‡ªå·±å†™çš„ç±»ç”¨æ³¨è§£ï¼ŒjaråŒ…ä¸­çš„ç±»ç”¨xml","link":"/Spring/Spring%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B01/"},{"title":"SpringCloudç¬”è®°","text":"1. åˆ†å¸ƒå¼æ¦‚è¿°å›é¡¾æˆ‘ä»¬ä»¥å‰çš„é¡¹ç›®ï¼Œä»å¤§ä¸€åˆ°å¤§ä¸‰ï¼Œæ¶æ„æ…¢æ…¢çš„æ¼”å˜ï¼Œä»ä¸€å¼€å§‹å †åœ¨ä¸€èµ·ï¼ˆä¹±æˆä¸€å›¢ï¼‰ï¼Œåˆ°åˆ†æˆå¤šä¸ªåŒ…ï¼Œä¸‰å±‚æ¶æ„ï¼ˆæ°´å¹³æ‹†åˆ†ï¼‰ï¼Œåˆ°å‰åç«¯åˆ†ç¦»æˆä¸¤ä¸ªé¡¹ç›®ï¼Œåé¢åå°éƒ¨åˆ†åˆ†æˆå¤šä¸ªæ¨¡å—å°ç»„å¼€å‘ï¼ˆå‚ç›´æ‹†åˆ†ï¼‰ç­‰ç­‰ ä¼ ç»Ÿæ¶æ„â€“&gt;æ°´å¹³æ‹†åˆ†â€“&gt;å‚ç›´æ‹†åˆ†ï¼ˆæœ€æ—©çš„åˆ†å¸ƒå¼ï¼‰â€“&gt;soa(dubbo)â€“&gt;å¾®æœåŠ¡(springCloud) æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ¥è§¦åˆ°ä¸€äº›åˆ†å¸ƒå¼ï¼Œè§£å†³ä¸€äº›é«˜å¹¶å‘æƒ…å†µ æ—©æœŸç®€å•çš„åˆ†å¸ƒå¼ï¼Œå°±æ˜¯å¯åŠ¨å¤šä¸ªç›¸åŒçš„åå°æ¨¡å—ï¼ˆæ¯”å¦‚å¯åŠ¨å¤šä¸ªç”¨æˆ·ç®¡ç†æ¨¡å—ï¼Œå¤šä¸ªèµ›äº‹ç®¡ç†æ¨¡å—ï¼‰ä½œä¸ºâ€œæœåŠ¡â€ï¼Œç„¶åå‰ç«¯å‘é€è¯·æ±‚æ—¶ä¸æ˜¯ç›´æ¥åˆ°æœåŠ¡ï¼Œè€Œæ˜¯åˆ°ä¸€ä¸ªåˆ†å‘ä¸­å¿ƒæ¨¡å—ï¼Œè¿™ä¸ªåˆ†å‘ä¸­å¿ƒå°±å¹³å‡åˆ†é…è¯·æ±‚åˆ°ç›¸åŒæœåŠ¡ï¼ˆè¿™å°±æ˜¯è´Ÿè½½å‡è¡¡ï¼‰ï¼Œä»è€Œå‡è½»å…¶ä¸­ä¸€ä¸ªæœåŠ¡çš„å¹¶å‘å‹åŠ›ã€‚ éšç€æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œç›®å‰ä¸»æµçš„ä¸¤ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ¶æ„ï¼šä»¥dubboä¸ºä»£è¡¨çš„é‡‡ç”¨RPCåè®®æ–¹å¼çš„SOAæ¶æ„å’Œä»¥springcloudä¸ºä»£è¡¨çš„é‡‡ç”¨HTTPåè®®æ–¹å¼çš„å¾®æœåŠ¡æ¶æ„ RPCï¼šRemote Produce Callè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œç±»ä¼¼çš„è¿˜æœ‰RMIã€‚è‡ªå®šä¹‰æ•°æ®æ ¼å¼ï¼ŒåŸºäºåŸç”ŸTCPé€šä¿¡ï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ã€‚æ—©æœŸçš„webserviceï¼Œç°åœ¨çƒ­é—¨çš„dubboï¼Œéƒ½æ˜¯RPCçš„å…¸å‹ä»£è¡¨ Httpï¼šhttpå…¶å®æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼ŒåŸºäºTCPï¼Œè§„å®šäº†æ•°æ®ä¼ è¾“çš„æ ¼å¼ã€‚ç°åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸æœåŠ¡ç«¯é€šä¿¡åŸºæœ¬éƒ½æ˜¯é‡‡ç”¨Httpåè®®ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚ç¼ºç‚¹æ˜¯æ¶ˆæ¯å°è£…è‡ƒè‚¿ï¼Œä¼˜åŠ¿æ˜¯å¯¹æœåŠ¡çš„æä¾›å’Œè°ƒç”¨æ–¹æ²¡æœ‰ä»»ä½•æŠ€æœ¯é™å®šï¼Œè‡ªç”±çµæ´»ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡ç†å¿µã€‚ ç°åœ¨çƒ­é—¨çš„Resté£æ ¼ï¼Œå°±å¯ä»¥é€šè¿‡httpåè®®æ¥å®ç°ã€‚ 1.1 æµåŠ¨è®¡ç®—æ¶æ„ï¼ˆSOAï¼‰SOA ï¼šé¢å‘æœåŠ¡çš„æ¶æ„ ä»£è¡¨å°±æ˜¯dubboï¼ˆå¾®æœåŠ¡å’Œsoaéƒ½æ˜¯è§£å†³å¤§é‡çš„æœåŠ¡çš„é—®é¢˜ï¼Œç•Œé™å…¶å®å¹¶æ²¡æœ‰é‚£ä¹ˆæ˜æ˜¾ï¼Œsoaä¹Ÿé€šå¸¸è¢«è§†ä¸ºå¾®æœåŠ¡çš„ä¸€ç§æ–¹å¼ï¼Œæ‰€ä»¥ä¹Ÿæœ‰äººè¯´dubboæ˜¯å¾®æœåŠ¡æ¡†æ¶ã€‚å¦å¤–ç”±äºé‡‡ç”¨äº†rpcåè®®ï¼Œä¹Ÿæœ‰äººè¯´dubboæ˜¯rpcæ¡†æ¶ï¼Œæˆ‘è®¤ä¸ºåªæ˜¯è§’åº¦ä¸åŒï¼Œéƒ½å¯ä»¥ï¼‰ å½“æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå®¹é‡çš„è¯„ä¼°ï¼Œå°æœåŠ¡èµ„æºçš„æµªè´¹ç­‰é—®é¢˜é€æ¸æ˜¾ç°ï¼Œæ­¤æ—¶éœ€å¢åŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒåŸºäºè®¿é—®å‹åŠ›å®æ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨ç‡ã€‚æ­¤æ—¶ï¼Œç”¨äºæé«˜æœºå™¨åˆ©ç”¨ç‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒ(SOA)æ˜¯å…³é”® ä»¥å‰å‡ºç°äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œéœ€è¦ç®¡ç†æ¯ä¸ªæœåŠ¡çš„åœ°å€ è°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚ï¼Œéš¾ä»¥ç†æ¸…ä¾èµ–å…³ç³» æœåŠ¡è¿‡å¤šï¼ŒæœåŠ¡çŠ¶æ€éš¾ä»¥ç®¡ç†ï¼Œæ— æ³•æ ¹æ®æœåŠ¡æƒ…å†µåŠ¨æ€ç®¡ç† æœåŠ¡æ²»ç†è¦åšä»€ä¹ˆï¼Ÿ æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œå®ç°æœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ï¼Œæ— éœ€äººä¸ºè®°å½•æœåŠ¡åœ°å€ æœåŠ¡è‡ªåŠ¨è®¢é˜…ï¼ŒæœåŠ¡åˆ—è¡¨è‡ªåŠ¨æ¨é€ï¼ŒæœåŠ¡è°ƒç”¨é€æ˜åŒ–ï¼Œæ— éœ€å…³å¿ƒä¾èµ–å…³ç³» åŠ¨æ€ç›‘æ§æœåŠ¡çŠ¶æ€ç›‘æ§æŠ¥å‘Šï¼Œäººä¸ºæ§åˆ¶æœåŠ¡çŠ¶æ€ ç¼ºç‚¹ï¼š æœåŠ¡é—´ä¼šæœ‰ä¾èµ–å…³ç³»ï¼Œä¸€æ—¦æŸä¸ªç¯èŠ‚å‡ºé”™ä¼šå½±å“è¾ƒå¤§ æœåŠ¡å…³ç³»å¤æ‚ï¼Œè¿ç»´ã€æµ‹è¯•éƒ¨ç½²å›°éš¾ï¼Œä¸ç¬¦åˆDevOpsæ€æƒ³ 1.2 å¾®æœåŠ¡å‰é¢è¯´çš„SOAï¼Œè‹±æ–‡ç¿»è¯‘è¿‡æ¥æ˜¯é¢å‘æœåŠ¡ã€‚å¾®æœåŠ¡ï¼Œä¼¼ä¹ä¹Ÿæ˜¯æœåŠ¡ï¼Œéƒ½æ˜¯å¯¹ç³»ç»Ÿè¿›è¡Œæ‹†åˆ†ã€‚å› æ­¤ä¸¤è€…éå¸¸å®¹æ˜“æ··æ·†ï¼Œä½†å…¶å®å´æœ‰ä¸€äº›å·®åˆ«ï¼š å¾®æœåŠ¡çš„ç‰¹ç‚¹ï¼š å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡ä¸­æ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£ å¾®ï¼šå¾®æœåŠ¡çš„æœåŠ¡æ‹†åˆ†ç²’åº¦å¾ˆå°ï¼Œä¾‹å¦‚ä¸€ä¸ªç”¨æˆ·ç®¡ç†å°±å¯ä»¥ä½œä¸ºä¸€ä¸ªæœåŠ¡ã€‚æ¯ä¸ªæœåŠ¡è™½å°ï¼Œä½†â€œäº”è„ä¿±å…¨â€ã€‚ é¢å‘æœåŠ¡ï¼šé¢å‘æœåŠ¡æ˜¯è¯´æ¯ä¸ªæœåŠ¡éƒ½è¦å¯¹å¤–æš´éœ²Resté£æ ¼æœåŠ¡æ¥å£APIã€‚å¹¶ä¸å…³å¿ƒæœåŠ¡çš„æŠ€æœ¯å®ç°ï¼Œåšåˆ°ä¸å¹³å°å’Œè¯­è¨€æ— å…³ï¼Œä¹Ÿä¸é™å®šç”¨ä»€ä¹ˆæŠ€æœ¯å®ç°ï¼Œåªè¦æä¾›Restçš„æ¥å£å³å¯ã€‚ è‡ªæ²»ï¼šè‡ªæ²»æ˜¯è¯´æœåŠ¡é—´äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰° å›¢é˜Ÿç‹¬ç«‹ï¼šæ¯ä¸ªæœåŠ¡éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼€å‘å›¢é˜Ÿï¼Œäººæ•°ä¸èƒ½è¿‡å¤šã€‚ æŠ€æœ¯ç‹¬ç«‹ï¼šå› ä¸ºæ˜¯é¢å‘æœåŠ¡ï¼Œæä¾›Restæ¥å£ï¼Œä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ²¡æœ‰åˆ«äººå¹²æ¶‰ å‰åç«¯åˆ†ç¦»ï¼šé‡‡ç”¨å‰åç«¯åˆ†ç¦»å¼€å‘ï¼Œæä¾›ç»Ÿä¸€Restæ¥å£ï¼Œåç«¯ä¸ç”¨å†ä¸ºPCã€ç§»åŠ¨æ®µå¼€å‘ä¸åŒæ¥å£ æ•°æ®åº“åˆ†ç¦»ï¼šæ¯ä¸ªæœåŠ¡éƒ½ä½¿ç”¨è‡ªå·±çš„æ•°æ®æº éƒ¨ç½²ç‹¬ç«‹ï¼ŒæœåŠ¡é—´è™½ç„¶æœ‰è°ƒç”¨ï¼Œä½†è¦åšåˆ°æœåŠ¡é‡å¯ä¸å½±å“å…¶å®ƒæœåŠ¡ã€‚æœ‰åˆ©äºæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ã€‚æ¯ä¸ªæœåŠ¡éƒ½æ˜¯ç‹¬ç«‹çš„ç»„ä»¶ï¼Œå¯å¤ç”¨ï¼Œå¯æ›¿æ¢ï¼Œé™ä½è€¦åˆï¼Œæ˜“ç»´æŠ¤ å¾®æœåŠ¡ç»“æ„å›¾ï¼š ä»£è¡¨æ˜¯springcloudï¼Œspringcloudä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œæ˜¯é›†æˆï¼ŒæŠŠä¸–ç•Œä¸Šæœ€å¥½çš„æ¡†æ¶æ‹¿è¿‡æ¥ï¼Œå¤šä¸ªç»„ä»¶é›†æˆåˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼ˆå®˜ç½‘çš„è¯´æ³•å«åšåˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆï¼Œå¤šå¥½å¬ï¼‰ï¼Œæœ‰ä¸‹é¢è¿™å‡ ä¸ªç»„ä»¶ï¼Œé›†æˆåå®ç°äº†ï¼šé…ç½®ç®¡ç†ï¼ŒæœåŠ¡å‘ç°ï¼Œæ™ºèƒ½è·¯ç”±ï¼Œè´Ÿè½½å‡è¡¡ï¼Œç†”æ–­å™¨ï¼Œæ§åˆ¶æ€»çº¿ï¼Œé›†ç¾¤çŠ¶æ€ç­‰ç­‰åŠŸèƒ½ã€‚ Eurekaï¼šæœåŠ¡æ²»ç†ç»„ä»¶ï¼ŒåŒ…å«æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ŒæœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶çš„å®ç°ã€‚ï¼ˆæœåŠ¡æ²»ç†ï¼ŒæœåŠ¡æ³¨å†Œ/å‘ç°ï¼‰ Zuulï¼šç½‘å…³ç»„ä»¶ï¼Œæä¾›æ™ºèƒ½è·¯ç”±ï¼Œè®¿é—®è¿‡æ»¤åŠŸèƒ½ Ribbonï¼šå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡çš„æœåŠ¡è°ƒç”¨ç»„ä»¶ï¼ˆå®¢æˆ·ç«¯è´Ÿè½½ï¼‰ Feignï¼šæœåŠ¡è°ƒç”¨ï¼Œç»™äºˆRibbonå’ŒHystrixçš„å£°æ˜å¼æœåŠ¡è°ƒç”¨ç»„ä»¶ ï¼ˆå£°æ˜å¼æœåŠ¡è°ƒç”¨ï¼‰ Hystrixï¼šå®¹é”™ç®¡ç†ç»„ä»¶ï¼Œå®ç°æ–­è·¯å™¨æ¨¡å¼ï¼Œå¸®åŠ©æœåŠ¡ä¾èµ–ä¸­å‡ºç°çš„å»¶è¿Ÿå’Œä¸ºæ•…éšœæä¾›å¼ºå¤§çš„å®¹é”™èƒ½åŠ›ã€‚(ç†”æ–­ã€æ–­è·¯å™¨ï¼Œå®¹é”™) 1.3 é€‰æ‹©å¦‚æœä½ ä»¬å…¬å¸å…¨éƒ¨é‡‡ç”¨JavaæŠ€æœ¯æ ˆï¼Œé‚£ä¹ˆä½¿ç”¨Dubboä½œä¸ºå¾®æœåŠ¡æ¶æ„æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ ç›¸åï¼Œå¦‚æœå…¬å¸çš„æŠ€æœ¯æ ˆå¤šæ ·åŒ–ï¼Œè€Œä¸”ä½ æ›´é’çSpringå®¶æ—ï¼Œé‚£ä¹ˆSpringCloudæ­å»ºå¾®æœåŠ¡æ˜¯ä¸äºŒä¹‹é€‰ã€‚è¿™é‡Œä»‹ç»SpringCloudå¥—ä»¶ï¼Œå› æ­¤æˆ‘ä»¬ä¼šä½¿ç”¨Httpæ–¹å¼æ¥å®ç°æœåŠ¡é—´è°ƒç”¨ã€‚ 2. å‡†å¤‡å·¥ä½œç”¨ä¸€ä¸ªå°ä¾‹å­æ¥è¯´æ˜ï¼Œå’±ä»¬å…ˆåšç‚¹å‡†å¤‡å·¥ä½œ å…ˆç”¨spring initializråˆ›å»ºä¸€ä¸ªspringbootå·¥ç¨‹ï¼Œä½œä¸ºæœåŠ¡æä¾›è€…ï¼Œä¹Ÿå°±æ˜¯æ¥è§¦åˆ†å¸ƒå¼ä¹‹å‰çš„æ‰€è°“â€œåå°â€ï¼Œå°±ä¸å¤šåšè¯´æ˜äº†ã€‚ å†åˆ›å»ºä¸€ä¸ªæ¨¡å—ä½œä¸ºæœåŠ¡æ¶ˆè´¹è€…ï¼ˆä¹Ÿç”¨spring initializrï¼Œä½†æ˜¯åªéœ€è¦webï¼Œä¹Ÿå°±æ˜¯mvcéƒ¨åˆ†ï¼Œä¸éœ€è¦mysql,jdbc,mybatisé‚£äº›ï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„åˆ†å‘ä¸­å¿ƒï¼Œå‰ç«¯å‘é€çš„httpè¯·æ±‚å…ˆåˆ°è¿™ä¸ªåˆ†å‘ä¸­å¿ƒï¼Œåˆ†å‘ä¸­å¿ƒç»è¿‡è´Ÿè½½å‡è¡¡ï¼ˆåé¢ä¼šè®²åˆ°è´Ÿè½½å‡è¡¡ï¼‰å†ä¸»åŠ¨å‘é€httpè¯·æ±‚ç»™å„ä¸ªæœåŠ¡æä¾›è€…ã€‚ è¿™ä¸ªæˆ‘ä¹Ÿä¸å¤šè¯´äº†ï¼Œç›´æ¥å»ºç«‹å°±å¥½ æ¶ˆè´¹è€…çš„å¼•å¯¼ç±»æ³¨å…¥RestTemplate 12345678910111213@SpringBootApplicationpublic class FangspcloudServiceConsumerApplication { @Bean public RestTemplate restTemplate(){ return new RestTemplate(); } public static void main(String[] args) { SpringApplication.run(FangspcloudServiceConsumerApplication.class, args); }} é‚£ä¹ˆè¿™ä¸ªæ¶ˆè´¹è€…çš„controllerå¾ˆç®€å•ï¼Œåªéœ€è¦ä¸»åŠ¨å‘é€httpè¯·æ±‚åˆ°æä¾›è€…ï¼ˆä¹Ÿå°±æ˜¯ä»¥å‰çš„controllerï¼‰çš„æœåŠ¡æ¥å£å°±è¡Œ å¯åŠ¨ï¼Œè®¿é—®çš„æ—¶å€™å°±æ˜¯è®¿é—®æ¶ˆè´¹è€…çš„æ¥å£ å¥½ï¼Œé‚£ä¹ˆå‡†å¤‡å·¥ä½œå°±åšå¥½äº†ï¼Œå…¶å®åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬çš„å·¥ä½œå’Œä»¥å‰å¹¶æ— äºŒå¼‚ï¼Œåªæ˜¯ ä»¥å‰ï¼šæµè§ˆå™¨è¯·æ±‚â€“&gt;åå° ç°åœ¨ï¼šæµè§ˆå™¨è¯·æ±‚â€“&gt;åå°1â€“&gt;åå°2 æˆ‘ä»¬èµ·è¿™ä¹ˆä¸ªåå­—ï¼Œæ–¹ä¾¿è®²è§£ï¼šæµè§ˆå™¨è¯·æ±‚â€“&gt;æœåŠ¡æ¶ˆè´¹è€…â€“&gt;æœåŠ¡æä¾›è€… æˆ‘ä»¬è¯´è¿‡äº†ï¼Œæ¨¡å—åŒ–ä¼šæœ‰å¾ˆå¤šä¸ªæœåŠ¡æä¾›è€…ï¼ˆè¿™ä¸ªæˆ‘ä»¬ä¹‹å‰å°ç»„å¼€å‘åšè¿‡äº†ï¼Œæ¨¡å—åŒ–å¼€å‘æ¯”å¦‚ç”¨æˆ·æ¨¡å—å’Œèµ›äº‹æ¨¡å—å¯¹å§ï¼‰ï¼Œåˆ†å¸ƒå¼å‘¢ï¼Œè¿˜ä¼šå‡ºç°å¾ˆå¤šä¸ªç›¸åŒçš„æä¾›è€…ï¼Œæ¯”å¦‚å¤šä¸ªç”¨æˆ·æ¨¡å—ï¼ˆæ¯”å¦‚å¤šå°æœåŠ¡å™¨ï¼Œå°±å¯ä»¥å‡è½»å‹åŠ›ï¼‰ï¼Œè¿™ä¸ªä¹Ÿç®€å•ï¼Œåªè¦æ”¹ä¸ªç«¯å£å·ç„¶ååœ¨ideaçš„é…ç½®ä¸­å¤åˆ¶ä¸€ä»½å¤šæ¬¡å¯åŠ¨å°±å¯ä»¥äº† è¿™å°±æ˜¯åˆ†å¸ƒå¼çš„å‰æã€‚ 3. Eureka3.1 eurekaæ¦‚è¿°Eurekaå°±æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼‰ï¼Œå¯¹å¤–æš´éœ²è‡ªå·±çš„åœ°å€ï¼Œæœ‰ä¸‰ä¸ªè§’è‰² æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼šEurekaçš„æœåŠ¡ç«¯åº”ç”¨ï¼Œæä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°åŠŸèƒ½ æœåŠ¡æä¾›è€…ï¼šæä¾›æœåŠ¡çš„åº”ç”¨ï¼Œå¯ä»¥æ˜¯SpringBootåº”ç”¨ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒä»»æ„æŠ€æœ¯å®ç°ï¼Œåªè¦å¯¹å¤–æä¾›çš„æ˜¯Resté£æ ¼æœåŠ¡å³å¯ã€‚å¯åŠ¨åå‘Eurekaæ³¨å†Œè‡ªå·±ä¿¡æ¯ï¼ˆåœ°å€ï¼Œæä¾›ä»€ä¹ˆæœåŠ¡ï¼‰ æœåŠ¡æ¶ˆè´¹è€…ï¼šå‘Eurekaè®¢é˜…æœåŠ¡ï¼ŒEurekaä¼šå°†å¯¹åº”æœåŠ¡çš„æ‰€æœ‰æä¾›è€…åœ°å€åˆ—è¡¨å‘é€ç»™æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…ä»è€Œå¾—çŸ¥æ¯ä¸ªæœåŠ¡æ–¹çš„ä¿¡æ¯ï¼ŒçŸ¥é“å»å“ªé‡Œè°ƒç”¨æœåŠ¡æ–¹ã€‚å¹¶ä¸”å®šæœŸæ›´æ–° è¿˜æœ‰ä¸ªæ¦‚å¿µï¼šå¿ƒè·³(ç»­çº¦)ï¼šæä¾›è€…å®šæœŸé€šè¿‡httpæ–¹å¼å‘Eurekaåˆ·æ–°è‡ªå·±çš„çŠ¶æ€ å¯¹äºä¸Šé¢çš„å·¥ç¨‹ï¼Œæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æœåŠ¡æä¾›è€…è¶Šæ¥è¶Šå¤šï¼ˆç›¸åŒçš„æˆ–è€…ä¸åŒçš„ï¼‰ï¼Œä½ æœ‰æ²¡æœ‰åŠæ³•å»ç®¡ç†ï¼Ÿï¼Ÿï¼Ÿæ²¡æœ‰å§ï¼Œeurekaå°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸ç®¡æ˜¯æ¶ˆè´¹è€…è¿˜æ˜¯æä¾›è€…ï¼Œç»Ÿç»Ÿéƒ½ç»™æˆ‘æ³¨å†Œeurekaï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥ç»Ÿä¸€ç®¡ç†äº† 3.2 eurekaä½¿ç”¨æ­¥éª¤ ä¸ºeurekaæ­å»ºä¸€ä¸ªæ¨¡å—ï¼ˆæœåŠ¡æ³¨å†Œä¸­å¿ƒï¼‰ï¼Œä»ç„¶ç”¨springæä¾›çš„åˆå§‹åŒ–å·¥å…·ï¼Œä¸è¿‡è¿™æ¬¡å‹¾é€‰rureka Server ç»“æ„å¦‚ä¸‹ ç¡®è®¤ä¾èµ–ï¼Œä¸€èˆ¬éƒ½æ˜¯æ²¡é—®é¢˜çš„ 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;spring-cloud.version&gt;Hoxton.SR4&lt;/spring-cloud.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt; &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;${spring-cloud.version}&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; yml 1234567891011server: port: 10086spring: application: name: wjw-eureka # ä½œä¸ºå¾®æœåŠ¡åç§°æ³¨å…¥åˆ°eurekaå®¹å™¨eureka: client: service-url: # EurekaServeråœ°å€,å¤šä¸ªåœ°å€å¯ä»¥','éš”å¼€ defaultZone: http://localhost:${server.port}/eureka# register-with-eureka: false # å¦‚æœæŠ¥é”™å°±å…ˆæ”¾å¼€è¿™ä¸¤ä¸ªæ³¨é‡Šè·‘ä¸€éå†æ³¨é‡Šæ‰# fetch-registry: false å¼•å¯¼ç±» 123456789@SpringBootApplication@EnableEurekaServer //å¯ç”¨eurekaæœåŠ¡ç«¯public class WjwEurekaApplication { public static void main(String[] args) { SpringApplication.run(WjwEurekaApplication.class, args); }} ç»™ä¹‹å‰çš„æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…æ³¨å†Œeurekaå®¢æˆ·ç«¯ è¦ä¿®æ”¹çš„åœ°æ–¹å¦‚ä¸‹ï¼š æä¾›è€…å’Œæ¶ˆè´¹è€…éƒ½è¦å¢åŠ ä¾èµ– 12345&lt;!-- Eurekaå®¢æˆ·ç«¯ --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&lt;/dependency&gt; 123456789101112&lt;!-- SpringCloudçš„ä¾èµ– --&gt;&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt; &lt;version&gt;Hoxton.SR4&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt; æä¾›è€…å¢åŠ åçš„yml 12345678910111213141516server: port: 8081spring: datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql:///springboot username: root password: 0751@@@wjw application: name: service-provider # åº”ç”¨åç§°ï¼Œæ³¨å†Œåˆ°eurekaåçš„æœåŠ¡åç§°mybatis: type-aliases-package: com.wjw.service.pojoeureka: client: service-url: # EurekaServeråœ°å€ defaultZone: http://127.0.0.1:10086/eureka æ¶ˆè´¹è€…å¢åŠ åçš„yml 123456789server: port: 80spring: application: name: service-consumereureka: client: service-url: defaultZone: http://localhost:10086/eureka æä¾›è€…å’Œæ¶ˆè´¹è€…å¼•å¯¼ç±»éƒ½è¦åŠ ä¸Šæ³¨è§£ è¿™æ ·å°±é…ç½®å¥½å•¦ï¼Œä¾æ¬¡å¯åŠ¨eurekaæœåŠ¡ç«¯å’ŒæœåŠ¡æä¾›è€…æ¶ˆè´¹è€…ï¼Œç„¶åå¯ä»¥è®¿é—®http://localhost:10086çœ‹eurekaçš„ç®¡ç†å°äº† è¿™æ ·å°±å¯ä»¥ç»Ÿä¸€ç”¨eurekaç®¡ç†å·²æ³¨å†Œçš„æœåŠ¡äº† 3.3 å…¶ä»– ä¹‹å‰æ¶ˆè´¹è€…çš„controlleræ˜¯ç›´æ¥å‘åŠ¨åˆ°æä¾›è€…1çš„æ¥å£ï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒåæœŸè¦åˆ†å‘åˆ°å¤šä¸ªæä¾›è€…ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ï¼Œè¿™è¦æœ‰ä¸ªå‰æï¼šjavaç«¯å¯ä»¥è¯»å–ä¸€äº›eurekaçš„æƒ…å†µï¼Œç†æ‰€å½“ç„¶ï¼æ¯”å¦‚ä¸‹é¢è¿™æ®µ 123456789101112131415161718192021222324@Controller@RequestMapping(\"consumer/user\")public class UserController { @Autowired private RestTemplate restTemplate; @Autowired private DiscoveryClient discoveryClient; // eurekaå®¢æˆ·ç«¯ï¼Œå¯ä»¥è·å–åˆ°eurekaä¸­æœåŠ¡çš„ä¿¡æ¯ @GetMapping @ResponseBody public User queryUserById(@RequestParam(\"id\") Long id){ // æ ¹æ®æœåŠ¡åç§°ï¼Œè·å–æœåŠ¡å®ä¾‹ã€‚æœ‰å¯èƒ½æ˜¯é›†ç¾¤ï¼Œæ‰€ä»¥æ˜¯serviceå®ä¾‹é›†åˆ List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(\"service-provider\"); // å› ä¸ºåªæœ‰ä¸€ä¸ªService-providerã€‚æ‰€ä»¥è·å–ç¬¬ä¸€ä¸ªå®ä¾‹ ServiceInstance instance = instances.get(0); // è·å–ipå’Œç«¯å£ä¿¡æ¯ï¼Œæ‹¼æ¥æˆæœåŠ¡åœ°å€ String baseUrl = \"http://\" + instance.getHost() + \":\" + instance.getPort() + \"/user/\" + id; User user = this.restTemplate.getForObject(baseUrl, User.class); return user; }} è¿™é‡Œå¯ä»¥çœ‹åˆ° æˆ‘ä»¬åŠ¨æ€è·å–äº†å½“å‰æ³¨å†Œçš„æ‰€æœ‰æä¾›è€…ï¼Œå¹¶æ‰‹åŠ¨åˆ†å‘åˆ°instance.get(0)ä¹Ÿå°±æ˜¯ç¬¬ä¸€å°æœåŠ¡å™¨ï¼Œè¿™æ—¶å€™æœ‰äººå°±æœ‰æƒ³æ³•äº†ï¼ï¼å’±å¯ä»¥åšè´Ÿè½½å‡è¡¡äº†ï¼Œå°†å¤šä¸ªè¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„æä¾›è€…ï¼ï¼æ˜¯çš„ï¼Œåˆ«æ€¥ï¼Œè¿™äº›ä¸ç”¨è‡ªå·±å†™çš„ï¼Œribbonå¸®æˆ‘ä»¬å†™å¥½äº†ï¼Œå­¦èµ·æ¥ã€‚ è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªè¦äº†è§£çš„å°±æ˜¯æ¦‚è¿°ä¸­è¯´çš„å¿ƒè·³ï¼ˆç»­çº¦ï¼‰ï¼Œäº†è§£ä¸€ä¸‹å³å¯ åœ¨æ³¨å†ŒæœåŠ¡å®Œæˆä»¥åï¼ŒæœåŠ¡æä¾›è€…ä¼šç»´æŒä¸€ä¸ªå¿ƒè·³ï¼ˆå®šæ—¶å‘EurekaServerå‘èµ·Restè¯·æ±‚ï¼‰ï¼Œå‘Šè¯‰EurekaServerï¼šâ€œæˆ‘è¿˜æ´»ç€â€ã€‚è¿™ä¸ªæˆ‘ä»¬ç§°ä¸ºæœåŠ¡çš„ç»­çº¦ï¼ˆrenewï¼‰ï¼› æœ‰ä¸¤ä¸ªé‡è¦å‚æ•°å¯ä»¥ä¿®æ”¹æœåŠ¡ç»­çº¦çš„è¡Œä¸ºï¼š 1234eureka: instance: lease-expiration-duration-in-seconds: 90 lease-renewal-interval-in-seconds: 30 lease-renewal-interval-in-secondsï¼šæœåŠ¡ç»­çº¦(renew)çš„é—´éš”ï¼Œé»˜è®¤ä¸º30ç§’ lease-expiration-duration-in-secondsï¼šæœåŠ¡å¤±æ•ˆæ—¶é—´ï¼Œé»˜è®¤å€¼90ç§’ ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ª30ç§’æœåŠ¡ä¼šå‘æ³¨å†Œä¸­å¿ƒå‘é€ä¸€æ¬¡å¿ƒè·³ï¼Œè¯æ˜è‡ªå·±è¿˜æ´»ç€ã€‚å¦‚æœè¶…è¿‡90ç§’æ²¡æœ‰å‘é€å¿ƒè·³ï¼ŒEurekaServerå°±ä¼šè®¤ä¸ºè¯¥æœåŠ¡å®•æœºï¼Œä¼šä»æœåŠ¡åˆ—è¡¨ä¸­ç§»é™¤ï¼Œè¿™ä¸¤ä¸ªå€¼åœ¨ç”Ÿäº§ç¯å¢ƒä¸è¦ä¿®æ”¹ï¼Œé»˜è®¤å³å¯ã€‚ ä½†æ˜¯åœ¨å¼€å‘æ—¶ï¼Œè¿™ä¸ªå€¼æœ‰ç‚¹å¤ªé•¿äº†ï¼Œç»å¸¸æˆ‘ä»¬å…³æ‰ä¸€ä¸ªæœåŠ¡ï¼Œä¼šå‘ç°Eurekaä¾ç„¶è®¤ä¸ºæœåŠ¡åœ¨æ´»ç€ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨å¼€å‘é˜¶æ®µå¯ä»¥é€‚å½“è°ƒå°ã€‚ 1234eureka: instance: lease-expiration-duration-in-seconds: 10 # 10ç§’å³è¿‡æœŸ lease-renewal-interval-in-seconds: 5 # 5ç§’ä¸€æ¬¡å¿ƒè·³ 4. Ribbon4.1 ribbonæ¦‚è¿°å‰é¢è¯´äº†ribbonå¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆæ¶ˆæ¯å¹³å‡åˆ†å‘ï¼Œæ˜¯çš„å°±è¿™ä¹ˆç®€å•ã€‚è¦çœ‹å¤æ‚çš„æ¦‚å¿µä¹Ÿæœ‰ï¼Œå¦‚ä¸‹ 4.2 ribbonä½¿ç”¨æ­¥éª¤ribbonæ˜¯åœ¨æ¶ˆè´¹è€…ä¸­ä½¿ç”¨ ä¸éœ€è¦å¼•å…¥ä¾èµ–ï¼Œå› ä¸ºribboné€šå¸¸ä¸ä¼šå•ç‹¬ä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨å¼•å…¥eurekaçš„æ—¶å€™è‡ªåŠ¨å°±å¼•å…¥äº†ribbon å‰é¢è¯´äº†æˆ‘ä»¬å¯ä»¥å¯¹åŒä¸€ä¸ªæœåŠ¡æä¾›è€…ä¿®æ”¹ä¸€ä¸‹ç«¯å£å·ç„¶åå†æ¬¡å¯åŠ¨ï¼Œè¿™æ ·å°±æœ‰äº†å¤šä¸ªæä¾›è€…ï¼Œä¸”æœåŠ¡åä¸€æ ·ï¼Œåªæ˜¯ç«¯å£å·ä¸ä¸€æ ·ï¼Œå¯èƒ½è¯´çš„ä¸å¤Ÿç»†ï¼Œå’±ä»¬å†ç»†ä¸€ç‚¹ï¼Œé…å›¾ æœåŠ¡æ¶ˆè´¹è€…çš„å¼•å¯¼ç±»ä¸­ï¼Œå¯¹restTemplateæ–¹æ³•ä½¿ç”¨@LoadBalancedæ³¨è§£å¼€å¯è´Ÿè½½å‡è¡¡ 4.æ¶ˆè´¹è€…çš„restTemplate.getForObjectæ–¹æ³•é‡Œé¢é€šè¿‡ æœåŠ¡å è°ƒç”¨æä¾›è€…çš„æ¥å£ï¼Œå› ä¸ºæ­¤æ—¶æœ‰å¤šä¸ªæœåŠ¡åç›¸åŒçš„æœåŠ¡ï¼Œæ‰€ä»¥å°±å¯ä»¥è‡ªåŠ¨è´Ÿè½½å‡è¡¡å•¦ï¼ï¼ï¼ï¼ æµ‹è¯• å¯ä»¥å¤åˆ¶è¿™æ®µæµ‹è¯•ç”¨ä¾‹ 123456789101112131415@SpringBootTest@RunWith(SpringRunner.class)public class RibbonLoadBalanceTest { @Autowired private RibbonLoadBalancerClient client; @Test public void test(){ for (int i = 0; i &lt; 50; i++) { ServiceInstance instance = this.client.choose(\"service-provider\"); System.out.println(instance.getHost() + \":\" + instance.getPort()); } }} RibbonLoadBalanceClientæœ‰ä¸€ä¸ªchooseæ–¹æ³•ï¼Œå¯ä»¥è·å–è´Ÿè½½å‡è¡¡å¾—åˆ°çš„å®ä¾‹ å¯ä»¥çœ‹åˆ°ribboné»˜è®¤ä½¿ç”¨äº†è½®è¯¢çš„æ–¹å¼ 4.3 æºç è·Ÿè¸ªä¸ºä»€ä¹ˆæˆ‘ä»¬åªè¾“å…¥äº†serviceåç§°å°±å¯ä»¥è®¿é—®äº†å‘¢ï¼Ÿä¹‹å‰è¿˜è¦è·å–ipå’Œç«¯å£ã€‚ æ˜¾ç„¶æœ‰äººå¸®æˆ‘ä»¬æ ¹æ®serviceåç§°ï¼Œè·å–åˆ°äº†æœåŠ¡å®ä¾‹çš„ipå’Œç«¯å£ã€‚å®ƒå°±æ˜¯LoadBalancerInterceptor åœ¨å¦‚ä¸‹ä»£ç æ‰“æ–­ç‚¹ï¼š ä¸€è·¯æºç è·Ÿè¸ªï¼šRestTemplate.getForObject â€“&gt; RestTemplate.execute â€“&gt; RestTemplate.doExecuteï¼š ç‚¹å‡»è¿›å…¥AbstractClientHttpRequest.execute â€“&gt; AbstractBufferingClientHttpRequest.executeInternal â€“&gt; InterceptingClientHttpRequest.executeInternal â€“&gt; InterceptingClientHttpRequest.execute: ç»§ç»­è·Ÿå…¥ï¼šLoadBalancerInterceptor.interceptæ–¹æ³• ç»§ç»­è·Ÿå…¥executeæ–¹æ³•ï¼šå‘ç°è·å–äº†8082ç«¯å£çš„æœåŠ¡ å†è·Ÿä¸‹ä¸€æ¬¡ï¼Œå‘ç°è·å–çš„æ˜¯8081ï¼š è¿™å°±æ˜¯è´Ÿè½½å‡è¡¡è¯»å–åˆ°ä¸åŒç«¯å£çš„å¤§è‡´è¿‡ç¨‹ ä¸Šé¢æåˆ°äº†è´Ÿè½½å‡è¡¡å™¨å’Œè´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤çš„æ˜¯è½®è¯¢æ–¹å¼ã€‚å¦‚æœæˆ‘ä»¬æƒ³è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå¯ä»¥ç»§ç»­æ·±å…¥å¯ä»¥å›¾ä¸­è´Ÿè½½å‡è¡¡ç®—æ³•é‚£ä¸ªç±»ILoadBalancerï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿äº†BaseLoadBalancer æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªruleæ˜¯è°ï¼š è¿™é‡Œçš„ruleé»˜è®¤å€¼æ˜¯ä¸€ä¸ªRoundRobinRuleï¼Œçœ‹ç±»çš„ä»‹ç»ï¼š è¿™ä¸å°±æ˜¯è½®è¯¢çš„æ„æ€å˜›ã€‚ æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œè¿™ä¸ªç±»å…¶å®æ˜¯å®ç°äº†æ¥å£IRuleçš„ï¼ŒæŸ¥çœ‹ä¸€ä¸‹ï¼š å®šä¹‰è´Ÿè½½å‡è¡¡çš„è§„åˆ™æ¥å£ã€‚ å®ƒæœ‰ä»¥ä¸‹å®ç°ï¼š é€šè¿‡ä¸Šé¢æºç çš„åˆ†æï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¯•å›¾çŒœæµ‹ä¸€ä¸‹é»˜è®¤è½®è¯¢çš„å·¥ä½œæ–¹å¼ï¼Œè®°å½•ä¸€ä¸ªcountï¼Œæ¶ˆè´¹æ–¹æ¯æ¬¡count++ï¼Œç„¶å%nä¸ªæä¾›æ–¹ï¼Œä¸ºå‡ å°±åˆ†é…åˆ°ç¬¬å‡ ä¸ªæä¾›æ–¹ã€‚å½“ç„¶æºç å†…éƒ¨éå¸¸å¤æ‚ä¸”å®ç°æ—¶è¦è€ƒè™‘å¾ˆå¤šå› ç´ æ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œä¸è¿‡é”™äº†ä¹Ÿæ²¡å…³ç³»ï¼Œå’±ä»¬å°±çœ‹è¿‡çš„è¿™å‡ æ®µå¤§èƒ†çš„çŒœæµ‹å°±è¡Œã€‚ 4.4 ä¿®æ”¹è´Ÿè½½å‡è¡¡ç­–ç•¥ä¸Šé¢é‚£å¼ å›¾å·²ç»çœ‹åˆ°äº†å†…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œä½¿ç”¨æ—¶å¯ä»¥æ›¿æ¢é»˜è®¤çš„ï¼Œåªéœ€æ›´æ”¹ymlæ–‡ä»¶å°±å¯ä»¥ 123service-provider: # æœåŠ¡æä¾›æ–¹çš„æœåŠ¡å ribbon: NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule service-provideré¡¶æ ¼å†™ï¼Œè¿™é‡Œä¸ä¼šæœ‰æç¤ºï¼Œç”šè‡³æç¤ºæ²¡æœ‰è¿™é¡¹é…ç½®ï¼Œæ²¡å…³ç³»ï¼Œå¤§èƒ†å†™ï¼Œè¿™æ—¶å€™å†è·‘æµ‹è¯•ç”¨ä¾‹ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯éšæœºçš„äº† ribbonåšäº†å¤„ç†ï¼Œæ— è®ºæ˜¯å“ªç§æ–¹å¼ï¼Œåˆ†é…ç»™å„ä¸ªæä¾›æ–¹çš„æ•°é‡å¤§ä½“ä¸Šæ˜¯ä¸€æ ·çš„ 5. Hystrix5.1 hystrixæ¦‚è¿°ç†”æ–­ï¼Œæ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼ŒHystixæ˜¯Netflixå¼€æºçš„ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹æœåŠ¡ã€ç¬¬ä¸‰æ–¹åº“ï¼Œé˜²æ­¢å‡ºç°çº§è”å¤±è´¥ã€‚ å¾®æœåŠ¡ä¸­ï¼ŒæœåŠ¡é—´è°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚ï¼Œä¸€ä¸ªè¯·æ±‚ï¼Œå¯èƒ½éœ€è¦è°ƒç”¨å¤šä¸ªå¾®æœåŠ¡æ¥å£æ‰èƒ½å®ç°ï¼Œä¼šå½¢æˆéå¸¸å¤æ‚çš„è°ƒç”¨é“¾è·¯ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªç¯èŠ‚å‡ºç°é”™è¯¯ï¼Œè¯·æ±‚ä¸€ç›´é˜»å¡ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½ï¼Œä»è€Œå¯¼è‡´æ‰€æœ‰å…¶å®ƒæœåŠ¡éƒ½ä¸å¯ç”¨ï¼Œå½¢æˆé›ªå´©æ•ˆåº”ã€‚ Hystixè§£å†³é›ªå´©é—®é¢˜çš„æ‰‹æ®µæœ‰ä¸¤ä¸ªï¼š çº¿ç¨‹éš”ç¦» æœåŠ¡ç†”æ–­ 5.1.1 çº¿ç¨‹éš”ç¦»ï¼ŒæœåŠ¡é™çº§Hystrixä¸ºæ¯ä¸ªä¾èµ–æœåŠ¡è°ƒç”¨åˆ†é…ä¸€ä¸ªå°çš„çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± å·²æ»¡è°ƒç”¨å°†è¢«ç«‹å³æ‹’ç»ï¼Œé»˜è®¤ä¸é‡‡ç”¨æ’é˜Ÿ.åŠ é€Ÿå¤±è´¥åˆ¤å®šæ—¶é—´ã€‚ç”¨æˆ·çš„è¯·æ±‚å°†ä¸å†ç›´æ¥è®¿é—®æœåŠ¡ï¼Œè€Œæ˜¯é€šè¿‡çº¿ç¨‹æ± ä¸­çš„ç©ºé—²çº¿ç¨‹æ¥è®¿é—®æœåŠ¡ï¼Œå¦‚æœçº¿ç¨‹æ± å·²æ»¡ï¼Œæˆ–è€…è¯·æ±‚è¶…æ—¶ï¼Œåˆ™ä¼šè¿›è¡Œé™çº§å¤„ç†ï¼ˆä¼˜å…ˆä¿è¯æ ¸å¿ƒæœåŠ¡ï¼Œè€Œéæ ¸å¿ƒæœåŠ¡ä¸å¯ç”¨æˆ–å¼±å¯ç”¨ï¼‰ æ•…éšœæ—¶ï¼Œä¸ä¼šè¢«é˜»å¡ï¼Œæ›´ä¸ä¼šæ— ä¼‘æ­¢çš„ç­‰å¾…æˆ–è€…çœ‹åˆ°ç³»ç»Ÿå´©æºƒï¼Œæœ€å¤šä¼šå½±å“è¿™ä¸ªä¾èµ–æœåŠ¡å¯¹åº”çš„çº¿ç¨‹æ± ä¸­çš„èµ„æºï¼Œå¯¹å…¶å®ƒæœåŠ¡æ²¡æœ‰å“åº”ã€‚è‡³å°‘å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ‰§è¡Œç»“æœï¼ˆä¾‹å¦‚è¿”å›å‹å¥½çš„æç¤ºä¿¡æ¯ï¼‰ 5.1.2 æœåŠ¡ç†”æ–­ç†”æ–­å°±æ˜¯å¤§é‡è¯·æ±‚éƒ½è¶…æ—¶æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚æŸä¸ªæ¨¡å—å‡ºé—®é¢˜äº†ï¼‰ï¼Œä¸»åŠ¨ç†”æ–­ï¼Œé˜²æ­¢æ•´ä¸ªç³»ç»Ÿç›´æ¥è£‚å¼€ã€‚Hystrixçš„ç†”æ–­å¯ä»¥è‡ªåŠ¨æ¢å¤ï¼Œä½†å¹¶ä¸æ˜¯é©¬ä¸Šæ¢å¤ï¼Œè€Œæ˜¯ç”¨å°æ‰¹é‡çš„è¯·æ±‚æµ‹è¯•æœåŠ¡å™¨æ˜¯å¦æ¢å¤ã€‚ ç†”æ–­çŠ¶æ€æœº3ä¸ªçŠ¶æ€ï¼š Closedï¼šå…³é—­çŠ¶æ€ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½æ­£å¸¸è®¿é—®ã€‚ Openï¼šæ‰“å¼€çŠ¶æ€ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«é™çº§ã€‚Hystixä¼šå¯¹è¯·æ±‚æƒ…å†µè®¡æ•°ï¼Œå½“ä¸€å®šæ—¶é—´å†…å¤±è´¥è¯·æ±‚ç™¾åˆ†æ¯”è¾¾åˆ°é˜ˆå€¼ï¼Œåˆ™è§¦å‘ç†”æ–­ï¼Œæ–­è·¯å™¨ä¼šå®Œå…¨æ‰“å¼€ã€‚é»˜è®¤å¤±è´¥æ¯”ä¾‹çš„é˜ˆå€¼æ˜¯50%ï¼Œè¯·æ±‚æ¬¡æ•°æœ€å°‘ä¸ä½äº20æ¬¡ã€‚ Half Openï¼šåŠå¼€çŠ¶æ€ï¼ŒopençŠ¶æ€ä¸æ˜¯æ°¸ä¹…çš„ï¼Œæ‰“å¼€åä¼šè¿›å…¥ä¼‘çœ æ—¶é—´ï¼ˆé»˜è®¤æ˜¯5Sï¼‰ã€‚éšåæ–­è·¯å™¨ä¼šè‡ªåŠ¨è¿›å…¥åŠå¼€çŠ¶æ€ã€‚æ­¤æ—¶ä¼šé‡Šæ”¾éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œè‹¥è¿™äº›è¯·æ±‚éƒ½æ˜¯å¥åº·çš„ï¼Œåˆ™ä¼šå®Œå…¨å…³é—­æ–­è·¯å™¨ï¼Œå¦åˆ™ç»§ç»­ä¿æŒæ‰“å¼€ï¼Œå†æ¬¡è¿›è¡Œä¼‘çœ è®¡æ—¶ è¦æ³¨æ„ä¸è¦ææ··äº†ï¼ŒClosedæ‰æ˜¯å¯ç”¨ï¼ŒOpenè¯´æ˜å‡ºé—®é¢˜äº†ï¼Œè¿™é‡Œç†è§£æˆç”µè·¯å°±è¡Œï¼Œé—­åˆï¼ˆClosedï¼‰ï¼Œæ–­å¼€(Open) 5.2 hystrixä½¿ç”¨æ­¥éª¤hystrixç”¨åœ¨æ¶ˆè´¹è€…è€Œä¸æ˜¯æä¾›è€…ï¼Œå› ä¸ºæ¶ˆè´¹è€…æ˜¯è°ƒç”¨æ–¹ æ·»åŠ ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;&lt;/dependency&gt; yml è¿™ä¸ªå‘¢ï¼Œç”±äºç”Ÿäº§ç¯å¢ƒä¸­è®¿é—®è¿œç¨‹æœåŠ¡å™¨è¦æ…¢ä¸€ç‚¹çš„ï¼Œé»˜è®¤1så°±ç†”æ–­æœªå…å¤ªè¿‡è‹›åˆ»ï¼Œå¼€å‘ç¯å¢ƒä¸‹è®¿é—®æœ¬åœ°æœåŠ¡å™¨å€’æ˜¯æ— æ‰€è°“ï¼Œè¦è®°å¾—è®¾ç½®å•Š 1234567hystrix: command: default: execution: isolation: thread: timeoutInMilliseconds: 6000 # è®¾ç½®hystrixçš„è¶…æ—¶æ—¶é—´ä¸º6000ms å¼•å¯¼ç±»åŠ æ³¨è§£@EnableCircuitBreaker controlleræ–¹æ³•ä¸Šæ–¹æ·»åŠ æ³¨è§£ï¼Œè‡ªå®šä¹‰ç†”æ–­æ–¹æ³•ï¼Œä¿®æ”¹äº†è¿”å›å€¼ä¸ºStringæ–¹ä¾¿æµ‹è¯• æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæä¾›è€…å…³æ‰æ¥æ¨¡æ‹ŸæœåŠ¡å™¨å‡ºç°é—®é¢˜ è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é”™è¯¯æç¤º è¿™å°±æ˜¯æˆ‘ä»¬æœ‰æ—¶æµè§ˆç½‘é¡µçš„æŠ¥é”™æç¤ºï¼ˆä¸æ˜¯é‚£ç§è¿”å›500æ—¶æŒ‡å®šçš„ï¼Œè¿™ç§é€šå¸¸æ˜¯å¹¶å‘é‡å·¨å¤§ï¼Œæ¯”å¦‚å¹¿ä¸œæµ·æ´‹å¤§å­¦çš„æŠ¢è¯¾ç³»ç»Ÿï¼ï¼é‚£ç§ï¼‰ ä¹Ÿå¯ä»¥åœ¨ç±»ä¸Šæ–¹æ·»åŠ å…¨å±€ç†”æ–­æ–¹æ³•@DefaultProperties(defaultFallback = â€œå…¨å±€ç†”æ–­æ–¹æ³•åâ€) è¿™ä¸ªä¸å¤šè¯´äº†ï¼Œçœ‹çœ‹å°±æ‡‚äº†ï¼Œè¦æ³¨æ„çš„æ˜¯æ–¹æ³•ä¸Šè¿˜æ˜¯è¦åŠ @HystrixCommandæ³¨è§£çš„ï¼Œåªæ˜¯ä¸æŒ‡å®šçš„è¯é»˜è®¤ä½¿ç”¨å…¨å±€çš„ç†”æ–­å‡½æ•°ï¼Œè€Œä¸”å…¨å±€ç†”æ–­æ–¹æ³•çš„å‚æ•°è¦ä¸ºç©ºï¼Œè¿”å›å€¼è¦å’Œè¢«ç†”æ–­æ–¹æ³•ä¸€è‡´ï¼ˆä¸æ˜¯Stringçš„è¯è‡ªå·±å†™åºåˆ—åŒ–å°±è¡Œï¼Œä¸€èˆ¬éƒ½æ˜¯jsonå­—ç¬¦ä¸²çš„ï¼Œé—®é¢˜ä¸å¤§ï¼‰ 5.3ç†”æ–­æœºåˆ¶æµ‹è¯•å’±ä»¬ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ åœ¨æœåŠ¡ä¸­å¿ƒï¼Œæä¾›è€…å’Œæ¶ˆè´¹è€…éƒ½æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿«é€Ÿçš„è®¿é—®http://localhost/consumer/user?id=1è‡³å°‘20æ¬¡ï¼Œè§¦å‘äº†ç†”æ–­æœºåˆ¶ï¼Œäºæ˜¯è®¿é—®id=2æ—¶ä¹Ÿä¼šæç¤ºæœåŠ¡å™¨æ­£å¿™ 5såï¼Œå†æ¬¡è®¿é—®id=2ï¼Œæ¢å¤æ­£å¸¸ 6. Feign6.1 feignæ¦‚è¿°å…ˆçœ‹æˆ‘ä»¬åŸæ¥çš„httpè¯·æ±‚ï¼Œä»–å®Œæˆäº†æ¶ˆè´¹è€…åˆ°æä¾›è€…çš„æ¶ˆæ¯ä¼ é€’ return restTemplate.getForObject(&quot;http://service-provider/user/&quot; + id, String.class); ä½ çœ‹åŸæ¥è¿™æ®µå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œæ˜¯ä¸æ˜¯å¾ˆlowï¼ï¼ï¼Ÿï¼Ÿ Feignå¯ä»¥æŠŠRestçš„è¯·æ±‚è¿›è¡Œéšè—ï¼Œä¼ªè£…æˆç±»ä¼¼SpringMVCçš„Controllerä¸€æ ·ã€‚ä½ ä¸ç”¨å†è‡ªå·±æ‹¼æ¥urlï¼Œæ‹¼æ¥å‚æ•°ç­‰ç­‰æ“ä½œï¼Œä¸€åˆ‡éƒ½äº¤ç»™Feignå»åšã€‚ 6.2 feignä½¿ç”¨æ­¥éª¤feignæ˜¯åœ¨å¼•å¯¼ç±»ä¸­ä½¿ç”¨ ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;&lt;/dependency&gt; å¼•å¯¼ç±»æ³¨è§£@EnableFeignClientsï¼Œä¸”ä¸å†éœ€è¦RestTemplateå‘é€httpè¯·æ±‚ å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œæ¥å£ä¸Šæ–¹çš„@FeignClient(â€œservice-providerâ€)æ˜¯æœåŠ¡æä¾›è€…çš„æœåŠ¡åï¼Œæ–¹æ³•å¯¹åº”æä¾›è€…çš„controlleræ¥å£æ–¹æ³•ï¼ˆå¤åˆ¶è¿‡æ¥å»æ‰æ–¹æ³•ä½“ï¼‰ è¦æ³¨æ„æä¾›è€…ç±»ä¸Šæ–¹è¿˜æœ‰ä¸€ä¸ª@RequestMapping(â€œuserâ€)ï¼Œè¿™é‡Œä¸è¦ä¹Ÿå†™æˆå…¨å±€ï¼Œè€Œæ˜¯åœ¨æ¯ä¸€ä¸ªæ–¹æ³•çš„è·¯å¾„ä¸­å®šä¹‰ controlleræ”¹åŠ¨ä¹Ÿæ˜¯æ¯”è¾ƒå¤§çš„ï¼Œé¦–å…ˆå°±æ˜¯Feignç»§æ‰¿äº†Ribbonå’ŒHystrixï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æŒ‰ç…§ä»¥å‰çš„æ–¹å¼å†™callbackå‡½æ•°äº†ï¼Œå¯ä»¥çœ‹åˆ°è·Ÿä»¥å‰çš„controllerå·®ä¸å¤šäº†ï¼ˆ@Controller+Stringç±»å‹ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè¿”å›å€¼å¤šåŠ äº†ä¸ª.toString()è€Œå·²ï¼‰ï¼Œæ¯”è¾ƒä¼˜é›… 1234567891011121314@RestController@RequestMapping(\"consumer/user\")public class UserController { @Autowired private UserClient userClient; @RequestMapping @ResponseBody @HystrixCommand public User queryUsrById(@RequestParam(\"id\")Long id){ return this.userClient.queryUserById(id); }} 6.3 æ·»åŠ Hystrixæ”¯æŒåŸæ¥çš„hystrixå»æ‰äº†ï¼ŒFeignä¸­é›†æˆäº†hystrixï¼Œä½†é»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦åœ¨ymlä¸­å¼€å¯ yml 123feign: hystrix: enabled: true # å¼€å¯Feignçš„ç†”æ–­åŠŸèƒ½ æ–°å»ºä¸€ä¸ªç±»ï¼Œå®ç°UserClientæ¥å£ï¼Œå¹¶åŠ å…¥springå®¹å™¨ 12345678910@Componentpublic class UserClientFallback implements UserClient { @Override public User queryUserById(Long id) { User user = new User(); user.setUserName(\"æœåŠ¡å™¨æ­£å¿™ï¼Œè¯·ç¨åå†è¯•\"); return user; }} æ¥å£åŠ ä¸Šfallbackç±» è¦æ³¨æ„ç”±äºä¸æ˜¯åªæœ‰ä¸€ä¸ªå‚æ•°äº†ï¼Œæ‰€ä»¥å‰é¢çš„value=è¦åŠ ä¸Šäº† å…³æ‰æä¾›è€…åæµ‹è¯•ç»“æœå¦‚ä¸‹ å¯ä»¥çœ‹åˆ°å®ç°äº†ç†”æ–­æœºåˆ¶ 6.4 æ·»åŠ ribbonæ”¯æŒæ˜¯çš„ï¼Œé›†æˆåé»˜è®¤å¼€å¯ï¼Œæ— éœ€é…ç½®ï¼ 7. Zuul7.1 zuulæ¦‚è¿°ä¸ç®¡æ˜¯æ¥è‡ªäºå®¢æˆ·ç«¯ï¼ˆPCæˆ–ç§»åŠ¨ç«¯ï¼‰çš„è¯·æ±‚ï¼Œè¿˜æ˜¯æœåŠ¡å†…éƒ¨è°ƒç”¨ã€‚ä¸€åˆ‡å¯¹æœåŠ¡çš„è¯·æ±‚éƒ½ä¼šç»è¿‡Zuulè¿™ä¸ªç½‘å…³ï¼Œç„¶åå†ç”±ç½‘å…³æ¥å®ç° é‰´æƒã€åŠ¨æ€è·¯ç”±ç­‰ç­‰æ“ä½œã€‚Zuulå°±æ˜¯æˆ‘ä»¬æœåŠ¡çš„ç»Ÿä¸€å…¥å£ã€‚ 7.2 zuulä½¿ç”¨æ­¥éª¤ ä½¿ç”¨åˆå§‹åŒ–å·¥å…·åˆ›å»ºæ¨¡å—ï¼Œzuulç»„ä»¶åœ¨spring cloud routingä¸‹ ç›®å½•å’Œå‰é¢çš„eurekaé‚£äº›åŒçº§å°±è¡Œ æ²¡æœ‰ç‰¹æ®Šè¦æ±‚ yml 12345678910server: port: 10010spring: application: name: wjw-zuulzuul: routes: service-consumer: # è·¯ç”±åç§°ï¼Œå¯ä»¥éšä¾¿å†™ï¼Œä¹ æƒ¯ä¸Šæ˜¯æœåŠ¡å path: /service-consumer/** url: http://localhost:80 å¼•å¯¼ç±»ä¸Šæ–¹åŠ ä¸Š@EnableZuulProxyæ³¨è§£ è¿™æ—¶å€™æˆ‘ä»¬è®¿é—®http://localhost:10010/service-consumer/consumer/user?id=1å’Œè®¿é—®http://localhost:80/consumer/user?id=1ç»“æœæ˜¯ä¸€æ ·çš„ ä¹Ÿå°±æ˜¯è¯´localhost:10010/service-consumerä¼šé‡å®šå‘åˆ°localhost:80 7.3 æ­é…eurekaé£Ÿç”¨ymlä¸­å†™æ­»è·¯å¾„å°±å¾ˆlowï¼Œæˆ‘ä»¬ä»eurekaåŠ¨æ€çš„è·å–æœåŠ¡åˆ—è¡¨ ä¸ºzuulæ¨¡å—æ·»åŠ eurekaè¿˜æ˜¯é‚£ä¸‰å¤§æ­¥éª¤ ä¸ºzuulæ¨¡å—æ·»åŠ eurekaä¾èµ–ï¼ˆåˆ«å¼„é”™äº†å‘€ï¼Œè¦æ˜¯è¿™ä¸ªstarterçš„ï¼‰ 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;&lt;/dependency&gt; zuulæ¨¡å—çš„ymlå¢åŠ  1234eureka: client: service-url: defaultZone: http://localhost:10086/eureka å¼•å¯¼ç±» ymlæ”¹æˆæœåŠ¡å å¯åŠ¨ ç®€æ´å†™æ³•å½“æˆ‘ä»¬æƒ³è®©æœåŠ¡åå’Œè·¯å¾„ä¸ä¸€è‡´æ—¶å¯ä»¥ç”¨ä¸Šé¢çš„å†™æ³•ï¼Œä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™æ ·ç®€å†™ï¼Œé‚£ä¹ˆè·¯å¾„åé»˜è®¤å°±æ˜¯æœåŠ¡åé€šå¸¸ç”¨è¿™ç§ 123zuul: routes: service-consumer: /service-consumer/** æœ€ç®€æ´å†™æ³•ä¸å†™ï¼ æ˜¯çš„ï¼Œä¾ç„¶å¯ä»¥é€šè¿‡æœåŠ¡åè®¿é—®ï¼Œå¹¶ä¸”æ‰€æœ‰æœåŠ¡éƒ½é»˜è®¤å¯ä»¥é€šè¿‡zuulç«¯å£+æœåŠ¡åè®¿é—® 7.4 å®˜æ–¹æ¨èapiå‰ç¼€å®˜æ–¹æ¨èåŠ ä¸Šå‰ç¼€apiï¼Œçœ‹çœ‹æˆ‘ä»¬æœ€ç»ˆçš„yml 12345zuul: routes: service-provider: /user/** service-consumer: /consumer/** prefix: /api è¿™æ ·æµè§ˆå™¨è®¿é—®æ—¶éœ€è¦åœ¨ç«¯å£ååŠ ä¸Šapiï¼Œä»¥åæœ‰apiçš„å°±è¯´æ˜æ˜¯é€šè¿‡zuulçš„äº† å› ä¸ºé…äº†æ˜ å°„åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ˜ å°„åè®¿é—® å¯ä»¥çœ‹åˆ°æœ‰ä¸¤æ¬¡userï¼Œç¬¬ä¸€æ¬¡æ˜¯ymlä¸­çš„æ˜ å°„ï¼Œç¬¬äºŒæ¬¡æ‰æ˜¯providerä¸­çš„controllerç±»ä¸Šæ–¹çš„@RequestMapping(â€œuserâ€)å…¨å±€è·¯å¾„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šäººcontrollerä¸å¸¦å…¨å±€è·¯å¾„çš„åŸå› ï¼Œä»–ä»¬æ›´ä¹ æƒ¯ç”¨zuulæ¥å®Œæˆæ¯ä¸ªæ¨¡å—çš„å…¨å±€è·¯å¾„ 7.5 zuulè¿‡æ»¤å™¨å’Œä¼ ç»Ÿè¿‡æ»¤å™¨å·®ä¸å¤šï¼Œç»§æ‰¿ZuulFilterç„¶åå¤å†™runæ–¹æ³•å¤„ç†è¿‡æ»¤æ“ä½œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950@Componentpublic class LoginFilter extends ZuulFilter { /** * è¿‡æ»¤å™¨ç±»å‹ï¼špre route error post */ @Override public String filterType() { return \"pre\"; } /** * æ‰§è¡Œé¡ºåºï¼Œè¿”å›å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ */ @Override public int filterOrder() { return 10; //éšä¾¿å†™ï¼Œå†™10æ˜¯æ€•æœ‰å°äº10çš„ } /** * æ˜¯å¦æ‰§è¡Œrunæ–¹æ³• */ @Override public boolean shouldFilter() { return true; } /** * ç¼–å†™è¿‡æ»¤å™¨çš„ä¸šåŠ¡é€»è¾‘ */ @Override public Object run() throws ZuulException { //åˆå§‹åŒ–zuulçš„contextä¸Šä¸‹æ–‡å¯¹è±¡ RequestContext context = RequestContext.getCurrentContext(); //1.è·å–requestç„¶åè·å–å‚æ•° HttpServletRequest request = context.getRequest(); String token = request.getParameter(\"token\"); if (StringUtils.isBlank(token)){ //æ‹¦æˆªï¼Œä¸è½¬å‘è¯·æ±‚ context.setSendZuulResponse(false); //å“åº”çŠ¶æ€ç ï¼Œ401èº«ä»½æœªéªŒè¯ context.setResponseStatusCode(HttpStatus.SC_UNAUTHORIZED); //è®¾ç½®ç›¸åº”è¿‡æ»¤å™¨ context.setResponseBody(\"request error!\"); } //è¿”å›å€¼ä¸ºnullä»£è¡¨ä»€ä¹ˆéƒ½ä¸åš return null; }} æ¯”å¦‚æˆ‘ä»¬è¿™é‡Œrunæ–¹æ³•æ˜¯åˆ¤æ–­è¯·æ±‚ä¸­æ˜¯å¦å¸¦æœ‰å‚æ•°token æ­£å¸¸æµç¨‹ï¼š è¯·æ±‚åˆ°è¾¾é¦–å…ˆä¼šç»è¿‡preç±»å‹è¿‡æ»¤å™¨ï¼Œè€Œååˆ°è¾¾routeç±»å‹ï¼Œè¿›è¡Œè·¯ç”±ï¼Œè¯·æ±‚å°±åˆ°è¾¾çœŸæ­£çš„æœåŠ¡æä¾›è€…ï¼Œæ‰§è¡Œè¯·æ±‚ï¼Œè¿”å›ç»“æœåï¼Œä¼šåˆ°è¾¾postè¿‡æ»¤å™¨ã€‚è€Œåè¿”å›å“åº”ã€‚ å¼‚å¸¸æµç¨‹ï¼š æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œpreæˆ–è€…routeè¿‡æ»¤å™¨å‡ºç°å¼‚å¸¸ï¼Œéƒ½ä¼šç›´æ¥è¿›å…¥errorè¿‡æ»¤å™¨ï¼Œåœ¨errorå¤„ç†å®Œæ¯•åï¼Œä¼šå°†è¯·æ±‚äº¤ç»™POSTè¿‡æ»¤å™¨ï¼Œæœ€åè¿”å›ç»™ç”¨æˆ·ã€‚ å¦‚æœæ˜¯errorè¿‡æ»¤å™¨è‡ªå·±å‡ºç°å¼‚å¸¸ï¼Œæœ€ç»ˆä¹Ÿä¼šè¿›å…¥POSTè¿‡æ»¤å™¨ï¼Œå°†æœ€ç»ˆç»“æœè¿”å›ç»™è¯·æ±‚å®¢æˆ·ç«¯ã€‚ å¦‚æœæ˜¯POSTè¿‡æ»¤å™¨å‡ºç°å¼‚å¸¸ï¼Œä¼šè·³è½¬åˆ°errorè¿‡æ»¤å™¨ï¼Œä½†æ˜¯ä¸preå’Œrouteä¸åŒçš„æ˜¯ï¼Œè¯·æ±‚ä¸ä¼šå†åˆ°è¾¾POSTè¿‡æ»¤å™¨äº†ã€‚ 7.6 æ·»åŠ Hystrixå’Œribbonæ”¯æŒé»˜è®¤æ˜¯æ”¯æŒçš„ï¼Œä¿®æ”¹ä¸€ä¸‹è¶…æ—¶æ—¶é—´å°±å¥½äº† 1234567hystrix: command: default: execution: isolation: thread: timeoutInMilliseconds: 2000 # è®¾ç½®hystrixçš„è¶…æ—¶æ—¶é—´ä¸º6000ms é™„å½•1. @SpringCloudApplicationæ³¨è§£å¼•å¯¼ç±»ä¸Šçš„æ³¨è§£è¶Šæ¥è¶Šå¤š åœ¨å¾®æœåŠ¡ä¸­ï¼Œç»å¸¸ä¼šå¼•å…¥ä¸Šé¢çš„ä¸‰ä¸ªæ³¨è§£ï¼Œäºæ˜¯Springå°±æä¾›äº†ä¸€ä¸ªç»„åˆæ³¨è§£@SpringCloudApplication æ‰€ä»¥åœ¨å¼•å¯¼ç±»ä¸Šå†™è¿™ä¸ªæ³¨è§£å°±å¯ä»¥äº†ï¼","link":"/SpringCloud/SpringCloud%E7%AC%94%E8%AE%B0/"},{"title":"ThreadLocal","text":"ä½œç”¨ å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„æ•°æ®éš”ç¦» å•ä¸ªçº¿ç¨‹å†…éƒ¨çš„ç®€åŒ–å‚æ•°ï¼ˆä¼ é€’ä¸Šä¸‹æ–‡ï¼‰ ä½¿ç”¨ä½¿ç”¨å¯å¤ªç®€å•äº†ï¼Œä¸€ä¸ªset ä¸€ä¸ªget 123ThreadLocal&lt;String&gt; threadLocal = new ThreadLocal&lt;&gt;();threadLocal.set(\"å¼ ä¸‰\");String name = threadLocal.get(); åŸç†è¯´æ˜setå’Œgetç©¶ç«Ÿæ˜¯æ€ä¹ˆå›äº‹setæ–¹æ³• 12345678public void set(T value) { Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) map.set(this, value); else createMap(t, value);} getæ–¹æ³• 12345678910111213public T get() { Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) { ThreadLocalMap.Entry e = map.getEntry(this); if (e != null) { @SuppressWarnings(\"unchecked\") T result = (T)e.value; return result; } } return setInitialValue();} ç”±å‰ä¸¤è¡Œå¯ä»¥çœ‹åˆ°æ ¹æ®æ¯ä¸ªcurrentThreadè·å–äº†mapï¼Œå› æ­¤ä¸åŒçš„çº¿ç¨‹è·å–çš„mapè‡ªç„¶å°±ä¸åŒï¼Œæ¯ä¸ªçº¿ç¨‹åªèƒ½æ“æ§è‡ªå·±çš„mapï¼Œè€Œå¯¹äºåŒä¸€ä¸ªçº¿ç¨‹ï¼Œä¸ç®¡åœ¨å“ªé‡Œè·å–çš„mapéƒ½æ˜¯åŒä¸€ä¸ªã€‚ è€Œå¯¹äºæ¯ä¸ªmapï¼Œkeyä¸ºThreadLocalè¿™ä¸ªç±»ï¼Œvalueä¸ºæˆ‘ä»¬setçš„å€¼ å½“ç„¶è¿™åªæ˜¯åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥çœ‹getMapæºç éªŒè¯ä¸Šå›¾ å…ˆçœ‹getMapæ–¹æ³•ä½“ï¼š 123ThreadLocalMap getMap(Thread t) { return t.threadLocals;} ç›´æ¥è¿”å›äº†Threadç±»çš„ä¸€ä¸ªå±æ€§æˆå‘˜ 12345678910111213public class Thread implements Runnable { /* ThreadLocal values pertaining to this thread. This map is maintained * by the ThreadLocal class. */ ThreadLocal.ThreadLocalMap threadLocals = null; /* * InheritableThreadLocal values pertaining to this thread. This map is * maintained by the InheritableThreadLocal class. */ ThreadLocal.ThreadLocalMap inheritableThreadLocals = null; ... åˆ°è¿™é‡Œå°±å¯ä»¥å®Œå…¨è¯´æ˜ä¸åŒçš„çº¿ç¨‹è·å–çš„mapè‡ªç„¶å°±ä¸åŒï¼Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„mapäº† mapçœŸçš„æ˜¯mapå—å†çœ‹çœ‹è¿™ä¸ªmapï¼Œä»–å«ThreadLocalMapï¼Œè·Ÿhashmapä¸€æ ·å—ï¼Ÿ éƒ¨åˆ†æºç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627static class ThreadLocalMap { /** * The entries in this hash map extend WeakReference, using * its main ref field as the key (which is always a * ThreadLocal object). Note that null keys (i.e. entry.get() * == null) mean that the key is no longer referenced, so the * entry can be expunged from table. Such entries are referred to * as \"stale entries\" in the code that follows. */ static class Entry extends WeakReference&lt;ThreadLocal&lt;?&gt;&gt; { /** The value associated with this ThreadLocal. */ Object value; Entry(ThreadLocal&lt;?&gt; k, Object v) { super(k); value = v; } } /** * The table, resized as necessary. * table.length MUST always be a power of two. */ private Entry[] table; ... å¯¹æ¯”hashmapåˆ†æï¼Œæˆ‘è´´ä¸ŠHashmapçš„éƒ¨åˆ†æºç  123456789101112131415public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable { static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; { final int hash; final K key; V value; Node&lt;K,V&gt; next; ... } transient Node&lt;K,V&gt;[] table; ... æˆ‘ä»¬éƒ½çŸ¥é“hashmapåœ¨æ ‘åŒ–ä¹‹å‰æ˜¯æ•°ç»„+é“¾è¡¨ï¼Œé¦–å…ˆæ˜¯Entry[] tableï¼Œç±»ä¼¼äºhashmapâ€œæ•°ç»„+é“¾è¡¨â€ä¸­çš„æ•°ç»„Node&lt;K,V&gt;[] table é‚£é“¾è¡¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ²¡æœ‰ã€‚ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œhashmapçš„æœ‰æŒ‡é’ˆåŸŸNode&lt;K,V&gt; next;ï¼Œä½†æ˜¯ThreadLocalMapçš„Entryæ˜¯ä¸€ä¸ªå¼±å¼•ç”¨ ç»¼ä¸Šæ‰€è¿°ï¼ŒThreadLocalMapå…¶å®å¹¶æ²¡æœ‰å®ç°Mapæ¥å£ï¼Œåªæ˜¯ä¸€ä¸ªEntryæ•°ç»„ ThreadLocalMapå¦‚ä½•è§£å†³hashå†²çªæ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†ThreadLocalMapåªæ˜¯ä¸€ä¸ªEntryæ•°ç»„ï¼Œå¦‚æœå®šä¹‰äº†å¤šä¸ªThreadLocal 12ThreadLocal&lt;String&gt; threadLocal1 = new ThreadLocal&lt;&gt;();ThreadLocal&lt;Integer&gt; threadLocal2 = new ThreadLocal&lt;&gt;(); å­˜ä¸œè¥¿çš„æ—¶å€™é‡åˆ°hashå†²çªæ€ä¹ˆè§£å†³å‘¢ï¼Œå…ˆè¯´ç»“è®ºï¼šhashmapé‡åˆ°hashå†²çªåä¼šè·Ÿåœ¨æ­¤ä¸‹æ ‡å¯¹åº”çš„é“¾è¡¨åé¢ï¼Œè€ŒThreadLocalMapæ²¡æœ‰é“¾è¡¨ï¼Œé‡åˆ°hashå†²çªåè®¡ç®—ä¸‹ä¸€ä¸ªä¸‹æ ‡ï¼Œç›´åˆ°æ•°ç»„åœ¨æŸä¸ªä¸‹æ ‡å¤„æ²¡æœ‰å€¼ 1234567891011121314151617181920212223242526272829303132private void set(ThreadLocal&lt;?&gt; key, Object value) { Entry[] tab = table; int len = tab.length; int i = key.threadLocalHashCode &amp; (len-1); //1.è¿™æ ·è®¡ç®—hashå€¼ for (Entry e = tab[i]; e != null; e = tab[i = nextIndex(i, len)]) { //4.entryä¸ä¸ºç©ºä¸”keyä¸ç›¸ç­‰ï¼Œè¯´æ˜hashå†²çªï¼Œä¸€ç›´æ‰¾ä¸‹ä¸€ä¸ªä½ç½® ThreadLocal&lt;?&gt; k = e.get(); if (k == key) { //2.keyç›¸ç­‰ï¼Œè¦†ç›–æ—§å€¼ e.value = value; return; } if (k == null) { //3.å½“å‰ä½ç½®æ˜¯ç©ºçš„ï¼Œå°±åˆå§‹åŒ–â¼€ä¸ªEntryå¯¹è±¡æ”¾åœ¨ä½ç½®iä¸Šï¼› replaceStaleEntry(key, value, i); return; } } tab[i] = new Entry(key, value); int sz = ++size; if (!cleanSomeSlots(i, sz) &amp;&amp; sz &gt;= threshold) rehash();}//nextIndexä¹Ÿè´´å‡ºæ¥ï¼ŒçœŸçš„æ˜¯ä¸‹ä¸€ä¸ªä½ç½®ï¼ï¼private static int nextIndex(int i, int len) { return ((i + 1 &lt; len) ? i + 1 : 0);} getæ—¶å€™ä¹Ÿæ˜¯ä¸€æ ·ï¼šè®¡ç®—hashä¸‹æ ‡â€“&gt;åˆ¤æ–­keyæ˜¯å¦ç›¸ç­‰â€“&gt;ç›¸ç­‰ç›´æ¥è¿”å›ï¼Œä¸ç›¸ç­‰çœ‹ä¸‹ä¸€ä¸ªä½ç½®â€“&gt;ç»§ç»­åˆ¤æ–­æ˜¯å¦ç›¸ç­‰â€¦ å†…å­˜æ³„æ¼é—®é¢˜keyä½¿ç”¨äº†å¼±å¼•ç”¨ï¼Œä¸å­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ï¼Œä½†æ˜¯valueå­˜åœ¨ å…ˆçœ‹ç»“æ„ å½“æˆ‘ä»¬ThreadLocal tl = new ThreadLocal();çš„æ—¶å€™ï¼Œå®é™…ä¸Šæœ‰ä¸¤ä¸ªå¼•ç”¨æŒ‡å‘äº†ThreadLocalï¼Œä¸€ä¸ªæ˜¯tlæœ¬èº«æ˜¯ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œä¸€ä¸ªæ˜¯getMap(å½“å‰çº¿ç¨‹)å¾—åˆ°çš„ThreadLocalMapï¼Œå®ƒé‡Œé¢çš„Entryçš„keyæ˜¯ä¸€ä¸ªå¼±å¼•ç”¨ï¼ŒæŒ‡å‘äº†ThreadLocalã€‚ ä¸ºä»€ä¹ˆè¿™é‡Œè¦ä½¿ç”¨å¼±å¼•ç”¨å‘¢ï¼Ÿ å¦‚æœæ˜¯å¼ºå¼•ç”¨ï¼Œåˆ™tlå’Œkeyéƒ½æ˜¯å¼ºå¼•ç”¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯æ“ä½œtlï¼Œä¹Ÿå°±æ˜¯tl = nullï¼Œä½†æ˜¯keyä¾ç„¶å­˜åœ¨å¼ºå¼•ç”¨ï¼Œäºæ˜¯å¯¼è‡´æ— æ³•è¢«gcå›æ”¶ï¼Œå­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ã€‚ ä½¿ç”¨å¼±å¼•ç”¨å°±ä¸ä¼šå†…å­˜æ³„æ¼ï¼Ÿ ä¸æ˜¯çš„ï¼Œå³ä½¿keyæ˜¯å¼±å¼•ç”¨ï¼Œä½†æ˜¯å¦‚æœkeyè¢«å›æ”¶å˜ä¸ºnullï¼Œvalueæ— æ³•è¢«è®¿é—®ï¼Œä¾ç„¶å­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ã€‚è§£å†³çš„åŠæ³•æ˜¯ä¸»åŠ¨è°ƒç”¨tl.remove(); å¯¹äºEntryï¼Œkeyæ˜¯å¼±å¼•ç”¨ï¼Œåœ¨gcæ—¶ä¼šè¢«å›æ”¶ï¼Œä½†æ˜¯valueå¾—ç­‰åˆ°è¯¥ThreadLocal/çº¿ç¨‹æ²¡æœ‰å¼ºå¼•ç”¨æ—¶æ‰ä¼šæ”¶ï¼Œå¦‚æœçº¿ç¨‹ä¸€ç›´å­˜åœ¨ï¼Œæ¯”å¦‚çº¿ç¨‹æ± ä¼šå¤ç”¨çº¿ç¨‹ï¼Œé‚£ä¹ˆæ­¤æ—¶valueå°±ä¸€ç›´æ— æ³•å›æ”¶ï¼Œé€ æˆå†…å­˜æ³„éœ²é—®é¢˜ã€‚ è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå…»æˆå¥½ä¹ æƒ¯ï¼Œä¸»åŠ¨è°ƒç”¨remove()æ–¹æ³• 1234567ThreadLocal&lt;String&gt; localName = new ThreadLocal();try { localName.set(\"å¼ ä¸‰\"); â€¦â€¦} finally { localName.remove();} çº¿ç¨‹ä¹‹é—´ä¼ é€’Javaä¸­çš„å¯¹è±¡éƒ½æ˜¯åœ¨å †ä¸­çš„ï¼Œæ˜¯çº¿ç¨‹å…±äº«çš„ï¼ŒThreadLocalä¹Ÿä¸€æ ·ï¼Œåªæ˜¯é€šè¿‡ä¸€äº›æ‰‹æ®µæ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„éš”ç¦»ï¼Œå¦‚æœè¦å®ç°çˆ¶å­çº¿ç¨‹ä¹‹é—´çš„æ•°æ®å…±äº«ï¼Œå¯ä»¥ä½¿ç”¨InheritableThreadLocal å…¶åŸç†æ˜¯åˆ¤æ–­çˆ¶ç»„ä»¶æ˜¯å¦æœ‰InheritableThreadLocalï¼Œæœ‰å°±ç›´æ¥èµ‹å€¼ç»™å­çº¿ç¨‹ 1234//Threadçš„initæ–¹æ³•ä¸­if (inheritThreadLocals &amp;&amp; parent.inheritableThreadLocals != null) this.inheritableThreadLocals = ThreadLocal.createInheritedMap(parent.inheritableThreadLocals); å¸¸è§åœºæ™¯Springçš„äº‹åŠ¡æ§åˆ¶æœ€è‘—åçš„è‚¯å®šæ˜¯Springçš„äº‹åŠ¡æ§åˆ¶äº†ï¼Œæ“ä½œæ•°æ®åº“æœ€ç»ˆéƒ½æ˜¯daoå±‚çš„JDBCï¼Œé‚£ä¹ˆå°±éœ€è¦Connectionè¿æ¥å¯¹è±¡ï¼ŒåŸåˆ™ä¸Šæ¥è¯´å¢åˆ æ”¹æŸ¥æ“ä½œéƒ½ç”±Connectionæ“ä½œã€‚æœ¬æ¥ä¹Ÿæ²¡ä»€ä¹ˆï¼Œä½†æ˜¯Springä¸ºäº†æŠŠäº‹åŠ¡éƒ½æ§åˆ¶åœ¨serviceä¸šåŠ¡å±‚ï¼ˆè™½ç„¶è¿™äº›ä»€ä¹ˆä»€ä¹ˆå±‚æœ¬è´¨ä¸€æ ·ï¼Œæ˜¯è‡ªå·±æŠ½è±¡å‡ºæ¥çš„æ¦‚å¿µï¼‰ï¼Œåšäº†ä¸¤ä»¶äº‹ï¼š ä¸ºäº†ä¿è¯åŸå­æ€§ï¼šä¿è¯å•ä¸ªçº¿ç¨‹ä¸­çš„æ•°æ®åº“æ“ä½œä½¿ç”¨çš„æ˜¯åŒâ¼€ä¸ªæ•°æ®åº“è¿æ¥ï¼Œè€Œä¸”ä¸ºäº†è®©å¼€å‘è€…ä¸éœ€è¦å°†åŒä¸€ä¸ªConnectionå¯¹è±¡ä½œä¸ºå‚æ•°åœ¨daoçš„å‡½æ•°é‡Œä¼ æ¥ä¼ å»ï¼Œä½¿ç”¨æ—¶æ„ŸçŸ¥ä¸åˆ°Connectionå¯¹è±¡ï¼Œäºæ˜¯ä½¿ç”¨äº†ThreadLocal+AOPçš„æ–¹å¼ï¼Œä¿è¯äº† ä¸ºäº†ä¿è¯éš”ç¦»æ€§ï¼šä½¿ç”¨ThreadLocalï¼Œå„ä¸ªçº¿ç¨‹ä¹‹é—´çš„äº‹åŠ¡äº’ä¸å½±å“ è´´ä¸€ä¸ªè‡ªå·±ä½¿ç”¨çš„åœºæ™¯ï¼šå­˜æ”¾ç™»å½•ä¿¡æ¯ å‚è€ƒ ä¸‰å¤ªå­æ•–ä¸™ThreadLocal bilibilié©¬å£«å…µå¼±å¼•ç”¨","link":"/Java%E5%9F%BA%E7%A1%80/ThreadLocal/"},{"title":"Springå…¥é—¨ç¬”è®°2","text":"1. Springæ•´åˆjunitæ³¨æ„ï¼šspring5.xå¿…é¡»å¯¹åº”junit4.12åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå¦åˆ™æŠ¥initåˆå§‹åŒ–é”™è¯¯ å°±æ˜¯ä¸ºäº†é¿å…é‡å¤ä»£ç  å…¶å®å¯ä»¥ç”¨junitçš„æ³¨è§£@Beforeå»åšçš„ï¼Œä½†æ˜¯å…¬å¸å¼€å‘çš„æ—¶å€™å¼€å‘å·¥ç¨‹å¸ˆå’Œæµ‹è¯•å·¥ç¨‹å¸ˆæ—¶ä¸¤ä¸ªäººï¼Œæµ‹è¯•å·¥ç¨‹å¸ˆåªå…³æ³¨service.findAll()è¿™ä¸ªæ¥å£ï¼Œå¯¹äºä¸Šé¢çº¢è‰²æ¡†æ¡†å‡ºçš„ä»£ç ï¼Œå¯èƒ½æµ‹è¯•å·¥ç¨‹å¸ˆä¸æ‡‚springï¼Œæ‰€ä»¥å¿…é¡»ç”±å¼€å‘å·¥ç¨‹å¸ˆå†™ï¼Œä½†æ˜¯å¼€å‘åˆä¸å†™@beforeä»£ç å—ï¼Œåªå†™è¿™ä¸ªç©ºæµ‹è¯•ç±» æ‰€ä»¥å¯ä»¥é€šè¿‡æ³¨è§£/xmlçš„æ–¹å¼åœ¨ç©ºç±»ä¸Šé¢åˆ›å»ºiocå®¹å™¨ å¯¼åæ ‡ æµ‹è¯•ç±»ä¸Šæ–¹åŠ æ³¨è§£ @RunWith(SpringJUnit4ClassRunner.class) å‘ŠçŸ¥springçš„è¿è¡Œå™¨ç”¨çš„æ˜¯æ³¨è§£è¿˜æ˜¯xml @ContextConfiguration ä¸¤ä¸ªå±æ€§ï¼šlocationsï¼šæŒ‡å®šxmlçš„ä½ç½®ï¼Œè®°å¾—åŠ ä¸Šclasspath: classesï¼šæŒ‡å®šæ³¨è§£ç±»æ‰€åœ¨ä½ç½® æ³¨å…¥ 2. Springä¸­çš„AOP2.1 AOPçš„æ¦‚å¿µä»¥åŠä½œç”¨ï¼ˆäº†è§£ï¼Œä»£ç çœ‹çœ‹å°±è¡Œï¼‰AOPçš„æœ¬è´¨æ˜¯åŠ¨æ€ä»£ç†ï¼Œå°±æ˜¯æ–¹æ³•å¢å¼ºï¼Œæ¯”å¦‚åŸæ¥æœ‰ä¸€ä¸ªæ–¹æ³•funA()ï¼Œé‡Œé¢è¾“å‡ºäº†ä¸€å¥â€worldâ€ï¼Œç°åœ¨é€šè¿‡AOP/åŠ¨æ€ä»£ç†ç­‰æ–¹å¼å¯¹funA()è¿›è¡Œæ”¹é€ ï¼Œä½¿å¾—å¯ä»¥åœ¨æ‰§è¡ŒfunAä¹‹å‰å…ˆè¾“å‡ºä¸€å¥â€helloâ€ï¼Œåœ¨æ‰§è¡ŒfunAä¹‹åè¾“å‡ºâ€!!!!â€ï¼Œè¿™å°±æ˜¯æ–¹æ³•å¢å¼ºã€‚ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿåœ¨å®é™…å¼€å‘ä¸­ä½“ç°ä¸ºï¼šæˆ‘ä»¬åœ¨ä¸šåŠ¡å±‚ç¼–å†™çš„æ—¶å€™åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸ç”¨å¯¹æ¯ä¸ªæ–¹æ³•éƒ½ å¼€å¯äº‹åŠ¡ ä¸šåŠ¡é€»è¾‘ æäº¤äº‹åŠ¡(æ­£å¸¸) å›æ»šäº‹åŠ¡(å¼‚å¸¸) é‡Šæ”¾è¿æ¥ å¦‚æœæ¯ä¸ªæ–¹æ³•éƒ½è¦è¿™æ ·å†™å°±å¤ªéº»çƒ¦äº†ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡aopæ¥å®ç°å¯¹ä¸šåŠ¡å±‚çš„æ–¹æ³•å¢å¼ºï¼Œä¹‹åäº‹åŠ¡ç®¡ç†å™¨è´Ÿè´£ï¼š å¼€å¯äº‹åŠ¡ æäº¤äº‹åŠ¡(æ­£å¸¸) å›æ»šäº‹åŠ¡(å¼‚å¸¸) é‡Šæ”¾è¿æ¥ è€Œè¿™æ ·ä¾èµ–ä¸šåŠ¡å±‚åªæœ‰ï¼š ä¸šåŠ¡é€»è¾‘ ä½¿ç”¨AOP/åŠ¨æ€ä»£ç†å è€Œäº‹åŠ¡çš„ç®¡ç†äº¤ç»™ä»£ç†ç±»ï¼ˆè¿™é‡Œå…ˆç”¨åŠ¨æ€ä»£ç†ä»‹ç»æ–¹æ³•å¢å¼ºï¼ŒAOPåŸç†ç›¸åŒï¼Œéšä¾¿çœ‹ä¸€ä¸‹ä»£ç ï¼ŒåæœŸæˆ‘ä»¬ä½¿ç”¨springçš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œå°±ä¸ç”¨è‡ªå·±å†™ä»£ç äº†ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/** * ç”¨äºåˆ›å»ºServiceçš„ä»£ç†å¯¹è±¡çš„å·¥å‚ */public class BeanFactory { private AccountService accountService; public final void setAccountService(AccountService accountService) { this.accountService = accountService; } private TransactionManager txManager; public void setTxManager(TransactionManager txManager) { this.txManager = txManager; } public AccountService getAccountService() { return (AccountService) Proxy.newProxyInstance(accountService.getClass().getClassLoader(), accountService.getClass().getInterfaces(), new InvocationHandler() { /** * æ·»åŠ äº‹åŠ¡çš„æ”¯æŒ * @param proxy * @param method * @param args * @return * @throws Throwable */ public Object invoke(Object proxy, Method method, Object[] args) throws Throwable { Object returnValue = null; try { //1.å¼€å¯äº‹åŠ¡ txManager.beginTransaction(); //2.æ‰§è¡Œäº‹åŠ¡ returnValue = method.invoke(accountService, args); //3.æäº¤äº‹åŠ¡ txManager.commit(); //4.è¿”å›ç»“æœ return returnValue; } catch (Exception e) { //5.å›æ»šæ“ä½œ txManager.rollback(); throw new RuntimeException(e); } finally { //6.é‡Šæ”¾è¿æ¥ txManager.release(); } } }); }} è‡³äºé‡Œé¢çš„txManageræˆ‘ä»¬ç”¨çš„æ˜¯è‡ªå·±å†™çš„äº‹åŠ¡ç®¡ç†å™¨ï¼ˆéšä¾¿çœ‹ä¸€ä¸‹ä»£ç ï¼ŒåæœŸæˆ‘ä»¬ä½¿ç”¨springçš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œå°±ä¸ç”¨è‡ªå·±å†™ä»£ç äº†ï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/** * å’Œäº‹åŠ¡ç®¡ç†ç›¸å…³çš„å·¥å…·ç±»:å¼€å¯äº‹åŠ¡ã€‚æäº¤äº‹åŠ¡ï¼Œå›æ»šäº‹åŠ¡å’Œé‡Šæ”¾è¿æ¥ */public class TransactionManager { private ConnectionUtils connectionUtils; public void setConnectionUtils(ConnectionUtils connectionUtils) { this.connectionUtils = connectionUtils; } /** * å¼€å¯äº‹åŠ¡ */ public void beginTransaction(){ try { connectionUtils.getThreadConnection().setAutoCommit(false); }catch (Exception e){ e.printStackTrace(); } } /** * æäº¤äº‹åŠ¡ */ public void commit(){ try { connectionUtils.getThreadConnection().commit(); }catch (Exception e){ e.printStackTrace(); } } /** * å›æ»šäº‹åŠ¡ */ public void rollback(){ try { connectionUtils.getThreadConnection().rollback(); }catch (Exception e){ e.printStackTrace(); } } /** * é‡Šæ”¾è¿æ¥ */ public void release(){ try { connectionUtils.getThreadConnection().close(); //è¿˜å›è¿æ¥æ± ä¸­ connectionUtils.removeConnection(); }catch (Exception e){ e.printStackTrace(); } }} åŒæ—¶ï¼Œä¸ºäº†è§£å†³äº‹åŠ¡å’Œçº¿ç¨‹æ²¡æœ‰ç»‘å®šï¼Œå¯¼è‡´æœ‰å¼‚å¸¸ä¸èƒ½å›æ»šçš„ç°è±¡ï¼Œæˆ‘ä»¬è¿˜ç¼–å†™äº†ä¸€ä¸ªäº‹åŠ¡å’Œçº¿ç¨‹ç»‘å®šçš„ç±»ï¼ˆéšä¾¿çœ‹çœ‹å°±è¡Œï¼ŒåæœŸæˆ‘ä»¬ç”¨springè‡ªå¸¦çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œé¿å…äº†è¿™ä¸ªé—®é¢˜ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/* * åœ¨ä¸¤æ¬¡dao.updateä¹‹é—´æŠ›å‡ºæˆ–è€…ä¸»åŠ¨å†™ä¸€ä¸ªé”™è¯¯å¦‚(int i = 1 / 0;) * åˆ™ç¬¬ä¸€ä¸ªupdateæäº¤äº†ï¼Œç¬¬äºŒä¸ªæ²¡æœ‰ï¼Œå¯¼è‡´ä¸€ä¸ªè´¦æˆ·é’±å‡å°‘äº†å¦ä¸€ä¸ªè´¦æˆ·å‰å´æ²¡æœ‰å¢åŠ ã€‚è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œæˆ‘ä»¬æƒ³è®©å‰é¢çš„æ“ä½œäº‹åŠ¡å›æ»šã€‚ * å¹¶ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„äº‹åŠ¡å›æ»šï¼Œäº‹åŠ¡å›æ»šæŒ‡çš„æ˜¯updateæ–¹æ³•å†…éƒ¨é”™è¯¯ï¼Œå›åˆ°æ²¡æœ‰updateä¹‹å‰çš„çŠ¶æ€ã€‚ * è¿™é‡ŒæŒ‡çš„æ˜¯åŒ…æ‹¬å‰é¢3æ¬¡äº‹åŠ¡å·²ç»æäº¤å¹¶ä¸”æˆåŠŸï¼Œåé¢çš„äº‹åŠ¡è¿æäº¤éƒ½æ²¡æœ‰ã€‚ * æ‰€ä»¥é”™ä¸åœ¨äº‹åŠ¡ï¼Œè€Œåœ¨è¿æ¥ã€‚ * å¹¶ä¸æ˜¯æ²¡æœ‰äº‹åŠ¡ï¼ˆæ²¡æœ‰äº‹åŠ¡çš„è¯save,findæ–¹æ³•ä¹Ÿä¸èƒ½æäº¤ï¼‰ï¼ŒåŸå› æ˜¯å› ä¸ºdaoæ–¹æ³•è·å–äº†4æ¬¡è¿æ¥ï¼Œæ¯ä¸ªconnectionéƒ½æœ‰è‡ªå·±çš„äº‹åŠ¡ã€‚ *//** * åœ¨serviceä¸­å°†connectionå’Œçº¿ç¨‹ç»‘å®šï¼Œä»è€Œä½¿ä¸€ä¸ªçº¿ç¨‹ä¸­åªæœ‰ä¸€ä¸ªèƒ½æ§åˆ¶äº‹åŠ¡çš„connectionå¯¹è±¡ï¼Œè¦ä¹ˆä¸€èµ·å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚ * äº‹åŠ¡çš„æ§åˆ¶åº”è¯¥æ˜¯åœ¨ä¸šåŠ¡å±‚è€Œä¸æ˜¯åœ¨æŒä¹…å±‚ * @author wjw */public class ConnectionUtils { private ThreadLocal&lt;Connection&gt; tl = new ThreadLocal&lt;Connection&gt;(); private DataSource dataSource; public void setDataSource(DataSource dataSource) { this.dataSource = dataSource; } public Connection getThreadConnection(){ try { //1.å…ˆä»ThreadLocalä¸Šè·å– Connection conn = tl.get(); //2.åˆ¤æ–­å½“å‰çº¿ç¨‹ä¸Šæ˜¯å¦æœ‰è¿æ¥ if (conn == null) { //3.ä»æ•°æ®æºä¸­è·å–ä¸€ä¸ªè¿æ¥ï¼Œå¹¶ä¸”å­˜å…¥ThreadLocalä¸­ conn = dataSource.getConnection(); tl.set(conn); } //è¿”å›å½“å‰çº¿ç¨‹ä¸Šçš„è¿æ¥ return conn; }catch (Exception e){ throw new RuntimeException(e); } } /** * æŠŠè¿æ¥å’Œçº¿ç¨‹è§£ç»‘ */ public void removeConnection(){ tl.remove(); }} 2.1.1 åŠ¨æ€ä»£ç†çš„å†™æ³•ï¼ˆäº†è§£ï¼Œå°æ’æ›²ï¼‰æœ‰äººè¯´ï¼Œå“å‘€ æˆ‘ä¸ä¼šå†™åŠ¨æ€ä»£ç†ï¼Œè¿™åˆæ˜¯åŒ¿åå†…éƒ¨ç±»çš„åˆæ˜¯ä»€ä¹ˆProxy æˆ‘è¯´ä½ ä¼šä½ å°±ä¼šï¼Œä½ è®¤çœŸçœ‹å•Š å…¶å®è¦è®°çš„å°±åªæœ‰ ä½ å¾—çŸ¥é“åŠ¨æ€ä»£ç†æ˜¯ä»€ä¹ˆç±»ä¸‹çš„ä»€ä¹ˆæ–¹æ³•å§ï¼šProxy.newProxyInstance() å‚æ•°åˆ—è¡¨å…¶å®æ˜¯ä¸ç”¨è®°çš„ï¼Œä½ æ•²ä¸‹1å°±ä¼šæœ‰æç¤ºï¼ŒæŒ‰ç±»å‹å¡«å°±è¡Œäº†ï¼Œæ¯”å¦‚ä»–ä¼šå‘Šè¯‰ä½ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»åŠ è½½å™¨ï¼Œä½ åªéœ€è¦è®°ä½å¡«çš„æ˜¯â€œè¦å¢å¼ºçš„æ–¹æ³•çš„ç±»â€çš„ç±»åŠ è½½å™¨ï¼Œå°±ä¸ä¼šé”™ï¼Œç¬¬äºŒä¸ªä¹Ÿæ˜¯ï¼Œä½ åªè¦è®°ä½æ˜¯â€œè¦å¢å¼ºçš„æ–¹æ³•çš„ç±»â€åŸæœ¬å®ç°çš„æ¥å£å°±è¡Œ new InvocationHandler()ï¼Œè¿™ä¸ªæ˜¯è¦è®°ä½çš„ï¼Œä½ æ•²ä¸‹å‰å‡ ä¸ªå­—æ¯å°±ä¼šè‡ªåŠ¨è¡¥å…¨ä¸‹é¢çš„invokeæ–¹æ³•äº† è‡³äºé‡Œé¢çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ–¹æ³•å¢å¼ºæ˜¯ä¸ºäº†äº‹åŠ¡ç®¡ç†ï¼Œæ‰€ä»¥é‡Œé¢æ‰å†™äº‹åŠ¡çš„ç›¸å…³ä»£ç ï¼Œå¦‚æœæ–¹æ³•å¢å¼ºæ˜¯ä¸ºäº†åˆ«çš„ï¼Œé‚£å°±è§†æƒ…å†µè€Œå®šå‘€ï¼Œä¸æ˜¯å›ºå®šä»£ç ï¼Œè¦æ³¨æ„çš„åªæœ‰method.invoke()è¿”å›å€¼æ˜¯ä¸ªObjectçš„returnValueå¯¹è±¡ å…³äºåŠ¨æ€ä»£ç†çš„å†…å®¹ï¼Œåœ¨æ­¤ä¸åšè¿‡å¤šçš„å±•å¼€ï¼ˆå•ç‹¬åšäº†åŠ¨æ€ä»£ç†ç¬”è®°ï¼‰ï¼Œåªæ˜¯ä¸ºäº†è¯´æ˜æ–¹æ³•å¢å¼ºæ˜¯æ€ä¹ˆå›äº‹ï¼Œå¦‚ä½•è§£å†³äº‹åŠ¡ç­‰æ–¹æ³•é‡å¤ä»£ç çš„é—®é¢˜ï¼Œä»¥åŠäº†è§£AOPå…¶å®æœ¬è´¨å°±æ˜¯åŠ¨æ€ä»£ç†ï¼Œå®ç°äº†æ–¹æ³•å¢å¼ºã€‚ 2.2 springä¸­åŸºäºxmlçš„AOPé…ç½®æ­¥éª¤ æŠŠé€šçŸ¥Beanä¹Ÿäº¤ç»™springæ¥ç®¡ç† ä½¿ç”¨aop:configæ ‡ç­¾è¡¨æ˜å¼€å§‹AOPé…ç½® ä½¿ç”¨aop:aspectæ ‡ç­¾è¡¨æ˜é…ç½®åˆ‡é¢ idï¼šæ˜¯ç»™åˆ‡é¢æä¾›ä¸€ä¸ªæ ‡è¯† refï¼šæŒ‡å®šé€šçŸ¥ç±»beançš„id åœ¨aop:aspectæ ‡ç­¾å†…éƒ¨ä½¿ç”¨å¯¹åº”æ ‡ç­¾æ¥é…ç½®é€šçŸ¥çš„ç±»å‹ æˆ‘ä»¬ç°åœ¨çš„ç¤ºä¾‹æ˜¯æƒ³åœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡ŒprintLogï¼Œæ‰€ä»¥æ˜¯å‰ç½®é€šçŸ¥ aop:beforeï¼šè¡¨ç¤ºé…ç½®å‰ç½®é€šçŸ¥ methodå±æ€§ï¼šæŒ‡å®šLoggerç±»ä¸­å“ªä¸ªæ–¹æ³•æ˜¯å‰ç½®é€šçŸ¥ pointcutå±æ€§ï¼šæŒ‡å®šåˆ‡å…¥ç‚¹çš„è¡¨è¾¾å¼ï¼ŒæŒ‡çš„æ˜¯å¯¹ä¸šåŠ¡å±‚ä¸­å“ªäº›æ–¹æ³•å¢å¼º 2.3 åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„å†™æ³•ï¼šå…³é”®å­—ï¼šexecution(è¡¨è¾¾å¼) è¡¨è¾¾å¼ï¼šè®¿é—®ä¿®é¥°ç¬¦ è¿”å›å€¼ åŒ…å.åŒ…å.åŒ…åâ€¦ç±»å.æ–¹æ³•å(å‚æ•°åˆ—è¡¨) æ ‡å‡†å†™æ³•ï¼špublic void com.wjw.service.impl.AccountServiceImpl.saveAccount() è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥ï¼švoid com.wjw.service.impl.AccountServiceImpl.saveAccount() è¿”å›å€¼å¯ä»¥ä½¿ç”¨é€šé…ç¬¦*è¡¨ç¤ºä»»æ„è¿”å›å€¼ï¼š* com.wjw.service.impl.AccountServiceImpl.saveAccount() åŒ…åå¯ä»¥ç”¨é€šé…ç¬¦è¡¨ç¤ºä»»æ„åŒ…ï¼Œä½†æ˜¯æœ‰å‡ çº§åŒ…ï¼ˆä»comå¼€å§‹è®¡ç®—ï¼‰ï¼Œå°±æœ‰å¤šå°‘ä¸ª*.ï¼š* *.*.*.*.AccountServiceImpl.saveAccount() æˆ–è€…å¯ä»¥ä½¿ç”¨*..è¡¨ç¤ºå½“å‰åŒ…åŠå…¶å­åŒ…ï¼š* *..AccountServiceImpl.saveAccount() ç±»åå’Œæ–¹æ³•åéƒ½å¯ä»¥ç”¨*æ¥å®ç°é€šé…ï¼š* *..*.*() å‚æ•°åˆ—è¡¨å¯ä»¥ç›´æ¥å†™æ•°æ®ç±»å‹ï¼š &emsp;åŸºæœ¬ç±»å‹ç›´æ¥å†™åç§°ï¼š* *..*.*(int) &emsp;å¼•ç”¨ç±»å‹å†™åŒ…å.ç±»åï¼š* *..*.*(java.lang.String) &emsp;&emsp;å¯ä»¥å®ç°é€šé…ï¼š &emsp;&emsp;&emsp;å¯ä»¥ç”¨*å®ç°é€šé…ï¼Œä»£è¡¨æœ‰å‚æ•°ä¸”ä»»æ„ç±»å‹ï¼š* *..*.*(*) &emsp;&emsp;&emsp;å¯ä»¥ç”¨..å®ç°é€šé…ï¼Œæœ‰æ— å‚æ•°éƒ½å¯ä»¥ä¸”å¯ä»¥ä»»æ„ç±»å‹ï¼š* *..*.*(..) å…¨é€šé…å†™æ³•ï¼š* *..*.*(..) å®é™…å¼€å‘ä¸­å¸¸ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å†™æ³•éƒ½æ˜¯åˆ‡å…¥åˆ°ä¸šåŠ¡å±‚ä¸‹çš„æ‰€æœ‰æ–¹æ³•ï¼š* com.wjw.service.impl.*.*(..) 2.4 é€šçŸ¥ç±»å‹&lt;aop:before&gt;å‰ç½®é€šçŸ¥ï¼Œåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œ &lt;aop:after-returning&gt;åç½®é€šçŸ¥ï¼Œåœ¨åˆ‡å…¥ç‚¹æ­£å¸¸æ‰§è¡Œåæ‰§è¡Œ &lt;aop:after-throwing&gt;å¼‚å¸¸é€šçŸ¥ï¼Œåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œå¼‚å¸¸åæ‰§è¡Œï¼ˆç›¸å½“äºcatchï¼‰ &lt;aop:after&gt;æœ€ç»ˆé€šçŸ¥ï¼Œæ— è®ºæ˜¯å¦æ­£å¸¸éƒ½ä¼šæ‰§è¡Œï¼ˆç›¸å½“äºfinallyï¼‰ &lt;aop:around&gt;ç¯ç»•é€šçŸ¥ï¼Œå…¶å®ç¯ç»•é€šçŸ¥å°±æ˜¯ä¸Šé¢æ‰€æœ‰é€šçŸ¥çš„æ€»å’Œï¼Œåœ¨ç¯ç»•é€šçŸ¥ä¸­ï¼Œä»£ç å†™åœ¨å“ªé‡Œå°±æ˜¯ä»€ä¹ˆé€šçŸ¥ã€‚Springæ¡†æ¶ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ¥å£ï¼šProceedingJoinPointã€‚è¯¥æ¥å£æœ‰ä¸€ä¸ªæ–¹æ³•proceed()ï¼Œæ­¤æ–¹æ³•å°±ç›¸å½“äºæ˜ç¡®è°ƒç”¨åˆ‡å…¥ç‚¹æ–¹æ³•ã€‚è¯¥æ¥å£å¯ä»¥ä½œä¸ºç¯ç»•é€šçŸ¥çš„æ–¹æ³•å‚æ•° ç®€å•åœ°è¯´ï¼Œspringçš„ç¯ç»•é€šçŸ¥å°±æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ä»£ç çš„æ–¹å¼å†™æ‰€æœ‰çš„é€šçŸ¥ï¼Œä½ç½®å°±æ˜¯ä¸åŒçš„æ–¹å¼ã€‚ï¼ˆå…¶å®å°±æ˜¯åŠ¨æ€ä»£ç†æœ¬æ¥çš„å†™æ³•ï¼‰ 2.5 ç®€åŒ–é‡å¤pointcutï¼Œå¯ä»¥å•ç‹¬æŠ½å–å‡ºæ¥&lt;aop:pointcut&gt;æ ‡ç­¾ idæ˜¯å”¯ä¸€æ ‡è¯†ï¼Œexpressionå°±æ˜¯åŸæ¥çš„è¡¨è¾¾å¼ åŸæ¥è¡¨è¾¾å¼ä¸å†ç”¨pointcutè€Œæ˜¯ç”¨point-refï¼Œå€¼å°±æ˜¯&lt;aop:pointcut&gt;çš„id ä¹Ÿå¯ä»¥å°†&lt;aop:pointcut&gt;æ ‡ç­¾é…ç½®åœ¨&lt;aop:aspect&gt;å¤–é¢ï¼Œè¿™æ ·æ‰€æœ‰åˆ‡é¢å¯ç”¨ï¼Œæ³¨æ„ï¼šä¸€å®šè¦åœ¨aspectå‰é¢ 3. æ³¨è§£æ–¹å¼AOPè¦ä½¿ç”¨æ³¨è§£AOPï¼Œå¿…é¡»å¦‚ä¸‹é…ç½®è¦æ³¨æ„ï¼Œè¿™æ®µçº¦æŸåœ¨å®˜ç½‘æ˜¯æ²¡æœ‰ç°æˆçš„ï¼Œå…ˆæœxmlns:aopçš„çº¦æŸå¤åˆ¶ä¸‹æ¥ï¼Œå†æ‰¾xmlns:contextæ‰¾åˆ°çº¢æ¡†ä¸­çš„ä¸‰æ®µå¤åˆ¶ä¸‹æ¥ &lt;aop:aspectj-autoproxy&gt;æ˜¯å¼€å¯æ³¨è§£AOPçš„é’¥åŒ™ åˆ‡é¢ç±»æœ‰è¿™å‡ ç‚¹ 3.1 @Aspectç±»ä¸Šæ–¹æ·»åŠ ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªåˆ‡é¢ 3.2 @Pointcutå’Œ&lt;aop:pointcut&gt;ä¸€æ ·ï¼Œä»£è¡¨ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ³¨æ„å†™æ³•æ˜¯é€šè¿‡ç©ºå‡½æ•°çš„å½¢å¼ 123@ Pointcut(â€œexecution(â€œ* com.wjw.service.impl.*.*(..)â€)â€)public void pt1(){} 3.3 @Before(â€œmethodName()â€)æ³¨æ„ä¸è¦å°‘äº†æ‹¬å·ï¼Œå‰ç½®é€šçŸ¥ 3.4 @AfterRuturning(â€œmethodName()â€)æ³¨æ„ä¸è¦å°‘äº†æ‹¬å·ï¼Œåç½®é€šçŸ¥ 3.5 @AfterThrowing(â€œmethodName()â€)æ³¨æ„ä¸è¦å°‘äº†æ‹¬å·ï¼Œå¼‚å¸¸é€šçŸ¥ 3.6 @After(â€œmethodName()â€)æ³¨æ„ä¸è¦å°‘äº†æ‹¬å·ï¼Œæœ€ç»ˆé€šçŸ¥ æ³¨æ„äº‹é¡¹ï¼šspringçš„æ³¨è§£æ–¹å¼AOPçš„é€šçŸ¥é¡ºåºæ˜¯ï¼šå‰ç½® æœ€ç»ˆ åç½®/å¼‚å¸¸ æœ€ç»ˆé€šçŸ¥çš„ä½ç½®ä¸å¯¹ è€Œä½¿ç”¨ç¯ç»•é€šçŸ¥çš„è¯ï¼Œå› ä¸ºæ˜¯è‡ªå·±å†™çš„ï¼Œæ‰€ä»¥ä½ç½®å’Œxmlè¿˜æœ‰ç†è§£ä¸­çš„æ˜¯ä¸€è‡´çš„ å®Œå…¨ä¸ç”¨XMLçš„æ–¹å¼12345@Configuration@ComponentScan(basePackages=\"com.itheima\")@EnableAspectJAutoProxypublic class SpringConfiguration {} å°±æ˜¯åœ¨â€œå®Œå…¨ä¸ç”¨XMLæ–¹å¼å®ç°iocâ€çš„é‚£ä¸ªé…ç½®ç±»ä¸Šæ–¹å†åŠ ä¸Š@EnableAspectJAutoProxy 4. Springè‡ªå¸¦çš„äº‹åŠ¡ç®¡ç†å™¨ï¼šå£°æ˜å¼äº‹åŠ¡æ§åˆ¶è¿˜è®°å¾—ä¹‹å‰â€œä¹.1â€é‚£ä¸ªæ¡ˆä¾‹å—(ç¿»å›å»çœ‹)ï¼Œæˆ‘ä»¬ç°åœ¨ä½¿ç”¨AOPä»£æ›¿äº†åŠ¨æ€ä»£ç†ï¼ŒåŒæ ·è§£å†³äº†äº‹åŠ¡é‡å¤ä»£ç çš„é—®é¢˜ï¼Œå¯¹äº‹åŠ¡æ§åˆ¶å¯ä»¥æŠ½å–å‡ºæ¥äº† å¯æ˜¯ï¼Œä¹‹å‰æ¡ˆä¾‹ä¸­çš„ä¸¤ä¸ªç±»æ˜¯è‡ªå·±å†™çš„ï¼š TransactionManagerï¼šäº‹åŠ¡æ§åˆ¶çš„ç±»ï¼ˆåŒ…å«æäº¤ï¼Œå›æ»šç­‰æ–¹æ³•ï¼‰ï¼Œè‡ªå·±å†™å¤ªä¸ç°å®ï¼Œæˆ‘ä»¬ç°åœ¨è¦æ”¹ç”¨Springè‡ªå¸¦çš„äº‹åŠ¡ç®¡ç†å™¨ã€‚ ConnectionUtilsï¼šè¿™æ˜¯ä¹‹å‰ä¸ºäº†é˜²æ­¢å¼‚å¸¸æ— æ³•å›æ»šçš„é—®é¢˜è€Œå†™çš„ç±»ï¼Œç°åœ¨æˆ‘ä»¬é€šè¿‡Springè‡ªå¸¦çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚ 4.1 åŸºäºXMLçš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶ä½¿ç”¨æ­¥éª¤ï¼š 12345678910111213141516springä¸­åŸºäºxmlçš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶åŸºæœ¬æ­¥éª¤ 1.é…ç½®äº‹åŠ¡ç®¡ç†å™¨ 2.é…ç½®äº‹åŠ¡é€šçŸ¥ å¯¼å…¥äº‹åŠ¡çš„çº¦æŸï¼Œåœ¨data accessé‡Œxmlns:txï¼Œæ³¨æ„è¿™é‡Œå…¶å®æ˜¯åŒ…å«äº†aopçš„ï¼Œäº‹åŠ¡é€šçŸ¥ç¦»ä¸å¼€aop ä½¿ç”¨tx:adviceæ ‡ç­¾é…ç½®äº‹åŠ¡é€šçŸ¥ idï¼šå”¯ä¸€æ ‡è¯† transactionManagerï¼šç»™äº‹åŠ¡é€šçŸ¥æä¾›ä¸€ä¸ªäº‹åŠ¡ç®¡ç†å™¨å¼•ç”¨ï¼Œæ³¨æ„ä¸æ˜¯ref 3.é…ç½®AOPä¸­çš„é€šç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ 4.å»ºç«‹äº‹åŠ¡é€šçŸ¥å’Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„å¯¹åº”å…³ç³» 5.é…ç½®äº‹åŠ¡çš„å±æ€§ï¼Œåœ¨äº‹åŠ¡çš„é€šçŸ¥tx:adviceå†…éƒ¨ isolationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤å€¼æ˜¯DEFAULT,è¡¨ç¤ºä½¿ç”¨æ•°æ®åº“é»˜è®¤çº§åˆ« propagationï¼šç”¨äºæŒ‡å®šäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Œé»˜è®¤å€¼æ˜¯REQUIREDï¼Œè¡¨ç¤ºä¸€å®šä¼šæœ‰äº‹åŠ¡ï¼ˆå¢åˆ æ”¹ï¼‰ï¼ŒæŸ¥è¯¢æ–¹æ³•ç”¨SUPPORTS read-onlyï¼šç”¨äºæŒ‡å®šäº‹åŠ¡æ˜¯å¦åªè¯»ï¼Œåªæœ‰æŸ¥è¯¢æ–¹æ³•æ‰èƒ½è®¾ç½®ä¸ºtrueï¼Œé»˜è®¤ä¸ºfalseè¡¨ç¤ºè¯»å†™ rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“è¯¥å¼‚å¸¸äº§ç”Ÿæ—¶äº‹åŠ¡å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸æ—¶äº‹åŠ¡ä¸å›æ»šï¼Œæ²¡æœ‰é»˜è®¤å€¼ è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»š no-rollback-forï¼šç”¨äºæŒ‡å®šä¸€ä¸ªå¼‚å¸¸ï¼Œå½“è¯¥å¼‚å¸¸äº§ç”Ÿæ—¶äº‹åŠ¡ä¸å›æ»šï¼Œäº§ç”Ÿå…¶ä»–å¼‚å¸¸æ—¶äº‹åŠ¡å›æ»šï¼Œæ²¡æœ‰é»˜è®¤å€¼ è¡¨ç¤ºä»»ä½•å¼‚å¸¸éƒ½å›æ»š timeoutï¼šç”¨äºæŒ‡å®šäº‹åŠ¡è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º-1è¡¨ç¤ºæ°¸ä¸è¶…æ—¶ï¼Œç§’ä¸ºå•ä½ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºå‰ç½®é€šçŸ¥æ˜¯äº‹åŠ¡çš„å¼€å¯ï¼Œåç½®é€šçŸ¥æ˜¯äº‹åŠ¡çš„æäº¤ï¼Œå¼‚å¸¸é€šçŸ¥æ˜¯äº‹åŠ¡çš„å›æ»šï¼Œæœ€ç»ˆé€šçŸ¥æ˜¯è¿æ¥çš„é‡Šæ”¾è¿™ç§åŸºæœ¬ä¸Šæ˜¯å›ºå®šæ“ä½œ springå°è£…äº†ä¸€ä¸ªDataSourceTransactionManagerè‡ªåŠ¨å®Œæˆï¼Œåªè¦æ˜¯åœ¨2ä¸­çš„transaction-managerä¸­å¼•ç”¨äº†è¿™ä¸ªç±»ï¼Œé‚£ä¹ˆå°±ä¸å¿…å…³æ³¨è¿™å‡ ä¸ªæ“ä½œäº† æ›´å¤šçš„æ˜¯å…³æ³¨ä¸åŒæ–¹æ³•å¯¹äºäº‹åŠ¡çš„å¤„ç†ï¼ˆäº‹åŠ¡çš„å±æ€§ï¼‰æ¯”å¦‚åœ¨ä¸Šä¸€ä¸ªäº‹åŠ¡æœªå®Œæˆå‰ä¸‹ä¸€ä¸ªäº‹åŠ¡æ˜¯å¦å¯ä»¥è¯»å–ï¼ˆfindå°±å¯ä»¥å…¶ä»–æ“ä½œåˆ™ä¸è¡Œï¼‰ æ•°æ®æºè¿˜æ˜¯åŸæ¥çš„ï¼Œä¹Ÿç»™å‡ºæˆªå›¾ 4.2 åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶ä½¿ç”¨æ­¥éª¤ 1234springä¸­åŸºäºæ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶åŸºæœ¬æ­¥éª¤1.é…ç½®äº‹åŠ¡ç®¡ç†å™¨2.å¼€å¯springå¯¹æ³¨è§£äº‹åŠ¡çš„æ”¯æŒ3.åœ¨éœ€è¦äº‹åŠ¡æ”¯æŒçš„åœ°æ–¹ä½¿ç”¨@Transactionalæ³¨è§£(serviceå±‚å®ç°ç±»ä¸Šæ–¹) æƒŠå–œçš„å‘ç°ï¼Œç”±äºspringçš„äº‹åŠ¡æ§åˆ¶æ˜¯å†™å¥½çš„ï¼Œæ‰€ä»¥è¿aopé‚£äº›@Aspectå•Š@Beforeå•Šéƒ½ä¸ç”¨äº†ï¼ŒspringçŸ¥é“æ‰§è¡Œä¹‹åcommitï¼Œåœ¨å¼‚å¸¸ä¹‹åAfterThrowingï¼Œåªè¦@Transactionalåæ‰€æœ‰æ–¹æ³•éƒ½è‡ªåŠ¨æ·»åŠ äº†äº‹åŠ¡ åˆ«å¿˜äº†è¿™äº›ç»†èŠ‚çš„ä¸œè¥¿ æ‰€ä»¥åªèƒ½è‡ªå·±è¡¥ä¸Šï¼ˆ@AutoWiredå¯ä»¥ä¸è¦ï¼Œç”¨çš„æ˜¯xmlï¼‰ 4.3 çº¯æ³¨è§£çš„å£°æ˜å¼äº‹åŠ¡æ§åˆ¶ç®—äº†ï¼Œåˆ«æ•´è¿™äº›æœ‰çš„æ²¡çš„ï¼Œåæ­£ä¹Ÿæ²¡äººç”¨ é™„å½•ï¼šiocä¸‹é€šè¿‡ç»§æ‰¿JdbcDaoSupportå¦‚ä½•æ³¨å…¥æ•°æ®æº è¿™æ˜¯ç”±äºç±»ä¸­ä½¿ç”¨çš„æ˜¯ç»§æ‰¿æ–¹å¼ äº‹å®ä¸Šå°±è‡ªåŠ¨è·å¾—äº†æ‰€æœ‰çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œçˆ¶ç±»çš„classæ–‡ä»¶é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°setDataSourceæ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬åªè¦æ ¹æ®è¿™ä¸ªsetæ–¹æ³•è®¾ç½®daoçš„æ³¨å…¥å°±å¥½äº†","link":"/Spring/Spring%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B02/"},{"title":"fastDFSçš„å®‰è£…å’Œspringbootå®Œæˆæ–‡ä»¶ä¸Šä¼ ","text":"1. å®‰è£…fastDFS å®‰è£…libevent ubuntuä¸‹ 1sudo apt-get install libevent-dev centosä¸‹ 1yum -y install libevent å¦‚æœæ²¡æœ‰gccï¼ˆgcc -væ²¡æœ‰æ‰“å°ç‰ˆæœ¬ï¼‰é‚£ä¹ˆè¦å®‰è£…gcc 12sudo apt install gccsudo apt install build-essential centosä½¿ç”¨yum install å¦‚æœæ²¡æœ‰unzipè¦å®‰è£…unzip ubuntuä¸‹ 1sudo apt install unzip centosä¸‹ 1yum install -y unzip zip å®‰è£…libfastcommon-master 1234unzip libfastcommon-master.zipcd libfastcommon-master./make.sh ./make.sh install å›åˆ°å‹ç¼©åŒ…çš„ç›®å½•ï¼Œå¼€å§‹å®‰è£…fastdfs 1234tar -zxvf FastDFS_v5.08.tar.gzcd FastDFS./make.sh ./make.sh install æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸ è¾“å…¥ä¸‹é¢å‘½ä»¤æœ‰fdfs_trackerdå’Œfdfs_storagedä¸¤æ¡è®°å½•æ˜¾ç¤ºå°±æˆåŠŸ 1ll /etc/init.d/ | grep fdfs æŸ¥çœ‹æ˜¯å¦æœ‰3ä¸ªæ¨¡æ¿ 1ll /etc/fdfs/ tarcker.conf.sample æ˜¯trackerçš„é…ç½®æ–‡ä»¶æ¨¡æ¿ storage.conf.sample æ˜¯storageçš„é…ç½®æ–‡ä»¶æ¨¡æ¿ client.conf.sample æ˜¯å®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶æ¨¡æ¿ é…ç½®å¹¶å¯åŠ¨ å…ˆçœ‹trackerï¼ŒstorageåŒç† 12cp /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.confvim /etc/fdfs/tracker.conf ä¿®æ”¹base_pathä¸ºä½ æƒ³è¦å­˜æ”¾çš„è·¯å¾„ï¼ˆæˆ‘è¿™é‡Œæ˜¯/home/wjw/fastdfs/trackerï¼‰ 1base_path=/home/wjw/fastdfs/tracker è‡ªå·±å»ºç«‹å¥½è¿™ä¸ªæ–‡ä»¶å¤¹ storageåŒç† 12cp /etc/fdfs/storage.conf.sample /etc/fdfs/storage.confvim /etc/fdfs/storage.conf ä¿®æ”¹çš„å†…å®¹å¦‚ä¸‹ 12345base_path=/home/wjw/fastdfs/storage # æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶å­˜å‚¨æ ¹ç›®å½• store_path0=/home/wjw/fastdfs/storage # ç¬¬ä¸€ä¸ªå­˜å‚¨ç›®å½• tracker_server=192.168.72.128:22122 # trackeræœåŠ¡å™¨IPå’Œç«¯å£ è‡ªå·±å»ºç«‹å¥½è¿™ä¸ªæ–‡ä»¶å¤¹ å¼€å¯æœåŠ¡ ubuntu 12fdfs_trackerd /etc/fdfs/tracker.conf startfdfs_storaged /etc/fdfs/storage.conf start centos 12service fdfs_trackerd startservice fdfs_storaged start å¦‚æœå¼€å¯æœåŠ¡æŠ¥é”™å¯ä»¥è¯•è¯•å…ˆå…³é—­é˜²ç«å¢™å†å¼€å¯æœåŠ¡ ubuntu 1sudo ufw disable centos 1chkconfig iptables off æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸï¼š 1ps -ef | grep fdfs è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯åŠ¨: ubuntuæ¯”è¾ƒå¤æ‚ï¼Œå°¤å…¶æ˜¯å¯¹äºå®‰è£…äº†å›¾å½¢æ¡Œé¢ç‰ˆï¼Œä¸€ç™»é™†é»˜è®¤æ˜¯éroot ä¸‹é¢ç»™å‡ºæœ€æ ‡å‡†çš„è§£å†³æ–¹æ¡ˆ 1vi /lib/systemd/system/rc.local.service ä¿®æ”¹ç»“æœå¦‚ä¸‹ 1234567891011121314151617[Unit]Description=/etc/rc.local CompatibilityDocumentation=man:systemd-rc-local-generator(8)ConditionFileIsExecutable=/etc/rc.localAfter=network.target[Service]Type=forkingExecStart=/etc/rc.local startTimeoutSec=0RemainAfterExit=yesGuessMainPID=no#è‡ªå·±æ·»åŠ è¿™ä¸€æ®µ[Install]WantedBy=multi-user.targetAlias=rc-local.service é€€å‡ºviåæ‰§è¡Œ 1ln -s /lib/systemd/system/rc.local.service /etc/systemd/system/rc.local.service ç¼–è¾‘è¿™ä¸ªï¼ˆå¯èƒ½åŸæ¥æ˜¯ç©ºçš„ï¼Œæ²¡å…³ç³»ï¼‰ 1vi /etc/rc.local å¤§èƒ†å¤åˆ¶ç²˜è´´ 1234#!/bin/bashfdfs_trackerd /etc/fdfs/tracker.conf startfdfs_storaged /etc/fdfs/storage.conf startexit 0 ç¼–è¾‘å®Œæˆé€€å‡ºviåæ·»åŠ æƒé™ 1sudo chmod +x /etc/rc.local å¯ä»¥äº† centosæ¯”è¾ƒç®€å• 12chkconfig fdfs_trackerd onchkconfig fdfs_storaged on 2. å®‰è£…fastdfs-nginxæ¨¡å— è§£å‹ä¹‹å‰ä»ç½‘ç›˜ä¸‹è½½çš„è¿™ä¸ªæ–‡ä»¶ï¼Œè¿›å…¥ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ 123tar -zxvf fastdfs-nginx-module_v1.16.tar.gzcd fastdfs-nginx-module/src/vim config ä½¿ç”¨æ›¿æ¢å‘½ä»¤(ä¸éœ€è¦è¿›å…¥æ’å…¥æ¨¡å¼ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´å›è½¦ä¸€æ°”å‘µæˆ) 1:%s+/usr/local/+/usr/+g è®¾ç½®å…³è”ï¼ŒæŠŠå½“å‰æ–‡ä»¶å¤¹ä¸‹çš„mod_fastdfs.confæ–‡ä»¶å¤åˆ¶åˆ°/etc/fdfs/ 1cp mod_fastdfs.conf /etc/fdfs/ 1vi /etc/fdfs/mod_fastdfs.conf ä¿®æ”¹ç»“æœ 1234567connect_timeout=20 # å®¢æˆ·ç«¯è®¿é—®æ–‡ä»¶è¿æ¥è¶…æ—¶æ—¶é•¿ï¼ˆå•ä½ï¼šç§’ï¼‰tracker_server=192.168.72.128:22122 # trackeræœåŠ¡IPå’Œç«¯å£url_have_group_name=true # è®¿é—®é“¾æ¥å‰ç¼€åŠ ä¸Šç»„åstore_path0=/home/wjw/fastdfs/storage # æ–‡ä»¶å­˜å‚¨è·¯å¾„ å›åˆ°ç½‘ç›˜ä¸‹è½½å¥½é‚£å‡ ä¸ªå‹ç¼©åŒ…çš„ç›®å½•ï¼ˆåªèƒ½è¿™ä¹ˆæè¿°äº†ï¼Œä½ ä»¬æ”¾åœ¨å“ªé‡Œè‡ªå·±æ¸…æ¥šï¼‰ï¼Œè¿›å…¥FastDFSæ–‡ä»¶å¤¹çš„confæ–‡ä»¶å¤¹ 12cd FastFDS/conf/cp http.conf mime.types /etc/fdfs/ 3. å®‰è£…nginxå¹¶ç»‘å®šfastdfsçš„nginxæ¨¡å—æˆ‘è¿™é‡Œå·²ç»å®‰è£…è¿‡nginxäº†ï¼Œå¦‚æœæ²¡æœ‰çš„è¯æˆ‘å»ºè®®æ‰‹åŠ¨ä¸‹è½½gzipå®‰è£…è€Œä¸æ˜¯aptå®‰è£…ï¼Œå› ä¸ºåæœŸè¦æ·»åŠ æ¨¡å—çš„è¯åªèƒ½ä¿®æ”¹å®Œæ¨¡å—åé‡æ–°makeï¼Œè€Œaptå®‰è£…å°±ä¸å¯ä»¥åšåˆ°ï¼ˆåƒæˆ‘ä¸€æ ·aptå®‰è£…çš„å°±å¾ˆéº»çƒ¦ï¼Œä¸ä»…ç›®å½•ä¹±è€Œä¸”è¿˜æ˜¯è¦ä¸‹è½½gzåŒ…æ·»åŠ æ¨¡å—ï¼‰ æˆ‘éšä¾¿æ‰¾ä¸ªæ•™ç¨‹å§ï¼ˆç™¾åº¦ç¬¬ä¸€ä¸ªï¼Œæˆ‘æ²¡è¯•è¿‡ï¼‰ https://blog.csdn.net/qq_23832313/article/details/83578836 è€Œæˆ‘çš„ç›®å½•éå¸¸æ··ä¹±ï¼Œå½“äº‹äººéå¸¸åæ‚”ï¼š /usr/bin å¯åŠ¨æ–‡ä»¶ /opt/nginx é…ç½®æ–‡ä»¶ /usr/local å®‰è£…æ–‡ä»¶ï¼ˆåŸå§‹çš„é…ç½®æ–‡ä»¶ï¼Œä¸è¦åŠ¨å®ƒï¼‰ ä½¿ç”¨å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ˜¯å¦å®‰è£…å¥½nginx 1nginx -v ä¸ç®¡æ˜¯å¦å·²ç»å®‰è£…å¥½ï¼Œæƒ³æ·»åŠ æ¨¡å—éƒ½éœ€è¦åœ¨ä¸‹è½½å¥½çš„nginxç›®å½•ä¸‹æ‰§è¡Œè¦æ·»åŠ çš„æ¨¡å—ï¼Œç„¶åé‡æ–°makeï¼ˆadd-moduleåé¢æ˜¯ç¬¬äºŒæ­¥è§£å‹å¥½çš„fastdfs-nginx-moduleé‚£ä¸ªè·¯å¾„ï¼‰ï¼Œå¤§å®¶è¦æ³¨æ„æ”¹æˆè‡ªå·±çš„ç›®å½• 1./configure --prefix=/opt/nginx --sbin-path=/usr/bin/nginx --add-module=/home/wjw/Desktop/fastfds/fastdfs-nginx-module/src/ 1make å¤‡ä»½ 1mv /usr/bin/nginx /usr/bin/nginx-bak æ›¿æ¢åŸæœ¬çš„nginxå¯åŠ¨æ–‡ä»¶ï¼Œæ³¨æ„æ”¹æˆè‡ªå·±çš„ç›®å½• 1cp objs/nginx /usr/bin/ ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ³¨æ„æ”¹æˆè‡ªå·±çš„ç›®å½• 1vim /opt/nginx/conf/nginx.conf å°†åŸæ¥çš„ç›‘å¬80ç«¯å£æ”¹æˆå¦‚ä¸‹ 12345678910111213141516171819server { listen 80; server_name image.upload.com; # ç›‘å¬åŸŸåä¸­å¸¦æœ‰groupçš„ï¼Œäº¤ç»™FastDFSæ¨¡å—å¤„ç† location ~/group([0-9])/ { ngx_fastdfs_module; } location / { root html; index index.html index.htm; } error_page 500 502 503 504 /50x.html; location = /50x.html { root html; }} å¯åŠ¨ï¼Œè¿›å…¥/usr/binç›®å½•ï¼Œæ³¨æ„æ”¹æˆè‡ªå·±çš„ç›®å½•ï¼Œæ‰§è¡Œ 1./nginx é€šè¿‡å‘½ä»¤çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ 1ps -ef | grep nginx è®¾ç½®å¼€æœºå¯åŠ¨ï¼Œç½‘ä¸Šçš„å¾ˆå¤šubuntuè®¾ç½®å¼€æœºå¯åŠ¨éƒ½æ˜¯æœ‰é—®é¢˜çš„ å…ˆçœ‹centosæ“ä½œ 1vim /etc/init.d/nginx ä¸€ä¸ªç©ºæ–‡ä»¶ï¼Ÿæ²¡å…³ç³» å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼Œæ³¨æ„ä¸€ä¸‹nginx=â€/usr/bin/nginxâ€å’ŒNGINX_CONF_FILE=â€/opt/nginx/conf/nginx.confâ€è¿™ä¸¤å¥è¦å¯¹åº”è‡ªå·±çš„ç›®å½• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131#!/bin/sh## nginx - this script starts and stops the nginx daemon## chkconfig: - 85 15# description: NGINX is an HTTP(S) server, HTTP(S) reverse \\# proxy and IMAP/POP3 proxy server# processname: nginx# config: /etc/nginx/nginx.conf# config: /etc/sysconfig/nginx# pidfile: /var/run/nginx.pid# Source function library.. /etc/rc.d/init.d/functions# Source networking configuration.. /etc/sysconfig/network# Check that networking is up.[ \"$NETWORKING\" = \"no\" ] &amp;&amp; exit 0nginx=\"/usr/bin/nginx\"prog=$(basename $nginx)NGINX_CONF_FILE=\"/opt/nginx/conf/nginx.conf\"[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginxlockfile=/var/lock/subsys/nginxmake_dirs() { # make required directories user=`$nginx -V 2&gt;&amp;1 | grep \"configure arguments:.*--user=\" | sed 's/[^*]*--user=\\([^ ]*\\).*/\\1/g' -` if [ -n \"$user\" ]; then if [ -z \"`grep $user /etc/passwd`\" ]; then useradd -M -s /bin/nologin $user fi options=`$nginx -V 2&gt;&amp;1 | grep 'configure arguments:'` for opt in $options; do if [ `echo $opt | grep '.*-temp-path'` ]; then value=`echo $opt | cut -d \"=\" -f 2` if [ ! -d \"$value\" ]; then # echo \"creating\" $value mkdir -p $value &amp;&amp; chown -R $user $value fi fi done fi}start() { [ -x $nginx ] || exit 5 [ -f $NGINX_CONF_FILE ] || exit 6 make_dirs echo -n $\"Starting $prog: \" daemon $nginx -c $NGINX_CONF_FILE retval=$? echo [ $retval -eq 0 ] &amp;&amp; touch $lockfile return $retval}stop() { echo -n $\"Stopping $prog: \" killproc $prog -QUIT retval=$? echo [ $retval -eq 0 ] &amp;&amp; rm -f $lockfile return $retval}restart() { configtest || return $? stop sleep 1 start}reload() { configtest || return $? echo -n $\"Reloading $prog: \" killproc $nginx -HUP RETVAL=$? echo}force_reload() { restart}configtest() { $nginx -t -c $NGINX_CONF_FILE}rh_status() { status $prog}rh_status_q() { rh_status &gt;/dev/null 2&gt;&amp;1}case \"$1\" in start) rh_status_q &amp;&amp; exit 0 $1 ;; stop) rh_status_q || exit 0 $1 ;; restart|configtest) $1 ;; reload) rh_status_q || exit 7 $1 ;; force-reload) force_reload ;; status) rh_status ;; condrestart|try-restart) rh_status_q || exit 0 ;; *) echo $\"Usage: $0 {start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest}\" exit 2esac ä¿®æ”¹æƒé™ 12# ä¿®æ”¹æƒé™chmod 777 /etc/init.d/nginx è®¾ç½®å¼€æœºå¯åŠ¨ 12chkconfig --add /etc/init.d/nginx chkconfig nginx on å†çœ‹ubuntuæ“ä½œ ç½‘ä¸Šå¾ˆå¤šæ–¹æ³•æ¯”å¦‚å®‰è£…ä»€ä¹ˆsysvï¼Œæˆ‘äº²æµ‹æ— æ•ˆï¼Œç„¶åçœ‹åˆ°è¿™ç¯‡åšå®¢ https://www.cnblogs.com/hellxz/p/9441949.html äº²æµ‹æœ‰æ•ˆï¼Œä¸è¿‡åŸåšå®¢ä¼¼ä¹æ¼äº†ä¿®æ”¹æƒé™çš„æ“ä½œ 1sudo vim /etc/init.d/nginx.sh ç©ºæ–‡ä»¶ï¼Ÿæ²¡å…³ç³»ï¼Œå¤åˆ¶ä¸‹é¢è¿™æ®µï¼Œ/usr/bin/nginxæ”¹æˆè‡ªå·±çš„å¯åŠ¨æ–‡ä»¶ä¸‹çš„nginxï¼Œ/opt/nginx/conf/nginx.confæ”¹æˆè‡ªå·±çš„é…ç½®æ–‡ä»¶ä¸‹çš„nginx.confï¼Œç„¶åä¿®æ”¹æˆè‡ªå·±çš„ç™»å½•å¯†ç  123456#!/bin/bash#auto run nginx when system startupsudo -S /usr/bin/nginx -c /opt/nginx/conf/nginx.conf &lt;&lt; EOFç™»å½•å¯†ç EOFexit 0 ä¿®æ”¹æƒé™ï¼ˆåŸæ–‡å¿˜äº†è¿™ç‚¹ï¼Œè¦åŠ ä¸Šï¼‰ 1chmod 777 /etc/init.d/nginx.sh æ·»åŠ å¼€æœºé‡å¯ 1sudo update-rc.d nginx.sh defaults 4. javaç«¯éœ€è¦è¿›è¡Œçš„æ“ä½œ ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.github.tobato&lt;/groupId&gt; &lt;artifactId&gt;fastdfs-client&lt;/artifactId&gt; &lt;version&gt;1.26.2&lt;/version&gt;&lt;/dependency&gt; é…ç½®ç±» 1234567@Configuration@Import(FdfsClientConfig.class)// è§£å†³jmxé‡å¤æ³¨å†Œbeançš„é—®é¢˜@EnableMBeanExport(registration = RegistrationPolicy.IGNORE_EXISTING)public class FastClientImporter { } yml 12345678fdfs: so-timeout: 1501 # è¶…æ—¶æ—¶é—´ connect-timeout: 601 # è¿æ¥è¶…æ—¶æ—¶é—´ thumb-image: # ç¼©ç•¥å›¾ width: 60 height: 60 tracker-list: # trackeråœ°å€ï¼šä½ çš„è™šæ‹ŸæœºæœåŠ¡å™¨åœ°å€+ç«¯å£ï¼ˆé»˜è®¤æ˜¯22122ï¼‰ - 192.168.72.128:22122 æµ‹è¯•ç±» åœ¨Gç›˜æ ¹ç›®å½•ä¸‹å‡†å¤‡ä¸€å¼ æµ‹è¯•ç”¨å›¾1.jpg 1234567891011121314151617181920212223242526272829303132333435363738@SpringBootTest@RunWith(SpringRunner.class)public class FastDFSTest { @Autowired private FastFileStorageClient storageClient; @Autowired private ThumbImageConfig thumbImageConfig; @Test public void testUpload() throws FileNotFoundException { // è¦ä¸Šä¼ çš„æ–‡ä»¶ File file = new File(\"G:\\\\1.jpg\"); // ä¸Šä¼ å¹¶ä¿å­˜å›¾ç‰‡ï¼Œå‚æ•°ï¼š1-ä¸Šä¼ çš„æ–‡ä»¶æµ 2-æ–‡ä»¶çš„å¤§å° 3-æ–‡ä»¶çš„åç¼€ 4-å¯ä»¥ä¸ç®¡ä»– StorePath storePath = this.storageClient.uploadFile( new FileInputStream(file), file.length(), \"jpg\", null); // å¸¦åˆ†ç»„çš„è·¯å¾„ System.out.println(storePath.getFullPath()); // ä¸å¸¦åˆ†ç»„çš„è·¯å¾„ System.out.println(storePath.getPath()); } @Test public void testUploadAndCreateThumb() throws FileNotFoundException { File file = new File(\"G:\\\\1.jpg\"); // ä¸Šä¼ å¹¶ä¸”ç”Ÿæˆç¼©ç•¥å›¾ StorePath storePath = this.storageClient.uploadImageAndCrtThumbImage( new FileInputStream(file), file.length(), \"png\", null); // å¸¦åˆ†ç»„çš„è·¯å¾„ System.out.println(storePath.getFullPath()); // ä¸å¸¦åˆ†ç»„çš„è·¯å¾„ System.out.println(storePath.getPath()); // è·å–ç¼©ç•¥å›¾è·¯å¾„ String path = thumbImageConfig.getThumbImagePath(storePath.getPath()); System.out.println(path); }} æˆ‘ä»¬å¯ä»¥çœ‹åˆ°getFullPath()æ‰“å°äº†ç»„ä¿¡æ¯ï¼Œè¿™æ—¶å€™æœåŠ¡å™¨ä¸Šå·²ç»æœ‰äº†ä¸Šä¼ çš„å›¾ç‰‡ æµè§ˆå™¨å¯ä»¥é€šè¿‡http://192.168.72.128/group1/M00/00/00/wKhIgF78pUCAPLLYAACFQPZnSLk185.jpgè®¿é—®åˆ°æœåŠ¡å™¨çš„å›¾ç‰‡ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡å™¨ip+getFullPath()æ‰“å°çš„ä¿¡æ¯ å¦‚æœæ˜¯å‰ç«¯ä¼ å…¥çš„å›¾ç‰‡ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯MultipartFile fileè¿™ä¸ªç±»å‹çš„ ä¹Ÿæ˜¯ä¸€æ ·è°ƒç”¨uploadImageAndCrtThumbImageæ–¹æ³•ï¼Œè·å¾—ç›¸åŒçš„å‚æ•°å³å¯ï¼ˆgetInputStreamå¯ä»¥è·å¾—æµï¼ŒgetOriginalFilenameç»è¿‡åˆ‡å‰²å¯ä»¥è·å¾—åç¼€åï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼‰ 12String originalFilename = file.getOriginalFilename();StorePath path = this.storageClient.uploadImageAndCrtThumbImage(file.getInputStream(), file.getSize(), StringUtils.substringAfterLast(originalFilename, \".\"), null);","link":"/Spring/fastDFS%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8Cspringboot%E5%AE%8C%E6%88%90%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"},{"title":"javaä¸­çš„å¼•ç”¨","text":"å¼ºå¼•ç”¨(NormalReference)æˆ‘ä»¬å¹³æ—¶ç”¨çš„åŸºæœ¬ä¸Šéƒ½æ˜¯å¼ºå¼•ç”¨M m = new M(); åªè¦å¼ºå¼•ç”¨åœ¨ï¼Œgcä¸å›æ”¶è¯¥å¯¹è±¡ 123456789//æ²¡äº‹ä¸è¦é‡å†™finalizeæ–¹æ³•ï¼Œè¿™é‡Œæ˜¯ä¸ºäº†æ¼”ç¤ºgcæ—¶æœºpublic class M { @Override protected void finalize() throws Throwable { System.out.println(\"finalizeæ–¹æ³•è¢«è°ƒç”¨\"); super.finalize(); }} 123456789101112131415public class å¼ºå¼•ç”¨ { public static void main(String[] args) throws IOException { M m = new M(); System.gc(); System.out.println(m); //å­˜åœ¨å¼ºå¼•ç”¨ï¼Œgcä¸ä¼šå›æ”¶ m = null; System.gc(); System.out.println(m); //å¼•ç”¨æ²¡äº†ï¼Œgcå›æ”¶ System.in.read(); //é˜»å¡mainçº¿ç¨‹ï¼Œåƒåœ¾å›æ”¶çº¿ç¨‹éœ€è¦æ—¶é—´ }} æ‰“å°ç»“æœå¦‚ä¸‹ å¼•ç”¨.M@14ae5a5finalizeæ–¹æ³•è¢«è°ƒç”¨null è½¯å¼•ç”¨(SoftReference)è½¯å¼•ç”¨å¯¹è±¡ä¼šåœ¨å †å†…å­˜ä¸è¶³æ—¶å›æ”¶ é€‚åˆåšç¼“å­˜ åœ¨å¼€å§‹å®éªŒä¹‹å‰ï¼Œå…ˆå°†å³ä¸Šè§’runæŒ‰é’®å·¦è¾¹çš„æœ¬ç±»åçš„væŒ‰é’®é€‰æ‹©Edit Configurationsåœ¨vm optionsæ·»åŠ -Xmx20Mï¼Œè¡¨ç¤ºå°†å †æœ€å¤§å€¼è®¾ç½®ä¸º20M 1234567891011121314151617181920/** * è½¯å¼•ç”¨å¯¹è±¡ä¼šåœ¨å †å†…å­˜ä¸è¶³æ—¶å›æ”¶ * é€‚åˆåšç¼“å­˜ */public class è½¯å¼•ç”¨ { public static void main(String[] args) { SoftReference&lt;byte[]&gt; m = new SoftReference&lt;&gt;(new byte[1024 * 1024 * 10]); //å®šä¹‰ä¸€ä¸ªå 10Mçš„æ•°ç»„ System.out.println(m.get()); //æœ‰å€¼ System.gc(); try { Thread.sleep(1000); //ç¡1sä¿è¯gcå®Œ } catch (InterruptedException e) { e.printStackTrace(); } System.out.println(m.get()); //å› ä¸ºå¯¹å†…å­˜å……è¶³ï¼Œå‘ç°å¹¶æ²¡æœ‰è¢«gcå›æ”¶ byte[] b = new byte[1024 * 1024 * 11]; //å®šä¹‰ä¸€ä¸ª11Mçš„æ•°ç»„ï¼Œç”±äºæ­¤æ—¶10+11å¤§äº20Mï¼Œjvmè‡ªåŠ¨gcå›æ”¶ System.out.println(m.get()); //è¢«å›æ”¶ï¼Œä¸ºnull }} æ‰“å°ç»“æœä¸º [B@14ae5a5[B@14ae5a5null å¦‚æœbçš„å†…å­˜å¤ªå¤§ï¼Œå †å†…å­˜è£…ä¸ä¸‹ï¼Œé‚£ä¹ˆä¼šæŠ¥OutOfMemoryError: Java heap spaceå¼‚å¸¸ å¼±å¼•ç”¨(WeakReference)å¼±å¼•ç”¨æ˜¯é‡åˆ°gcå°±å›æ”¶ 12345678910public class å¼±å¼•ç”¨ { public static void main(String[] args) { WeakReference&lt;M&gt; m = new WeakReference&lt;&gt;(new M()); System.out.println(m.get()); //æœ‰å€¼ System.gc(); System.out.println(m.get()); //ä¸ç®¡å†…å­˜æ˜¯å¦å……è¶³ï¼Œé‡åˆ°gcå°±å›æ”¶ }} ThreadLocalä¸­çš„Entryå¼±å¼•ç”¨å¾ˆç»å…¸çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯ThreadLocalä¸­çš„Entryï¼Œåœ¨ä¹‹å‰çš„åšå®¢ä¸­æœ‰åˆ†æThreadLocalä¸ºä»€ä¹ˆæ˜¯å¼±å¼•ç”¨ï¼Œè¿™é‡Œå†æ¬¡å¤ä¹ ä¸€ä¸‹ å½“æˆ‘ä»¬ThreadLocal tl = new ThreadLocal();çš„æ—¶å€™ï¼Œå®é™…ä¸Šæœ‰ä¸¤ä¸ªå¼•ç”¨æŒ‡å‘äº†ThreadLocalï¼Œä¸€ä¸ªæ˜¯tlæœ¬èº«æ˜¯ä¸€ä¸ªå¼ºå¼•ç”¨ï¼Œä¸€ä¸ªæ˜¯getMap(å½“å‰çº¿ç¨‹)å¾—åˆ°çš„ThreadLocalMapï¼Œå®ƒé‡Œé¢çš„Entryçš„keyæ˜¯ä¸€ä¸ªå¼±å¼•ç”¨ï¼ŒæŒ‡å‘äº†ThreadLocalã€‚ ä¸ºä»€ä¹ˆè¿™é‡Œè¦ä½¿ç”¨å¼±å¼•ç”¨å‘¢ï¼Ÿ å¦‚æœæ˜¯å¼ºå¼•ç”¨ï¼Œåˆ™tlå’Œkeyéƒ½æ˜¯å¼ºå¼•ç”¨ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯æ“ä½œtlï¼Œä¹Ÿå°±æ˜¯tl = nullï¼Œä½†æ˜¯keyä¾ç„¶å­˜åœ¨å¼ºå¼•ç”¨ï¼Œäºæ˜¯å¯¼è‡´æ— æ³•è¢«gcå›æ”¶ï¼Œå­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ã€‚ ä½¿ç”¨å¼±å¼•ç”¨å°±ä¸ä¼šå†…å­˜æ³„æ¼ï¼Ÿ ä¸æ˜¯çš„ï¼Œå³ä½¿keyæ˜¯å¼±å¼•ç”¨ï¼Œä½†æ˜¯å¦‚æœkeyè¢«å›æ”¶å˜ä¸ºnullï¼Œvalueæ— æ³•è¢«è®¿é—®ï¼Œä¾ç„¶å­˜åœ¨å†…å­˜æ³„æ¼é—®é¢˜ã€‚è§£å†³çš„åŠæ³•æ˜¯ä¸»åŠ¨è°ƒç”¨tl.remove(); è™šå¼•ç”¨(PhantomReference)ä¸€èˆ¬æ²¡äººç”¨ï¼Œåªæœ‰å†™ç±»åº“çš„äººä¼šç”¨ æ— è®ºæ˜¯å¦è¢«å›æ”¶ï¼Œéƒ½getä¸åˆ°å€¼ 12345678public class è™šå¼•ç”¨ { private static final ReferenceQueue&lt;M&gt; QUEUE = new ReferenceQueue&lt;&gt;(); //å›æ”¶é˜Ÿåˆ— public static void main(String[] args) { PhantomReference&lt;M&gt; m = new PhantomReference&lt;&gt;(new M(), QUEUE); System.out.println(m.get()); //null }} ä½œç”¨æ˜¯å›æ”¶å‰æœ‰ä¸ªé€šçŸ¥ï¼Œç›¸å½“äºä¸€ä¸ªé’©å­å‡½æ•°ï¼Œå †å†…å­˜ä¸è¶³çš„æ—¶å€™å¹¶æ²¡æœ‰ç›´æ¥å›æ”¶ï¼Œè€Œæ˜¯æ”¾è¿›QUEUEå›æ”¶é˜Ÿåˆ—é‡Œï¼Œgcä¼šä¸æ–­åˆ¤æ–­é˜Ÿåˆ—é‡Œæ˜¯å¦æœ‰å€¼ï¼Œæœ‰åˆ™pollï¼Œè¿™å°±ç›¸å½“äºä¸€ä¸ªé€šçŸ¥ï¼Œgcå¦‚æœæƒ³ï¼Œå¯ä»¥å¯¹pollå‡ºæ¥çš„è¿™ä¸ªè™šå¼•ç”¨åšä¸€äº›ç‰¹æ®Šå¤„ç† 1234567891011121314151617181920212223242526272829303132333435363738public class è™šå¼•ç”¨ { private static final List&lt;Object&gt; LIST = new LinkedList&lt;&gt;(); private static final ReferenceQueue&lt;M&gt; QUEUE = new ReferenceQueue&lt;&gt;(); //å›æ”¶é˜Ÿåˆ— public static void main(String[] args) { PhantomReference&lt;M&gt; m = new PhantomReference&lt;&gt;(new M(), QUEUE); System.out.println(m.get()); //null new Thread(()-&gt;{ while (true){ try { LIST.add(new byte[1024 * 1024 * 2]); Thread.sleep(500); } catch (InterruptedException e) { e.printStackTrace(); Thread.currentThread().interrupt(); } System.out.println(m.get()); } }).start(); //æ¨¡æ‹Ÿç®€æ˜“åƒåœ¾å›æ”¶çº¿ç¨‹ new Thread(()-&gt;{ while (true){ //åƒåœ¾å›æ”¶çº¿ç¨‹ä¸æ–­æ£€æŸ¥é˜Ÿåˆ—é‡Œé¢æœ‰æ²¡æœ‰ Reference&lt;? extends M&gt; poll = QUEUE.poll(); if (poll != null){ System.out.println(\"jvmå›æ”¶è™šå¼•ç”¨å¯¹è±¡\" + poll); } } }).start(); try { Thread.sleep(500); } catch (InterruptedException e) { e.printStackTrace(); } }} å®é™…åº”ç”¨ä¸­ï¼Œè™šå¼•ç”¨å¸¸è¢«ç”¨äºç®¡ç†ç›´æ¥å†…å­˜(å †å¤–å†…å­˜) å½“ç„¶ï¼Œå †å¤–å†…å­˜ä¸ä¸€å®šæ˜¯ç¡¬ä»¶ï¼Œåªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œç¡¬ä»¶é€šè¿‡é©±åŠ¨ç¨‹åºåŠ è½½åˆ°å†…å­˜ä¸­æ‰èƒ½ä¾›æ“ä½œç³»ç»Ÿè°ƒç”¨ï¼Œä»¥å‰JVMæ— æ³•ç›´æ¥æ§åˆ¶å †å¤–å†…å­˜ï¼Œ éœ€è¦æ‹·è´åˆ°JVMçš„å †ä¸­æ‰èƒ½æ§åˆ¶ï¼Œè¿™ç§æ‹·è´éœ€è¦ç³»ç»Ÿè°ƒç”¨ï¼Œæ¶‰åŠç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„è½¬æ¢ é›¶æ‹·è´æŠ€æœ¯javaçš„nioæå‡ºäº†zero-copyé›¶æ‹·è´æŠ€æœ¯ï¼Œå¯ä»¥ç®¡ç†å †å¤–å†…å­˜ 1ByteBuffer buffer = ByteBuffer.allocateDirect(1024); è¿™ä¸ªallocateDirectæ–¹æ³•æºç å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯DirectByteBufferï¼Œè¿™ä¸ªDirectByteBufferä»€ä¹ˆæ—¶å€™å›æ”¶çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªç±»ä¸‹æœ‰ä¸ªCleanerï¼Œå°±è¿™ä¸ªåå­—ä¹Ÿæ‰å¾—åˆ°æ˜¯ç”¨æ¥è´Ÿè´£å›æ”¶å¯¹è±¡çš„ 12345678910111213class DirectByteBuffer extends MappedByteBuffer implements DirectBuffer{ ... private final Cleaner cleaner; public Cleaner cleaner() { return cleaner; } public static ByteBuffer allocateDirect(int capacity) { return new DirectByteBuffer(capacity); } ...} ç»§ç»­è·Ÿè¿›Cleanerç±» 123public class Cleaner extends PhantomReference&lt;Object&gt; { private static final ReferenceQueue&lt;Object&gt; dummyQueue = new ReferenceQueue(); ... çœ‹æºç è®²ç©¶ç‚¹åˆ°å³æ­¢ï¼Œæ˜¯ä¸æ˜¯è·Ÿå’±ä»¬è‡ªå·±å†™çš„ æ¨¡æ‹Ÿç®€æ˜“åƒåœ¾å›æ”¶çº¿ç¨‹ ä¸€æ¨¡ä¸€æ · æœ‰ç‚¹ç›¸ä¼¼ï¼Ÿ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªcleanerå°±æ˜¯é€šè¿‡è™šå¼•ç”¨å¯¹å †å¤–å†…å­˜è¿›è¡Œè·Ÿè¸ªã€‚ å‚è€ƒ bilibilié©¬å£«å…µè¯´å¼±å¼•ç”¨","link":"/Java%E5%9F%BA%E7%A1%80/java%E4%B8%AD%E7%9A%84%E5%BC%95%E7%94%A8/"},{"title":"linuxä¸‹mysqlçš„å®‰è£…","text":"ç½‘ä¸Šä¸€å¤§å †ä¹±ä¸ƒå…«ç³Ÿçš„ï¼Œç‰¹åˆ«å¤æ‚ï¼Œè¿˜è‡ªå·±ä¸‹è½½ï¼Œè‡ªå·±ç¼–è¯‘ï¼Œåˆè‡ªå·±å†™é…ç½®æ–‡ä»¶ã€‚æˆ‘è·Ÿä½ è¯´ï¼šæ²¡å¿…è¦ï¼å‡ ä¸ªå‘½ä»¤å°±æå®šäº† è·Ÿç€è¿™ä¸ªèŠ‚å¥æ¥ æ·»åŠ ä»“åº“ 1wget -i -c https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm å®‰è£…ä»“åº“ 1yum -y install mysql80-community-release-el7-3.noarch.rpm å®‰è£…mysql 1sudo yum install mysql-community-server å¯åŠ¨mysqlæœåŠ¡ 1sudo service mysqld start æŸ¥çœ‹mysqlçŠ¶æ€ 1sudo service mysqld status ç¬¬ä¸€è¡Œç»¿ç‚¹ ç¬¬äºŒè¡Œloadedä¸ºenabled ç¬¬ä¸‰è¡Œactive(runing)å°±æˆåŠŸ æŸ¥çœ‹åˆå§‹å¯†ç  1sudo grep 'temporary password' /var/log/mysqld.log @localhost: åˆå§‹å¯†ç  ä½¿ç”¨åˆå§‹å¯†ç ç™»å½• 1mysql -u root -p ä¿®æ”¹å¯†ç ï¼ˆå¯ä»¥è‡ªå·±å†™å¯†ç ï¼Œä½†æ˜¯è¦è¾¾åˆ°å¤æ‚åº¦è¦æ±‚ï¼Œå¦‚æœæƒ³ç”¨ç®€å•ç‚¹çš„å¯†ç ï¼Œè¯·å…ˆç”¨ä¸‹é¢è¿™ä¸ªå¯†ç ç™»å½•è¿›å»ï¼Œå†ä¿®æ”¹å¯†ç å¤æ‚åº¦ï¼‰ 1ALTER USER 'root'@'localhost' IDENTIFIED BY '123@@@aaa...'; ä¿®æ”¹å¯†ç å¤æ‚åº¦ 12set global validate_password.policy=0;set global validate_password.length=1; é‡å¤æ­¥éª¤8ï¼Œå†æ¬¡ä¿®æ”¹å¯†ç ï¼Œè¿™æ¬¡çš„å¯ä»¥ä½¿ç”¨ç®€å•å¯†ç å•¦ï¼ˆ123456ä¹Ÿå¯ä»¥ï¼‰ å…è®¸è¿œç¨‹è¿æ¥ 1update user set host = '%' where user = 'root'; å…¶ä»–æ‚é¡¹ å…³é—­é˜²ç«å¢™ 1systemctl stop firewalld.service è¿˜æœ‰ä¸€äº›é˜¿é‡Œäº‘å•Šåä¸ºäº‘å•Šè¦åœ¨ç½‘ç«™æ§åˆ¶å°å…³é—­ å¼€æ”¾å®‰å…¨ç»„ç«¯å£ å…¶ä»–é”™è¯¯å‚è€ƒ https://www.cnblogs.com/z0909y/p/10772854.html","link":"/Mysql/linux%E4%B8%8Bmysql%E7%9A%84%E5%AE%89%E8%A3%85/"},{"title":"markdownä½¿ç”¨","text":"123# ä¸€çº§æ ‡é¢˜ï¼ˆæ³¨æ„ç¬¦å·åé¢æœ‰ç©ºæ ¼ï¼‰## äºŒçº§æ ‡é¢˜... ä¸€çº§æ ‡é¢˜äºŒçº§æ ‡é¢˜ 1&gt; å¼•ç”¨ï¼ˆæ³¨æ„ç¬¦å·åé¢æœ‰ç©ºæ ¼ï¼‰ å¼•ç”¨ 1231. æœ‰åºåˆ—è¡¨1ï¼ˆæ³¨æ„ç¬¦å·åé¢æœ‰ç©ºæ ¼ï¼‰2. æœ‰åºåˆ—è¡¨2... æœ‰åºåˆ—è¡¨1 æœ‰åºåˆ—è¡¨2 123- æ— åºåˆ—è¡¨ï¼ˆæ³¨æ„ç¬¦å·åé¢æœ‰ç©ºæ ¼ï¼‰- æ— åºåˆ—è¡¨... æ— åºåˆ—è¡¨ æ— åºåˆ—è¡¨ 1*æ–œä½“* æ–œä½“ 1**åŠ ç²—** åŠ ç²— 1~~åˆ é™¤å­—ä½“~~ åˆ é™¤å­—ä½“ 1---åˆ†å‰²çº¿ï¼ˆä¸‰ä¸ªåŠä»¥ä¸Šï¼Œæ— éœ€ç©ºæ ¼ï¼Œä½†æ˜¯åé¢ä¸èƒ½è·Ÿä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯å•ç‹¬å ä¸€è¡Œï¼‰ 1`int a = 1;` å•è¡Œä»£ç ï¼ˆç¬¦å·æ˜¯é”®ç›˜å·¦ä¸Šè§’escä¸‹é¢çš„é¡¿å·ï¼Œä¹Ÿå°±æ˜¯å’Œ~æ˜¯åŒä¸€ä¸ªé”®çš„ç¬¦å·ï¼‰ int a = 1; 12345ä¸‰ä¸ªåå¼•å·int a = 1;int b = 1;ä¸‰ä¸ªåå¼•å·å¤šè¡Œä»£ç å¯ä»¥åœ¨ä¸Šé¢é‚£è¡Œçš„åå¼•å·åé¢åŠ ä¸Šè¯­è¨€ï¼Œå¯ä»¥è‡ªåŠ¨é«˜äº® 12int a = 1;int b = 1; 1[æ’å…¥ä¸€ä¸ªé“¾æ¥](http://wjw/today) æ’å…¥ä¸€ä¸ªé“¾æ¥ 123ä½¿ç”¨å›¾åºŠæ’å…¥å›¾ç‰‡![éšä¾¿èµ·å›¾ç‰‡åå­—](å›¾åºŠé“¾æ¥)æ¨èå…ç™»å½•çš„è·¯è¿‡å›¾åºŠhttps://imgchr.com/","link":"/Others/markdown%E4%BD%BF%E7%94%A8/"},{"title":"javaä¸»åŠ¨å‘é€httpè¯·æ±‚","text":"åŸæ¥éƒ½æ˜¯æµè§ˆå™¨å‘é€httpè¯·æ±‚ï¼Œjavaæ¥æ”¶ã€‚javaè¿™è¾¹ä¹Ÿæ˜¯å¯ä»¥ä¸»åŠ¨å‘é€httpè¯·æ±‚çš„ã€‚æœ‰ä¸‰ç§æ–¹å¼ HttpClient OKHttp RestTemplate 1. HttpClientè¿™æ˜¯apacheçš„ä¸€ä¸ªåº“ï¼Œå…ˆå¯¼å…¥ 12345&lt;dependency&gt; &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt; &lt;artifactId&gt;httpclient&lt;/artifactId&gt; &lt;version&gt;4.5.1&lt;/version&gt;&lt;/dependency&gt; çœ‹çœ‹è¿™ä¸ªå·¥å…·ç±»ï¼Œç›´æ¥å¤åˆ¶è¿‡å»ç”¨å°±è¡Œ 1234567891011121314151617181920212223242526272829303132333435363738394041public class HttpTests { CloseableHttpClient httpClient; //é€šè¿‡jacksonå¤„ç†jsonæ•°æ® private static final ObjectMapper MAPPER = new ObjectMapper(); @Before public void init() { httpClient = HttpClients.createDefault(); } @Test public void testGet() throws IOException { HttpGet request = new HttpGet(\"http://www.baidu.com\"); String response = this.httpClient.execute(request, new BasicResponseHandler()); System.out.println(response); } @Test public void testPost() throws IOException { HttpPost request = new HttpPost(\"https://www.oschina.net/\"); request.setHeader(\"User-Agent\", \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36\"); String response = this.httpClient.execute(request, new BasicResponseHandler()); System.out.println(response); } @Test public void testGetPojo() throws IOException { HttpGet request = new HttpGet(\"http://localhost:8888/user/1\"); String response = this.httpClient.execute(request, new BasicResponseHandler()); System.out.println(response); //responseæ˜¯jsonå­—ç¬¦ä¸² User user = MAPPER.readValue(response, User.class); System.out.println(user); //useræ˜¯å¯¹è±¡ String value = MAPPER.writeValueAsString(user); System.out.println(value); //åˆå˜å›jsonå­—ç¬¦ä¸² }} 2. RestTemplateè¿™æ˜¯springè‡ªå¸¦çš„ï¼Œåœ¨spring-webåŒ…ä¸­ å†™åœ¨äº†teståŒ…ä¸‹ï¼Œæ‰€ä»¥æœ‰äº†ä¸¤ä¸ªæ³¨è§£ï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œç›´æ¥å¤åˆ¶ç”¨å³å¯ã€‚ 12345678910111213141516@RunWith(SpringRunner.class)@SpringBootTest(classes = HttpDemoApplication.class)public class HttpDemoApplicationTests { //é™¤äº†httpClientï¼Œspringå®˜æ–¹ä¹Ÿæä¾›äº†ä¸€ä¸ªRestTemplateç”¨äºå‘é€httpè¯·æ±‚ //è¿˜åŒ…æ‹¬äº†åƒjacksonä¸€æ ·å¤„ç†jsonå­—ç¬¦ä¸²åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„åŠŸèƒ½ //è¦é€šè¿‡æœ‰@Congratulationçš„javaç±»æ³¨å…¥ï¼Œè¿™ä¸ªæµ‹è¯•ç”¨ä¾‹åœ¨HttpDemoApplicationå¼•å¯¼ç±»ä¸­ç”±@Beanæ³¨å…¥ï¼Œå¯ä»¥è¿‡å»çœ‹çœ‹ @Autowired private RestTemplate restTemplate; @Test public void httpGet() { User user = this.restTemplate.getForObject(\"http://localhost:8888/user/1\", User.class); System.out.println(user); }}","link":"/Others/java%E4%B8%BB%E5%8A%A8%E5%8F%91%E9%80%81http%E8%AF%B7%E6%B1%82/"},{"title":"ribbonå’Œhytrixè¶…æ—¶è¸©å‘è®°å½•","text":"åœ¨å­¦ä¹ å•†åŸé¡¹ç›®æ—¶ï¼Œæ¥è§¦åˆ°äº†æœç´¢ï¼Œå®Œäº†ä»¥åæˆ‘çœ‹ç€è¿™æœç´¢æ—¶çµæ—¶ä¸çµæ ¹æœ¬æ²¡åŠæ³•å®é™…ä½¿ç”¨ï¼Œçœ‹ç€æ§åˆ¶å°æŠ¥ç€zuulå’Œhytrixçš„é”™è¯¯å’Œè­¦å‘Šï¼Œé™·å…¥äº†æ·±æ€â€¦ ä¸»è¦æ˜¯æ¶‰åŠä»¥ä¸‹å‡ ä¸ªé”™è¯¯å’Œè­¦å‘Š ribbonè¶…æ—¶æ—¶é—´è®¾ç½®å¤ªçŸ­ï¼ŒæŠ¥å¦‚ä¸‹é”™è¯¯ 1234567com.netflix.zuul.exception.ZuulException: at org.springframework.cloud.netflix.zuul.filters.post.SendErrorFilter.findZuulException(SendErrorFilter.java:114) ~[spring-cloud-netflix-zuul-2.0.2.RELEASE.jar:2.0.2.RELEASE] at org.springframework.cloud.netflix.zuul.filters.post.SendErrorFilter.run(SendErrorFilter.java:76) ~[spring-cloud-netflix-zuul-2.0.2.RELEASE.jar:2.0.2.RELEASE] at com.netflix.zuul.ZuulFilter.runFilter(ZuulFilter.java:117) [zuul-core-1.3.1.jar:1.3.1] at com.netflix.zuul.FilterProcessor.processZuulFilter(FilterProcessor.java:193) [zuul-core-1.3.1.jar:1.3.1] at com.netflix.zuul.FilterProcessor.runFilters(FilterProcessor.java:157) [zuul-core-1.3.1.jar:1.3.1] ... åŸå› ï¼šé€šè¿‡æºç å¯ä»¥çœ‹åˆ°ribbonçš„é»˜è®¤è¶…æ—¶æ—¶é—´æ˜¯1sï¼Œæ¯•ç«Ÿè¿˜æ˜¯è¦æŸ¥æ‰¾æ•°æ®åº“çš„ï¼Œæ—¶é—´æ‘†åœ¨é‚£é‡Œï¼ŒæœåŠ¡å™¨æ€§èƒ½åˆä¸æ˜¯å¾ˆå¥½ï¼Œä¸è®¾ç½®æˆ–è€…è®¾ç½®çš„æ—¶é—´å¤ªçŸ­çš„è¯å°±å®¹æ˜“å‡ºç°è¿™ä¸ªé—®é¢˜äº† è§£å†³æ–¹æ¡ˆ zuulç½‘å…³é‚£ä¸ªymlè®¾ç½®ä¸€ä¸‹ribbonè¶…æ—¶æ—¶é—´ï¼Œè¿™é‡Œæˆ‘è®¾ç½®æˆäº†30000 123ribbon: ReadTimeout: 30000 ConnectTimeout: 30000 ä¹Ÿä¸æ˜¯è¶Šé•¿è¶Šå¥½ï¼Œå¦‚æœçœŸçš„å‘ç”Ÿäº†é”™è¯¯ï¼Œä¸€ç›´åœ¨ç­‰ï¼Œå¦‚æœè¿™æ—¶å€™ç”¨æˆ·å†å‘é€å…¶ä»–è¯·æ±‚ï¼Œå®¹æ˜“å‡ºç°å¦‚ä¸‹é”™è¯¯ 1ä½ çš„ä¸»æœºä¸­çš„è½¯ä»¶ä¸­æ­¢äº†ä¸€ä¸ªå·²å»ºç«‹çš„è¿æ¥ ç»¼ä¸Šï¼Œè€ƒè™‘åˆ°æœåŠ¡å™¨çš„æ€§èƒ½ï¼ˆè¿™é‡Œæ˜¯ç¬”è®°æœ¬ï¼‰å’Œæ•°æ®é‡ï¼ˆè¿™é‡Œæ˜¯åƒï¼‰ï¼Œæˆ‘ä¸ªäººè®¤ä¸º30000-40000æ˜¯æ¯”è¾ƒåˆç†çš„ï¼Œç”šè‡³å¯ä»¥å†å¤§ä¸€ç‚¹ è¿˜æœ‰ä¸€ä¸ªæ˜¯hytrixè¶…æ—¶æ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®å¥½ï¼ˆå¤ªçŸ­æˆ–è€…å°äºribbonæ€»è¶…æ—¶æ—¶é—´ï¼‰ï¼Œé€ æˆæŸ¥è¯¢ç‰¹åˆ«æ…¢ï¼Œç”šè‡³è§¦å‘äº†hytrixçš„ç†”æ–­æœºåˆ¶ï¼Œè¿™ä¸ªé—®é¢˜æ¯”è¾ƒæ™®éï¼Œç½‘ä¸Šä¹Ÿæœ‰ä¸€å †çš„è§£å†³åŠæ³•ï¼Œè¿™ä¸ªè­¦å‘Šæ˜¯è¿™æ ·çš„ 1The Hystrix timeout of 60000ms for the command search-service is set lower than the combination of the Ribbon read and connect timeout, 120000ms. æ„æ€æ˜¯hytrixè¶…æ—¶æ—¶é—´å¤§äºäº†ribbonè¶…æ—¶æ—¶é—´ï¼Œå¯æ˜¯æˆ‘ä»¬ribbonè®¾ç½®çš„æ˜æ˜å°±æ˜¯30000å‘€ï¼Œè¿™ä¸ª120000æ˜¯ä»€ä¹ˆï¼Ÿå…¶å®è¿™ä¸ª120000æ˜¯è¯»å†™æ€»æ—¶é—´ï¼Œå…·ä½“è®¡ç®—æ–¹å¼æ˜¯(30000+30000)*(0+1)*(1+1)=120000 æˆ‘ä»¬å¯ä»¥åœ¨æºç ä¸­çœ‹åˆ° å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠhytrixçš„è¶…æ—¶æ—¶é—´è®¾ç½®æˆå¤§äºè¿™ä¸ªå€¼ ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘æœ€ç»ˆçš„ymlé…ç½®å¦‚ä¸‹ 12345678910ribbon: ReadTimeout: 30000 ConnectTimeout: 30000hystrix: command: default: execution: isolation: thread: timeoutInMilliseconds: 120000 # è®¾ç½®hystrixçš„è¶…æ—¶æ—¶é—´ä¸º120000ms æ„Ÿè°¢è¿™ä¸¤ç¯‡åšå®¢çš„æŒ‡å¯¼ https://blog.csdn.net/a405828/article/details/107302984 https://blog.csdn.net/lidew521/article/details/84661158","link":"/SpringCloud/ribbon%E5%92%8Chytrix%E8%B6%85%E6%97%B6%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"},{"title":"mavenç¬”è®°","text":"1. mavenæ¦‚å¿µmavenæ˜¯ä¸€ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œèƒ½å¸®åŠ©é¡¹ç›®è§„èŒƒçš„æ„å»ºï¼ˆè§„å®šäº†é¡¹ç›®çš„ç»“æ„å’Œæ–¹ä¾¿çš„æ‰“åŒ…ï¼‰ä»¥åŠæ–¹ä¾¿çš„ç®¡ç†libä¸‹çš„jaråŒ… å¦‚æœæ‰€æœ‰çš„jaråŒ…éƒ½æ”¾è¿›ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆé¡¹ç›®å ç”¨ç©ºé—´å°±ä¼šå˜å¾—å¾ˆå¤§ï¼Œé€šå¸¸æ¥è¯´èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡ï¼‰&gt; lib(jar) &gt; javaä»£ç ï¼Œå¾ˆå¤šæ—¶å€™jaråŒ…è¿œè¿œå¤§äºäº†javaæ–‡ä»¶ï¼ˆæ¯•ç«Ÿåªæ˜¯æ–‡æœ¬ï¼‰ï¼Œè€Œmavené€šè¿‡æœ¬åœ°çš„ä¸€ä¸ªä»“åº“ä¸“é—¨å­˜æ”¾jaråŒ…ï¼Œç„¶åä¸åŒçš„é¡¹ç›®éƒ½ä»æœ¬åœ°ä»“åº“ä¸­æ‹¿jaråŒ…ï¼Œè€Œé¡¹ç›®ä¸­åªéœ€è¦ç»™å‡ºjaråŒ…çš„åæ ‡ï¼Œå°±æ¯”è¾ƒåˆç†ã€‚ å¦‚æœåœ¨æœ¬åœ°ä»“åº“ï¼ˆç”µè„‘é‡Œå­˜æ”¾jaråŒ…çš„ç›®å½•ï¼‰ä¸­æ‰¾ä¸åˆ°jaråŒ…ï¼Œé‚£ä¹ˆä¼šåˆ°mavençš„ä¸­å¤®ä»“åº“ï¼ˆå°±æ˜¯é‚£ä¸ªmavenå®˜æ–¹çš„ç½‘ç«™ï¼Œé‚£é‡Œæœ‰åŸºæœ¬ä¸Šæ‰€æœ‰çš„å¼€æºåº“ï¼‰æ‰¾ï¼Œè¿˜æ‰¾ä¸åˆ°å°±åˆ°è¿œç¨‹ä»“åº“ï¼ˆå±€åŸŸç½‘çš„æœåŠ¡å™¨ï¼‰æ‰¾ã€‚ 2. mavené¡¹ç›®çš„ç»“æ„src/main/javaï¼šæºä»£ç  src/main/resourcesï¼šé…ç½®æ–‡ä»¶ src/main/webappï¼šjsï¼Œcssï¼Œweb.xmlï¼Œhtmlï¼Œå›¾ç‰‡ç­‰ src/test/javaï¼šæµ‹è¯•ä»£ç ï¼ˆjunitï¼‰ src/test/resourcesï¼šæµ‹è¯•ç”¨çš„é…ç½®å’Œèµ„æºæ–‡ä»¶ 3. ä½¿ç”¨å‰çš„ä¸€äº›é…ç½® æ³¨æ„å°†binç›®å½•æ·»åŠ å…¥ç¯å¢ƒå˜é‡ conf/settings.xmlä¸­å°† &lt;localRepository&gt;G:\\apache-maven-3.6.0\\myLocalRepository&lt;/localRepository&gt; è¡¥åœ¨å¯¹åº”çš„æ ‡ç­¾æ³¨é‡Šä¸‹é¢ ä¸‹è½½é—®é¢˜ è®¾ç½®ä¸‹é¢è¿™ä¸ªé€‰é¡¹åï¼Œä¼šå…ˆä»æœ¬åœ°æ‰¾jarï¼Œå†åˆ°ä¸­å¤®ä»“åº“æ‰¾jar -DarchetypeCatalog=internal https://www.cnblogs.com/del88/p/6286887.html æˆ–è€…åˆ›å»ºé¡¹ç›®çš„æ—¶å€™ 4. å…³äºscopeæ¯”å¦‚servlet,ç”±äºmavenè‡ªå¸¦servletï¼Œä½†æ˜¯å†™ä»£ç çš„æ—¶å€™æˆ‘ä»¬å¿…é¡»è¦javaxçš„servletï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œå› æ­¤æˆ‘ä»¬å†™ä»£ç æ—¶ç”¨javax.servletï¼Œç¼–è¯‘æ—¶ç”¨mavençš„servletï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŒ‡å®šèŒƒå›´ &lt;scope&gt;provided&lt;/scope&gt;ä»£è¡¨å†™ä»£ç æ—¶ç”Ÿæ•ˆ 5. mavenæ¢æºåœ¨mavenå®‰è£…ç›®å½•/conf/settings.xmlæ–‡ä»¶ä¸‹ &lt;mirrors&gt;æ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç  é˜¿é‡Œå·´å·´æºï¼ˆå»ºè®®ä¸è¦æ•´é‚£äº›èŠ±é‡Œèƒ¡å“¨çš„æºï¼‰ 123456&lt;mirror&gt; &lt;id&gt;nexus-aliyun&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;name&gt;Nexus aliyun&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;&lt;/mirror&gt; æ•ˆæœå¦‚ä¸‹ï¼šï¼ˆå¤§æ¦‚140-160è¡Œè¿™é‡Œï¼Œå¯èƒ½æœ‰ç‚¹ä¸åŒï¼‰ 6. mavenä¾èµ–æŠ¥çº¢çº¿çš„ç»ˆæè§£å†³åŠæ³•è¿™å‡ ä¸ªæŒ‰é’®ä¾æ¬¡ç‚¹å‡ ä¸‹ï¼Œå°±ä¼šé‡æ–°ä¸‹è½½äº†ï¼Œç„¶åæ‰¾åˆ°æŠ¥é”™çš„é‚£å‡ ä¸ªdependencyå‰ªåˆ‡å†ç²˜è´´ä¸€éï¼ŒåŒ…å¥½ï¼ï¼ï¼ï¼ 7. mavençˆ¶å­å·¥ç¨‹é™¤äº†mavençš„åŒ…ç®¡ç†ï¼ˆå¯ä»¥åœ¨ä¸åŒçš„å·¥ç¨‹ä¸‹é‡å¤ä½¿ç”¨åŒ…ï¼‰ï¼Œè¿˜æœ‰mavenå¯¹ä»£ç ä¹Ÿå®ç°äº†å¯é‡ç”¨ï¼Œä¸»è¦ä½“ç°åœ¨åŒä¸€ä¸ªé¡¹ç›®é€šå¸¸æœ‰å–å®¶ç‰ˆä¹°å®¶ç‰ˆï¼Œç®¡ç†å‘˜ç‰ˆå’Œæ™®é€šç”¨æˆ·ç‰ˆç­‰ç­‰ä¸åŒçš„è§’è‰²ç‰ˆæœ¬ï¼Œè¿™äº›ç‰ˆæœ¬éƒ½æ˜¯é’ˆå¯¹åŒä¸€ä¸ªé¡¹ç›®ï¼Œæ‰€ä»¥daoå±‚çš„ä»£ç ï¼ˆå¦‚findAll, findByIdï¼‰ä¹‹ç±»çš„éƒ½æ˜¯æŸ¥è¯¢åŒæ ·çš„ä¸œè¥¿ï¼Œå› æ­¤è¿™éƒ¨åˆ†ä»£ç å¯ä»¥å•ç‹¬æŠ½ç¦»æˆå­å·¥ç¨‹ã€‚ 7.1 çˆ¶å­å·¥ç¨‹ä½¿ç”¨æ­¥éª¤ çˆ¶å·¥ç¨‹ å…¶å®åªéœ€è¦ä¸€ä¸ªpom.xmlï¼Œæ‰€ä»¥new projectä¹Ÿå¥½new moduleä¹Ÿè¡Œã€‚ç„¶ååˆ æ‰srcç›®å½•ã€‚ä½œç”¨å°±æ˜¯åªç®¡ç†åæ ‡ åˆ›å»ºå­æ¨¡å— æ¯”å¦‚æˆ‘ä»¬è¿™é‡Œåˆ›å»ºdaoå±‚ï¼Œå› ä¸ºä¸è·Ÿé¡µé¢æ‰“äº¤é“ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦webappéª¨æ¶ï¼Œç›´æ¥å¯¹ç€çˆ¶å·¥ç¨‹new moduleï¼ˆæ³¨æ„ä¸æ˜¯å¯¹ç€ideaå·¦ä¸Šè§’file-&gt;newï¼‰ è¿™æ ·ä¸€ä¸ªå­æ¨¡å—å°±åˆ›å»ºå¥½äº†ï¼Œå­æ¨¡å—åœ¨è‡ªå·±çš„pom.xmlä¸­æ·»åŠ &lt;parent&gt;æ ‡ç­¾å°±å¯ä»¥ç”¨çˆ¶æ¨¡å—çš„ä¾èµ–ã€‚ 12345&lt;parent&gt; &lt;groupId&gt;com.wjw.ssm&lt;/groupId&gt; &lt;artifactId&gt;ssm&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; åŒæ ·çš„åˆ›å»ºå‡ºserviceå±‚å’Œwebå±‚ï¼Œå…¶ä¸­åˆ›å»ºwebå±‚æ—¶éœ€è¦é€šè¿‡webappéª¨æ¶åˆ›å»ºï¼Œå¹¶å°†è‡ªå·±pom.xmlä¸­æ— ç”¨çš„ä¾èµ–åˆ æ‰ï¼ˆpackingä»¥ä¸‹çš„éƒ½å¯ä»¥åˆ æ‰ï¼‰ å…³è” serviceè‚¯å®šè¦ç”¨daoé‡Œé¢çš„æ–¹æ³•çš„ï¼Œé‚£ä¹ˆå°±åœ¨serviceä¸­çš„pom.xmlä¸­è¿™æ ·æ·»åŠ  12345&lt;dependency&gt; &lt;groupId&gt;com.wjw&lt;/groupId&gt; &lt;artifactId&gt;maven_day02_dao&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;&lt;/dependency&gt; è¿™ä¸ªä¹Ÿå¥½ç†è§£ï¼Œå…¶å®å¹³æ—¶å¼•ç”¨çš„ä¾èµ–ä¹Ÿä¸è¿‡æ˜¯åˆ«äººå†™çš„ä»£ç è€Œå·²ï¼Œæˆ‘ä»¬è‡ªå·±çš„ä»£ç å½“ç„¶ä¹Ÿå¯ä»¥ä½œä¸ºåˆ«äººçš„åº“ï¼Œåªæ˜¯æ²¡æœ‰æ‰“åŒ…æˆjarè€Œå·². åŸæ¥é¡¹ç›®ä¸­çš„resourcesæ–‡ä»¶å¤¹ä¸‹çš„ä¸œè¥¿ç°åœ¨å¦‚ä½•åˆ†é… ä»¥ssmé¡¹ç›®ä¸ºä¾‹ log4j.propertieså±äºwebæ¨¡å— springmvc.xmlå±äºwebæ¨¡å— applicationContext.xmléœ€è¦åˆ†ä¸º3ä¸ªéƒ¨åˆ† daoæ¨¡å—ï¼šé…ç½®è¿æ¥æ± ï¼Œç”Ÿäº§SqlSessionå·¥å‚ï¼Œæ‰«ææ¥å£åŒ…è·¯å¾„ï¼Œä¸‹é¢ç›´æ¥ç»™å‡ºdaoæ¨¡å—æ‰€éœ€applicationContext.xml 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt; &lt;!--daoå±‚æ•´åˆé…ç½®å¼€å§‹--&gt; &lt;!--é…ç½®è¿æ¥æ± --&gt; &lt;bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\"&gt; &lt;property name=\"driverClassName\" value=\"com.mysql.cj.jdbc.Driver\"/&gt; &lt;property name=\"url\" value=\"jdbc:mysql:///maven\"/&gt; &lt;property name=\"username\" value=\"root\"/&gt; &lt;property name=\"password\" value=\"0751@@@wjw\"/&gt; &lt;/bean&gt; &lt;!--é…ç½®ç”Ÿäº§SqlSessionå·¥å‚ï¼ˆå› ä¸ºSqlSessionæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥é€šè¿‡å·¥å‚æ¥åˆ›å»ºï¼‰--&gt; &lt;bean id=\"sqlSessionFactoryBean\" class=\"org.mybatis.spring.SqlSessionFactoryBean\"&gt; &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt; &lt;!--æ‰«æpojoåŒ…ï¼Œç»™åŒ…ä¸‹æ‰€æœ‰pojoèµ·åˆ«å--&gt; &lt;property name=\"typeAliasesPackage\" value=\"com.wjw.domain\"/&gt; &lt;/bean&gt; &lt;!--æ‰«ææ¥å£åŒ…è·¯å¾„ï¼Œç”ŸæˆåŒ…ä¸‹æ‰€æœ‰æ¥å£çš„ä»£ç†å¯¹è±¡ï¼Œå¹¶ä¸”æ”¾å…¥springå®¹å™¨ä¸­--&gt; &lt;bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\"&gt; &lt;property name=\"basePackage\" value=\"com.wjw.dao\"/&gt; &lt;/bean&gt; &lt;!--daoå±‚æ•´åˆé…ç½®ç»“æŸ--&gt;&lt;/beans&gt; serviceæ¨¡å—ï¼šå¼€å¯æ³¨è§£æ‰«æï¼Œaopç›¸å…³ï¼Œä¸‹é¢ç›´æ¥ç»™å‡ºdaoæ¨¡å—æ‰€éœ€applicationContext.xml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt; &lt;!--servieå±‚é…ç½®æ–‡ä»¶å¼€å§‹--&gt; &lt;!--å¼€å¯æ³¨è§£æ‰«æ--&gt; &lt;context:component-scan base-package=\"com.wjw.service\"/&gt; &lt;!--é€šè¿‡springçš„aopæ¥é…ç½®å£°æ˜å¼äº‹åŠ¡æ§åˆ¶ï¼š å…¶å®å°±ä¸¤ä¸ªäº‹æƒ…ï¼š1.é€šçŸ¥ 2.åˆ‡é¢ ä½†è¿™é‡Œçš„é€šçŸ¥æŒ‡çš„æ˜¯Springè‡ªå¸¦çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œæ‰€ä»¥è¦å…ˆå°†è¿™ä¸ªäº‹åŠ¡ç®¡ç†å™¨çš„beanå¼„å‡ºæ¥ï¼Œå†åŠ å…¥é€šçŸ¥ä¸­--&gt; &lt;!--é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt; &lt;bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\"&gt; &lt;property name=\"dataSource\" ref=\"dataSource\"/&gt; &lt;/bean&gt; &lt;!--é…ç½®é€šçŸ¥--&gt; &lt;tx:advice id=\"advice\" transaction-manager=\"transactionManager\"&gt; &lt;tx:attributes&gt; &lt;tx:method name=\"save*\" propagation=\"REQUIRED\" /&gt; &lt;tx:method name=\"update*\" propagation=\"REQUIRED\"/&gt; &lt;tx:method name=\"delete*\" propagation=\"REQUIRED\"/&gt; &lt;tx:method name=\"find*\" read-only=\"true\"/&gt; &lt;tx:method name=\"*\" propagation=\"REQUIRED\"/&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; &lt;!--é…ç½®åˆ‡é¢--&gt; &lt;aop:config&gt; &lt;aop:pointcut id=\"pt1\" expression=\"execution(* com.wjw.service.impl.*.*(..))\"/&gt; &lt;aop:advisor advice-ref=\"advice\" pointcut-ref=\"pt1\"/&gt; &lt;/aop:config&gt; &lt;!--servieå±‚é…ç½®æ–‡ä»¶ç»“æŸ--&gt;&lt;/beans&gt; webæ¨¡å—ï¼šåªéœ€å¼•ç”¨ä¸Šé¢ä¸¤ä¸ªæ¨¡å—çš„xmlï¼Œä¸‹é¢ç›´æ¥ç»™å‡ºdaoæ¨¡å—æ‰€éœ€applicationContext.xml 123456789101112131415161718192021&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:aop=\"http://www.springframework.org/schema/aop\" xmlns:tx=\"http://www.springframework.org/schema/tx\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\"&gt; &lt;import resource=\"classpath:spring/applicationContext-dao.xml\" /&gt; &lt;import resource=\"classpath:spring/applicationContext-service.xml\" /&gt;&lt;/beans&gt; å¯åŠ¨ æ–¹å¼ä¸€ è¿è¡Œçˆ¶å·¥ç¨‹çš„mavenè‡ªå¸¦tomcat æ–¹å¼äºŒ è¿è¡Œwebçš„mavenè‡ªå¸¦tomcatï¼ˆåªæœ‰çˆ¶å·¥ç¨‹å’Œwebå·¥ç¨‹éœ€è¦tomcatï¼‰ï¼Œä½†æ˜¯webå·¥ç¨‹pom.xmlæ‰¾çš„æ˜¯éœ€è¦æ‰“åŒ…å¥½çš„serviceçš„jaråŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ‰“åŒ…ä¸€ä¸‹ï¼ˆmavençš„installå°±å¯ä»¥æ‰“åŒ…ï¼‰ï¼Œç›´æ¥å¯¹parentæ¨¡å—è¿›è¡Œinstallå³å¯ æ–¹å¼ä¸‰ï¼ˆé‡è¦ï¼Œä½¿ç”¨æœ¬åœ°tomcatï¼‰ é€šå¸¸æˆ‘ä»¬éƒ½æ˜¯ç”¨æœ¬åœ°çš„tomcatçš„ï¼Œæ­£å¸¸æ·»åŠ å°±è¡Œäº†ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œæ·»åŠ artifactçš„æ—¶å€™ï¼Œä¼šå‘ç°äº†åªæœ‰webæ¨¡å—å¯ä»¥æ·»åŠ ã€‚å…¶å®å°±ç®—æ˜¯ä¸Šé¢ç¬¬ä¸€ç§æ–¹å¼ï¼Œä¹Ÿæ˜¯é»˜è®¤è·¯å¾„ä¸ºwebæ¨¡å— 7.2 é”™è¯¯è§£å†³ æ— æ³•åœ¨web.xmlæˆ–ä½¿ç”¨æ­¤åº”ç”¨ç¨‹åºéƒ¨ç½²çš„jaræ–‡ä»¶ä¸­è§£æç»å¯¹uriï¼šhttp://java.sun.com/jsp/jstl/core å‚è€ƒè¿™ç¯‡åšå®¢ https://blog.csdn.net/weixin_42634260/article/details/89931226?depth_1-utm_source=distribute.pc_relevant.none-task&amp;utm_source=distribute.pc_relevant.none-task å¦‚æœè¿˜ä¸è¡Œï¼Œå¯ä»¥åœ¨ä¸Šé¢çš„ä¿®æ”¹çš„åŸºç¡€ä¸Šå†åœ¨web.xmlçš„web-appæ ‡ç­¾ä¸­æ·»åŠ  12345678&lt;taglib&gt; &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/core&lt;/taglib-uri&gt; &lt;taglib-location&gt;/WEB-INF/c.tld&lt;/taglib-location&gt;&lt;/taglib&gt;&lt;taglib&gt; &lt;taglib-uri&gt;http://java.sun.com/jsp/jstl/fmt&lt;/taglib-uri&gt; &lt;taglib-location&gt;/WEB-INF/spring-form.tld&lt;/taglib-location&gt;&lt;/taglib&gt; 2.å¦‚æœæŠ¥é”™No tag [formatDate] defined in tag library imported ç›´æ¥æŠŠjspä¸­çš„è¿™å¥åˆ æ‰å§ï¼Œå°‘å±•ç¤ºä¸€é¡¹ä¸¤é¡¹æ— æ‰€è°“ï¼Œjspçš„é”™è¯¯å®åœ¨æ˜¯æ²¡æœ‰å¿ƒæƒ…ç ”ç©¶ï¼Œ0202å¹´äº†è°è¿˜ç”¨è¿™ä¸œè¥¿ 8. mavenå®‰è£…jaråŒ…mvn install:install-file -DgroupId=com.oracle -DartifactId=ojdbc14 -Dversion=10.2.0.1.0 -Dpackaging=jar -Dfile=ojdbc14.jar","link":"/Others/maven%E7%AC%94%E8%AE%B0/"},{"title":"redisåŸºç¡€","text":"1. æ•°æ®å­˜å‚¨å’ŒæŸ¥æ‰¾å‘å±•æ–‡ä»¶ï¼šæ…¢ï¼Œå› ä¸ºå…¨é‡æ‰«æ-&gt;IOï¼Œå› æ­¤æ…¢ mysqlï¼šä¸ºä»€ä¹ˆæ•°æ®åº“å­˜ä¸œè¥¿ï¼Œå› ä¸ºå¿«ï¼Œä¸ºä»€ä¹ˆï¼Œå› ä¸ºåšäº†åˆ†å—(datapage)ï¼Œç„¶åå¯¹è¿™äº›å—åšäº†ç´¢å¼•ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæŸ¥ç´¢å¼•ï¼Œæ‰¾åˆ°å¯¹åº”æ˜¯å“ªå—ï¼Œç„¶ååªæŸ¥è¿™ä¸€å—ï¼Œå°±å¿«å¾ˆå¤šã€‚é‚£è¦æ‰«æç´¢å¼•ï¼Ÿï¼Œå°†ç´¢å¼•åŠ è½½è¿›å†…å­˜å¹¶ä¸”é‡‡ç”¨B+æ ‘ç»“æ„å¯ä»¥é¿å…æ‰«ææ•´ä¸ªç´¢å¼•ã€‚ é¢è¯•é¢˜ï¼šå¦‚æœè¡¨å¾ˆå¤§ï¼Œå¢åˆ æ”¹æŸ¥ä¼šå˜æ…¢å—ï¼Ÿæ•°æ®é‡å¤§äº†ï¼Œå¢åˆ æ”¹æ˜¯ä¸€å®šä¼šå˜æ…¢çš„ã€‚æŸ¥è¯¢ï¼šå¾—åˆ†åœºæ™¯ï¼Œå³ä¾¿è¡¨å¾ˆå¤§ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªç®€å•çš„æŸ¥è¯¢è¯·æ±‚ï¼Œç´¢å¼•å‘½ä¸­äº†æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢è¿˜æ˜¯æ¯«ç§’çº§çš„ã€‚ä½†æ˜¯å¦‚æœé«˜å¹¶å‘æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢æ˜¯å˜æ…¢çš„ï¼Œå› ä¸ºæŸ¥è¯¢æ—¶é—´åº”è¯¥åŒ…æ‹¬å¯»å€æ—¶é—´å’Œç£ç›˜ioæ—¶é—´ï¼Œå³ä½¿å¯»å€æ˜¯æ¯«ç§’çº§çš„ï¼Œä½†æ˜¯ç”±äºå¸¦å®½ï¼Œååç­‰ç¡¬ç›˜é™åˆ¶ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹ä¼šå—åˆ°ç¡¬ç›˜çš„é™åˆ¶è€Œå˜å¾—å¾ˆæ…¢ï¼Œå¦åˆ™ä¹Ÿä¸ä¼šå‡ºç°åˆ†å¸ƒå¼å¾®æœåŠ¡ä¸Šæ¥å°±æ˜¯redisè¿™ç§äº‹æƒ… redisï¼šç»¼ä¸Šæ‰€è¿°ï¼Œå¹¶å‘æƒ…å†µä¸‹é™åˆ¶ä¸»è¦åœ¨ç¡¬ç›˜ï¼Œé‚£æ‰€æœ‰æ•°æ®å­˜åœ¨å†…å­˜ä¸­å‘¢ï¼Ÿé‚£å½“ç„¶å¿«äº†ï¼è¿˜çœŸæœ‰è¿™ä¹ˆä¸€ç§å†…å­˜å‹å…³ç³»æ•°æ®åº“ï¼šSAP HANAï¼Œå¯æ˜¯å†…å­˜å®ƒè´µå‘€ï¼ŒåŠ¨ä¸åŠ¨å°±ä¸ŠTçš„æ•°æ®å­˜åœ¨å†…å­˜ä¸­å¤ªçƒ§é’±äº†ã€‚redisçš„äº§ç”Ÿç†å¿µï¼šå…¶å®åªæœ‰ä¸€å°éƒ¨åˆ†æ•°æ®é¢‘ç¹è¢«è®¿é—®ï¼ˆè¢«ç§°ä¸ºçƒ­ç‚¹æ•°æ®ï¼‰ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†æ•°æ®éƒ½æ˜¯ä¸ç»å¸¸ç”¨çš„å°±å­˜åœ¨mysqlé‡Œï¼Œå› æ­¤ä½¿ç”¨redisä¸€å®šè¦æ˜ç¡®ä½¿ç”¨åœºæ™¯ï¼šçƒ­ç‚¹æ•°æ®ã€‚ 2. Redisç‰¹ç‚¹é¢è¯•å¯ä¸è¦åªè¯´ä¸€ç‚¹å•Šï¼Œçœ‹æˆ‘çš„ï¼ NoSQLç³»åˆ—ï¼Œkey-valueå½¢å¼ï¼Œå†…å­˜æ•°æ®åº“ï¼šNoSQLæ˜¯éå…³ç³»å‹æ•°æ®åº“çš„ç»Ÿç§°ï¼Œredisä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨ï¼Œåœ¨å†…å­˜ä¸­é€Ÿåº¦ä¼šæ¯”mysqlå¿«å‡ ä¸ªé‡çº§ã€‚ä¸ºä»€ä¹ˆredisæ˜¯key-valueå‹çš„è€Œä¸æ˜¯sqlå½¢å¼ï¼šä¸å¦¨æ ¹æ®ä¸Šé¢æ‰€è¯´çš„å¤§èƒ†çŒœæµ‹ä¸€ä¸‹ï¼Œå…³ç³»å‹æ•°æ®åº“ä¸­é€šå¸¸ä¼šæ¥è§¦åˆ°èŒƒå¼ï¼ŒAè¡¨å¤–é”®ä¸ºBè¡¨çš„ä¸»é”®ï¼Œè€Œredisè®¾è®¡åˆè¡·å°±æ˜¯åªå­˜ä¸€éƒ¨åˆ†çƒ­ç‚¹æ•°æ®ï¼Œå› æ­¤æ— æ³•ç¡®å®šæ˜¯å¦åŒ…å«åœ¨Bä¸­ï¼Œå› æ­¤redisåº”è¯¥åªå…³æ³¨è‡ªèº«ï¼Œä¸å…³æ³¨ä¾èµ–ã€‚ æœ‰è‡ªå·±çš„æ•°æ®ç±»å‹ï¼Œå®ç°äº†è®¡ç®—å‘æ•°æ®ç§»åŠ¨ï¼ˆè¿™ä¸ªè¯å°±å¾ˆä¸“ä¸šï¼‰ï¼šæœ‰String, Set, List, Hash, Sortedsetäº”ç§ç±»å‹ï¼Œå¹¶ä¸”æ¯ç§ç±»å‹æœ‰è‡ªå·±çš„æœ¬åœ°æ–¹æ³•ï¼Œå¯¹æ¯”memcacheï¼ˆæ‰€æœ‰çš„valueéƒ½æ˜¯stringç±»å‹å¹¶é€šè¿‡jsonè½¬æ¢ï¼‰ï¼Œå¦‚æœéœ€è¦å–å‡ºæ•°ç»„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œmemcacheéœ€è¦å°†æ•´ä¸ªlistå­—ç¬¦ä¸²è¿”å›ï¼Œè°ƒç”¨æ–¹æ‹¿åˆ°æ•°æ®è½¬æ¢æˆåˆ—è¡¨å†å–ç¬¬äºŒä¸ªå…ƒç´ ï¼Œrediså¯ä»¥è¯»å–listå¹¶é€šè¿‡lindexå‘½ä»¤å–å‡ºç¬¬äºŒä¸ªå…ƒç´ å¹¶è¿”å›ï¼Œä¹Ÿå°±æ˜¯å…ˆè®¡ç®—å†ioï¼Œè¿™ç§è®¡ç®—å‘æ•°æ®ç§»åŠ¨çš„æ€æƒ³åœ¨map-reduceä¸­æœ‰ä½“ç°ï¼Œå¯ä»¥å‡å°‘ä¼ è¾“çš„æ•°æ®é‡ï¼Œå¾ˆå¿«ã€‚ å·¥ä½œçº¿ç¨‹æ˜¯å•çº¿ç¨‹çš„ï¼Œçœ‹ä¸‹é¢ç¬¬å››ç‚¹ 3. äº”ç§æ•°æ®ç»“æ„ apiæˆ‘å°±ä¸å¤šè¯´äº†ï¼Œå¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£/ä¸­æ–‡æ–‡æ¡£/èœé¸Ÿæ•™ç¨‹ https://redis.io/commands https://www.redis.com.cn/commands.html https://www.runoob.com/redis/redis-lists.html StringStringæ•°æ®ç»“æ„æ˜¯ç®€å•çš„key-valueç±»å‹ï¼Œvalueå…¶å®ä¸ä»…å¯ä»¥æ˜¯Stringï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°å€¼å’ŒBitmapã€‚ ä½¿ç”¨åœºæ™¯åŒ…æ‹¬ å¸¸è§„è®¡æ•°ï¼šå¾®åšæ•°ï¼Œç²‰ä¸æ•°ç­‰ bitmapé‡ç‚¹è¯´ä¸€ä¸‹è¿™ä¸ªï¼Œæœ‰ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯è¿ç”¨ SETBIT key offset value 8ä¸ªä½ä¸ºä¸€ä¸ªå­—èŠ‚ï¼ŒSETBIT key1 6 1ä¸º00000010ï¼Œoffsetä¸ºä»å·¦å¾€å³ä»0å¼€å§‹æ•° è¶…è¿‡äº†7ï¼Œåˆ™ä¸ºç¬¬äºŒä¸ªå­—èŠ‚ï¼ŒSETBIT key2 9 1ä¸º00000000 01000000 BITCOUNT start end ç»Ÿè®¡æœ‰å¤šå°‘ä¸ªä½ä¸º1ï¼Œæ³¨æ„startå’Œendä»¥å­—èŠ‚ä¸ºå•ä½è€Œä¸æ˜¯ä»¥ä½ä¸ºå•ä½ åœºæ™¯1ï¼šç»Ÿè®¡æŸä¸ªç”¨æˆ·æŸæ®µæ—¶é—´å†…çš„ç™»å½•å¤©æ•° è¿™ä¸ªå¦‚ä½•ç”¨bitmapå·§å¦™å®Œæˆå‘¢ï¼Œç”¨æˆ·åœ¨å“ªå¤©ç™»å½•ï¼Œå°±å°†å…¶ä½œä¸ºoffsetï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨ç¬¬1å¤©å’Œç¬¬365å¤©ç™»å½• SETBIT wjw 1 1 SETBIT wjw 365 1 ç»Ÿè®¡çš„æ—¶å€™å°±å¯ä»¥ BITCOUNT wjw 0 -1 å¯ä»¥è®¡ç®—ä¸€ä¸‹ï¼Œè¿™ä¸ªkeyæœ€å¤šä¹Ÿå°±å 46ä¸ªå­—èŠ‚ï¼ˆ46Ã—8=368ï¼Œå› ä¸ºä¸€ä¸ªbitmapæ˜¯8çš„å€æ•°ï¼‰ åœºæ™¯2ï¼šç»Ÿè®¡æŸæ®µæ—¶é—´å†…çš„æ´»è·ƒç”¨æˆ·æ•°é‡ keyæ˜¯æ—¥æœŸï¼Œoffsetæ˜¯ç”¨æˆ·idï¼Œvalueæ˜¯1 å¦‚wjwçš„ç”¨æˆ·idæ˜¯1ï¼Œwhxçš„ç”¨æˆ·idæ˜¯2,é‚£ä¹ˆ SETBIT 20200101 1 1 SETBIT 20200101 2 1 SETBIT 20200102 1 1 ä¹Ÿå°±æ˜¯wjwåœ¨ç¬¬ä¸€å¤©å’Œç¬¬äºŒå¤©ç™»å½•ï¼Œwhxåªåœ¨ç¬¬ä¸€å¤©ç™»å½• é‚£ä¹ˆè¿™ä¸¤å¤©çš„æ´»è·ƒç”¨æˆ·æ•°é‡ä¸º BITOP or res 20200101 20200102 BITCOUNT res å¾—åˆ°resç­‰äº2 Hashhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ï¼Œåç»­æ“ä½œçš„æ—¶å€™ï¼Œä½ å¯ä»¥ç›´æ¥ä»…ä»…ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå­—æ®µçš„å€¼ã€‚ æ¯”å¦‚æˆ‘ä»¬å¯ä»¥Hashæ•°æ®ç»“æ„æ¥å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œå•†å“ä¿¡æ¯ç­‰ åº•å±‚æ•°æ®ç»“æ„å¦‚ä¸‹ Redisä¸­çš„å­—å…¸ä½¿ç”¨å“ˆå¸Œè¡¨ä½œä¸ºåº•å±‚ç»“æ„å®ç°ï¼Œæ¯ä¸ªå­—å…¸å¸¦æœ‰ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œä¸€ä¸ªå¹³æ—¶ä½¿ç”¨ï¼Œå¦ä¸€ä¸ªä»…åœ¨è¿›è¡Œrehashæ—¶ä½¿ç”¨ã€‚ Redisä½¿ç”¨MurmurHash2ç®—æ³•æ¥è®¡ç®—é”®çš„å“ˆå¸Œå€¼ã€‚ å“ˆå¸Œè¡¨ä½¿ç”¨é“¾åœ°å€æ³•æ¥è§£å†³é”®å†²çªã€‚ æ³¨æ„ï¼šè¿™é‡Œå’ŒJavaçš„HashMapä¸åŒçš„rehashè¿‡ç¨‹ Redisçš„rehashè¿‡ç¨‹æ˜¯æ‰©å±•å’Œæ”¶ç¼©ï¼Œè€Œä¸”è¿˜æ˜¯æ¸è¿›å¼çš„rehash Redisçš„å­—å…¸æœ‰ä¸¤ä¸ªå“ˆå¸Œè¡¨ht[0]å’Œht[1] ä¸ºå­—å…¸çš„ht[1]å“ˆå¸Œè¡¨åˆ†é…ç©ºé—´ï¼Œå¦‚æœæ‰§è¡Œçš„æ˜¯æ‰©å±•æ“ä½œï¼Œé‚£ä¹ˆht[1]çš„å¤§å°ä¸ºç¬¬ä¸€ä¸ªå¤§äºç­‰äºht[0].used *2çš„2^nï¼›å¦‚æœæ‰§è¡Œçš„æ˜¯æ”¶ç¼©æ“ä½œï¼Œé‚£ä¹ˆht[1]çš„å¤§å°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºht[0].usedçš„2^nã€‚ï¼ˆä¸¾ä¸ªä¾‹å­ï¼Œht[0]çš„é•¿åº¦ä¸º10ï¼Œé‚£ä¹ˆæ‰©å±•å°±æ˜¯2^5çš„32ï¼Œå¦‚æœæ˜¯å‹ç¼©çš„è¯2^4=16ï¼‰ å¦‚æœht[0]çš„é”®å€¼éå¸¸å¤šçš„è¯ï¼Œä¸€æ¬¡æ€§è½¬ç§»è¿‡å»ï¼Œæ˜¯ä¸€ä¸ªéå¸¸è€—æ—¶çš„æ“ä½œå“¦ï¼Œå› æ­¤å¹¶éä¸€æ¬¡æ€§ï¼Œé‡‡å–æ¸è¿›å¼rehashè½¬ç§»ã€‚ Listlist å°±æ˜¯é“¾è¡¨ï¼ŒRedis list çš„åº”ç”¨åœºæ™¯éå¸¸å¤šï¼Œä¹Ÿæ˜¯Redisæœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œæ¯”å¦‚å¾®åšçš„å…³æ³¨åˆ—è¡¨ã€ç²‰ä¸åˆ—è¡¨ã€æ¶ˆæ¯åˆ—è¡¨ã€è¯„è®ºåˆ—è¡¨ç­‰åŠŸèƒ½éƒ½å¯ä»¥ç”¨Redisçš„ list ç»“æ„æ¥å®ç°ã€‚ Redis list çš„å®ç°ä¸ºä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå³å¯ä»¥æ”¯æŒåå‘æŸ¥æ‰¾å’Œéå†ï¼Œæ›´æ–¹ä¾¿æ“ä½œï¼Œä¸è¿‡å¸¦æ¥äº†éƒ¨åˆ†é¢å¤–çš„å†…å­˜å¼€é”€ã€‚ å¦å¤–å¯ä»¥é€šè¿‡ lrange å‘½ä»¤ï¼Œå°±æ˜¯ä»æŸä¸ªå…ƒç´ å¼€å§‹è¯»å–å¤šå°‘ä¸ªå…ƒç´ ï¼Œå¯ä»¥åŸºäº list å®ç°åˆ†é¡µæŸ¥è¯¢ï¼Œè¿™ä¸ªå¾ˆæ£’çš„ä¸€ä¸ªåŠŸèƒ½ï¼ŒåŸºäº redis å®ç°ç®€å•çš„é«˜æ€§èƒ½åˆ†é¡µï¼Œå¯ä»¥åšç±»ä¼¼å¾®åšé‚£ç§ä¸‹æ‹‰ä¸æ–­åˆ†é¡µçš„ä¸œè¥¿ï¼ˆä¸€é¡µä¸€é¡µçš„å¾€ä¸‹èµ°ï¼‰ï¼Œæ€§èƒ½é«˜ Setå½“ä½ éœ€è¦å­˜å‚¨ä¸€ä¸ªåˆ—è¡¨æ•°æ®ï¼Œåˆä¸å¸Œæœ›å‡ºç°é‡å¤æ•°æ®æ—¶ç”¨setï¼Œå¹¶ä¸”setæä¾›äº†åˆ¤æ–­æŸä¸ªæˆå‘˜æ˜¯å¦åœ¨ ä¸€ä¸ªseté›†åˆå†…çš„é‡è¦æ¥å£ï¼Œè¿™ä¸ªä¹Ÿæ˜¯listæ‰€ä¸èƒ½æä¾›çš„ã€‚å¯ä»¥åŸºäº set è½»æ˜“å®ç°äº¤é›†ã€å¹¶é›†ã€å·®é›†çš„æ“ä½œ åœºæ™¯1ï¼šæŠ½å¥– SRANDMEMBER key 3ï¼Œä¸é‡å¤çš„éšæœºæŠ½3ä¸ª SRANDMEMBER key -3ï¼Œå¯é‡å¤çš„éšæœºæŠ½3ä¸ª åœºæ™¯2ï¼šæ¨èç³»ç»Ÿ äº¤é›†ï¼šå…±åŒå…³æ³¨ï¼šåœ¨å¾®åšåº”ç”¨ä¸­ï¼Œå¯ä»¥å°†ä¸€ä¸ªç”¨æˆ·æ‰€æœ‰çš„å…³æ³¨äººå­˜åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå°†å…¶æ‰€æœ‰ç²‰ä¸å­˜åœ¨ä¸€ä¸ªé›†åˆã€‚Rediså¯ä»¥éå¸¸ æ–¹ä¾¿çš„å®ç°å¦‚å…±åŒå…³æ³¨ã€å…±åŒç²‰ä¸ã€å…±åŒå–œå¥½ç­‰åŠŸèƒ½ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå°±æ˜¯æ±‚äº¤é›†çš„è¿‡ç¨‹ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼šsinterstore key1 key2 key3å°†äº¤é›†å­˜åœ¨key1å†… å·®é›†ï¼šå¯èƒ½è®¤è¯†çš„äººï¼šSDIFF å¹¶é›†ï¼šå¥½å‹åœˆï¼šSUNION Zsetå’Œsetç›¸æ¯”ï¼Œsorted setå¢åŠ äº†ä¸€ä¸ªæƒé‡å‚æ•°scoreï¼Œä½¿å¾—é›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰scoreè¿›è¡Œæœ‰åºæ’åˆ—ã€‚ ä¸¾ä¾‹ï¼š åœ¨ç›´æ’­ç³»ç»Ÿä¸­ï¼Œå®æ—¶æ’è¡Œä¿¡æ¯åŒ…å«ç›´æ’­é—´åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ï¼Œå„ç§ç¤¼ç‰©æ’è¡Œæ¦œï¼Œå¼¹å¹•æ¶ˆæ¯ï¼ˆå¯ä»¥ç†è§£ä¸ºæŒ‰æ¶ˆæ¯ç»´åº¦çš„æ¶ˆæ¯æ’è¡Œæ¦œï¼‰ç­‰ä¿¡æ¯ï¼Œé€‚åˆä½¿ç”¨ Redis ä¸­çš„ SortedSet ç»“æ„è¿›è¡Œå­˜å‚¨ã€‚ åº•å±‚å®ç°æ˜¯ä¸€ä¸ªè·³è¡¨SkipList æ”¾çŸ¥ä¹ç¨‹åºå‘˜å°ç°çš„ä¸¤ç¯‡æ–‡ç«  https://zhuanlan.zhihu.com/p/53975333 https://zhuanlan.zhihu.com/p/200815425 ç®€å•æ¥è¯´è·³è·ƒè¡¨æ˜¯ä¸€ç§æœ‰åºæ•°æ®ç»“æ„ï¼Œå®ƒé€šè¿‡åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­ç»´æŒå¤šä¸ªæŒ‡å‘å…¶ä»–èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œä»è€Œè¾¾åˆ°å¿«é€Ÿè®¿é—®èŠ‚ç‚¹çš„ç›®çš„ã€‚ è·³è·ƒè¡¨å¹³å‡O(longN)ï¼Œæœ€åO(N)å¤æ‚åº¦çš„èŠ‚ç‚¹æŸ¥æ‰¾ è·³è·ƒè¡¨æœ‰ä¸ªå±‚çš„æ¦‚å¿µï¼šå±‚å¸¦æœ‰ä¸¤ä¸ªå±æ€§ï¼šå‰è¿›æŒ‡é’ˆå’Œè·¨åº¦ï¼Œå‰è¿›æŒ‡é’ˆç”¨äºè®¿é—®ä½äºè¡¨å°¾æ–¹å‘çš„å…¶ä»–èŠ‚ç‚¹ï¼Œè€Œè·¨åº¦åˆ™è®°å½•äº†å‰è¿›æŒ‡é’ˆæ‰€æŒ‡å‘èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹çš„è·ç¦»ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå±‚è¶Šå¤šï¼ŒæŸ¥æ‰¾æ•ˆç‡è¶Šé«˜ã€‚ 4. Redisçš„NIOå’Œçº¿ç¨‹æ¨¡å‹redisæ˜¯å•çº¿ç¨‹çš„è¿˜æ˜¯å¤šçº¿ç¨‹çš„ï¼Ÿ ç”¨æˆ·å¯¹redisæ“ä½œæ˜¯å•çº¿ç¨‹çš„ï¼ˆworkerå•çº¿ç¨‹ï¼‰ï¼Œredis 6.xæ”¯æŒå¤šçº¿ç¨‹ï¼Œä½†æ˜¯ï¼ï¼ï¼è¿™å«io threadsï¼Œç”¨äºå¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œå®é™…æ“ä½œè¿˜æ˜¯å•çº¿ç¨‹çš„ã€‚ 5.xå’Œ6.xå¯¹æ¯”å¦‚ä¸‹ å¯ä»¥çœ‹åˆ°åœ¨6.xçš„æ—¶å€™workerçº¿ç¨‹ï¼ˆè®¡ç®—é‚£é‡Œï¼‰è¿˜æ˜¯å•çº¿ç¨‹ï¼Œä½†å¿«äº†ä¸å°‘ã€‚ 4.1 ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„å› ä¸ºRedisæ˜¯åŸºäºå†…å­˜çš„æ“ä½œï¼ŒCPUä¸æ˜¯Redisçš„ç“¶é¢ˆï¼ŒRedisçš„ç“¶é¢ˆæœ€æœ‰å¯èƒ½æ˜¯æœºå™¨å†…å­˜çš„å¤§å°æˆ–è€…ç½‘ç»œå¸¦å®½ã€‚redisæ ¸å¿ƒå°±æ˜¯ï¼šå¦‚æœæˆ‘çš„æ•°æ®å…¨éƒ½åœ¨å†…å­˜é‡Œï¼Œæˆ‘å•çº¿ç¨‹çš„å»æ“ä½œå°±æ˜¯æ•ˆç‡æœ€é«˜çš„ï¼Œå› ä¸ºå…å»äº†çº¿ç¨‹ä¹‹é—´çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚ 4.2 ç§’æ€åœºæ™¯çš„redisä½¿ç”¨é«˜å¹¶å‘åœºæ™¯ï¼Œå¤šä¸ªserviceçº¿ç¨‹ã€‚å¦‚æœæ˜¯mysqlä¸åŠ é”ï¼Œå¿…å®šä¼šè„è¯»ï¼Œé€ æˆè¶…å–ï¼Œå¿…å®šåŠ é”åŒæ­¥ï¼Œå®é™…é€€åŒ–æˆæ‰€æœ‰serviceä¸²è¡Œï¼ŒåŠ ä¸Šå‰åå…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œå¾ˆæ…¢ã€‚æ”¹ç”¨redisï¼Œå•çº¿ç¨‹ï¼Œæœ¬èº«å°±æ˜¯ä¸²è¡ŒåŒ–æ“ä½œï¼Œé€šè¿‡decrè¿›è¡Œå•†å“æ•°é‡å‡ä¸€ 4.3 straceè¿½è¸ªçº¿ç¨‹straceå¯ä»¥è¿½è¸ªä¸€ä¸ªè¿›ç¨‹ä»¥åŠæ‰€æœ‰çº¿ç¨‹å¯¹æ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿè°ƒç”¨æœ‰å“ªäº›ã€‚æ¯”å¦‚æ˜¯å¦ä½¿ç”¨äº†forkï¼Œæ˜¯å¦ä½¿ç”¨äº†epollï¼Œæ˜¯å¦åˆåˆ›å»ºäº†çº¿ç¨‹ 1sudo apt install strace è¿›å…¥redisç›®å½•ï¼ˆsrcæˆ–è€…å®ˆæŠ¤è¿›ç¨‹çš„éƒ½è¡Œï¼‰ 1strace -ff -o /home/wjw/stracelog/out -ffè¡¨ç¤ºç›‘å¬forkç³»ï¼Œç¬¬äºŒä¸ªfè¡¨ç¤ºåŒ…æ‹¬çº¿ç¨‹ -oè¡¨ç¤ºè¾“å‡ºç›®å½•ä¸º/home/wjw/stracelogå¹¶ä»¥/outä¸ºå‰ç¼€ å¯ä»¥è¿›å…¥/proc/3324/taskç›®å½•ä¸‹ è¿™äº›æ˜¯ä»€ä¹ˆï¼Ÿ3324æ˜¯çº¿ç¨‹å·ï¼Œtaskä»£è¡¨ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯å¼€å¯äº†4ä¸ªçº¿ç¨‹ ç”¨viæˆ–è€…geditæ‰“å¼€out.3324å¯ä»¥çœ‹åˆ°å¾ˆå¤šepollç›¸å…³çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå› æ­¤redisçš„çº¿ç¨‹é‡‡ç”¨äº†epollå¤šè·¯å¤ç”¨çš„æŠ€æœ¯ å®¢æˆ·ç«¯è¾“å…¥bgsaveï¼ŒæœåŠ¡ç«¯3324çº¿ç¨‹å¼€å¯äº†æ–°çš„çº¿ç¨‹3829è¿›è¡Œä¿å­˜ï¼Œä½¿ç”¨cloneç³»ç»Ÿè°ƒç”¨ï¼Œcopy on writeæŠ€æœ¯ æŸ¥çœ‹straceçš„è·Ÿè¸ª 5. ç¼“å­˜é›ªå´©ï¼Œç©¿é€ï¼Œå‡»ç©¿ç¼“å­˜é›ªå´©ï¼šæ˜¯è¯´rediså¤§é‡å†…å®¹åŒæ—¶è¿‡æœŸï¼Œå› æ­¤dbçªç„¶ä¹‹é—´å¤šäº†å¾ˆå¤šè¯·æ±‚ã€‚è§£å†³æ–¹æ³•å°±æ˜¯éšæœºè¿‡æœŸæ—¶é—´ ç¼“å­˜ç©¿é€ï¼šæŸ¥è¯¢id=-1ï¼Œç¬¬ä¸€æ¬¡æŸ¥dbï¼ŒæŸ¥ä¸åˆ°å°±ä¸æ”¾è¿›redisï¼Œç¬¬äºŒæ¬¡æŸ¥ä¸€å®šä¸ä¼šåœ¨redisä¸­ï¼Œåˆå»æŸ¥dbï¼Œå¦‚æ­¤å¾€å¤â€¦æ¶æ„å‘é€å¤§é‡æŸ¥è¯¢è¯·æ±‚ï¼Œå¯¼è‡´ä¸€ç›´æŸ¥dbï¼Œå°±æ˜¯ç¼“å­˜ç©¿é€ã€‚è§£å†³åŠæ³•å°±æ˜¯æŠŠ-1: nullå­˜è¿›redisï¼Œæˆ–è€…é™åˆ¶åŒä¸€ä¸ªkeyåœ¨ä¸€æ®µæ—¶é—´çš„è¯·æ±‚æ¬¡æ•°ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨è¿‡æ»¤å™¨è¿‡æ»¤æ‰ å¸ƒéš†è¿‡æ»¤å™¨ï¼šå°±æ˜¯ä¸€ä¸ªå¾ˆé•¿çš„bitæ•°ç»„ï¼Œé€šè¿‡ä¸€çº§æˆ–è€…å¤šçº§ä¸åŒçš„hashå‡½æ•°ä¹‹åå°†keyè½¬æ¢æˆå¤šä¸ªä½çš„1ï¼Œç„¶ååœ¨bitæ•°ç»„ä¸Šçœ‹æ˜¯è¯¥keyå¦å­˜åœ¨ï¼Œç„¶åæ¯æ¬¡æ·»åŠ å…¥redisæ—¶ä¹Ÿä¼šå°†è¿™ä¸ªkeyçš„hashä½ç½®ä¸º1ã€‚éœ€è¦æ³¨æ„çš„åœ°æ–¹æœ‰ä¸¤ä¸ª è¿™é‡Œæ—¢ç„¶æ˜¯Hashå‡½æ•°ï¼Œé‚£å°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œä¸å­˜åœ¨çš„keyä¹Ÿæœ‰å¯èƒ½ç»è¿‡hashå‡½æ•°ä¹‹åå¯¹åº”ä½å…¨ä¸º1ï¼Œè¢«è¯¯åˆ¤ä¸ºkeyå­˜åœ¨ï¼Œä¸è¿‡æ²¡å…³ç³»ã€‚hashåˆ¤æ–­å­˜åœ¨ï¼Œkeyä¸ä¸€å®šå­˜åœ¨ã€‚hashåˆ¤æ–­ä¸å­˜åœ¨ï¼Œkeyä¸€å®šä¸å­˜åœ¨ bitæ•°ç»„é‡Œé¢çš„ä½åªèƒ½æ·»åŠ ä¸º1ä¸èƒ½ä¿®æ”¹å›0ï¼Œå› ä¸ºæ”¹ä¸º0å¯èƒ½ä¼šå½±å“å¤šä¸ªkeyã€‚æ‰€ä»¥è¦åˆ¤æ–­å¥½è¿™ä¸ªæ•°ç»„çš„é•¿åº¦ï¼Œå¦åˆ™ç»è¿‡å¤šæ¬¡ç½®1åæ•°ç»„å…¨ä¸º1ï¼Œè¿‡æ»¤å™¨å°±å¤±å»äº†è¿‡æ»¤æ„ä¹‰ï¼Œå¯ä»¥é‡æ–°æ‰©å®¹ã€‚ å› ä¸ºè¿™äº›é—®é¢˜ï¼Œåé¢è¿˜æœ‰å…¶ä»–çš„è¿‡æ»¤å™¨æ¯”å¦‚å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ ç¼“å­˜å‡»ç©¿ï¼šè·Ÿç¼“å­˜é›ªå´©ç±»ä¼¼ï¼Œæ˜¯å› ä¸ºè¿‡æœŸå¯¼è‡´çš„ï¼Œä½†æ˜¯ä¸æ˜¯å¤§é‡å†…å®¹ï¼Œè€Œæ˜¯è¯´å¯¹åŒä¸€ä¸ªkeyå‘å‡ºå¤§é‡çš„è¯·æ±‚ï¼ˆæ¯”å¦‚ç§’æ€ï¼‰ï¼Œçªç„¶è¿‡æœŸäº†ï¼Œå¯¼è‡´æŸ¥dbã€‚è¿™ç§åœºæ™¯è§£å†³åŠæ³•å°±æ˜¯æŸ¥dbçš„æ—¶å€™åŠ é”ï¼Œè¿‡æœŸâ€“&gt;åŠ é”æŸ¥dbâ€“&gt;dbå‹åŠ›å°â€“&gt;é‡æ–°æ”¾è¿›redisâ€“&gt;æŸ¥redis 6. Rediså†…å­˜å›æ”¶ç­–ç•¥ä¸¤ä¸ªæ–¹é¢ï¼š keyè¿‡æœŸæ—¶è¢«åˆ é™¤ å†…å­˜å ç”¨è¾¾åˆ°maxmemoryè§¦å‘å†…å­˜æº¢å‡ºæ§åˆ¶ç­–ç•¥ 6.1 åˆ é™¤è¿‡æœŸkeyredisä¸ä¼šå®æ—¶ç›‘æ§æ¯ä¸ªkeyçš„è¿‡æœŸæ—¶é—´å¹¶åˆ é™¤ï¼Œè€Œæ˜¯é‡‡ç”¨æƒ°æ€§åˆ é™¤å’Œå®šæ—¶ä»»åŠ¡åˆ é™¤ æƒ°æ€§åˆ é™¤ï¼šè¿‡æœŸçš„keyå¹¶æ²¡æœ‰è¢«ç›´æ¥åˆ é™¤ï¼Œè€Œæ˜¯ç­‰åˆ°ä¸‹ä¸€æ¬¡è®¿é—®çš„æ—¶å€™æ‰åˆ é™¤ã€‚è®¿é—®ä¸€ä¸ªkeyï¼Œåˆ¤æ–­ttlï¼Œå¦‚æœä¸º0è¿‡æœŸäº†ï¼Œåˆ™åˆ é™¤å¹¶è¿”å›nullï¼Œå¦åˆ™æ­£å¸¸è¿”å›valueã€‚å¦‚æœä¸€ç›´æ²¡æœ‰è¢«è®¿é—®ï¼Œåˆ™ä¼šé€ æˆå†…å­˜æ³„æ¼ å®šæ—¶ä»»åŠ¡åˆ é™¤ï¼šä¸ºäº†è§£å†³ä¸Šè¿°å†…å­˜æ³„æ¼é—®é¢˜ï¼Œredisæ¯ç§’è¿è¡Œ10æ¬¡å®šæ—¶ä»»åŠ¡ æ…¢æ¨¡å¼ï¼šéšæœºæ£€æŸ¥20ä¸ªé”®ï¼Œè¿‡æœŸåˆ™åˆ é™¤ï¼Œè¿‡æœŸè¶…è¿‡25%ï¼Œå¾ªç¯æ‰§è¡Œä¸Šè¿°è¿‡ç¨‹ç›´åˆ°ä½äº25%ï¼Œè¶…æ—¶æ—¶é—´ä¸º25ms å¿«æ¨¡å¼ï¼šé€»è¾‘å’Œå¿«æ¨¡å¼ç›¸åŒï¼Œåªæ˜¯è¶…æ—¶æ—¶é—´ä¸åŒã€‚å¦‚æœæ…¢æ¨¡å¼è¶…æ—¶åˆ™å…ˆæ‰§è¡Œä¸€æ¬¡å¿«æ¨¡å¼ï¼Œå¿«æ¨¡å¼ä¸‹è¶…æ—¶æ—¶é—´ä¸º1msä¸”2så†…åªèƒ½è¿è¡Œ1æ¬¡ 6.2 å†…å­˜æº¢å‡ºæ§åˆ¶ç­–ç•¥å½“Redisæ‰€ç”¨å†…å­˜è¾¾åˆ°maxmemoryä¸Šé™æ—¶ä¼šè§¦å‘ç›¸åº”çš„æº¢å‡ºæ§åˆ¶ç­–ç•¥ã€‚å…·ä½“ç­–ç•¥å—maxmemory-policyå‚æ•°æ§åˆ¶ï¼ŒRedisæ”¯æŒ6ç§ç­–ç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š noevictionï¼šé»˜è®¤ç­–ç•¥ï¼Œå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ã€‚åº”è¯¥æ²¡äººç”¨å§ã€‚ allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ Keyã€‚æ¨èä½¿ç”¨ï¼Œç›®å‰é¡¹ç›®åœ¨ç”¨è¿™ç§ã€‚ allkeys-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª Keyã€‚åº”è¯¥ä¹Ÿæ²¡äººç”¨å§ï¼Œä½ ä¸åˆ æœ€å°‘ä½¿ç”¨ Keyï¼Œå»éšæœºåˆ ã€‚ volatile-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ Keyã€‚è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯æŠŠ Redis æ—¢å½“ç¼“å­˜ï¼ŒåˆåšæŒä¹…åŒ–å­˜å‚¨çš„æ—¶å€™æ‰ç”¨ã€‚ä¸æ¨èã€‚ volatile-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ª Keyã€‚ä¾ç„¶ä¸æ¨èã€‚ volatile-ttlï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„ Key ä¼˜å…ˆç§»é™¤ã€‚ä¸æ¨èã€‚å¦‚æœæ²¡æœ‰å¯¹åº”çš„é”®ï¼Œåˆ™å›é€€åˆ°noevictionç­–ç•¥ã€‚ å‚è€ƒä½œè€…ï¼šæ¨é‘«ç§‘é“¾æ¥ï¼šhttps://www.jianshu.com/p/6a5eb0ddf57bæ¥æºï¼šç®€ä¹¦ 7. RedisæŒä¹…åŒ–rediså­˜åœ¨å†…å­˜ä¸­ï¼ŒæœåŠ¡å™¨æ•…éšœå°±é€ æˆäº†æ•°æ®ä¸¢å¤±ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›æŒä¹…åŒ–ç­–ç•¥æ¥ä¿æŠ¤æ•°æ® 7.1 RDBï¼ˆredis databaseï¼‰é»˜è®¤å¼€å¯ï¼Œå°†redisä¸­çš„æ•°æ®è½¬æ¢æˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè°ƒç”¨save/bgsave/è‡ªåŠ¨åŒ–æ—¶äº§ç”Ÿdump.rdbæ–‡ä»¶ï¼Œé€‚åˆå…¨é‡å¤‡ä»½ã€‚ saveï¼šé˜»å¡ï¼ˆè°ƒç”¨æ—¶å…¶ä»–clientçš„å‘½ä»¤ä¸èƒ½æ‰§è¡Œï¼‰ï¼Œè¦†ç›–ï¼ˆæœ‰æ—§çš„å°±æ›¿æ¢ï¼‰ bgsaveï¼šåå°è¿›è¡Œï¼ŒåŸç†æ˜¯ä¿å­˜forkå‡ºæ¥çš„å‰¯æœ¬ï¼Œå› æ­¤è°ƒç”¨bgsaveåå³ä½¿ä¿®æ”¹äº†ä¹Ÿä¸ä¼šè¢«ä¿å­˜ï¼Œå› ä¸ºå‰¯æœ¬æ²¡æœ‰å˜ã€‚ä¹Ÿé˜»å¡ä½†é˜»å¡çš„åªæ˜¯forké˜¶æ®µï¼Œä¸é˜»å¡å®¢æˆ·ç«¯å‘½ä»¤ï¼Œç¼ºç‚¹æ˜¯éœ€è¦æ¶ˆè€—é¢å¤–çš„å†…å­˜ é…ç½®è‡ªåŠ¨è§¦å‘ï¼šredis.confé…ç½®æ–‡ä»¶ä¸­è®¾ç½®save m nã€‚è¡¨ç¤ºmç§’å†…æ•°æ®é›†å­˜åœ¨næ¬¡ä¿®æ”¹æ—¶ï¼Œè‡ªåŠ¨è§¦å‘bgsaveã€‚ rdbçš„ä¸‰ç§è§¦å‘æ–¹å¼éƒ½æ˜¯ä¿ç•™äº†è§¦å‘å‰æœ€åä¸€åˆ»çš„çŠ¶æ€ï¼Œå› æ­¤ä¹Ÿç§°ä¸ºå¿«ç…§ æ¢å¤ï¼šå°†dump.rdbæ”¾åœ¨rediså®‰è£…ç›®å½•ï¼ˆå¯ä»¥é€šè¿‡config get dirå‘½ä»¤è·å–ï¼‰å¹¶å¯åŠ¨rediså³å¯ 7.2 AOFï¼ˆappend only fileï¼‰é»˜è®¤ä¸å¼€å¯ï¼Œè®°å½•çš„æ˜¯æ“ä½œå‘½ä»¤è€Œä¸æ˜¯å†…å­˜æ•°æ®ï¼Œç±»ä¼¼äºæ—¥å¿—æ–‡ä»¶ã€‚ä»–ä¸æ˜¯è®°å½•æ¯ä¸€æ­¥æ“ä½œï¼Œè€Œæ˜¯è°ƒç”¨bgrewriteaofå‘½ä»¤æ—¶å°†å½“å‰å†…å­˜ä¸­çš„æ•°æ®ç”Ÿæˆå‘½ä»¤çš„å½¢å¼ä¿å­˜ä¸‹æ¥ ä¹Ÿæœ‰ä¸‰ç§è§¦å‘æ–¹å¼ ï¼ˆ1ï¼‰æ¯ä¿®æ”¹åŒæ­¥alwaysï¼šåŒæ­¥æŒä¹…åŒ– æ¯æ¬¡å‘ç”Ÿæ•°æ®å˜æ›´ä¼šè¢«ç«‹å³è®°å½•åˆ°ç£ç›˜ æ€§èƒ½è¾ƒå·®ä½†æ•°æ®å®Œæ•´æ€§æ¯”è¾ƒå¥½ ï¼ˆ2ï¼‰æ¯ç§’åŒæ­¥everysecï¼šå¼‚æ­¥æ“ä½œï¼Œæ¯ç§’è®°å½• å¦‚æœä¸€ç§’å†…å®•æœºï¼Œæœ‰æ•°æ®ä¸¢å¤± ï¼ˆ3ï¼‰noï¼šä»ä¸åŒæ­¥ redis4.xä¹‹å‰å¼€å¯äº†AOFå°±ä¸ç”¨rdbäº†ï¼Œ4.xåŠä»¥åç”¨æ··åˆæ¨¡å¼ï¼Œæ¢å¤å¾ˆå¿« 8. é«˜å¯ç”¨æ¶æ„ä¸»ä»æ¶æ„+å“¨å…µæ¨¡å¼+é›†ç¾¤ 8.1 ä¸»ä»æ¶æ„ä½œç”¨ è¯»å†™åˆ†ç¦»ï¼šä»æœºåªè¯»ä¸å¯å†™ï¼Œç¼“è§£äº†ä¸»æœºè¯»å‹åŠ›ï¼Œå†™ä»æœºä¼šæŠ¥é”™ï¼ˆyou canâ€™t write read only slaveï¼‰ å®¹ç¾æ¢å¤ï¼šä»æœºä¼šå¤åˆ¶ä¸»æœºçš„æ•°æ®ï¼Œç›¸å½“äºå¤‡ä»½(é‡‡ç”¨çš„æ˜¯è®°å½•å¤åˆ¶çš„åç§»é‡çš„æ–¹å¼ï¼Œå¯ä»¥æ–­ç‚¹ç»­ä¼  ) é«˜å¯ç”¨ï¼šä¸»æœºä¸€æŒ‚ï¼Œä»æœºèƒ½å‡çº§ä¸ºä¸»æœº é…ç½®æ–¹æ³• å¦‚æœæ˜¯åŒä¸€å°ä¸»æœºåšå®éªŒï¼Œé‚£ä¹ˆè¦ä¿®æ”¹redis.conf(é»˜è®¤ä¸º6379.conf)ä¸­çš„ç«¯å£å·ã€pidã€æ—¥å¿—åã€rdbå(é»˜è®¤ä¸ºdump.rdbï¼Œä¼šè¦†ç›–) æŸ¥çœ‹è§’è‰²å‘½ä»¤ä¸ºinfo replication ä¸»æœºä¼šæ˜¾ç¤º role: master å¹¶æ˜¾ç¤ºä»æœºçš„ipå’Œç«¯å£ ä»æœºä¼šæ˜¾ç¤º role: slave å¹¶æ˜¾ç¤ºä¸»æœºipå’Œç«¯å£ ä»æœºæ‰§è¡Œå‘½ä»¤slaveof ä¸»æœºip ä¸»æœºç«¯å£å¹¶é…ç½®è®¤è¯å¯†ç å³å¯ï¼Œä¸»æœºæ— éœ€é…ç½® ä¸»ä»å¤åˆ¶è¿‡ç¨‹ é¦–å…ˆæ˜ç™½ä¸¤ä¸ªå…³é”®å­— runid: masterèŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ï¼Œæ¯æ¬¡å¯åŠ¨æ—¶ç”Ÿæˆï¼Œå¯ä»¥é€šè¿‡info serveræŸ¥çœ‹ offset: slaveéœ€è¦ä»å“ªä¸ªä½ç½®å¼€å§‹åŒæ­¥æ•°æ®(å¯ä»¥æ–­ç‚¹ç»­ä¼ ) é™¤äº†å…¨é‡å¤åˆ¶ï¼Œè¿˜æœ‰éƒ¨åˆ†å¤åˆ¶ï¼Œé˜²æ­¢å…¨é‡å¤åˆ¶ä¸­å› ç½‘ç»œæŠ–åŠ¨è€Œå¤±å»è¿æ¥ 8.2 å“¨å…µæ¨¡å¼å“¨å…µå°±æ˜¯ç”¨æ¥ç›‘ç®¡å„ä¸ªæœºå™¨çš„å¥åº·çŠ¶æ€çš„ï¼Œå½“ä¸»æœºå®•æœºæ—¶ï¼Œæ ¹æ®åç§»é‡å°†æŸä¸€å°ä»æœºé€šè¿‡slaveof no oneå˜æˆä¸»æœºï¼Œå…¶ä»–ä¸»ä»æœºslaveof newIp newPortï¼Œå“¨å…µå¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚ 8.3 Redisé›†ç¾¤redis3.0ä¹‹åçš„æ–°ç‰¹æ€§ï¼Œä¸»ä»å¤åˆ¶è¿˜ä¸èƒ½å®ç°é«˜å¯ç”¨ï¼Œå› ä¸ºåªåˆ†æ‹…äº†è¯»å‹åŠ›ï¼Œä½¿ç”¨Redis Clusterï¼Œå¤šä¸ªâ€èŠ‚ç‚¹â€ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½é‡‡ç”¨sä¸»ä»æ¶æ„ï¼Œæ¯ä¸ªä¸»èŠ‚ç‚¹éƒ½å¯ä»¥æ”¯æŒè¯»å†™æ“ä½œ æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£çš„åŒºåŸŸä¸åŒï¼Œæ•°æ®æ˜¯ä¸ä¸€è‡´çš„ï¼Œè¦è·å–æ•°æ®æ—¶å¿…é¡»å…ˆé€šè¿‡crc16ç®—æ³•å†%16384å¾—åˆ°å¯¹åº”çš„èŠ‚ç‚¹åœ°å€ åæœŸæ–°å¢èŠ‚ç‚¹å¯ä»¥è¿›è¡Œhashè¿ç§»ï¼Œæ½œç§»éƒ¨åˆ†æ•°æ®åˆ†æ‹…å…¶ä»–èŠ‚ç‚¹çš„å‹åŠ›","link":"/redis/redis%E5%9F%BA%E7%A1%80/"},{"title":"mysqlç´¢å¼•","text":"1. ä¸ºä»€ä¹ˆæ˜¯B+æ ‘1.1 å“ˆå¸Œç´¢å¼•å“ˆå¸Œèƒœåœ¨æŸ¥æ‰¾å•æ¡æ•°æ®å¿«ï¼Œåªéœ€è¦è®¡ç®—å“ˆå¸Œå‡½æ•°å°±å¯ä»¥å®šä½åˆ°ç´¢å¼•æ•°ç»„ä¸‹æ ‡ï¼Œç»§è€Œå¾—åˆ°å€¼ï¼Œpsï¼šç´¢å¼•å­˜å‚¨çš„ä¸æ˜¯ç›´æ¥çš„æ•°æ®åº“ä¸­çš„å€¼ï¼Œè€Œæ˜¯åœ°å€ï¼Œé€šè¿‡ç´¢å¼•æ‰¾åˆ°åœ°å€ç„¶åå°±å¯ä»¥å–æ•°æ®åº“ä¸­åœ°å€å¯¹åº”çš„å€¼äº†ã€‚ ä½†æ˜¯å¦‚æœä½¿ç”¨å“ˆå¸Œè¡¨åšç´¢å¼•ï¼Œæ˜¯æ— åºçš„ï¼ˆ30 % 29 = 1ä¼šåœ¨2çš„å‰é¢ï¼‰ï¼Œä½†æ˜¯æ•°æ®åº“ç»å¸¸éœ€è¦èŒƒå›´æŸ¥è¯¢ï¼Œå¤§äºå°äºï¼Œæ’åºç­‰æ“ä½œï¼Œå› æ­¤å“ˆå¸Œç´¢å¼•ä¸åˆé€‚ 1.2 AVLæ ‘å¹³è¡¡äºŒå‰æ ‘ä½œç´¢å¼•ï¼ŒæŸ¥è¯¢æ•ˆç‡æ˜¯O(logn)ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªç¼ºç‚¹ æ ‘è¶Šé«˜æŸ¥è¯¢é€Ÿåº¦è¶Šæ…¢ ä¸­é—´çš„æŸä¸ªidæ¯”å¦‚0005å»åˆ°äº†å¶å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¦æŸ¥æ‰¾idå¤§äº0005çš„å°±éœ€è¦å›æ—‹æŸ¥æ‰¾0006 1.3 Bæ ‘ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å¤šä¸ªå€¼ï¼Œè§£å†³äº†AVLæ ‘é«˜åº¦è¿‡é«˜çš„é—®é¢˜ï¼Œä½†æ˜¯å›æ—‹æŸ¥æ‰¾çš„é—®é¢˜ä¾ç„¶å­˜åœ¨ 1.4 B+æ ‘B+æ ‘å°±æ˜¯ä¸ºäº†è§£å†³å›æ—‹æŸ¥æ‰¾çš„é—®é¢˜ï¼Œæ¯ä¸ªæ ¹èŠ‚ç‚¹å‡ºç°è¿‡çš„å…ƒç´ éƒ½ä¼šåœ¨å¶å­èŠ‚ç‚¹å‡ºç°ä¸€æ¬¡ï¼ˆéå¶å­èŠ‚ç‚¹åªå­˜keyï¼Œå¶å­èŠ‚ç‚¹è¿˜å­˜äº†åœ°å€ï¼Œç”¨äºåœ¨æ•°æ®åº“ä¸­æŸ¥æ‰¾ï¼‰ï¼Œæœ€åº•ä¸‹çš„å¶å­èŠ‚ç‚¹å±‚ç›´æ¥æŒ‡å‘äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ ·æŸ¥è¯¢å¤§äºæŸä¸ªidçš„æ—¶å€™å°±å¯ä»¥å…ˆé€šè¿‡æ ‘æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡é“¾è¡¨ä¸€ç›´å¾€åæŸ¥è¯¢è¦æ‰¾çš„æ•°æ® æœ€åè´´ä¸Šè¿™ä¸ªæ•°æ®ç»“æ„å¯è§†åŒ–ç½‘ç«™ï¼Œå¥½åƒæ˜¯æ—§é‡‘å±±å¤§å­¦çš„ç½‘ç«™ 1https://www.cs.usfca.edu/~galles/visualization/Algorithms.html 2. explainæŸ¥çœ‹ç´¢å¼•ä½¿ç”¨æƒ…å†µåªéœ€è¦åœ¨selectè¯­å¥å‰é¢åŠ ä¸Šexplainå…³é”®å­—å³å¯è§£é‡ŠæŸ¥è¯¢ 1explain select * from table_name where id &gt; 9 å…³æ³¨å‡ ä¸ªå­—æ®µ typeï¼šä»£è¡¨äº†ç´¢å¼•çš„çº§åˆ«ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªçº§åˆ« systemï¼šæŸ¥æ‰¾åªæœ‰ä¸€æ¡æ•°æ®çš„ç³»ç»Ÿè¡¨ï¼ŒåŸºæœ¬ä¸å¯èƒ½è¾¾åˆ° constï¼šæŸ¥ä¸»é”®ï¼ˆwhere id = 1ï¼‰å› ä¸ºä¸»é”®æ˜¯å”¯ä¸€çš„ï¼Œè€Œä¸”mysqlè‡ªå¸¦ä¸»é”®ç´¢å¼• eq_refï¼šå»ºç«‹äº†å”¯ä¸€ç´¢å¼•/ä¸»é”®ç´¢å¼•+è¦æ±‚æŸ¥å‡ºæ¥çš„ç´¢å¼•åˆ—æ˜¯å”¯ä¸€çš„ï¼ˆwhere èº«ä»½è¯å· = â€œ123â€ï¼‰ refï¼šå¯¹åº”åˆ—å»ºç«‹äº†ç´¢å¼•ï¼ˆå¯ä»¥æ˜¯è”åˆç´¢å¼•ï¼‰+åœ¨ç´¢å¼•åˆ—ä¸ŠæŸ¥è¯¢ï¼ˆwhere name = â€œå¼ ä¸‰â€ï¼‰ï¼Œæ˜¯ä¸€èˆ¬sqlä¼˜åŒ–æœŸæœ›è¾¾åˆ°çš„çº§åˆ« rangeï¼šå¯¹åº”åˆ—å»ºç«‹äº†ç´¢å¼•+åœ¨ç´¢å¼•åˆ—ä¸ŠèŒƒå›´æŸ¥æ‰¾ï¼ˆbetweenã€inã€&gt;ã€&lt;ã€&gt;=ç­‰ï¼‰ï¼Œè¦æ³¨æ„inåªæœ‰åœ¨æ•°æ®é‡å¤§çš„æ—¶å€™æ‰ç”Ÿæ•ˆ indexï¼šä¹Ÿå«è¦†ç›–ç´¢å¼•ï¼Œå¯¹åº”åˆ—å»ºç«‹äº†ç´¢å¼•+æŸ¥è¯¢ç»“æœè¿”å›å­—æ®µé™å®šï¼ˆselect nameæ¯”select *å¥½çš„åŸå› ï¼‰ï¼Œè¦æ³¨æ„å¦‚æœnameåˆ—æ²¡æœ‰å»ºç«‹ç´¢å¼•æ˜¯ä¸å¯ä»¥çš„ï¼è¿™ç§æƒ…å†µä¸‹å®é™…è¿˜æ˜¯éå†äº†æ‰€æœ‰æ•°æ®ï¼Œä½†æ˜¯éå†çš„æ˜¯ç´¢å¼•æ ‘ï¼ˆå†…å­˜ï¼‰ï¼Œè€Œä¸æ˜¯æ•°æ®åº“ï¼ˆç¡¬ç›˜ï¼‰ allï¼šæ²¡æœ‰ç”¨åˆ°ç´¢å¼• possible_keysï¼šä»£è¡¨å¯èƒ½ç”¨åˆ°çš„ç´¢å¼• keyï¼šä»£è¡¨å®é™…ç”¨åˆ°çš„ç´¢å¼• rowsï¼šå®é™…æ‰«æçš„è¡Œæ•°ï¼Œè¶Šå°è¶Šå¥½ï¼Œè¯´æ˜è¿‡æ»¤çš„è¶Šå½»åº• refï¼šç´¢å¼•å„ä¸ªå­—æ®µçš„çº§åˆ«ï¼ˆå› ä¸ºæœ‰å¯èƒ½æ˜¯å¤åˆç´¢å¼•ä½†ä¸æ˜¯æ‰€æœ‰éƒ½åŒä¸€ä¸ªçº§åˆ«ï¼‰ key_lenï¼šç´¢å¼•å ç”¨çš„ç©ºé—´ï¼Œè¶Šå°è¶Šå¥½ï¼Œå› ä¸ºæœ‰å¯èƒ½ä½ ç”¨åˆ°äº†ç´¢å¼•ï¼Œä½†è¯¥ç´¢å¼•å¯èƒ½ä¸æ˜¯æœ€ä¼˜ï¼ˆå¤šäº†ä¸å¿…è¦çš„å­—æ®µï¼‰ å®æˆ˜ç¯èŠ‚ï¼ ç¯å¢ƒï¼š1000æ¡æ•°æ®ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ 2.1 æ— ç´¢å¼•æ•ˆæœ1SELECT SQL_NO_CACHE * FROM `test_user` WHERE phone = &quot;13542831871&quot; AND lan_id = 702 AND region_id = 94 åŠ ä¸ŠSQL_NO_CACHEæŒ‡å®šä¸ä½¿ç”¨ç¼“å­˜ï¼ŒæŸ¥è¯¢æ›´æ¥è¿‘çœŸå®å€¼ï¼Œå½“ç„¶æˆ‘è§‰å¾—è¿˜æ˜¯æœ‰ç¼“å­˜çš„ï¼Œç¬¬ä¸€æ¬¡5sï¼Œç¬¬äºŒæ¬¡å¼€å§‹ç¨³å®šåœ¨3.7så·¦å³ è§£é‡Šæ‰§è¡Œï¼Œå¯ä»¥çœ‹åˆ°typeä¸ºallï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä½¿ç”¨ç´¢å¼•ï¼Œæ‰«æäº†å…¨è¡¨ 2.2 æœ‰ç´¢å¼•æ•ˆæœ1ALTER TABLE `test_user` ADD INDEX idx_phone_lan_region(phone, lan_id, region_id) éšåå†è§£é‡ŠæŸ¥è¯¢ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œ1.3sï¼Œéšåç¨³å®šåœ¨0.03sï¼Œå¯ä»¥çœ‹åˆ°æå‡è¿˜æ˜¯å¾ˆå¤§çš„ å¯ä»¥çœ‹åˆ°typeä¸ºrefï¼Œä»£è¡¨ä½¿ç”¨äº†ç´¢å¼•ï¼Œkeyè¯´æ˜æœ€ç»ˆä½¿ç”¨çš„ç´¢å¼•åç§°ï¼Œrefä¸ºconstè¡¨ç¤ºä¸‰ä¸ªå­—æ®µéƒ½ç”¨åˆ°äº†ç´¢å¼•ï¼Œrowsä¸º1è¡¨ç¤ºå…±æ‰«æ1æ¡ã€‚è¿™å°±æ˜¯æœ€å¥½çš„çŠ¶æ€äº†ï¼Œèƒ½ç”¨çš„ç´¢å¼•éƒ½ç”¨ä¸Šäº†ï¼Œç²¾å‡†å®šä½ï¼ 3. SQLè°ƒä¼˜æ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ ä½¿ç”¨explainæŸ¥çœ‹sqlæ‰§è¡Œè®¡åˆ’å¹¶æ’é™¤ç¼“å­˜å¹²æ‰° analyze tableå’Œforce indexå¼ºåˆ¶èµ°ç´¢å¼• æ£€æŸ¥æ˜¯å¦èƒ½ä¼˜åŒ–SQLä¸­çš„å‡½æ•°å’Œè®¡ç®— æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç±»å‹/ç¼–ç è½¬æ¢å¯¼è‡´çš„ç´¢å¼•å¤±æ•ˆ æ£€æŸ¥likeå·¦è¾¹æ˜¯å¦æœ‰%å¯¼è‡´ç´¢å¼•å¤±æ•ˆ order byæ–‡ä»¶å†…æ’åºä¼˜åŒ– æ£€æŸ¥æ˜¯å¦èƒ½ä½¿ç”¨è¦†ç›–ç´¢å¼•ä»£æ›¿select * æ£€æŸ¥æ˜¯å¦èƒ½é€šè¿‡è”åˆç´¢å¼•å‡å°‘å›è¡¨æ¬¡æ•° æ£€æŸ¥æ˜¯å¦èƒ½ä¼˜åŒ–æœ€å·¦åŒ¹é…æ³•åˆ™çš„é¡ºåº é•¿å­—æ®µä½¿ç”¨å‰ç¼€ç´¢å¼•ä¼˜åŒ– æ™®é€šç´¢å¼•å’Œå”¯ä¸€ç´¢å¼•çš„é€‰æ‹©ä¼˜åŒ– è€ƒè™‘MySQL5.6ä»¥ä¸Šç‰ˆæœ¬å¸¦æ¥çš„ç´¢å¼•ä¸‹æ¨ä¼˜åŒ– é˜²æ­¢åƒæˆ‘è¿™ç§å•¥ä¹Ÿä¸æ‡‚çš„èœé¸¡ä¹±åŠ ç´¢å¼•å¯¼è‡´çš„ç´¢å¼•å¤±æ•ˆé—®é¢˜(â—â€™â—¡â€™â—) å…¶å®æ ¹æœ¬åŸå› å°±æ˜¯å‰é¢è¯´çš„B+æ ‘çš„ç»“æ„ï¼Œç»“æ„å†³å®šæ€§è´¨ï¼Œèƒ½æ ¹æ®B+æ ‘æ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå¤±æ•ˆï¼Œä¸‹é¢ä¸€ä¸€ä»‹ç»ã€‚ 3.1 å‡½æ•°å¦‚ä½¿ç”¨äº†count(*)ã€sum()ã€round()ä¼šå¯¼è‡´å¤±æ•ˆï¼Œæ³¨æ„ï¼šè®¡ç®—/å‡½æ•°å¯¼è‡´çš„å¤±æ•ˆæŒ‡çš„æ˜¯â€œselectåâ€å’Œâ€œ=å‰â€çš„å­—æ®µï¼Œå› ä¸º=åé¢çš„å‡½æ•°æ˜¯èƒ½ç”¨åˆ°ç´¢å¼•çš„æ¯”å¦‚where lan_id = 1 + 1å’Œwhere name = lower(s) 3.2 è®¡ç®—å­—æ®µåé¢çš„å­—æ®µè®¡ç®—å­—æ®µï¼š+ã€-ã€*ã€/ã€!=ã€&lt;ã€&gt;ã€is nullã€is not nullã€or å…ˆæ¥çœ‹è¿™ä¸ªrangeï¼Œè¯´æ˜ç´¢å¼•åˆ—+&gt;æ˜¯å¯ä»¥ç”¨åˆ°rangeçº§åˆ«çš„ç´¢å¼•çš„ æ¥ç€æŠŠè¿™ä¸ª&gt;åé¢çš„region_idå­—æ®µå»æ‰ è¿™å°±è¯´æ˜å®é™…ä¸Šå¤åˆç´¢å¼•çš„æœ€åä¸€åˆ—region_idæ˜¯æ²¡æœ‰è¢«ç”¨åˆ°çš„ï¼Œåªç”¨åˆ°äº†å‰ä¸¤åˆ—ã€‚ å¦å¤–å°±æ˜¯id + 1 = 1000æ”¹æˆid = 1000 - 1æ‰èƒ½èµ°ç´¢å¼• 3.3 ç±»å‹è½¬æ¢id = â€œ1â€æœ¬æ¥æ˜¯æ•°å­—ï¼Œè™½ç„¶ä¹Ÿèƒ½æŸ¥ï¼Œä½†æ˜¯ç´¢å¼•å¤±æ•ˆï¼ˆ5.7ä¹‹å‰ä¸å¤±æ•ˆï¼‰ éƒ½ä¼šæ˜¾ç¤ºå¦‚ä¸‹ ä¹Ÿå°±æ˜¯çœ‹åˆ°æŸ¥è¯¢phoneå­—æ®µè¯´æ˜å¯èƒ½ä¼šç”¨åˆ°ç´¢å¼•ï¼Œä½†å®é™…ä¸Šç”¨ä¸åˆ° 3.4 ç¼–ç ä¸ä¸€è‡´utf8mb4å’Œutf8ä¸¤å¼ è¡¨è”æŸ¥æ—¶ï¼Œä¼šè‡ªåŠ¨è½¬æ¢æˆutf8mb4ï¼Œå¦‚æœç´¢å¼•åœ¨utf8çš„è¡¨ä¸­ï¼Œè¿™æ ·æ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ï¼Œç©¶å…¶åŸå› æ˜¯äºŒå‰æ ‘æŸ¥æ‰¾ä¹Ÿæ˜¯å¾—åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ï¼Œç¼–ç ä¸ä¸€è‡´æ‰¾ä¸åˆ° 3.5 likeçš„å¤±æ•ˆå’Œä¼˜åŒ–likeå·¦è¾¹æœ‰%æ˜¯ç”¨ä¸åˆ°ç´¢å¼•çš„ åªæœ‰å³è¾¹æœ‰%å¯ä»¥ç”¨rangeçº§åˆ«çš„ç´¢å¼• ç”±äºæ¨¡ç³Šæœç´¢ä¸šåŠ¡åœºæ™¯é€šå¸¸éœ€è¦ä¸¤è¾¹%ï¼Œè¿™æ—¶å€™å¦‚æœåªæœç´¢è¿™ä¸ªå­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆå‰é¢ä»‹ç»çš„indexï¼‰ä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯select phoneè€Œä¸æ˜¯select *ï¼Œå¯ä»¥çœ‹åˆ°ä¹Ÿæ˜¯æœ‰ç´¢å¼•çš„ å¦‚æœéœ€è¦å…¨éƒ¨å­—æ®µï¼Œæ ¹æ®æœ¬æ¬¡çš„phoneç»“æœå†æœç´¢ä¸€æ¬¡=ï¼Œæ€»ä½“ä¼šæ¯”å…¨è¡¨æ‰«æå¿« å¦ä¸€ç§ä¼˜åŒ–æ–¹æ¡ˆæ˜¯å»ºç«‹ä¸€ä¸ªåå‘åˆ—ï¼Œå¾ˆä¸é”™çš„æ€è·¯ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  https://blog.csdn.net/weixin_38106322/article/details/106583450 mysql5.7åå¯ä»¥å»ºç«‹è™šæ‹Ÿåˆ—ï¼Œå‚è€ƒè¿™ç¯‡æ–‡ç«  https://blog.csdn.net/JiSoBeautiful/article/details/96433283 ä¹Ÿå¯ä»¥ç›´æ¥ä¸Šesï¼Œå¯ä»¥è¿›è¡Œéš”å­—æŸ¥è¯¢ï¼Œé€‚åº”æ›´å¤šä¸šåŠ¡åœºæ™¯ 3.6 order byçš„å¤±æ•ˆå’Œä¼˜åŒ–order byä¼šä½¿ç´¢å¼•å¤±æ•ˆ å…ˆå¯¹create_timeåˆ—å»ºç«‹ç´¢å¼• 1ALTER TABLE `test_user` ADD INDEX idx_create_time(create_time) æŸ¥è¯¢æ—¶é—´5s+ è§£é‡ŠæŸ¥è¯¢ï¼Œå¯ä»¥çœ‹åˆ°typeä¸ºallï¼Œå¦å¤–è¦çœ‹extraåˆ—ï¼Œusing filesortè¯´æ˜ä½¿ç”¨äº†æ–‡ä»¶å†…æ’åºï¼šæ„æ€æ˜¯å®ƒåœ¨å†…å­˜ä¸­å¼€è¾Ÿäº†ä¸€ä¸ªç©ºé—´ï¼Œå°†æ•°æ®å¤åˆ¶åˆ°å†…å­˜é‡Œé¢ï¼Œè¿›è¡Œæ’åºå†è¿”å›ï¼Œè¿™æ˜¯å¾ˆææ€–çš„ä¸€ä»¶äº‹æƒ…ï¼Œæµªè´¹äº†å¤§é‡çš„å†…å­˜ ä¼˜åŒ–æ–¹æ¡ˆï¼šä½¿ç”¨è¦†ç›–ç´¢å¼•select create_time æ—¶é—´å¦‚ä¸‹ è¦†ç›–ç´¢å¼•è™½ç„¶é€Ÿåº¦æå‡æ˜æ˜¾ï¼Œä½†æ˜¯åªæŸ¥ä¸€åˆ—å¾ˆéš¾æ»¡è¶³ä¸šåŠ¡åœºæ™¯ï¼Œå¦‚æœç»“æœä¸ºä¸€æ¡ï¼Œé‚£ä¹ˆè¿˜å¥½ï¼Œå¯ä»¥æ ¹æ®è¿™ä¸€æ¡å†æŸ¥ä¸€é=ï¼Œä½†æ˜¯å¦‚æœæœ‰å¤šæ¡ï¼Œä½¿ç”¨inä¸ä¸€å®šèƒ½å¸¦æ¥å¾ˆå¤§çš„æå‡ï¼Œæ—¶é—´å’Œè§£é‡Šå¦‚ä¸‹å›¾ å› æ­¤ï¼Œä¸å¦‚è¯»å–åˆ°javaä¸­è¿›è¡Œæ’åºæ¥çš„å¿« 3.7 æœ€å·¦åŒ¹é…æ³•åˆ™æœ€å·¦åŒ¹é…æ³•åˆ™ï¼šæˆ‘ä»¬çš„ç´¢å¼•å­—æ®µä¾æ¬¡æ˜¯phone, lan_id, region_idï¼Œå› æ­¤èƒ½åŒ¹é…çš„ç»„åˆå®é™…æœ‰ï¼š phone, lan_id, region_id phone, lan_id phone æˆ‘ä»¬è¯•ä¸€ä¸‹æŸ¥è¯¢æ¡ä»¶åªæœ‰ç¬¬ä¸€ä¸ªå’Œç¬¬ä¸‰ä¸ª å¯ä»¥ä»typeå’Œkeyä¸­çœ‹å‡ºï¼Œä¾ç„¶ä½¿ç”¨äº†è¿™ä¸ªå¤åˆç´¢å¼•ï¼Œä½†æ˜¯ä»refçœ‹åˆ°ç ´åäº†æœ€å·¦åŒ¹é…æ³•åˆ™æƒ…å†µä¸‹ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå­—æ®µphoneä½¿ç”¨äº†ç´¢å¼•ã€‚æ—¶é—´çš„è¯ç”±äºç»“æœéƒ½åªæœ‰1æ¡æ•°æ®ï¼Œæ‰€ä»¥ç›¸ä¼¼ï¼Œå‚è€ƒæ„ä¹‰ä¸å¤§ã€‚ å¯ä»¥ç®€å•çš„æƒ³è±¡æˆå‡ åº§è¿ç»­çš„æ¡¥ï¼Œåªæœ‰è¿‡äº†ç¬¬ä¸€åº§æ¡¥æ‰èƒ½è¿‡ç¬¬äºŒåº§æ¡¥ã€‚å½“ç„¶çŸ¥å…¶ç„¶ä¹Ÿè¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œè¦çŸ¥é“ç©¶ç«Ÿä¸ºä»€ä¹ˆè¿˜æ˜¯å¾—è‡ªå·±å¿ƒé‡Œæœ‰Bæ ‘( â€¢Ì€ Ï‰ â€¢Ì ) è”åˆç´¢å¼•çš„æ ‘èŠ‚ç‚¹æ˜¯è¿™æ ·çš„ï¼Œdataé‡Œé¢å­˜äº†ä¸€ä¸ªå…ƒç»„ï¼ˆä¸‰ä¸ªå°±æ˜¯ä¸‰å…ƒç»„ï¼‰ å› ä¸ºåœ¨å»ºæ ‘å’ŒæŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­éœ€è¦æ¯”è¾ƒå¤§å°ï¼ˆä¸­æ–‡ä¹Ÿæ”¯æŒï¼‰ï¼Œæ˜¯æŒ‰ç…§ç´¢å¼•çš„é¡ºåºæ¥çš„ï¼šå…ˆæ¯”è¾ƒç¬¬ä¸€ä¸ªï¼Œç¬¬ä¸€ä¸ªç›¸åŒå†æ¯”è¾ƒç¬¬äºŒä¸ªâ€¦ä»¥æ­¤ç±»æ¨ï¼Œå› æ­¤åªæœ‰åœ¨å‰é¢çš„å­—æ®µæœ‰åºï¼ˆèƒ½æ‰¾åˆ°ï¼‰çš„æƒ…å†µä¸‹åä¸€ä¸ªå­—æ®µæ‰æœ‰åºï¼ˆèƒ½æ‰¾åˆ°ï¼‰ï¼Œæ¯”å¦‚ä¸Šå›¾åªæœ‰åœ¨å­—æ®µaä¸º1çš„æƒ…å†µä¸‹bæ‰æ˜¯æœ‰åºçš„ï¼Œæ€»ä½“çœ‹bæ˜¯æ²¡æœ‰åºçš„ã€‚å› æ­¤è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå‡ºç°æœ€ä½³å·¦å‰ç¼€æ³•åˆ™çš„æ ¹æœ¬åŸå› ã€‚ 3.8 å‰ç¼€ç´¢å¼•ç®€å•è¯´å°±æ˜¯å¯¹äºé•¿å­—æ®µï¼Œæ¯”å¦‚descirptionï¼Œæˆ–è€…çŸ­å­—æ®µä½†æƒ³èŠ‚çœç´¢å¼•é•¿åº¦ï¼Œå¯ä»¥æˆªå–å­—æ®µçš„ä¸€éƒ¨åˆ†ä½œä¸ºç´¢å¼•ï¼Œä»è€ŒèŠ‚çœç´¢å¼•key_lenã€‚å› ä¸ºç´¢å¼•è¶Šé•¿ï¼Œå ç”¨ç£ç›˜è¶Šå¤§ï¼Œä¸€ä¸ªæ•°æ®é¡µå­˜çš„ç´¢å¼•å°±è¶Šå°‘ï¼Œä¼šé™ä½æ•ˆç‡ï¼Œä¸¾ä¸ªä¾‹å­ï¼š é‚®ç®±xxxx@qq.comï¼Œæˆ‘ä»¬ç´¢å¼•å¯ä»¥åªåšxxxx ç½‘å€www.abc.comï¼Œæˆ‘ä»¬å¯ä»¥æˆªå–ç¬¬ä¸€ä¸ª.åé¢çš„æ¥å»ºç«‹ç´¢å¼• èº«ä»½è¯å‰é¢æ˜¯åŒºå·ï¼ŒåŒºåˆ†åº¦ä¸é«˜ï¼Œå¯ä»¥reverseåå†æˆªå– é‚£ä¹ˆå¦‚ä½•è¯„ä»·åŒºåˆ†åº¦ï¼Œå‰ç¼€éœ€è¦æˆªå–å¤šå°‘ä½å‘¢ï¼Ÿå‚è€ƒè¿™ç¯‡åšå®¢ https://blog.csdn.net/u013295276/article/details/79105163 12345678910-- è®¡ç®—å‡ºå®Œæ•´å­—ç¬¦ä¸²çš„é€‰æ‹©æ€§(æ¯”å¦‚0.3)SELECT COUNT(DISTINCT city)/COUNT(*) FROM city_demo;-- è®¡ç®—å„ä¸ªå‰ç¼€çš„é€‰æ‹©æ€§(å‰34567ä¸ªå­—ç¬¦)ï¼Œç„¶åæ‰¾æ¯”è¾ƒæ¥è¿‘çš„ä¸”å‰ç¼€æœ€çŸ­çš„SELECT COUNT(DISTINCT LEFT(city,3))/COUNT(*) pref3, COUNT(DISTINCT LEFT(city,4))/COUNT(*) pref4, COUNT(DISTINCT LEFT(city,5))/COUNT(*) pref5, COUNT(DISTINCT LEFT(city,6))/COUNT(*) pref6, COUNT(DISTINCT LEFT(city,7))/COUNT(*) pref7FROM city_demo; 3.9 å”¯ä¸€ç´¢å¼•å’Œæ™®é€šç´¢å¼•çš„é€‰æ‹©è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚å¿µå°±æ˜¯change bufferï¼š MySQLæŸ¥è¯¢çš„æ—¶å€™ä¼šå°†æ•°æ®é¡µåŠ è½½è¿›å†…å­˜ä¸­ï¼Œæ›´æ–°çš„è¯å°±å¯ä»¥ç›´æ¥æ›´æ–°å†…å­˜ä¸­çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ·å†™ç¡¬ç›˜ï¼ˆè¿™æ˜¯æœ€è€—æ—¶çš„ï¼‰ã€‚å¦‚æœæ²¡æŸ¥è¯¢ï¼Œé‚£ä¹ˆå†…å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œæ›´æ–°æ“ä½œç¼“å­˜åœ¨change bufferä¸­ï¼Œä¸‹æ¬¡æŸ¥è¯¢çš„æ—¶å€™å†å°†æ•°æ®é¡µè¯»å…¥å†…å­˜ï¼Œç„¶åæ‰§è¡Œchange bufferä¸­ä¸è¿™ä¸ªé¡µæœ‰å…³çš„æ“ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšmergeã€‚ å”¯ä¸€ç´¢å¼•çš„åŠ£åŠ¿ï¼šéœ€è¦è¿›è¡Œå”¯ä¸€æ€§æ£€æŸ¥ï¼Œé‚£ä¹ˆä¼šè¯»å–æ•°æ®é¡µåˆ°å†…å­˜ï¼Œæ— æ³•ä½¿ç”¨change buffer å”¯ä¸€ç´¢å¼•çš„ä¼˜åŠ¿ï¼šå› ä¸ºæ˜¯å”¯ä¸€çš„ï¼ŒæŸ¥è¯¢çš„æ—¶å€™æ‰¾åˆ°å³å¯ï¼Œä¸éœ€è¦å¾€å³ç»§ç»­æŸ¥æ˜¯å¦ç›¸åŒ ç»¼ä¸Šæ‰€è¿° 3.10 ç´¢å¼•ä¸‹æ¨5.6ä¹‹åmysqlè‡ªå¸¦çš„ä¼˜åŒ–ï¼Œçœ‹ä¸‹é¢è¿™ä¸ªè¯­å¥ï¼Œå‡è®¾å»ºç«‹äº†ç´¢å¼•(name, size) 1select * from itemcenter where name like 'å¼ %' and size=22; 5.6ä¹‹å‰ï¼Œåœ¨B+æ ‘ä¸­æ‰¾åˆ°10ä¸ªå¼ %ï¼Œé‚£ä¹ˆä¼šå°†è¿™10æ¡æ•°æ®çš„idè¿›è¡Œå›è¡¨æ‰¾åˆ°size=22 5.6ä¹‹åï¼Œåœ¨B+æ ‘ä¸­æ‰¾åˆ°10ä¸ªå¼ %ï¼Œå…ˆåˆ¤æ–­ç´¢å¼•ä¸­çš„size=22ï¼Œè¿‡æ»¤åå¯èƒ½å‰©2æ¡ï¼Œå†æ ¹æ®idå›è¡¨ å‚è€ƒæœ¬æ–‡å‚è€ƒ ITè€å“¥å…¬ä¼—å·å’Œbilibiliè§†é¢‘ï¼ˆhttps://space.bilibili.com/526653251?from=search&amp;seid=7511781974100514678ï¼‰ ä¸‰å¤ªå­æ•–ä¸™å…¬ä¼—å·MySQLç³»åˆ—æ–‡ç«  SCDNåšå®¢ï¼šhttps://blog.csdn.net/u013295276/article/details/79105163","link":"/Mysql/mysql%E7%B4%A2%E5%BC%95/"},{"title":"ä¸ºä»€ä¹ˆæˆ‘çš„åšå®¢æç¤ºä¸å®‰å…¨","text":"1. å‰è¨€å¾ˆæœ‰æ„æ€çš„ä¸€ä»¶äº‹ï¼Œä¸‡ä¸‡æ²¡æƒ³åˆ°æˆ‘é¢è¯•æ—¶è¢«é—®äº†è¿™ä¸ªé—®é¢˜ã€‚ â€ä½ æœ‰æ²¡æœ‰å‘ç°ä½ çš„åšå®¢urlæ—è¾¹æç¤ºç½‘ç«™ä¸å®‰å…¨ï¼Ÿè¯·é—®ä½ æœ‰æ²¡æœ‰æ€è€ƒè¿‡æ˜¯ä¸ºä»€ä¹ˆï¼Ÿâ€œâ€”â€”åŒç›¾ç§‘æŠ€é¢è¯•å®˜æ‰“å¼€äº†æˆ‘çš„åšå®¢å¹¶å¦‚æ˜¯è¯´é“ å½“æ—¶æˆ‘å†…å¿ƒé¢¤æŠ–äº†ä¸€ä¸‹ï¼Œä¸çŸ¥é“è¿™ä¸ªæ˜¯å› ä¸ºhttpsçš„åŸå› è¿˜æ˜¯æˆ‘çš„åŸŸåæ²¡æœ‰å¤‡æ¡ˆçš„åŸå› ï¼Œæƒ³äº†æƒ³æˆ‘ç›´æ¥å›ç­”äº†ä¸å¤ªæ¸…æ¥šâ€¦æ¥ç€ç¬¬äºŒä¸ªé—®é¢˜å°±æ˜¯http/httpsçš„åŒºåˆ«ï¼Œæˆ‘åªçŸ¥é“åå­—sä»£è¡¨securityâ€¦ 2. è§£å†³æ–¹æ³•å…¶å®å½“åˆæ­å»ºåšå®¢ä¹Ÿåªæ˜¯ä¸ºäº†è®°å½•ä¸€ç‚¹å­¦ä¹ å¿ƒå¾—ï¼Œä¸»è¦éƒ½æ˜¯åœ¨å†…å®¹ä¸Šï¼Œç¡®å®æ²¡æœ‰è®¤çœŸç«¯è¯¦è¿‡é…ç½®ï¼Œé€‰hexoæ­å»ºä¹Ÿå°±æ˜¯å› ä¸ºéƒ¨ç½²ç®€å•ã€‚ ä»Šå¤©æˆ‘äº†è§£äº†ä¸€ä¸‹ ç½‘ç«™ä¸å®‰å…¨è¿™ä¸ªå…¶å®å¾ˆå®¹æ˜“è§£å†³ï¼Œæ˜¯å› ä¸ºhttp/httpsçš„é—®é¢˜ï¼Œå› ä¸ºæ˜¯github pagesæ‰˜ç®¡ï¼Œæ‰€ä»¥åªè¦åœ¨é¡¹ç›®çš„settingsä¸‹æ‰“å¼€è¿™ä¸ªé€‰é¡¹å³å¯ æƒ³èµ·æ¥è¿™ä¸ªæŒ‰é’®ä¹‹å‰æœ‰ä¸€æ¬¡åšå®¢è¢«æˆ‘ææŒ‚äº†ï¼Œåé¢å°±é‡æ–°æ­å»ºå°±æ²¡å¼€äº†ã€‚æ‰“å¼€å†çœ‹å°±å·²ç»å®‰å…¨äº† å½“ç„¶è€…æ˜¯github pagesæ‰˜ç®¡çš„æƒ…å†µï¼Œå¦‚æœæ˜¯è‡ªå·±çš„ç½‘ç«™éƒ¨ç½²åˆ°äº†åä¸ºäº‘/é˜¿é‡Œäº‘ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨å¯¹åº”çš„äº‘å¹³å°ç”³è¯·SSLè¯ä¹¦çš„ï¼Œå…è´¹çš„åªæœ‰ä¸€å¹´ï¼Œæƒ³è¦æ°¸ä¹…å…è´¹å°±è¦æ¯å¹´æ‰‹åŠ¨è´­ä¹°ä¸€æ¬¡ï¼Œç„¶ååœ¨æœåŠ¡å™¨çš„nginxé‡Œé…ç½®ä¸‹è½½å¥½çš„è¯ä¹¦ï¼Œå…·ä½“æ“ä½œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  https://www.jianshu.com/p/8046a12fec4a éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ çš„åŸŸåæ²¡æœ‰å¤‡æ¡ˆï¼Œåªèƒ½é€‰DNSéªŒè¯ç”³è¯·SSLè¯ä¹¦çš„ï¼Œæ–‡ä»¶éªŒè¯æ˜¯ä¸å¯ä»¥çš„ 3. HTTP/HTTPSçš„åŒºåˆ«çŸ¥å…¶ç„¶ä¹Ÿè¦çŸ¥å…¶æ‰€ä»¥ç„¶ ä¸ºä»€ä¹ˆç½‘ç«™æç¤ºä¸å®‰å…¨ï¼Ÿ å› ä¸ºç°åœ¨çš„æµè§ˆå™¨åŸºæœ¬éƒ½è¦httpsæ‰æç¤ºå®‰å…¨ httpså’Œhttpæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ HTTPSï¼ˆHyper Text Transfer Protocol over SecureSocket Layerï¼‰æ˜¯èº«æŠ«SSLå¤–å£³çš„HTTPï¼Œä¸HTTPæ˜æ–‡åè®®å¯¹æ¯”ï¼ŒHTTPSå…·å¤‡ä¸¤å¤§ç½‘ç»œå®‰å…¨åŠŸèƒ½ï¼šåŠ å¯†ä»¥åŠèº«ä»½éªŒè¯ã€‚ åŠ å¯†ï¼šHTTPSä¼ è¾“åè®®å¯å¯¹å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œé˜²æ­¢ç¬¬ä¸‰æ–¹çš„çªƒå–ã€ç¯¡æ”¹ã€çª¥è§†ç­‰ä¸­é—´äººæ”»å‡»ï¼ˆä¸­é—´äººæ”»å‡»å¯ä»¥çœ‹å¤§ä½¬çš„è®²è§£https://www.zhihu.com/question/304030251ï¼‰ã€‚ èº«ä»½éªŒè¯ï¼šå®¢æˆ·ç«¯ç”¨æˆ·å¯é€šè¿‡HTTPSèƒŒåçš„SSLè¯ä¹¦å¯¹æœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯ï¼Œè¾¨åˆ«çœŸå‡ç½‘ç«™ï¼Œé¿å…æ‰å…¥é’“é±¼ç½‘ç«™çš„é™·é˜±ã€‚ å¦‚ä½•æ‰èƒ½ä½¿ç”¨httpsåè®®ï¼Ÿ é€šè¿‡CAæœºæ„ï¼ˆæ•°å­—è¯ä¹¦é¢å‘ä¸­å¿ƒï¼Œå¦‚GDCAï¼‰ç”³è¯·SSLè¯ä¹¦ï¼Œç„¶ååœ¨ç½‘ç«™æœåŠ¡å™¨ä¸Šæ­£ç¡®éƒ¨ç½²SSLè¯ä¹¦å³å¯ï¼Œå…·ä½“æ“ä½œæ–¹æ³•å‚è€ƒç¬¬äºŒèŠ‚ CAæœºæ„é¢å‘çš„è¯ä¹¦æœ‰3ç§ç±»å‹ï¼š åŸŸåå‹SSLè¯ä¹¦ï¼ˆDV SSLï¼‰ï¼šä¿¡ä»»ç­‰çº§æ™®é€šï¼Œåªéœ€éªŒè¯ç½‘ç«™çš„çœŸå®æ€§ä¾¿å¯é¢å‘è¯ä¹¦ä¿æŠ¤ç½‘ç«™ï¼› ä¼ä¸šå‹SSLè¯ä¹¦ï¼ˆOV SSLï¼‰ï¼šä¿¡ä»»ç­‰çº§å¼ºï¼Œé¡»è¦éªŒè¯ä¼ä¸šçš„èº«ä»½ï¼Œå®¡æ ¸ä¸¥æ ¼ï¼Œå®‰å…¨æ€§æ›´é«˜ï¼› å¢å¼ºå‹SSLè¯ä¹¦ï¼ˆEV SSLï¼‰ï¼šä¿¡ä»»ç­‰çº§æœ€é«˜ï¼Œä¸€èˆ¬ç”¨äºé“¶è¡Œè¯åˆ¸ç­‰é‡‘èæœºæ„ï¼Œå®¡æ ¸ä¸¥æ ¼ï¼Œå®‰å…¨æ€§æœ€é«˜ å…¶ä¸­ï¼Œé˜¿é‡Œäº‘ï¼Œè…¾è®¯äº‘ï¼Œç™¾åº¦äº‘ï¼Œåˆæ‹äº‘ç­‰ç­‰ å¯ä»¥å…è´¹ç”³è¯·åŸŸåå‹SSLè¯ä¹¦ï¼ˆDV SSLï¼‰ å‚è€ƒhttps://www.cnblogs.com/zhanglw456/p/13266493.html 4. æ„Ÿæƒ³ æ‰“ç®—æŠŠåšå®¢é…ç½®æä¸€ä¸‹ï¼Œå¼€å¯è¯„è®ºåŠŸèƒ½ï¼Œç›®å½•è·Ÿéšæ»šåŠ¨ç­‰ç­‰ï¼Œä¼˜åŒ–ä¸€ä¸‹é˜…è¯»ä½“éªŒ åŸŸåæ˜¯ä¸å¯èƒ½å¤‡æ¡ˆçš„ï¼Œå˜¿å˜¿ è¿™æ¬¡é¢è¯•ä¸€äºŒé¢æ„Ÿè§‰éƒ½è¿˜ä¸é”™ï¼ŒæŸ¥æ¼è¡¥ç¼ºï¼Œæ˜¥æ‹›åŠ æ²¹","link":"/Others/why-my-blog-tips-unsafe/"},{"title":"volatile","text":"1. çº¿ç¨‹ä¹‹é—´å¯è§æ€§1.1 é—®é¢˜å¼•å‡ºVolatileåˆ°åº•æ˜¯ç”¨æ¥å¹²å˜›çš„ï¼Œæ¥çœ‹ä¸€æ®µç¨‹åº 1234567891011121314151617181920212223242526272829303132public class Volatileé—®é¢˜å¼•å‡º { private static /*volatile*/ boolean flag = false; public static void main(String[] args) { A a = new A(); a.start(); try { Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } flag = true; } static class A extends Thread{ @Override public void run() { while (true) { if (flag){ System.out.println(\"çŸ¥é“ä¸»çº¿ç¨‹å°†flagå˜ä¸ºtrueäº†\"); break; } } } }} ä¸¤ä¸ªçº¿ç¨‹å…±åŒç»´æŠ¤ä¸€ä¸ªå˜é‡flagï¼Œä¸€ä¸ªç¡1såä¿®æ”¹flagä¸ºtrueï¼Œå¦ä¸€ä¸ªç­‰å¾…å®ƒå˜ä¸ºtrueåè¾“å‡ºä¸€å¥è¯ è¿è¡Œå°±ä¼šå‘ç°æ°¸è¿œä¸èƒ½è¾“å‡ºï¼Œå› ä¸ºä¸€ä¸ªçº¿ç¨‹æ„Ÿå—ä¸åˆ°å¦ä¸€ä¸ªçº¿ç¨‹å¯¹å®ƒçš„æ”¹å˜ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å› ä¸ºJMMä¸­æœ‰è§„å®šï¼Œçº¿ç¨‹ä¸èƒ½ç›´æ¥æ“ä½œä¸»å­˜ä¸­çš„å€¼ï¼Œåªèƒ½æ‹·è´åˆ°è‡ªå·±çš„å·¥ä½œå†…å­˜å†è¿›è¡Œæ“ä½œ ä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹æ”¹å˜äº†è‡ªå·±å·¥ä½œå†…å­˜ä¸­çš„flagçš„å€¼ï¼Œå¹¶æ²¡æœ‰å½±å“åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„å·¥ä½œå†…å­˜ã€‚æ˜ç™½äº†è¿™ç‚¹åï¼Œå†æŠŠä¸Šé¢çš„ä»£ç volatileæ³¨é‡Šæ”¾å¼€ï¼Œè¿™æ—¶å€™å°±èƒ½è¾“å‡ºå¹¶ç»“æŸäº†ï¼Œè¿™å°±æ˜¯volatileçš„å…¶ä¸­ä¸€ä¸ªä½œç”¨ï¼šçº¿ç¨‹é—´çš„å¯è§æ€§ è¯¯åŒºï¼šç¼“å­˜ä¸€è‡´æ€§åè®®å…¶å®volatileè·Ÿç¼“å­˜ä¸€è‡´æ€§åè®®æ ¹æœ¬æ²¡ä»€ä¹ˆå…³ç³»ï¼Œç½‘ä¸Šå¾ˆå¤šæ–‡ç« ä¼šå°†å…¶å’Œç¼“å­˜ä¸€è‡´æ€§åè®®æ”¾åœ¨ä¸€èµ·è¯´ï¼Œå…¶å®ä»–ä»¬ä¸æ˜¯ä¸€å›äº‹ å†çœ‹åˆšæ‰çš„è¿™ä¸€å¥ï¼Œè¿˜æ˜¯æ³¨é‡Šæ‰äº†volatileï¼Œä½†æ˜¯whileå¾ªç¯ä¸­å¤šäº†ä¸€å¥æ‰“å°System.out.println(â€œéšä¾¿æ‰“å°ä¸€æ¡è¯­å¥â€);å…¶ä»–åœ°æ–¹å®Œå…¨ä¸€æ · 123456789101112131415161718192021222324252627282930313233public class Volatileé—®é¢˜å¼•å‡º { private static /*volatile*/ boolean flag = false; public static void main(String[] args) { A a = new A(); a.start(); try { Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } flag = true; } static class A extends Thread{ @Override public void run() { while (true) { System.out.println(\"éšä¾¿æ‰“å°ä¸€æ¡è¯­å¥\"); if (flag){ System.out.println(\"çŸ¥é“ä¸»çº¿ç¨‹å°†flagå˜ä¸ºtrueäº†\"); break; } } } }} è¿è¡Œï¼Œçœ‹åˆ°å¯ä»¥ç»å†å¾ˆå¤šæ¬¡å¾ªç¯åè¿˜æ˜¯æ‰“å°äº†flag è¿™å°±æ˜¯å› ä¸ºç¼“å­˜ä¸€è‡´æ€§ï¼Œæ›´æ–°äº†ä¸»å­˜é‡Œé¢çš„ä¸œè¥¿ï¼Œæ¯”å¦‚åŒæ­¥é”ï¼Œå¯ä»¥çœ‹åˆ°volatileè¢«æ³¨é‡Šæ‰äº†è¿˜æ˜¯èƒ½æ›´æ–°ï¼Œè·Ÿvolatileæ²¡æœ‰åŠæ¯›é’±å…³ç³» 2. ç¦æ­¢æŒ‡ä»¤é‡æ’åº2.1 ä»€ä¹ˆæ˜¯æŒ‡ä»¤é‡æ’åºå°±æ˜¯è¯´cpuä¸ºäº†è¿è¡Œæ•ˆç‡å¯èƒ½ä¼šå°†ä¸¤æ¡æ²¡æœ‰ä¾èµ–æ€§çš„æŒ‡ä»¤é¡ºåºè¿›è¡Œå¯¹è°ƒ è¿™é‡Œæœ‰ä¸€æ®µå¾ˆå·§å¦™çš„ç¨‹åºè¯æ˜æŒ‡ä»¤é‡æ’åºå­˜åœ¨ 1234567891011121314151617181920212223242526272829public class è¯æ˜æŒ‡ä»¤é‡æ’åº { private static int a = 0, b = 0, x = 0, y = 0; public static void main(String[] args){ long time = 0; while (true) { time++; a = 0; b = 0; x = 0; y = 0; Thread thread1 = new Thread(() -&gt; { a = 1; x = b; }); Thread thread2 = new Thread(() -&gt; { b = 1; y = a; }); thread1.start(); thread2.start(); try { thread1.join(); thread2.join(); } catch (Exception e) {} if (x == 0 &amp;&amp; y == 0) { break; } } System.out.println(\"time=\" + time + \",x=\" + x + \",y=\" + y); }} è¿™æ®µç¨‹åºå·§å¦™åœ¨å“ªå‘¢ï¼Ÿçœ‹ä¸¤ä¸ªçº¿ç¨‹çš„ä»»åŠ¡é€»è¾‘ï¼Œå¯ä»¥åˆ†æå‡ºä¸ç®¡å“ªä¸ªçº¿ç¨‹å…ˆæ‰§è¡Œï¼Œæˆ–è€…äº¤å‰æ‰§è¡Œï¼Œåªè¦a = 1åœ¨x = bä¹‹å‰ï¼Œb = 1åœ¨y = aä¹‹å‰ï¼Œéƒ½ä¸å¯èƒ½å‡ºç°x = 0, y = 0çš„ è¯´çš„å†ç®€å•ç‚¹ï¼š å¦‚æœa = 1å…ˆæ‰§è¡Œï¼Œé‚£ä¹ˆyå¿…ä¸º1 å¦‚æœb = 1å…ˆæ‰§è¡Œï¼Œé‚£ä¹ˆxå¿…ä¸º1 å¦‚æœa = 1, b = 1å…ˆæ‰§è¡Œï¼Œé‚£ä¹ˆx, yéƒ½ä¸º1 åªæœ‰è¢«é‡æ’åºä¸º 1234567//çº¿ç¨‹1x = b;a = 1;//çº¿ç¨‹2y = a;b = 1; æ‰æœ‰å¯èƒ½x = 0, y = 0ï¼Œæ˜ç™½äº†å—ï¼Ÿ æˆ‘ä»¬æ¥çœ‹ä¸‹æŒ‡ä»¤é‡æ’åºçš„åº•å±‚åŸå›  åœ¨javaä¸­Object o = new Object();äº§ç”Ÿäº†ä»¥ä¸Šæ±‡ç¼–æŒ‡ä»¤ 123new -&gt; ç”Ÿæˆä¸€ä¸ªåˆå§‹å€¼m=0invokespecial -&gt; èµ‹å€¼m=8astore -&gt; å°†æŒ‡é’ˆtæŒ‡å‘è¿™ä¸ªm æŒ‡ä»¤é‡æ’åºï¼Œå¯èƒ½ä¼šè°ƒæ•´ä¸ºå¦‚ä¸‹ 123new -&gt; ç”Ÿæˆä¸€ä¸ªåˆå§‹å€¼m=0astore -&gt; å°†æŒ‡é’ˆtæŒ‡å‘è¿™ä¸ªminvokespecial -&gt; èµ‹å€¼m=8 è¿™å°±æœ‰å¯èƒ½ä¼šé€ æˆæˆ‘ä»¬æ‹¿åˆ°çš„æŒ‡é’ˆä¸ä¸ºnullï¼Œä½†æ˜¯æ­¤æ—¶çš„å€¼è¿˜ä¸º0 2.2 DCLå•ä¾‹è¦ä¸è¦åŠ volatileå•ä¾‹æ¨¡å¼çš„ä¸€ç§å®ç°ï¼šdouble-checked locking 1234567891011121314public class Singleton { private volatile static Singleton singleton; private Singleton (){} public static Singleton getInstance() { if (singleton == null) { synchronized (Singleton.class) { if (singleton == null) { singleton = new Singleton(); } } } return singleton; }} è¿™ç§æ–¹å¼é«˜æ•ˆï¼Œä¸”å®ç°äº†çº¿ç¨‹å®‰å…¨å’Œæ‡’åŠ è½½ æ‡’åŠ è½½å°±æ˜¯è¯´å®šä¹‰çš„æ—¶å€™æ²¡æœ‰ç›´æ¥newï¼Œè€Œæ˜¯åœ¨è°ƒç”¨getInstanceçš„æ—¶å€™new çº¿ç¨‹å®‰å…¨æ˜¯è¯´synchronizedåŒ…è£¹äº†åˆ¤ç©ºå’Œnewï¼Œ é«˜æ•ˆæ˜¯è¯´é”çš„ç²’åº¦å¾ˆç»†ï¼Œåªé”ä½äº†åˆ¤ç©ºå’Œnewï¼Œå› ä¸ºå¤–å±‚å¯èƒ½ä¼šæœ‰åˆ«çš„ä¸šåŠ¡ä»£ç ã€‚å¦ä¸€æ–¹é¢ï¼ŒDCLä¸­å¤–é¢çš„é‚£å±‚åˆ¤ç©ºï¼Œé¿å…äº†ç›´æ¥çš„synchronizedé”ç«äº‰ï¼Œæé«˜äº†æ•ˆç‡ å¥½äº†ï¼Œç®€å•ä»‹ç»å®Œåï¼Œæ¥è¯´ä¸ºä»€ä¹ˆè¦åŠ volatileï¼Œä¸€å®šè¦åŠ ï¼Œå› ä¸ºä¹‹å‰è¯´äº†æŒ‡ä»¤é‡æ’åºï¼Œå¯èƒ½é€ æˆæŒ‡é’ˆå…ˆå­˜åœ¨ï¼Œåèµ‹å€¼çš„ç°è±¡ã€‚å¦‚æœçº¿ç¨‹1å‘ç”ŸæŒ‡ä»¤é‡æ’åºï¼Œå…ˆastoreæœ‰äº†æŒ‡é’ˆï¼Œæ­¤æ—¶åœä¸‹ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹èµ°å®Œæ•´ä¸ªæµç¨‹ï¼Œåˆ¤ç©ºä¸ä¸ºç©ºå¯¼è‡´ç›´æ¥returnï¼Œä½†æ˜¯åˆè¿˜æ²¡æœ‰newï¼Œå› æ­¤returnäº†ä¸ªåŠåˆå§‹åŒ–çŠ¶æ€çš„å¯¹è±¡ å› æ­¤DCLå•ä¾‹ä¸€å®šè¦åŠ volatileï¼Œç¦æ­¢æŒ‡ä»¤é‡æ’åº 2.3 volatileå¦‚ä½•åšåˆ°ç¦æ­¢æŒ‡ä»¤é‡æ’åºçš„ï¼Ÿå†…å­˜å±éšœï¼Œåœ¨JVMçº§åˆ«ï¼Œå†…å­˜å±éšœåªæ˜¯ä¸€ä¸ªè§„èŒƒï¼Œå°±åƒæ˜¯æ¥å£ä¸€æ ·ï¼Œäº¤ç»™ä¸åŒçš„CPUå®ç°ï¼Œè¿™ä¸ªä¸œè¥¿ä¸åŒçš„ç¡¬ä»¶å®ç°ä¸ä¸€æ ·ã€‚ JVMä¸­è§„å®šæœ‰4ä¸­å±éšœ LoadLoadBarrierè¯»è¯»å±éšœ LoadStoreBarrierè¯»å†™å±éšœ StoreLoadBarrierå†™è¯»å±éšœ StoreStoreBarrierå†™å†™å±éšœ åœ¨volatileå†™ä¹‹å‰åŠ å†™å†™å±éšœï¼Œä¹‹ååŠ å†™è¯»å±éšœ åœ¨volatileè¯»ä¹‹ååŠ è¯»è¯»å±éšœå’Œè¯»å†™å±éšœ ä¸åŒçš„ç¡¬ä»¶å‚å•†æœ‰è‡ªå·±ä¸åŒçš„å®ç°ï¼Œå…¶å®å¹¶æ²¡æœ‰ä¸¥æ ¼éµå¾ªè§„èŒƒï¼ˆæ¯”å¦‚å› ç‰¹å°”çš„sfenceã€ifenceã€mfenceæŒ‡ä»¤ï¼‰ï¼Œä½†ä¸ç®¡æ€æ ·éƒ½éµå¾ªä¸¤ä¸ªæœ€åŸºæœ¬çš„åŸåˆ™ï¼š happens beforeï¼šé”€æ¯å¿…ä¸å¯èƒ½åœ¨åˆ›å»ºå‰ as-if-serialï¼šè¿™ä¸ªå•æ¬¡ç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œçœ‹èµ·æ¥åƒé¡ºåºæ‰§è¡Œâ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç®¡ä½ æ€ä¹ˆé‡æ’åºï¼Œå•çº¿ç¨‹ä¸‹æ‰§è¡Œå‡ºæ¥çš„ç»“æœæ°¸è¿œä¸å˜ å†çœ‹çœ‹hotspotçš„å®ç° ç”¨çš„æ˜¯lockï¼Œä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå·æ‡’ï¼Œæ²¡æœ‰é’ˆå¯¹ä¸åŒçš„å‚å•†è¿›è¡Œä¸åŒçš„æŒ‡ä»¤ï¼Œè€Œæ˜¯æ±‡ç¼–lock","link":"/Java%E5%9F%BA%E7%A1%80/volatile/"},{"title":"ä¸ºæ¯•ä¸šåšå‡†å¤‡","text":"[DONE] 3Dæ•°å­¦åŸºç¡€ D3Dä½œä¸š æ¸¸æˆä½“éªŒæŠ¥å‘Š åŠ›æ‰£3æœˆå‹‹ç«  [TODO] æ¯•ä¸šè®¾è®¡ unity3D D3DçŸ¥è¯†è¡¥å…… 3æœˆæ‚„ç„¶ç¦»å»ï¼Œè¿™ä¸ªæœˆï¼ˆæˆ–è€…è¯´æœ€è¿‘ä¸¤ä¸ªæœˆï¼‰éƒ½åœ¨å¿™ç€-1é¡¹ç›®ç›¸å…³çš„ä¸œè¥¿ï¼Œç›´åˆ°å‰ä¸¤å¤©æ‰å¼„å®Œd3dä½œä¸šï¼Œç»ˆäºæœ‰æ—¶é—´å†™ç‚¹ä¸œè¥¿ã€‚å›é¡¾è¿™æ®µæ—¶é—´ï¼Œ-1é¡¹ç›®çš„ä½œä¸šå·²ç»å®Œæˆäº†æ¸¸æˆä½“éªŒã€pythonæµ‹éªŒã€d3dä½œä¸šï¼Œå·²ç»å®Œæˆ3/5äº†ï¼Œä¹Ÿç»ˆäºèµ¶ä¸Šäº†æ ‡å‡†è¿›åº¦ã€‚ ç¾¤é‡Œé¢å¤§ä½¬ä»¬ä¸ªä¸ªéƒ½æ˜¯åæ ¡æ¯•ä¸šï¼Œè¿›åº¦ä¹Ÿè¿œè¶…æ ‡å‡†ï¼Œæˆ‘åªæ•¢çœ‹ä¸æ•¢å‡ºå£°â€¦å¤§æ¦‚åœ¨ä¸Šä¸ªæœˆåº•æœ‰ä½åŒå­¦å’Œæˆ‘äº¤æµä½œä¸šä¸­é‡åˆ°çš„é—®é¢˜ï¼Œé‚®ä»¶æœ«å°¾æ˜¯ä¸€å¼ åç‰‡ï¼Œä¸Šäº¤å¤§ï¼ç¡•å£«ï¼æ—è¾¹è¿˜é™„æœ‰å­¦æ ¡çš„logoï¼Œæˆ‘ç‘Ÿç‘Ÿå‘æŠ–ã€‚æƒ³åˆ°å…¥èŒä»¥åå‘¨å›´éƒ½æ˜¯æ¥è‡ªå„ä¸ªå­¦æ ¡çš„ä¼˜ç§€æ¯•ä¸šç”Ÿï¼Œæƒ³åˆ°å°†æ¥èƒ½å’Œä¸€ç¾¤å¦‚æ­¤ä¼˜ç§€çš„åŒå­¦ä¸€èµ·å­¦ä¹ å…±åŒè¿›æ­¥ï¼Œåˆ°ç°åœ¨æˆ‘è¿˜æ˜¯æœ‰ç‚¹ææƒšï¼Œç²¾å½©ï¼è‡ªå·±ä¹Ÿä¼šä¸æ–­åŠªåŠ›è€³æ¿¡ç›®æŸ“ï¼ŒåŠ æ²¹ã€‚ 3dæ•°å­¦å’Œd3dä½œä¸šè¿˜æ˜¯æœ‰ç‚¹éš¾åº¦çš„ï¼Œä½œä¸šè¦æ±‚ç¼–å†™çš„æ¸¸æˆé€»è¾‘å¹¶ä¸éš¾ï¼Œåªæ˜¯d3dæœ¬èº«æ˜¯æ¯”è¾ƒåº•å±‚çš„åº“ï¼Œæ¸²æŸ“ç®¡çº¿ã€æ•´ä½“æµç¨‹ã€å„ç§APIï¼ŒåŠ ä¸Šå„ç§æ•°å­¦çŸ¥è¯†ï¼Œè®©äººéš¾ä»¥ä¸€ä¸‹å­å°±ç¢ç£¨é€ã€‚å³ä½¿åˆ°ç°åœ¨å®Œæˆäº†ä½œä¸šï¼Œä¹Ÿåªæ˜¯å¯¹å…¶æ•´ä½“æ¸²æŸ“æµç¨‹å’Œå¼€å‘æ­¥éª¤æœ‰äº†ä¸ªåŸºæœ¬çš„äº†è§£ï¼Œé¾™ä¹¦ä¹Ÿåªçœ‹äº†ä¸€åŠï¼Œè¿˜æœ‰è®¸å¤šçš„ä¸œè¥¿å’ŒåŸç†æ²¡æœ‰ææ¸…æ¥šã€‚å°†æ¥å†æ…¢æ…¢æ·±å…¥ç ”ç©¶å³å¯ï¼Œæ”¾ä¸Šä¸€å¼ æˆ‘åšçš„ç®€é™‹çš„å°è½¦å§ï¼ è™½ç„¶ä¸€ç›´åœ¨å¿™ä½œä¸šï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œç®—æ³•åŠŸåº•è¿˜æ˜¯è¦æœ‰çš„ã€‚æœ¬æœˆåŠ›æ‰£æ‰“å¡æ¯æ—¥ä¸€é¢˜ç»ˆäºæ»¡äº†ï¼æ­å–œè‡ªå·±è·å¾—ä¸‰æœˆå‹‹ç« ä¸€æšï¼ è¿™ä¹Ÿæ˜¯æˆ‘çš„ç¬¬ä¸€æ¬¡åœ†æ»¡æ‰“å¡è®°å½•ï¼Œ666ï¼Œæ„Ÿè°¢æˆ‘å¾·ç¡•æ·±å¤œé™ªç ï¼ˆæ„Ÿè§‰gayé‡Œgayæ°”çš„ï¼Ÿï¼Ÿï¼‰ æƒ³æƒ³ä¸èƒ½æ¯å¤©è‚ä½œä¸šï¼Œè¿™ä¸ªæœˆæ¢äº†ä¸ªæ‰‹æœºï¼ŒåˆæŠŠç‹è€…ä¸‹å›æ¥äº†ï¼Œåˆä¸Šäº†ä¸ªç‹è€…ã€‚åˆæƒ³æƒ³ä¹Ÿä¸èƒ½æ¯å¤©å¯¹ç€ç”µè„‘å’Œæ‰‹æœºå±å¹•ï¼Œèº«è¾¹çš„æœ‹å‹åˆéƒ½å»å­¦æ ¡äº†ï¼Œç°åœ¨ç©ä¹Ÿæ‰¾ä¸åˆ°äººï¼Œäºæ˜¯æ¯å¤©ä¸‹åˆæ”¾æ™´çš„æ—¶å€™çˆ¬çˆ¬å±±ï¼Œå®³ï¼Œå°±æ˜¯è¿™ä¹ˆå…»ç”Ÿï¼ æœ€è¿‘è€ƒç ”çš„å°ä¼™ä¼´æœ€è¿‘éƒ½é™†é™†ç»­ç»­ä¸Šå²¸äº†ï¼Œç°åœ¨å‘¨å›´çš„æœ‹å‹éƒ½æ˜¯ï¼šæµ™å¤§åˆ¶è¯ä»˜ç¡•ï¼Œä¸­å¤§ä¿ç ”ç‹ç¡•ï¼Œæ·±å¤§è®¡ç®—æœºå¾·ç¡•ï¼Œå¤æ—¦è®¡ç®—æœºè‚¥ç¡•ï¼Œæˆ‘åªèƒ½è¯´ï¼šç‰›è›™ï¼ï¼æ­å–œæ­å–œã€‚ æ¥ä¸‹æ¥çš„é‡å¿ƒè¦æ”¾åœ¨æ¯•ä¸šè®¾è®¡ï¼Œæˆ‘çš„Freeworkæ‹›è˜å¹³å°å¯æ˜¯ä¸€ç‚¹éƒ½æ²¡workã€‚å’Œè€å¸ˆäº†è§£åˆ°å°†åœ¨6æœˆç¬¬ä¸€ä¸ªæ˜ŸæœŸç­”è¾©ï¼Œå¾—æŠ“ç´§ã€‚ è¿˜æœ‰å°±æ˜¯åšå®¢çš„å›¾ç‰‡æ”¾åœ¨å›¾åºŠä¸Šå®¹æ˜“æŒ‚æ‰ï¼Œå‡†å¤‡æ­å»ºä¸€ä¸ªè‡ªå·±çš„å›¾ç‰‡æœåŠ¡å™¨ï¼Œåˆšå¥½é¡ºä¾¿èƒ½ç”¨åœ¨æ¯•ä¸šè®¾è®¡ä¸Šã€‚ æƒ³æƒ³æå‰å¼„å®Œ5æœˆä»½è¿˜èƒ½æœ‰ä¸ªæ—¶é—´çº¦æœ‹å‹å¼„ä¸ªæ¯•ä¸šæ—…æ¸¸ä»€ä¹ˆçš„ï¼ˆå˜¿å˜¿å˜¿ï¼‰","link":"/life/%E4%B8%BA%E6%AF%95%E4%B8%9A%E5%81%9A%E5%87%86%E5%A4%87/"},{"title":"äºŒåˆ†æŸ¥æ‰¾æ¨¡æ¿","text":"æœ¬æ–‡å–è‡ªlabuladongçš„ç®—æ³•å°æŠ„ï¼Œå¹¶å¯¹whileç»“æŸåçš„leftå’Œrightä½ç½®åšäº†è¡¥å……è¯´æ˜ï¼Œå¤§ä½¬å¤ªå¼ºäº† https://labuladong.gitbook.io/algo/di-ling-zhang-bi-du-xi-lie/er-fen-cha-zhao-xiang-jie æ‰€æœ‰æ¨¡æ¿ç»Ÿä¸€é‡‡ç”¨å¼€åŒºé—´[left, right]åšæ³• 1. äºŒåˆ†æŸ¥æ‰¾æ¨¡æ¿æ‰¾åˆ°è¿”å›ä¸‹æ ‡ï¼Œæ‰¾ä¸åˆ°è¿”å›-1 123456789101112public int binarySearch(int[] nums, int target){ int left = 0, right = nums.length - 1, mid; while (left &lt;= right) { //é˜²æ­¢æº¢å‡º mid = left + (right - left) / 2; //ç»†ç²’åº¦if if (target == nums[mid]) return mid; else if (target &lt; nums[mid]) right = mid - 1; else if (target &gt; nums[mid]) left = mid + 1; } return -1;} åŠ›æ‰£704 https://leetcode-cn.com/problems/binary-search/ 2. äºŒåˆ†æŸ¥æ‰¾æœ€å·¦ä¾§[1,2,2,2,2,3]æ‰¾æœ€å·¦è¾¹çš„2ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ ‡è¿”å›1 1234567891011121314public int binarySearchLeft(int[] nums, int target){ int left = 0, right = nums.length, mid; while (left &lt;= right) { //é˜²æ­¢æº¢å‡º mid = left + (right - left) / 2; //ç»†ç²’åº¦if if (target == nums[mid]) right = mid - 1; //ä¸è¿”å›è€Œæ˜¯ä¿®æ”¹å³ä¾§è¾¹ç•Œ else if (target &lt; nums[mid]) right = mid - 1; else if (target &gt; nums[mid]) left = mid + 1; } //è¾¹ç•Œåˆ¤æ–­ if (left &gt;= nums.length || target != nums[left]) return -1; return left;} 3. äºŒåˆ†æŸ¥æ‰¾æœ€å³ä¾§[1,2,2,2,2,3]æ‰¾æœ€å³è¾¹çš„2ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ ‡è¿”å›4 1234567891011121314public int binarySearchRight(int[] nums, int target){ int left = 0, right = nums.length, mid; while (left &lt;= right) { //é˜²æ­¢æº¢å‡º mid = left + (right - left) / 2; //ç»†ç²’åº¦if if (target == nums[mid]) left = mid + 1; //ä¸è¿”å›è€Œæ˜¯ä¿®æ”¹å·¦ä¾§è¾¹ç•Œ else if (target &lt; nums[mid]) right = mid - 1; else if (target &gt; nums[mid]) left = mid + 1; } //è¾¹ç•Œåˆ¤æ–­ if (right &lt; 0 || target != nums[right]) return -1; return right;} åŠ›æ‰£34 https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array/ 4. å¾ªç¯ç»“æŸæ—¶çš„leftå’Œrightå¦‚æœæ‰¾ä¸åˆ°targetï¼Œåˆ™ç¨‹åºä¼šèµ°åˆ°whileå¾ªç¯ç»“æŸåé¢çš„è¯­å¥ï¼Œæ­¤æ—¶rightä¼šæ¯”leftå°1ï¼Œleftä¸ºæ•°å­—æœ¬åº”è¯¥åœ¨çš„ä½ç½®ï¼Œå› æ­¤åªéœ€è¦è¿”å›leftå³å¯ å¦‚ï¼š[1,3,5,6] target=2ï¼Œæ‰¾ä¸åˆ°ï¼Œåˆ™whileç»“æŸåleft=1, right=0 åŠ›æ‰£35 https://leetcode-cn.com/problems/search-insert-position/ 12345678910public int searchInsert(int[] nums, int target) { int left = 0, right = nums.length - 1, mid = 0; while(left &lt;= right){ mid = left + (right - left) / 2; if(target == nums[mid]) return mid; else if(target &lt; nums[mid]) right = mid - 1; else if(target &gt; nums[mid]) left = mid + 1; } return left; //è¿”å›leftå³æ˜¯æœ¬æ¥åº”è¯¥åœ¨çš„ä½ç½®} å…¶ä»–åŠ¨æ€è§„åˆ’çš„é¢˜ç›®å¯ä»¥ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/binary-search-template/"},{"title":"ä¹æœˆéšç¬” ä¼¼ä¹ä¸€ç›´åœ¨åšæ²¡æœ‰æ„ä¹‰çš„äº‹","text":"[DONE] å®ä¹  åˆ·é¢˜ [TODO] æ ¡æ‹› å®ä¹  å®ä¹ å…ˆè¯´è¯´å®ä¹ å§ï¼Œ2020.9.28ï¼Œå®ä¹ å·²ç»å¿«ä¸¤ä¸ªæœˆäº†ï¼Œå›½åº†8å¤©å‡ï¼Œ10æœˆåº•æˆ‘åº”è¯¥å°±è¦èµ°äº†ï¼Œå‰©ä¸‹çš„æ—¶é—´ä¸å¤šäº†ã€‚emmmæ€»çš„æ¥è¯´å…¶å®ä½“éªŒè¿˜æ˜¯ä¸é”™çš„ï¼š å®˜ç½‘é¡¹ç›®ï¼Œä¸ç®¡éš¾åº¦æ€æ ·ä¹Ÿç®—æ˜¯å…¨ç¨‹è·Ÿè¿›ï¼Œå±•å—ã€èŒèŒã€å­¦å®‡å¯ä»¥è¯´éå¸¸æ”¾å¿ƒæˆ‘â€¦è¿™ä¸ªå®˜ç½‘é¡¹ç›®è™½ç„¶ç®€å•ï¼Œä½†æ˜¯æˆ‘ä½œä¸ºä¸€ä¸ªå®ä¹ ç”Ÿå¯ä»¥è¯´æ˜¯ä»»æˆ‘æäº¤ï¼Œéšæ„æ“ä½œâ€¦å¥½å§ï¼Œä½ ä»¬éƒ½æ”¾å¿ƒï¼Œé‚£æˆ‘è‡ªå·±æ‹…å¿ƒä»€ä¹ˆã€‚ä½†è¦è¯´å­¦åˆ°ä»€ä¹ˆæ–°æŠ€æœ¯ï¼Œæˆ‘è‡ªè®¤ä¸ºæ²¡æœ‰å¤šå°‘ï¼ŒæœŸæœ«éš¾åº¦å§ è‡³äºç”Ÿæ€åœˆï¼Œé¡¹ç›®å®åœ¨å¤æ‚ï¼Œå¤„ç†ä¹Ÿæ¯”è¾ƒè°¨æ…ï¼Œå±•å—å®‰æ’ä»»åŠ¡çš„æ—¶å€™æˆ‘æ€»æ˜¯å¬çš„ä¸€å¤´é›¾æ°´ï¼Œå†™å®Œè¿˜æ˜¯å¾—å«èŒèŒcode reviewï¼Œå‘ç°bugä¹Ÿæ˜¯å…ˆæ€€ç–‘æ˜¯ä¸æ˜¯è‡ªå·±æ²¡æ˜ç™½å…¶ä¸­çš„é€»è¾‘ã€‚æ€»ä½“ä¹Ÿè¿˜ä¸é”™ï¼Œæˆ‘å…±å‘ç°å¤„ç†è¿‡2ä¸ªå°bugï¼Œå¯¹æ¥ä¸€æ¬¡æµ‹è¯•äººå‘˜ï¼Œå¼€å‘ä¸‰ä¸ªæ¥å£ï¼Œå…¶ä¸­ä¸€ä¸ªç°åœ¨è¿˜æ²¡ææ˜ç™½ã€‚è‹ç©¹ï¼Ÿæˆ‘æ¥çš„æ—¶å€™å°±å«æˆ‘æè¿™ä¸ªï¼Œæˆ‘èµ°äº†é¡¹ç›®è¿˜æ²¡å¼€å§‹å§ã€‚ è¯´è¯´æŠ€æœ¯ä¸Šçš„æ”¶è·ï¼šæœ€å¤§çš„æ”¶è·æ˜¯gitçš„ä½¿ç”¨ï¼Œæ„Ÿè°¢èŒèŒçš„æ‚‰å¿ƒæ•™å¯¼ï¼Œä»¥å‰ç”¨gitåªæ˜¯å‘½ä»¤è¡Œæ‹‰å–ï¼Œæäº¤ï¼Œç°åœ¨èƒ½å¤„ç†å¤šäººå¼€å‘ä¸­çš„å†²çªï¼Œåˆå¹¶åˆ†æ”¯é—®é¢˜äº†ã€‚å…¶æ¬¡æ˜¯æ¥è§¦äº†mongoDBï¼Œæ˜¯æˆ‘æ¥è§¦çš„ç¬¬äºŒä¸ªnosqlï¼Œå½“ç„¶å¾—ç›Šäºmongoä¸°å¯Œçš„ç‰¹æ€§å’Œspring dataçš„æ•´åˆï¼Œç”¨èµ·æ¥è·Ÿå…³ç³»å‹å·®ä¸å¤šï¼Œé™¤äº†äº‹åŠ¡å’Œè¡¨è¿æ¥ä¸æ–¹ä¾¿ä»¥å¤–ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œæ€§èƒ½ä¹Ÿé«˜ï¼Œiäº†iäº†ã€‚rpcè¿œç¨‹è°ƒç”¨å’Œk8sæŒç»­é›†æˆï¼Œæˆ‘è¿˜æ˜¯æ‡µçš„ï¼Œå› ä¸ºæˆ‘ä¸€ç›´éƒ½æ˜¯æ¥è§¦çš„httpç³»çš„springcloudè¿™å—ï¼Œdubboå’Œrpcé‚£å°±ç®—æ˜¯æ¥è§¦è¿‡ï¼Œä¹Ÿæ˜¯å¥½çš„ï¼Œèµ·ç å°†æ¥å­¦åˆ°äº†å¯ä»¥å›æƒ³èµ·è¿™ä¹ˆä¸ªä¸œè¥¿ã€‚ å…¶ä»–æ–¹é¢ï¼Œè§è¯†åˆ°æŠ€æœ¯å‰å®³çš„äººï¼Œæ²¡æœ‰äººæ¯”ä»–æ›´æ‡‚javaï¼ä»£ç é£æ ¼å’Œå®ç°æ€è·¯ç­‰æ½œç§»é»˜åŒ–å­¦åˆ°äº†å¾ˆå¤šã€‚ åé¢ï¼Œå®ä¹ å…¬å¸è‚¯å®šä¸ä¼šç•™æˆ‘ï¼Œæ¯•ç«Ÿåªæ¥ä¸¤ä¸‰ä¸ªæœˆï¼Œè€Œä¸”å…¬å¸ä¹Ÿæœ‰ä¸å¥½çš„ï¼šå’Œç®¡ç†çš„å…³ç³»æœ‰ç‚¹å‹æŠ‘ï¼Œåæ­£æˆ‘ä¸æ˜¯å¾ˆå–œæ¬¢ã€‚é‚£å°±10æœˆåº•å°±æ­¤åˆ«è¿‡å§ã€‚ æ„Ÿæƒ…çº¿æœ‰ç‚¹æ„å¤–ï¼Œè¿™ä»¶äº‹è¯´èµ·æ¥å¾ˆå¤æ‚ï¼Œè™½ç„¶æˆ‘å¾ˆé«˜å…´æœ‰å¥³ç”Ÿå…³æ³¨æˆ‘è¿™ä¹ˆä¹…ï¼Œå¯æ˜¯æ²¡æœ‰åŠæ³•ï¼Œå–œæ¬¢æ˜¯ä¸¤ä¸ªäººçš„äº‹ï¼Œè€Œä¸”å¥¹è¿™å¤ªå‘å¾®äº†ã€‚ä¸å…»é±¼ä¹Ÿä¸éœ€è¦èˆ”ç‹—ï¼Œå®³ï¼Œç¨‹åºå‘˜çš„ç”Ÿæ´»æ€»æ˜¯å­¤ç‹¬çš„ã€‚æ‰€ä»¥æ²¡åŠæ³•äº†ï¼Œè¯´äº†ç‚¹ç»æƒ…çš„è¯æ‹’ç»äº†ï¼Œç»ˆäºç®—æ˜¯ç»“æŸäº†ã€‚ ç§‹æ‹›ç§‹æ‹›ï¼Œä¹Ÿå°±æ˜¯æˆ‘æœ€å…³æ³¨çš„ä¸€ä»¶äº‹ï¼Œè¯´å®è¯ï¼Œè¿™ä¸¤å¤©ä¸€ç›´å¾ˆç„¦è™‘ã€‚ä¹‹å‰éƒ½æ˜¯å¾ˆéšæ€§çš„ç¬”è¯•é¢è¯•ï¼Œæˆ‘ä¹Ÿæ²¡å½“å›äº‹ï¼Œå‰å¤©å¼€å§‹çœ‹åˆ°çŸ¥ä¹æ¨é€ç§‹æ‹›å¿«ç»“æŸï¼Œ0offeræ€ä¹ˆåŠä¹‹ç±»çš„ã€‚æˆ‘å¼€å§‹æ­£è§†è¿™ä¸ªé—®é¢˜ï¼Œè¯´æ¥å¥½ç¬‘ï¼Œæœºä¼šä¼¼ä¹æ…¢æ…¢ç¦»å¼€äº†ï¼Œæˆ‘ä¼¼ä¹ä¸€ç›´åœ¨åšæ²¡æœ‰æ„ä¹‰çš„äº‹ï¼Œå°±ç®—æˆ‘æŠŠå®ä¹ çš„è¿™ä¸ªé¡¹ç›®åšçš„å¾ˆå‡ºè‰²ï¼Œåˆèƒ½æ€ä¹ˆæ ·ï¼Ÿï¼Œè¿™ä¸ªé¡¹ç›®å§ï¼Œå…¶å®å°±ç®—æˆ‘ä¸€ä¸ªäººæ‹¿æ¥ç»ƒæ‰‹ï¼Œè‡ªå·±åšå®Œå‰åç«¯ï¼Œæˆ‘åº”è¯¥ä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆæˆå°±æ„Ÿï¼Œè€Œæˆ‘ç°åœ¨æœ€è¦ç´§çš„åº”è¯¥æ˜¯ç§‹æ‹›ã€‚æˆ‘å¼€å§‹ç´§å¼ ï¼Œå¼€å§‹æ…Œä¹±ï¼Œæœ¬æ¥å°±æ˜¯å¾ˆæ‡’æ•£çš„ä¸€ä¸ªäººï¼Œè¦æ˜¯æˆ‘ç»™è‡ªå·±ä¸€ä¸ªè¯„ä»·å°±æ˜¯ï¼šæˆ‘è‡ªå·±éƒ½æ²¡æœ‰æ¬²æœ›æ‰¾å·¥ä½œï¼Œæ€ä¹ˆèƒ½æ‰¾åˆ°å·¥ä½œï¼Ÿè¯´ç¬”è¯•å§ï¼Œæˆ‘çš„ç®—æ³•æ°´å¹³å‘¢ï¼Œä¸­ç­‰å§ï¼Œç¬”è¯•ä¸è¶³ï¼Œæ¯”ä¸‹æœ‰ä½™ã€‚å¯æ˜¯æ¯åœºç¬”è¯•ï¼Œæˆ‘æ€»æ˜¯æ…¢æ‚ æ‚ çš„åšé¢˜ï¼Œå¶å°”è¿˜å‘ä¼šå‘†ï¼Œæˆ‘åäº†ã€‚æ€»ç»“ï¼šåºŸäººä¸€ä¸ªï¼ŒçœŸæ˜¯æƒ³éª‚é†’è‡ªå·±ï¼Œå†è¿™ä¹ˆä¸‹å»å¯å°±çœŸæ— ç¼˜äº’è”ç½‘äº†ã€‚ å¤œæ·±äººé™çš„æ—¶å€™ï¼Œæˆ‘å†™ä¸‹è¿™äº›è¯ï¼Œæˆå¹´äººçš„å´©æºƒå¾€å¾€æ€»æ˜¯ä¸€ç¬é—´ï¼Œçœ‹ç€èº«è¾¹çš„ä¼™ä¼´ä¿ç ”çš„æˆåŠŸäº†ï¼Œè€ƒç ”çš„åœ¨å¥‹æˆ˜ï¼Œå·¥ä½œçš„æ”¶è·äº†offerã€‚è€Œæˆ‘å‘¢ï¼Ÿå¤©å¤©çœ‹ç€è¿™ä¸ªå…¶å®å­¦ä¸åˆ°ä»€ä¹ˆä¸œè¥¿çš„å®˜ç½‘é¡¹ç›®ï¼Œä¸€è°ƒå°±æ˜¯ä¸€æ•´å¤©ã€‚æ™šä¸Šèººåœ¨åºŠä¸Šçœ‹çª—å¤–çš„æ˜Ÿæ˜Ÿï¼Œè§‰å¾—è‡ªå·±èƒ½åŠ›ä¸è¡Œå´åˆä¸æƒ³åŠªåŠ›ï¼Œå¿ƒé‡Œå…¶å®ä¹Ÿå¾ˆéš¾å—çš„ï¼Œæˆ‘çš„æœªæ¥ä¼šæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ æ²¡æœ‰åŠæ³•ï¼Œç”Ÿæ´»åƒä¸€æŠŠæ— æƒ…åˆ»åˆ€ï¼Œå®ä¹ è¿˜æ˜¯å¾—ç»§ç»­ä¸‹å»ï¼Œåªæ˜¯åé¢æˆ‘ä¼šæŠŠé‡å¿ƒæ”¾åœ¨ç§‹æ‹›ä¸Šï¼Œç°åœ¨æˆ‘åªèƒ½åŒ–ç„¦è™‘ä¸ºåŠ¨åŠ›äº†ï¼Œè¿˜è¯´å†ä¹Ÿä¸ç¢°ç§‹æ‹›ä¸€é“é¢˜ï¼Œè‰ç‡äº†ï¼Œä»¥åæˆ‘ä¼šè®¤çœŸå¯¹å¾…æ¯ä¸€æ¬¡ç¬”è¯•ï¼Œå¥½å¥½æ€»ç»“ï¼Œäº‰å–æ—©æ—¥æ‹¿åˆ°ä¿åº•offerï¼ŒåŠ æ²¹äº†ï¼Œæˆ‘çœŸçš„ä¸æƒ³æ‰é˜Ÿã€‚","link":"/life/%E4%B9%9D%E6%9C%88%E9%9A%8F%E7%AC%94%20%E4%BC%BC%E4%B9%8E%E4%B8%80%E7%9B%B4%E5%9C%A8%E5%81%9A%E6%B2%A1%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%E4%BA%8B/"},{"title":"å…«æœˆéšç¬”","text":"å…«æœˆï¼Œè¸å‡ºä¸€å¤§æ­¥ [DONE] æ‰¾å®ä¹  ç§Ÿæˆ¿ ç§‹æ‹› [TODO] ç§‹æ‹›ï¼ˆæ±‚æ±‚äº†ï¼ŒæŠ•å¤šç‚¹å§ï¼‰ è¡¥åšå®¢ï¼ˆåšå®¢è¿™éƒ½å¿«åºŸäº†ï¼Œæœ‰æ—¶é—´æŠŠä¹‹å‰çš„ç¬”è®°å’ŒçŸ¥ä¹çš„é‚£ç¯‡æ–‡ç« æ¬è¿è¿‡æ¥å§ï¼‰ å­¦é¡¹ç›®ï¼ˆcrudå’Œä¸šåŠ¡é€»è¾‘å¤§è‡´çœ‹çœ‹å°±è¡Œäº†ï¼Œå¤šå…³æ³¨redisï¼Œmotanï¼Œæ€»ä½“æ¶æ„çš„è®¾è®¡è¿™äº›ï¼‰ åœ¨å®¶å •è½çš„æ—¥å­ç–«æƒ…å·²ç»è¿›å…¥äº†ä¸­åæœŸï¼Œ7æœˆï¼Œæˆ‘å¼€å§‹ä¸ºæˆ‘çš„æœªæ¥æ‹…å¿§ã€‚ç–«æƒ…åœ¨å®¶èººäº†åŠå¹´ï¼Œæµ‘æµ‘å™©å™©ï¼Œæ‡’æƒ°çš„æˆ‘ï¼Œæ¯å¤©ç¡åˆ°ä¸­åˆï¼Œä¸‹åˆä½æ•ˆå­¦ä¸¤ä¸‰ä¸ªå°æ—¶ï¼Œæœ‰æ—¶å€™åšleetcodeç®—æ³•é¢˜éš¾çš„å¯èƒ½ä¸€ä¸‹åˆåšä¸å‡ºä¸€é“ï¼Œæœ‰æ—¶å€™å­¦å­¦springç³»åˆ—æ¡†æ¶ï¼Œäº”ç‚¹å‡ºé—¨å’Œå…„å¼Ÿä»¬æ‰“çƒï¼Œå›å®¶æ´—ä¸ªæ¾¡ï¼Œåƒæ™šé¥­ï¼Œç»§ç»­ä¸‹åˆçš„ä½æ•ˆå­¦ä¹ ï¼ˆä¸å°å¿ƒæå‡ºäº†æ‰‹æœºï¼‰ï¼Œåä¸€ç‚¹çš„æ—¶å€™å’Œsaié›„å‡ºå»åƒå®µå¤œï¼Œæ™šä¸Šä¸€ç‚¹åˆ°å®¶ï¼Œç©æ‰‹æœºä¸¤ä¸‰ç‚¹ç¡â€¦åœ¨å¦‚æ­¤è§„å¾‹çš„ä½œæ¯ä¸‹ï¼Œæˆ‘æ…Œäº†ã€‚ åƒæˆ‘è¿™ä¹ˆæ‡’æƒ°ä¸”å–œæ¬¢ç¡è§‰çš„äººï¼Œå®Œå…¨æ— æ³•äº§ç”Ÿæœ‹å‹åœˆé‚£ç§â€œç©åŒäº†ï¼Œå¥½æƒ³å›æ ¡â€çš„å¿µå¤´ï¼Œä½†æ˜¯é‚£æ®µæ—¶é—´æˆ‘æ€»æ˜¯æ‹…å¿ƒæˆ‘çš„æœªæ¥ã€‚å¤§æ¦‚åœ¨7æœˆä¸­æ—¬ï¼Œæˆ‘å¸¸å’Œsaié›„åœ¨å®µå¤œåœºé€éœ²æˆ‘çš„è‹¦æ¼ï¼Œåœ¨é’çˆ·é‚£é‡Œå€¾è¯‰æˆ‘çš„å¿§æ„ï¼Œä½†æˆ‘ä¸æ„¿æ„å¸¦ç»™æœ‹å‹ä»¬å¤ªå¤šçš„è´Ÿèƒ½é‡ï¼Œæ›´å¤šçš„æ˜¯å¤œé‡Œä¸€ä¸ªäººå¯¹ç€çª—å¤–å‘å‘†ã€‚æˆ‘æ‹…å¿ƒä»¥æˆ‘çš„èƒ½åŠ›ï¼Œæˆ‘çš„èƒŒæ™¯ï¼Œæˆ‘çš„å‡ºèº«ï¼Œæˆ‘çš„å­¦å†â€¦åœ¨æ¯•ä¸šåæ‰¾ä¸åˆ°ä¸€ä»½èƒ½å¡«é¥±æˆ‘çš„è‚šå­çš„å·¥ä½œï¼ˆå¯èƒ½æˆ‘å¤ªèƒ½åƒï¼Ÿä¸”åƒä¸èƒ–ï¼Ÿï¼‰ã€‚ æ‰¾å®ä¹ ï¼Œå»æ·±åœ³æ€»ä¹‹ï¼Œåœ¨saié›„çš„å»ºè®®ä¸‹æˆ‘å¼€å§‹åœ¨bossç›´è˜ä¸Šé¢æŠ•äº†ç¬¬ä¸€ä»½å®ä¹ ç®€å†ï¼Œé‚£æ®µæ—¶é—´åœ¨bossç›´è˜å’Œå®ä¹ åƒ§ä¸Šé¢æ¯å¤©ç–¯ç‹‚ç‚¹å‡»æŠ•é€’ï¼Œè¦ä¹ˆæ²¡æœ‰å›åº”ï¼Œè¦ä¹ˆå¤©å¤©æœ‰å…«ç«¿å­æ‰“ä¸ç€çš„è¥é”€å²—ä½æ¥æ‰¾æˆ‘ï¼Œæœ‰ä¸€ä¸¤å®¶æ¥åˆ°é¢è¯•ä½†æ˜¯éƒ½æ˜¯è¦æ±‚å½“é¢é¢è¯•ã€‚äººåœ¨éŸ¶å…³ï¼Œåˆšä¸‹åºŠã€‚æˆ‘æ€ä¹ˆç¬¬äºŒå¤©åˆ°å¹¿å·æ·±åœ³å»é¢è¯•å˜›ï¼Ÿä¹Ÿä¸çŸ¥é“é‚£äº›æ²¡æœ‰å›åº”çš„å…¬å¸æ˜¯hrä¸ºäº†kpiæŒ‡æ ‡è¿˜æ˜¯æˆ‘çš„èƒ½åŠ›è¾¾ä¸åˆ°è¦æ±‚ã€‚å½“æ—¶ä¹Ÿæ­£å¥½çœ‹å®Œâ€œé»‘é©¬ä¹ä¼˜å•†åŸâ€æœ€åä¸€èŠ‚è§†é¢‘ï¼Œæˆ‘æ¥åˆ°äº†äº‘ä¹‹å®¶çš„é¢è¯•é€šçŸ¥ï¼Œä¹Ÿå°±æ˜¯æˆ‘ç°åœ¨çš„å¯¼å¸ˆå±•å—ã€‚ è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªä¸”æ˜¯æœ€åä¸€ä¸ªè§†é¢‘é¢è¯•ï¼Œæˆ‘è¿˜éšçº¦è®°å¾—å½“åˆå±•å—é—®æˆ‘çš„å‡ ä¸ªé—®é¢˜ï¼š ArrayListå’ŒLinkedListçš„åŒºåˆ«ï¼ˆæˆ‘è§£é‡Šäº†ä»–ä»¬çš„ç»“æ„åŒºåˆ«ï¼Œæ“ä½œä¸Šçš„æ€§èƒ½åŒºåˆ«ï¼‰ å‡½æ•°é‡å†™overrideå’Œé‡è½½overloadï¼ˆè®²äº†ä»–ä»¬çš„ä½¿ç”¨æ–¹å¼ï¼Œç»§æ‰¿ï¼Œå‚æ•°ç±»å‹æˆ–è€…ä¸ªæ•°æˆ–è€…é¡ºåºä»€ä¹ˆçš„ï¼‰ çº¿ç¨‹çš„çŠ¶æ€ï¼ˆä»–ä¹‹è¯´å¯¹çº¿ç¨‹çš„ç†è§£ï¼Œè¿™å°±å¾ˆå¤§èŒƒå›´ï¼Œåœ¨ä»–çš„æç¤ºä¸‹æˆ‘é‡ç‚¹è®²äº†è¿™ä¸ªï¼‰ å¤šçº¿ç¨‹çš„å®ç°æ–¹å¼ï¼ˆThreadï¼ŒRunnableï¼ŒCallableï¼Œçº¿ç¨‹æ± ï¼Œä»‹ç»äº†ä¸€ä¸‹ä»–ä»¬çš„åŒºåˆ«ï¼‰ æ­»é”ï¼ˆæ²¡ç­”å¥½ï¼Œç¨€é‡Œç³Šæ¶‚å±…ç„¶æè¿°äº†ä¸€ä¸‹å“²å­¦å®¶è¿›é¤é—®é¢˜â€¦ï¼‰ javaç§çš„å†…å­˜ï¼ˆæˆ‘è§£é‡Šäº†jvmçš„å†…å­˜æ¨¡å‹ï¼ŒæŠ›å‡ºä»€ä¹ˆå¼‚å¸¸ï¼‰ é›†åˆç±»å‹ï¼ˆListï¼ŒSetï¼ŒMapï¼Œç°åœ¨çœ‹æ¥ï¼Œç­”çš„å¾ˆå·®ï¼Œåˆ†ç±»éƒ½æ²¡åˆ†å¥½ï¼Œè‡³å°‘åº”è¯¥Mapå’ŒCollectionåŒä¸€çº§ï¼‰ MySQLçš„äº‹åŠ¡çš„ç‰¹æ€§ï¼ˆæç¤ºäº†ä¸€ä¸‹æ‰æƒ³èµ·æ¥é—®çš„æ˜¯ACIDï¼Œä½†æˆ‘ä¹Ÿåªæ˜¯è¯´äº†ACIDçš„ä¸­æ–‡â€¦ï¼‰ äº‹åŠ¡éš”ç¦»ç•Œåˆ«ï¼ˆæ²¡ç­”å‡ºæ¥ï¼‰ MySQLä¼˜åŒ–ï¼ˆæˆ‘åªè¯´äº†ç´¢å¼•ï¼ŒæŸ¥è¯¢å¿«ä½†æ˜¯å¢åˆ æ…¢ï¼Œä½†æ˜¯æˆ‘æ˜¯å…¥èŒåæ‰çœŸæ­£ç”¨åˆ°ç´¢å¼•è¿›è¡Œä¼˜åŒ–ï¼‰ Springçš„IOCå’ŒAOPï¼ˆè¿™ä¸ªæˆ‘æè¿°çš„ä¸æ¸…æ¥šï¼Œå…¶å®å°±ç®—æ˜¯ç°åœ¨æˆ‘ä¹Ÿæè¿°ä¸æ¸…æ¥šï¼Œä½†æ˜¯åŸç†æˆ‘æ˜¯ç†è§£çš„ï¼Œå¯ä»¥çœ‹æˆ‘çš„Springç›¸å…³åšå®¢ï¼‰ é¡¹ç›®ä¸­çš„ç§’æ€å¦‚ä½•å®ç°çš„ï¼ˆæˆ‘è¯´ç”¨redisï¼‰ é¡¹ç›®ä¸­ç”¨MQåšä»€ä¹ˆï¼ˆåªæœ‰ä¹ä¼˜å•†åŸç”¨äº†mqï¼Œæˆ‘ç›´æ¥è§£é‡Šäº†ä¹ä¼˜å•†åŸçš„å†…å®¹ï¼Œç”¨æ¥æ›´æ–°å•†å“çš„æ—¶å€™å‘é€æ¶ˆæ¯è®©å…¶ä»–æ¨¡å—ä¸€åŒæ›´æ–°ä¿æŒåŒæ­¥ä»€ä¹ˆä»€ä¹ˆçš„ï¼‰ åˆ«çœ‹é—®çš„å¤šï¼Œæˆ‘è§‰å¾—æ˜¯å› ä¸ºæˆ‘ç­”å¾—å°‘â€¦â€¦æ€»ä¹‹ï¼Œäº‘ä¹‹å®¶çš„é€Ÿåº¦å¾ˆå¿«ï¼ŒæŠ•é€’ç®€å†åä¸¤å¤©çº¦é¢è¯•ï¼Œé¢è¯•å®Œå½“å¤©ä¸‹åˆæˆ‘å°±å‡ºå‘å’Œå®¶é‡Œäººå»ç æµ·ç©ï¼Œå½“å¤©å°±æ¥åˆ°äº†offerã€‚ä¸é«˜ï¼Œ120/å¤©ï¼Œä¸€ä¸ªæœˆé™¤å»å‘¨æœ«ç®—ä¸‹æ¥2700è¿™æ ·å­ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆå¼€å¿ƒï¼Œå› ä¸ºæˆ‘é‚£æ—¶å€™çš„çŠ¶æ€ä¸æ‹‰è‡ªå·±ä¸€æŠŠå°±æ²¡äº†ã€‚ ç æµ·ç©äº†ä¸¤å¤©æˆ‘ç›´æ¥å»äº†æ·±åœ³æ²¡æœ‰å›å®¶ï¼Œåªæœ‰ä¸€ä¸ªèƒŒåŒ…å‡ å¥—è¡£ç‰©ï¼Œä½åŒå­¦å®¶åæ¥ä½äº²æˆšå®¶å†åæ¥ç§Ÿäº†è›‹å£³å…¬å¯“ã€‚æˆ‘ç®—äº†ç®—ï¼Œå…¶å®ä¸€ä¸ªæœˆä¼°è®¡å¾—å€’è´´â€¦å°¤å…¶ç¬¬ä¸€ä¸ªæœˆ è¿™ä¸ªæœˆå¦‚æ­¤ç‰¹æ®Š8.3æˆ‘æ¥åˆ°äº‘ä¹‹å®¶ï¼Œé‚£å¤©ä»–ä»¬å¾ˆå¿™åœ¨å¼€ä¼šï¼Œæˆ‘å°±åœ¨å‰å°ç­‰hrï¼Œç­‰äº†åŠä¸ªå¤šå°æ—¶ï¼Œæˆ‘ä»¥ä¸ºè¿˜æœ‰hré¢ï¼Œç»“æœå¥¹æ¥äº†å°±å¼€å§‹ç­¾åˆåŒâ€¦å®ä¹ ç”Ÿæ´»å¼€å§‹äº† ç¬¬ä¸€ä¸ªæ˜ŸæœŸï¼šæ±‚çˆ·çˆ·å‘Šå¥¶å¥¶çš„è¦æƒé™ï¼Œè¿™ä¸ªä¸å¯¹é‚£ä¸ªä¸æ‡‚ï¼Œè£…ä¸ªè½¯ä»¶å¯åŠ¨é¡¹ç›®éƒ½ç¢°å£ï¼ˆä¸æ˜¯æˆ‘çš„é—®é¢˜ï¼Œå…¬å¸ç”µè„‘çœŸçš„ä»€ä¹ˆç¯å¢ƒéƒ½æ²¡æœ‰ï¼Œè£…èµ·æ¥ç¼ºè¿™ä¸ªç¼ºé‚£ä¸ªï¼Œç¬¬ä¸€å¤©å¥½ç¬¬äºŒå¤©åˆæœ‰é—®é¢˜â€¦ï¼‰ï¼Œæˆ‘è®°å¾—é‚£æ—¶å€™å¼„å¾—æˆ‘è‡ªå·±éƒ½ä¹±äº†ï¼Œå±•å—è¯´çœ‹ä¸‹ç¯å¢ƒå˜é‡æˆ‘å±…ç„¶æ„£äº†ä¸€ä¸‹ï¼šä»€ä¹ˆç¯å¢ƒå˜é‡ï¼Œä»–å™—å—¤ç¬‘äº†ä¸€ä¸‹ï¼ˆå¯èƒ½è§‰å¾—è‡ªå·±è¢«éª—äº†ï¼Œæ‹›äº†ä¸ªèƒŒé¢ç»çš„è¿›æ¥ï¼Ÿï¼‰ï¼Œç®—äº†ï¼Œåæ­£æœ¬æ¥å°±ä¸å¼ºï¼Œè®©å¤§ä½¬è§‰å¾—è‡ªå·±å¼±åé¢å®‰æ’ç‚¹è½»æ¾çš„ä»»åŠ¡å²‚ä¸æ˜¯ç¾æ»‹æ»‹ï¼Ÿ èŠ±äº†å¾ˆå¤§åŠŸå¤«å¯åŠ¨å¥½äº†ï¼Œå“‡è¿™ä¸ªä»£ç é‡æ˜¯ä¸æ˜¯å¤ªå¤§äº†ï¼Œéšä¾¿ç‚¹å¼€ä¸€ä¸ªç±»5000å¤šè¡Œï¼Ÿæ€ä¹ˆçœ‹å¾—å®Œï¼Œé‚£ä¹ˆå¤šå¥‡å¥‡æ€ªæ€ªçš„idï¼Œå¼„æ‡‚æˆ‘éƒ½ç¦»èŒäº†ï¼ŒåŒ…æ€ä¹ˆè¿™ä¹ˆå¤šï¼gitï¼Ÿå‘½ä»¤æˆ‘å°±åªä¼šaddï¼Œcommitï¼Œcloneå’Œpushï¼Œä¹‹å‰éƒ½æ˜¯ä¸€ä¸ªäººå“ªé‡Œæ‡‚è§£å†³å†²çªã€‚mongoï¼Ÿæˆ‘æ²¡ç”¨è¿‡å’‹æ•´ã€‚100å¤šå¼ è¡¨!æˆ‘äººå‚»äº†â€¦ ç¬¬äºŒä¸ªæ˜ŸæœŸï¼šä¸œçœ‹çœ‹è¥¿çœ‹çœ‹ï¼Œç®—äº†ï¼Œä¸€æ—¶åŠä¼šä¹Ÿæä¸æ˜ç™½ã€‚æ¥åˆ°çš„ç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯æµ‹è¯•ä¸€ä¸ªæ¥å£ï¼Œç»™ä¸ªæ¥å£å‘Šè¯‰æˆ‘åœ¨å“ªä¸ªç±»é‡Œé¢ï¼Œé‚£éƒ¨åˆ†crudå¼„æ‡‚äº†å°±è¡Œã€‚ å·¦è¾¹æ˜¯ä¸€ä¸ªåç«¯å¦¹å­ï¼ŒèŒèŒï¼ˆä¸æ˜¯å¤–å·ï¼‰ï¼Œæœ‰é—®é¢˜æˆ‘å°±å»çƒ¦å¥¹ï¼Œè°å«æˆ‘æ˜¯å®ä¹ ç”Ÿï¼Œæˆ‘èœæˆ‘æœ‰ç†ï¼å¥½å¥‡ä¸€äº›å®ç°ç»†èŠ‚åˆè¢«å¤æ‚çš„é€»è¾‘æè’™ï¼Ÿé—®èŒèŒï¼›å¦‚ä½•åŒæ­¥ä»£ç è§£å†³å†²çªåˆå¹¶åˆ†æ”¯ä½¿ç”¨gitå·¥å…·ï¼Ÿé—®èŒèŒï¼›ä»£ç æŠ¥å„ç§é”™è¯¯ï¼Œå„ç§ç¯å¢ƒå„ç§éšè—æ“ä½œå¥‡æ€ªé€»è¾‘ï¼Ÿé—®èŒèŒï¼›ä¸ºä»€ä¹ˆä¸é—®å±•å—ï¼Ÿæˆ‘è«åæœ‰ç‚¹æ€•ä»–ï¼ˆå¯èƒ½å½“åˆé¢è¯•æ²¡ç­”å¥½ï¼‰ï¼Œè™½ç„¶æŠ›å¼€å·¥ä½œï¼Œåƒé¥­çš„æ—¶å€™æˆ‘è·Ÿä»–è°ˆç¬‘é£ç”Ÿâ€¦ æˆ‘ç‰¹åˆ«å–œæ¬¢æˆ‘çš„åº§ä½ï¼šå·¦è¾¹åç«¯ï¼Œå³è¾¹å‰ç«¯ï¼Œå¯¹é¢äº§å“ã€‚è¿™ä¸ªä½å­ï¼Œå ªç§°ååŒ—æœå—ï¼Œé£æ°´å®åœ°ï¼æˆ‘æ„¿ç§°ä¹‹ä¸ºå®ä¹ ç”Ÿå­¦ä¹ ä¸“ç”¨ä½ï¼ï¼æˆ‘æ‰¾ä¸åˆ°å…¥å£å°±é—®å‰ç«¯ï¼Œå¼„ä¸æ‡‚ç±»å°±é—®åç«¯ï¼Œå¶å°”å·å¬äº§å“å°±èƒ½çŸ¥é“å¤§å®¶ç›®å‰åœ¨æä»€ä¹ˆï¼Œç»äº†ï¼è¿˜æœ‰å°±æ˜¯ï¼Œä¸‰ä¸ªéƒ½æ˜¯å¦¹å­ï¼Ÿï¼Ÿæˆ‘ä»¬ç­40ä¸ªäººä¹Ÿæ‰ä¸¤ä¸ªå¦¹å­â€¦ææƒšè§‰å¾—æœ‰ç‚¹ä¸ç§‘å­¦ï¼ ç¬¬ä¸‰ä¸ªæ˜ŸæœŸï¼šæˆ‘ç»ˆäºå¼€å¯äº†çŸ¥ä¹å®ä¹ ç”ŸçŠ¶æ€ï¼šä¸­åˆåƒå•¥ï¼Œæ™šä¸Šåƒå•¥â€¦å€’ä¸æ˜¯è¯´æŠ€æœ¯å®Œå…¨å¼„æ‡‚äº†ï¼Œå…¶å®å¼„ä¸æ‡‚ä¹Ÿæ²¡å•¥ï¼Œå®‰æ’çš„ä»»åŠ¡èƒ½æœ‰å¤šéš¾ï¼Œéš¾çš„ä¹Ÿä¸æ•¢å®‰æ’ç»™ä½ ä¸€ä¸ªå®ä¹ ç”Ÿï¼Œå†™å†™crudæé™äº†ï¼Œä¸€äº›æŠ€æœ¯æ ˆå’Œè‡ªå·±å­¦çš„ä¸åŒ¹é…åˆå¦‚ä½•ï¼Œè¦å†™ä¸€ä¸ªæ¥å£ï¼Œåœ¨åŒä¸€ä¸ªç±»é‡Œé¢æ‰¾æ‰¾ç±»ä¼¼çš„ï¼Œå‚ç…§ç€å†™ä¸€ä¸ªå°±å®Œäº‹äº†ã€‚å…¬å¸æœ‰æ—©æŠ¥åˆ¶åº¦ï¼Œæ¯å¤©å†™DONEå’ŒTODOï¼ˆæœ¬æ–‡å¼€å¤´å°±æ˜¯ä»é‚£é‡Œå­¦æ¥çš„ï¼Œåˆå­¦åˆ°äº†ï¼Œå¼€å¿ƒï¼ï¼‰ï¼Œæˆ‘è¿˜æ‹…å¿ƒå®Œæˆçš„å¤ªå¿«æ²¡ä¸œè¥¿å†™ï¼Œå†™å®Œäº†æˆ‘ä¹Ÿåˆ†ä¸¤å¤©ï¼Œç¬¬ä¸€å¤©æ’æŸ¥/ç¼–å†™ï¼Œç¬¬äºŒå¤©æµ‹è¯•ä¹‹ç±»çš„ï¼Œä¸ç„¶æ²¡ä»»åŠ¡ï¼ŒTODOéƒ½æ²¡å¾—å†™ï¼Œå¤šå°´å°¬ï¼ è·Ÿéƒ¨é—¨çš„äººç©çš„ç†Ÿäº†ï¼Œå­¦å®‡å¤§ä½¬ï¼ˆæ—©æˆ‘ä¸€ä¸ªæ˜ŸæœŸè·³æ§½è¿‡æ¥ï¼‰æ•™æˆ‘ä¸€é—¨ç§˜æŠ€ï¼ç»äº†ï¼å­¦å®‡ç‰›é€¼ï¼Œæˆ‘å¿«ä¹äº† ç¬¬å››ä¸ªæ˜ŸæœŸï¼šæ²¡äº‹æ‰¾å±•å—è¦ä¸ªç®€å•ç‚¹çš„ä»»åŠ¡ï¼Œå±•å—æŒºè´Ÿè´£ï¼Œå¯¹æˆ‘ç›¸å½“å¥½ï¼Œè·Ÿæˆ‘äº¤æµç”Ÿæ´»ä¸Šå­¦ä¹ ä¸Šå·¥ä½œä¸Šçš„é—®é¢˜ï¼Œå®‰æ’çš„ä»»åŠ¡ä¹Ÿä»å¼€å§‹çš„æµ‹è¯•ä¸€ä¸‹æ¥å£ï¼Œåˆ°ç¼–å†™æ¥å£ï¼Œæ…¢æ…¢çš„ç»™æˆ‘å¯¹æ¥æµ‹è¯•äººå‘˜ï¼Œä¸æ”¾å…»è®©æˆ‘è¿›æ­¥å¾ˆå¿«æ¶‰åŠåˆ°è·¨éƒ¨é—¨çš„æ²Ÿé€šç¡®å®éš¾æã€‚ ç‰¹åˆ«é¸£è°¢è¿™ä¸ªæœˆçœŸçš„è·Ÿä»¥å¾€ä»»ä½•ä¸€ä¸ªå‡æœŸéƒ½ä¸ä¸€æ ·ï¼Œæ•´ä¸ªäººæ¨ç€å°±è¿™æ ·ç¨€é‡Œç³Šæ¶‚çš„å‘å‰èµ°äº†ã€‚è¿™ä¸ªå®ä¹ ç¡®å®å¼€å§‹çš„å¤ªæ™šäº†ï¼Œè¿™æ ·æˆ‘å°±å¿…é¡»é€ƒè¯¾å®Œæˆå®ä¹ ï¼ŒæœŸé—´å­¦æ ¡é‚£è¾¹ä¹Ÿå‡ºäº†å¾ˆå¤šé—®é¢˜ã€‚æˆ‘ä¸çŸ¥é“è¿™ä¸ªé€‰æ‹©æ˜¯å¦æ­£ç¡®ï¼Œä½†æ˜¯å°±ç›®å‰æƒ…å†µæ¥çœ‹ï¼Œæˆ‘ä¸åæ‚”ï¼Œä¸ä»…æ˜¯å› ä¸ºå·¥ä½œä»£æ›¿äº†é¢“åºŸï¼Œè€Œä¸”æ˜¯åœ¨è¿™ä¹‹å‰ï¼Œåœ¨è¿™æœŸé—´ï¼Œé‡åˆ°è®¸è®¸å¤šå¤šå¯çˆ±çš„äººã€‚ saié›„ï¼šå¼€å¿ƒæ—¶èƒ½å«æˆ‘æ‰“çƒä¸Šåˆ†ï¼Œå¤±è½æ—¶èƒ½é™ªæˆ‘æ¸¡è¿‡ç°æš—çš„æ—¥å­ï¼Œè°ƒä¾ƒæ—¶èƒ½åœ¨å®µå¤œåœºç–¯ä¸€æŠŠå¹¶ç»™æˆ‘å»ºè®® é’çˆ·ï¼šæ„Ÿè°¢é’çˆ·ä¸€è·¯çš„é™ªä¼´ï¼Œåœ¨æˆ‘é’æ˜¥å²æœˆç•™ä¸‹ç—•è¿¹ã€‚æœ‹å‹ä¹Ÿå¥½çŸ¥å·±ä¹Ÿç½¢ï¼Œåœ¨å°†æ¥æ¼«é•¿çš„äººç”Ÿè·¯ä¸Šï¼Œé…¸ç”œè‹¦è¾£ä¸€åŒåˆ†äº«ã€‚æ„¿å‹è°Šé•¿å­˜ï¼Œå…±å‹‰ å±•å—ï¼šæˆ‘çš„å¯¼å¸ˆï¼Œæˆ‘è¿˜è®°å¾—æ‹›è˜å…¬å‘Šä¸Šé‚£å¥â€œ90åæ¿€æƒ…å›¢é˜Ÿâ€â€¦ç¡®å®éå¸¸å¹´è½»æœ‰æ‰åã€‚å·¥ä½œä¸Šç»™æˆ‘åˆç†çš„åˆ†é…å·¥ä½œï¼Œä¸ä¼šå¤ªéš¾åˆèƒ½å­¦åˆ°ä¸œè¥¿ï¼Œå¹¶ä¸”æ¸æ¸æ·±å…¥ï¼Œæ…¢æ…¢çš„ä¹Ÿå¼€å§‹å¯¹æ¥æµ‹è¯•äººå‘˜ï¼Œç‹¬ç«‹å®Œæˆä¸€äº›ç®€å•çš„åŠŸèƒ½ï¼Œè®©æˆ‘åˆ‡å®çš„ä½“ä¼šåˆ°äº†è‡ªèº«çš„æˆé•¿ï¼Œä»¥åŠå¿«é€Ÿçš„èå…¥å…¬å¸çš„è¿ä½œä½“åˆ¶ã€‚ç”Ÿæ´»ä¸­ä¹Ÿéå¸¸ç…§é¡¾æˆ‘ï¼Œåˆé¥­æ—¶é—´ä¼šè°ˆåŠå­¦ä¸šå’Œè¿‡å¾€ï¼Œè®©æˆ‘äº†è§£åˆ°è‡ªå·±å’Œå¤§ä½¬çš„å·®è·ï¼ èŒèŒï¼šä¸“ä¸šçš„ä¸œè¥¿å°±æ˜¯é—®å¥¹äº†ï¼Œä¸šåŠ¡æ˜¯çœŸçš„ç†Ÿç»ƒå•Šï¼Œä»£ç é£æ ¼ä¹Ÿå¥½ï¼Œç»å¸¸ä¼šä»å¥¹çš„ä»£ç ä¸­å‘ç°ä¸€äº›æ„å¤–çš„æƒŠå–œï¼Œæ¯”å¦‚å†™æ³¨è§£ã€ç”¨streamæµç­‰ï¼Œå¾ˆå¤šâ€œè™½ç„¶æˆ‘ä¼šä½†æ˜¯æˆ‘ä»æ¥æ²¡æƒ³è¿‡è¦ç”¨â€çš„ä¸œè¥¿çœŸæ­£çš„è¢«åº”ç”¨åˆ°äº†å·¥ç¨‹å®è·µä¸­ã€‚è¯´æ¥æˆ‘ä¹Ÿç»å¸¸çƒ¦å¥¹ï¼Œé—®çš„æœ€å¤šçš„ä¹Ÿæ˜¯å¥¹ï¼Œæœ‰æ—¶å€™åœ¨æˆ‘è¿™é‡Œè€½è¯¯çš„æ—¶é—´æ¯”å¥¹è‡ªå·±çš„å·¥ä½œæ—¶é—´è¿˜å¤šï¼Œåœ¨æ­¤è¡¨ç¤ºæ„Ÿè°¢ã€‚ä¸€å¼€å§‹æˆ‘è¿˜è§‰å¾—å¾ˆé«˜å†·ï¼Œè‡ªä»ç»™æˆ‘å‘äº†ä¸€ä¸ªç‰›å•¤è¡¨æƒ…åŒ…ï¼Œå‘ç°äº‹æƒ…å¹¶ä¸ç®€å•ã€‚æ€»ä¹‹ï¼šå¤ªå¼ºäº† å¾·é¾™ï¼šä½ å¤´å‘åˆ°åº•æ˜¯æ€ä¹ˆä¿å…»çš„ï¼Ÿï¼Ÿæ•™æ•™æˆ‘ é»„ç´/ä½³æ·ï¼šè™½ç„¶å·¥ä½œå†…å®¹æˆ‘çœ‹ä¸æ‡‚ï¼Œä½†å¹¶ä¸å½±å“ä½ ä»¬ä¸­åˆåƒé¥­æ—¶åæ§½å¸¦æ¥çš„æ— é™æ¬¢ä¹ï¼Œè®©ä¸­åˆçš„é¥­å ‚å†…å¤–å……æ»¡äº†æ¬¢å¿«çš„æ°”æ°›ã€‚åˆšå…¥èŒçš„æ—¶å€™æˆ‘è§‰å¾—å…¶ä»–äººéƒ½æŒºé«˜å†·ï¼Œå”¯ç‹¬è¿™ä¸¤ä½è®©æˆ‘æ„Ÿå—åˆ°å±•å—è¯´çš„â€œ90åæ¿€æƒ…å›¢é˜Ÿâ€â€¦å•Šå“ˆå“ˆå“ˆå“ˆå“ˆï¼Œè¿™ä¸ªè¯´çš„å¯èƒ½å°±æ˜¯ä½ ä¿©ï¼Ÿ å­¦å®‡ï¼šå˜¿å˜¿ï¼Œèƒ½å’Œæˆ‘ç©çš„æœ€æ¬¢çš„å°±æ˜¯ä»–äº†ï¼Œå„ç§é‚£å•¥æ“ä½œå¯å¤ªç§€äº†ï¼ç¬¬ä¸€å›è·Ÿæˆ‘è¯´çš„æ—¶å€™æˆ‘äººéƒ½ç›´æ¥å‚»äº†ï¼Œä¸å¾—ä¸è¯´å¸¦æˆ‘é¢†ç•¥äº†ä¸€ç‰‡å…¨æ–°çš„å›½åº¦ï¼Œè®©æˆ‘é¡¿æ‚Ÿäº†å·¥ä½œçš„æœ€é«˜å¢ƒç•Œï¼ï¼è¿™ä¸æ˜¯æŠ€æœ¯å‰ä¸å‰å®³çš„é—®é¢˜ï¼Œä»–çœŸçš„å°±æ˜¯ éå¸¸çš„ç‰›é€¼çš„é‚£ç§ ååˆšï¼šååˆšå…ˆç”Ÿæ˜¯æˆ‘çš„åˆç§Ÿèˆå‹ï¼Œæ„Ÿè°¢ä¸‰ä¸ªæœˆä»¥æ¥å¯¹æˆ‘çš„ç…§é¡¾ï¼Œåƒä¸ªå…„é•¿ä¸€èˆ¬å¸¦æˆ‘çˆ¬å±±æ¸¸ç©ï¼Œåˆ†æˆ‘é›¶é£Ÿï¼Œç»™æˆ‘æ·»èœï¼ˆå¨è‰ºçœŸä¸é”™ï¼ï¼‰ã€‚åœ¨æ·±åœ³è¿™ä¸ªé™Œç”Ÿçš„åŸå¸‚è®©æˆ‘æ„Ÿå—åˆ°å…³æ€€ï¼Œé‡è¦çš„æ˜¯åœ¨å’Œååˆšçš„äº¤æµä¸­å¼€é˜”äº†è§†é‡ï¼Œç»™æˆ‘ä¼ æˆè®¸å¤šå·¥ä½œçš„ç»éªŒï¼Œæœªæ¥çš„è§„åˆ’ï¼Œç¤¾ä¼šçš„ç°è±¡ï¼Œæ·±åœ³çš„å‘å±•ï¼Œç»æµçš„èµ°åŠ¿â€¦æ¯ä¸€æ¬¡å’Œååˆšå…ˆç”Ÿè°ˆå¤©é˜”åœ°éƒ½å®›å¦‚ä¸€åœºè§†é‡çš„å‡åï¼Œå¹¶å°†åœ¨ä»Šåçš„ç”Ÿæ´»ä¸­å½±å“ç€æˆ‘ spring dataï¼šè™½ç„¶æ‚¨ä¸æ˜¯äººï¼Œä½†æ‚¨ä¾ç„¶å¯çˆ±ï¼Œå¾—ç›Šäºæ‚¨å…¨å®¶ï¼Œç»™ç”¨æˆ·æä¾›çš„æ¨¡æ¿ï¼Œè®©æˆ‘åœ¨spring data jpa/redis/elasticsearch/mongoä¹‹é—´è‡ªç”±åˆ‡æ¢ï¼Œç»™æ‚¨æ‹œä¸ªæ—©å¹´","link":"/life/%E5%85%AB%E6%9C%88%E9%9A%8F%E7%AC%94/"},{"title":"åˆ†å¸ƒå¼é”","text":"1. å‰è¨€ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªç½‘å‹çš„è¯„è®ºï¼šç°åœ¨æœ¬ç§‘åº”å±Šæ¯•ä¸šç”Ÿéƒ½è¦æ±‚ä¼šåˆ†å¸ƒå¼äº†å—ï¼Ÿ çœŸçš„å¤ªå·äº†ï¼ï¼ï¼å­¦ä¸åŠ¨äº† å¬è¿™ä¸ªæ¦‚å¿µä¹Ÿå¾ˆä¹…äº†ï¼Œè€Œä¸”å…¶å®æˆ‘å¯¹åˆ†å¸ƒå¼çš„å­¦ä¹ ä¹Ÿæ²¡é‚£ä¹ˆæ·±å…¥â€¦å¯æ˜¯é¢è¯•åˆè¦é—®ï¼Œå®³ï¼ å…ˆè¯´è¯´è¿™ä¸ªä¸œè¥¿å§ï¼Œæœ¬æ¥å•ä½“åº”ç”¨æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç»å¸¸è¯´çº¿ç¨‹å®‰å…¨ï¼Œäºæ˜¯å‡ºç°äº†é”å’ŒåŒæ­¥çš„ä¸€ç³»åˆ—æ“ä½œ(synchronizedå•Šï¼ŒLockå•Šï¼ŒJUCå•Šä¹‹ç±»çš„)ï¼Œæ•°æ®åº“æ–¹é¢ä¹Ÿå‡ºç°äº†äº‹åŠ¡çš„éš”ç¦»æ€§ã€‚ç°åœ¨é—®é¢˜æ˜¯åˆ†å¸ƒå¼åœºæ™¯ï¼Œé›†ç¾¤ç¯å¢ƒï¼Œå®é™…ä¸Šå¼€äº†å¤šä¸ªè¿›ç¨‹ï¼Œé‚£ä¹ˆjavaçš„è¿™äº›å¹¶å‘ç›¸å…³apiå°±æ— èƒ½ä¸ºåŠ›äº†ï¼Œåªèƒ½å€ŸåŠ©ä¸€äº›ç¬¬ä¸‰æ–¹çš„å·¥å…·ï¼Œæ‰€æœ‰çš„æœåŠ¡å™¨éƒ½é€šè¿‡è¿™ä¸ªç¬¬ä¸‰æ–¹æ¥è·å–é”ã€‚ è¿™å°±å«åˆ†å¸ƒå¼é”ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¿è¯åœ¨åˆ†å¸ƒå¼éƒ¨ç½²çš„åº”ç”¨é›†ç¾¤ä¸­ï¼ŒåŒä¸€ä¸ªæ–¹æ³•åœ¨åŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€å°æœºå™¨ä¸Šçš„ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ ç›®å‰åˆ†å¸ƒå¼é”çš„ä¸‰ç§ä¸»æµå®ç°æ–¹å¼ åŸºäºæ•°æ®åº“ åŸºäºredis åŸºäºzookeeper ç›®çš„ï¼š å¯ä»¥ä¿è¯åœ¨åˆ†å¸ƒå¼é›†ç¾¤ä¸‹çº¿ç¨‹å®‰å…¨ï¼ŒåŒä¸€ä¸ªæ–¹æ³•åœ¨åŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€å°æœºå™¨ä¸Šçš„ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚ è¿™æŠŠé”è¦æ˜¯ä¸€æŠŠå¯é‡å…¥é”ï¼ˆé¿å…æ­»é”ï¼šåŒä¸€ä¸ªçº¿ç¨‹åŒä¸€æ¬¡äº‹åŠ¡è®¿é—®åŒä¸€è¡Œä¸¤æ¬¡ï¼Œæ‹¿ä¸åˆ°é”ï¼‰ æœ‰é«˜å¯ç”¨çš„è·å–é”å’Œé‡Šæ”¾é”åŠŸèƒ½ï¼ˆåŠ é”å¤±è´¥èƒ½é‡åŠ ï¼Œè§£é”å¤±è´¥èƒ½è®©é”è¿‡æœŸï¼‰ è·å–é”å’Œé‡Šæ”¾é”çš„æ€§èƒ½è¦å¥½ 2. åŸºäºæ•°æ®åº“çš„åˆ†å¸ƒå¼é”2.1 åŸºäºè¡¨ï¼ˆä¹è§‚é”ï¼‰å®ç°ï¼š å°±æ˜¯è®°å½•ä¸€å¼ lockè¡¨ï¼ŒåŠ é”ï¼šæ·»åŠ ä¸€æ¡è®°å½•ï¼Œæœ‰å½“å‰çº¿ç¨‹åå’Œé”å®šçš„æ–¹æ³•åã€‚è§£é”ï¼šåˆ é™¤è¿™æ¡è®°å½•ã€‚ æ³¨æ„äº‹é¡¹ï¼š é’ˆå¯¹çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼šé”å®šçš„æ–¹æ³•åè¿™ä¸€ä¸ªå­—æ®µå½“ç„¶è¦uniqueï¼Œå¦åˆ™å¤±å»æ„ä¹‰ï¼ˆåªèƒ½ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ªæ–¹æ³•ï¼‰ é’ˆå¯¹å¯é‡å…¥é—®é¢˜ï¼šè¯·æ±‚é”æ—¶é™¤äº†è¦åˆ¤æ–­è¯¥æ–¹æ³•æ˜¯å¦å·²ç»å­˜åœ¨ä»¥å¤–ï¼Œè¿˜è¦åˆ¤æ–­æ˜¯å¦å°±æ˜¯æœ¬çº¿ç¨‹ï¼Œæ˜¯åˆ™ç›´æ¥return true å¥½å¤„å’Œé—®é¢˜ï¼š æ•°æ®åº“æŒ‚æ‰ï¼šéœ€è¦å¤šä¸ªæ•°æ®åº“å¤‡ä»½å’ŒåŒæ­¥ é’ˆå¯¹åŠ é”å¤±è´¥ï¼šinsertæ’å…¥å¤±è´¥ï¼Œæ²¡æœ‰è·å¾—é”ï¼Œå°±ç›´æ¥å›æ»šäº‹åŠ¡ä¸èƒ½åç»­ï¼Œè§£å†³åŠæ³•æ˜¯whileå¾ªç¯ä¸€ç›´è¯·æ±‚åˆ°æˆåŠŸæ‰return é’ˆå¯¹è§£é”å¤±è´¥ï¼šdeleteè§£é”å¯èƒ½å¤±è´¥ï¼Œæ²¡æœ‰å¤±æ•ˆæ—¶é—´ï¼Œå¯¼è‡´è®°å½•ä¸€ç›´åœ¨æ•°æ®åº“ä¸­ï¼Œä¹‹æ¶èƒ½å®šæ—¶ä»»åŠ¡æ¸…ç†è¯¥è¡¨ 2.2 åŸºäºæ’ä»–é”ï¼ˆæ‚²è§‚é”ï¼‰å®ç°ï¼š è¡¨å’Œä¸Šé¢ä¸€æ ·ï¼ŒåŠ é”ï¼šconnection.setAutoCommit(false);å¼€å¯äº‹åŠ¡ä½†ä¸æäº¤ï¼ŒåŠ é”è¯­å¥ä¸ºselect * from lock where method_name = xx for updateã€‚è§£é”ï¼šconnection.commit(); æ³¨æ„äº‹é¡¹ï¼š é’ˆå¯¹çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼šfor updateæ˜¯mysqlçš„innodbä¸€ç§è¡Œé”æ’ä»–é”å®ç°ï¼Œå› æ­¤ä¸€å®šè¦å¼•æ“æ”¯æŒè¡Œé”ï¼Œä¸”å¿…é¡»åŠ å”¯ä¸€ç´¢å¼•æ‰ä¼šèµ°è¡Œé”ï¼Œå¦åˆ™é”è¡¨ é’ˆå¯¹å¯é‡å…¥é—®é¢˜ï¼šåŒä¸Š å¥½å¤„å’Œé—®é¢˜ï¼š ä¸å­˜åœ¨åŠ é”å¤±è´¥é—®é¢˜ï¼šå› ä¸ºfor updateå¤±è´¥ä¼šé˜»å¡ç›´åˆ°æˆåŠŸ ä¸å­˜åœ¨è§£é”å¤±è´¥é—®é¢˜ï¼šå› ä¸ºé”å¹¶ä¸æ˜¯æ’å…¥çš„æ•°æ®ï¼Œè€Œæ˜¯äº‹åŠ¡ï¼Œå‡ºé”™äº†ä¼šå›æ»šï¼Œæ•°æ®åº“ä¼šæŠŠé”é‡Šæ”¾æ‰ æ€§èƒ½é—®é¢˜ï¼šæœ‰æ—¶å€™sqlä¼˜åŒ–å™¨ä¼˜åŒ–äº†ï¼Œè¡¨å¤ªå°æ—¶ä¸èµ°ç´¢å¼•ï¼Œå¯¼è‡´é”è¡¨ï¼Œå½±å“å…¶ä»–æ–¹æ³•çš„è¿›è¡Œ æ€§èƒ½é—®é¢˜ï¼šäº‹åŠ¡é•¿æ—¶é—´ä¸æäº¤çš„æ€§èƒ½é—®é¢˜ï¼ŒåŒæ—¶å ç”¨è¿æ¥æ±  2.3 æ€»ç»“å®¹æ˜“ç†è§£ï¼Œæ€§èƒ½æœ‰é—®é¢˜ï¼Œè€ƒè™‘çš„å¤šäº†å†™èµ·æ¥è¶Šæ¥è¶Šå¤æ‚ã€‚ä¸æ¨è 2. åŸºäºredisçš„åˆ†å¸ƒå¼é”å®ç°ï¼š è¿™ä¸ªæœ€ç®€å•ï¼Œå°±æ˜¯ä¸€æ¡è®°å½•key: æ–¹æ³•å value: å½“å‰çº¿ç¨‹ æ³¨æ„äº‹é¡¹ é’ˆå¯¹åŠ é”å¤±è´¥é—®é¢˜ï¼šè¦whileå¾ªç¯ï¼ŒåŒä¸Š é’ˆå¯¹è§£é”å¤±è´¥é—®é¢˜ï¼šè¦è®°å¾—è®¾ç½®è¿‡æœŸæ—¶é—´ é’ˆå¯¹å¯é‡å…¥é—®é¢˜ï¼šåŒä¸Šï¼Œåˆ¤æ–­æ˜¯å¦æœ¬èº« é—®é¢˜ï¼š è§£é”å¤±è´¥å¯ä»¥é€šè¿‡è¿‡æœŸæ—¶é—´æ¥å®Œæˆï¼šä½†æ˜¯è¿‡æœŸæ—¶é—´è®¾ç½®å¤šå°‘å‘¢ï¼Ÿå°‘äº†å¯èƒ½äº‹åŠ¡æ²¡å®Œæˆå°±è¿‡æœŸäº†ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚å¤šäº†çš„è¯è™½ç„¶å®‰å…¨ï¼Œä½†æ˜¯å¦‚æœçœŸçš„è§£é”å¤±è´¥ï¼Œè¦ç™½ç­‰å¾ˆä¹… æ€»ç»“ï¼š rediså¯ä»¥ç®€å•çš„éƒ¨ç½²é›†ç¾¤ï¼Œè€Œä¸”æ”¯æŒè¿‡æœŸæ—¶é—´ï¼Œè§£å†³äº†å¯ç”¨æ€§çš„é—®é¢˜ï¼Œè€Œä¸”æ€§èƒ½ä¹Ÿå¥½ï¼Œé—®é¢˜å°±åœ¨äºè¿‡æœŸæ—¶é—´çš„è®¾ç½® 3. åŸºäºzookeeperçš„åˆ†å¸ƒå¼é”å®ç°ï¼š è™½ç„¶æˆ‘æ²¡ç”¨è¿‡zookeeperï¼Œä½†æ˜¯è¿™ä¸ªç‚¹è¿˜æ˜¯çœ‹è¿‡ï¼ŒåŸºäºä¸´æ—¶æœ‰åºèŠ‚ç‚¹ï¼ŒåŠ é”ï¼šæ·»åŠ æœ‰åºèŠ‚ç‚¹ï¼Œè§£é”ï¼šåˆ é™¤æœ‰åºèŠ‚ç‚¹ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨zookeeperç¬¬ä¸‰æ–¹åº“Curatorå®¢æˆ·ç«¯ï¼Œè¿™ä¸ªå®¢æˆ·ç«¯ä¸­å°è£…äº†ä¸€ä¸ªå¯é‡å…¥çš„é”æœåŠ¡ã€‚ æ€»ç»“ï¼š é’ˆå¯¹çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼šæ²¡é—®é¢˜ï¼Œzookeeperæœ¬èº«å°±æ˜¯ä¸ºäº†ä¸€è‡´æ€§ é’ˆå¯¹å¯é‡å…¥é—®é¢˜ï¼šæ²¡é—®é¢˜ï¼Œåˆ›å»ºèŠ‚ç‚¹çš„æ—¶å€™ï¼ŒæŠŠå½“å‰å®¢æˆ·ç«¯çš„ä¸»æœºä¿¡æ¯å’Œçº¿ç¨‹ä¿¡æ¯ç›´æ¥å†™å…¥åˆ°èŠ‚ç‚¹ä¸­ï¼Œä¸‹æ¬¡æƒ³è¦è·å–é”çš„æ—¶å€™å’Œå½“å‰æœ€å°çš„èŠ‚ç‚¹ä¸­çš„æ•°æ®æ¯”å¯¹ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚å¦‚æœä¸ä¸€æ ·å°±å†åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„é¡ºåºèŠ‚ç‚¹ï¼Œå‚ä¸æ’é˜Ÿã€‚ é’ˆå¯¹åŠ é”å¤±è´¥ï¼šæ²¡é—®é¢˜ï¼Œæœ¬èº«å°±æ˜¯é˜»å¡çš„ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ£€æŸ¥è‡ªå·±åˆ›å»ºçš„èŠ‚ç‚¹æ˜¯ä¸æ˜¯å½“å‰æ‰€æœ‰èŠ‚ç‚¹ä¸­åºå·æœ€å°çš„ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆè‡ªå·±å°±è·å–åˆ°é” é’ˆå¯¹è§£é”å¤±è´¥ï¼šæ²¡é—®é¢˜ï¼Œä¸´æ—¶èŠ‚ç‚¹åœ¨sessionæ–­å¼€æ—¶è‡ªåŠ¨åˆ é™¤ æœ¬æ–‡å‚è€ƒï¼š https://www.cnblogs.com/austinspark-jessylu/p/8043726.html rediséƒ¨åˆ†çš„å®ç°å‚è€ƒï¼š https://www.cnblogs.com/barrywxx/p/11644803.html","link":"/SpringCloud/%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81/"},{"title":"å›æº¯æ¨¡æ¿","text":"ä»å¤§ä½¬é‚£é‡Œå­¦çš„https://zhuanlan.zhihu.com/p/93530380ï¼Œå†åŠ ä¸Šè‡ªå·±åšé¢˜è¿‡ç¨‹ä¸­çš„ä¸€äº›å¿ƒå¾— æ¨¡æ¿ä¼ªä»£ç ï¼ˆpythonçœ‹èµ·æ¥ç®€æ´ä¸€äº›ï¼‰ 1234567891011result = []def backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨): if æ»¡è¶³ç»“æŸæ¡ä»¶: result.add(è·¯å¾„) return for é€‰æ‹© in é€‰æ‹©åˆ—è¡¨: å‰ªæ åšé€‰æ‹© backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨) æ’¤é”€é€‰æ‹© éœ€è¦æ³¨æ„çš„å‡ ç‚¹ï¼š javaä¸­ç”±äºè·¯å¾„é€šå¸¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥åœ¨åŠ å…¥ç»“æœé›†çš„æ—¶å€™å¾€å¾€éœ€è¦newä¸€ä¸‹ï¼Œä»¥å…è·¯å¾„æ”¹å˜æ—¶å°†resé‡Œé¢çš„å…ƒç´ ä¹Ÿä¸€èµ·æ”¹å˜ java/c++ä¸­ï¼Œé€‰æ‹©åˆ—è¡¨å¾€å¾€ä¼šé€šè¿‡ä¸€ä¸ªindexæ¥ä»£è¡¨åˆ°äº†å“ªä¸ªä½ç½®ï¼Œè€Œä¿æŒæ€»åˆ—è¡¨numsçš„ä¸å˜æ€§ï¼Œè‡³äºpythonå’Œjsï¼Œå¤©ç”Ÿlistå°±æ˜¯å¯å˜çš„ï¼Œappendå’Œremoveå¹¶ä¸ä¼šé€ æˆå¤ªå¤§çš„å¼€é”€ï¼Œæ‰€ä»¥é€‰æ‹©åˆ—è¡¨å¯ä»¥å˜è€Œä¸éœ€è¦indexå˜é‡è®°å½• æ€»ä½“æ¡†æ¶ä¸å˜ï¼Œä½†æ˜¯æœ‰æ—¶å€™forå¾ªç¯å¯ä»¥ä½¿ç”¨æšä¸¾ä»£æ›¿ï¼ˆä¸Šä¸‹å·¦å³æ–¹å‘ï¼‰ å»é‡ç”¨Setï¼Œä¸è¦æ¯æ¬¡åŠ å…¥å‰åˆ¤æ–­list.containsï¼Œé‚£æ ·å¾ˆæ…¢ 1234567891011121314151617private List&lt;List&lt;Integer&gt;&gt; res = new ArrayList&lt;&gt;(); //å¤–é¢ä¸€ä¸ªå˜é‡è®°å½•ç»“æœpublic void backtrace(int[] nums, int index, List&lt;Integer&gt; track){ if (ç»“æŸæ¡ä»¶){ res.add(new ArrayList&lt;&gt;(track)); //åŠ å…¥ç»“æœæ—¶è¦newï¼Œå¦åˆ™æ‰€æœ‰è·¯å¾„å˜æˆæœ€åä¸€ä¸ªçš„å¼•ç”¨ return ; } for (é€‰æ‹© : é€‰æ‹©åˆ—è¡¨) { //å‰ªæ if (ä¸æ»¡è¶³æ¡ä»¶) continue; //åšé€‰æ‹© track.add(nums[i]); //é€’å½’ backtrace(nums, i + 1, track); //æ’¤é”€ track.remove(track.size() - 1); }} æ¯‹åº¸èµ˜è¨€ï¼Œç›´æ¥ç»“åˆå›æº¯é¢˜ç›®ä¸€èµ·çœ‹ï¼Œçœ‹å‡ é¢˜å°±æ˜ç™½äº†","link":"/algorithms/backtrace-template/"},{"title":"åå°„å’Œç±»åŠ è½½å™¨","text":"1. ç¨‹åºè¿è¡Œé˜¶æ®µ ä»£ç é˜¶æ®µï¼ˆç¡¬ç›˜é˜¶æ®µï¼‰ï¼šæ¯”å¦‚ç¼–å†™ä¸€ä¸ªPerson.javaï¼Œç¼–è¯‘æˆå­—èŠ‚ç Person.classï¼Œè¿™éƒ½æ˜¯å­˜åœ¨ç¡¬ç›˜çš„ï¼Œè€Œç¨‹åºè¿è¡Œæ˜¯è¦åœ¨å†…å­˜ä¸­çš„ ç±»åŠ è½½å™¨ClassLoaderé˜¶æ®µï¼šåœ¨ç¬¬ä¸€é˜¶æ®µå’Œç¬¬äºŒé˜¶æ®µä¸­é—´ï¼Œä¹Ÿå°±æ˜¯æœ¬æ–‡è¦è®²çš„å†…å®¹ï¼Œå…ˆå–ä¸ªå…³å­ï¼ŒçŸ¥é“æœ‰è¿™ä¸ªé˜¶æ®µ Runtimeè¿è¡Œæ—¶é˜¶æ®µï¼šä¹Ÿå°±æ˜¯new Person()ï¼Œé‚£ä¹ˆæ­¤æ—¶å·²ç»åœ¨å†…å­˜ä¸­ 2. â€œç¬¬äºŒé˜¶æ®µâ€ï¼šClassç±»å¯¹è±¡é˜¶æ®µé€šè¿‡ç¬¬ä¸€ç¬¬ä¸‰é˜¶æ®µï¼Œå¯ä»¥æ¨æµ‹å‡ºç¬¬äºŒé˜¶æ®µå…¶å®æ˜¯æŠŠç¡¬ç›˜ä¸Šçš„classæ–‡ä»¶åŠ è½½è¿›å†…å­˜å˜æˆjavaå¯ä»¥è¯†åˆ«çš„å†…å®¹ï¼ˆæœ¯è¯­å«åšClassç±»å¯¹è±¡ï¼‰çš„è¿‡ç¨‹ï¼Œéšåç¬¬ä¸‰é˜¶æ®µä¾¿å¯è¯»å–ã€‚é‚£ä¹ˆç©¶ç«Ÿæ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿ åœ¨è¿™ä¸ªé˜¶æ®µä¼šæŠŠPerson.classï¼ˆæ³›æŒ‡æ‰€æœ‰.classæ–‡ä»¶ï¼‰æ–‡ä»¶åˆ†è§£æˆä¸‰éƒ¨åˆ†åŠ è½½è¿›å†…å­˜ï¼ˆå½“ç„¶ä¸æ˜¯åŠ è½½æˆPersonè¿™ä¸ªç±»ï¼Œç¨‹åºæ²¡æœ‰newï¼Œjavaæ˜¯ä¸çŸ¥é“ä½ è¦ä»€ä¹ˆç±»çš„ï¼Œæ‰€ä»¥ä»–æ˜¯åŠ è½½æˆä¸Šé¢è¯´çš„ç»Ÿä¸€çš„â€œClassç±»å¯¹è±¡â€ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…æ‹¬äº†ä¸‰ä¸ªä¸œè¥¿ï¼š Filed[] fieldsï¼šé‡Œé¢å­˜æ”¾.classåˆ†è§£å‡ºæ¥çš„æˆå‘˜å˜é‡ Constructor[] consï¼šå­˜æ”¾æ„é€ æ–¹æ³• Method[] methodsï¼šå­˜æ”¾æˆå‘˜æ–¹æ³• è¿™ä¸ªä».classæ–‡ä»¶åˆ†è§£ä¸ºå„ä¸ªéƒ¨åˆ†å¹¶å°è£…ä¸ºClassç±»å¯¹è±¡çš„è¿‡ç¨‹å…¶å®å°±å«åå°„ è¿™ä¸æ˜¯å¾ˆæŠ½è±¡çš„ä¸œè¥¿ï¼Œæ¥ä¸ªå…·ä½“åº”ç”¨ä¸¾ä¾‹ï¼šideaå¯¹ç€ä¸€ä¸ªStringå¯¹è±¡æ•²ä¸‹.ï¼Œä¼šæç¤ºchatAtç­‰ä¸€å †å¯ä»¥ç”¨çš„æ–¹æ³•ï¼Œè¿™æ–¹æ³•ä»å“ªæ¥ï¼Ÿideaå†…éƒ¨åˆ¤æ–­äº†Stringç„¶åæç¤ºï¼Ÿæ€ä¹ˆå¯èƒ½ï¼Œå…¶å®è¿™å°±æ˜¯è¿ç”¨äº†åå°„ï¼Œè¯»å–äº†Method[]åˆ—è¡¨ï¼Œæ˜¾ç¤ºå‡ºæ¥ã€‚å¯ä»¥æŠŠideaçœ‹ä½œæ˜¯ä¸€ä¸ªè¿è¡Œä¸­çš„javaç¨‹åºï¼Œå› æ­¤åå°„å¯ä»¥åœ¨è¿è¡Œçš„æ—¶å€™è·å–ç±»çš„ä¿¡æ¯ 3. apiæ—¢ç„¶çŸ¥é“äº†åå°„å°±æ˜¯ä¸ºäº†è·å–â€Classç±»å¯¹è±¡â€œï¼ˆå†æ¬¡é‡ç”³ï¼Œä¸æ˜¯Personç±»å¯¹è±¡ï¼Œä»–å°±å«Classç±»å¯¹è±¡ï¼ï¼ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥çœ‹å¦‚ä½•è·å–äº†ï¼Œåˆšåˆšè¯´äº†ä¸‰ä¸ªé˜¶æ®µï¼Œé‚£ä¹ˆæ¯ä¸ªé˜¶æ®µéƒ½æœ‰å¯¹åº”çš„apiç”¨äºè·å–Classç±»å¯¹è±¡ã€‚ Class.forName(â€œå…¨ç±»åâ€)ï¼šç¬¬ä¸€é˜¶æ®µï¼Œå°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œè¿”å›Classç±»å¯¹è±¡ï¼ˆå…¨é™å®šç±»åï¼šåŒ…å+ç±»åï¼Œè¿™ä¸ªé˜¶æ®µæ²¡æœ‰ç±»åï¼Œå› æ­¤å¿…é¡»æ‰‹åŠ¨å†™å…¨é™å®šç±»åï¼Œï¼‰ ç±»å.classï¼šç¬¬äºŒé˜¶æ®µï¼Œé€šè¿‡ç±»åçš„classå±æ€§è·å–ï¼ˆè¿™ä¸€é˜¶æ®µjvmå·²ç»åŠ è½½å¥½äº†ï¼ŒçŸ¥é“äº†ç±»åï¼Œå› æ­¤éœ€è¦çš„è¯åªè¦ç›´æ¥ç”¨ç±»å.å±æ€§åå°±å¯ä»¥äº†ï¼‰ å¯¹è±¡å.getClass()ï¼šç¬¬ä¸‰é˜¶æ®µï¼Œè¿™æ—¶å€™ä½ å·²ç»new Person()äº†ï¼Œå·²ç»æœ‰å¯¹è±¡äº†ï¼ŒgetClass()æ˜¯Objectç±»æä¾›çš„æ–¹æ³•ï¼Œå› æ­¤ä½ çš„Personç±»å¿…æœ‰è¿™ä¸ªæ–¹æ³• 12345//1.è‡ªå·±å†™ä¸€ä¸ªPersonç±»ï¼Œéšä¾¿ç»™ä¸ªnameå’Œageå±æ€§ï¼Œç•¥Class cls1 = Class.forName(\"com.wjw.domain.Person\");Class cls2 = Person.class;Person person = new Person();Class cls3 = person.getClass(); åŒä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶åªä¼šè¢«åŠ è½½ä¸€æ¬¡Classç±»å¯¹è±¡ï¼Œä¸‰ç§æ–¹å¼è·å¾—çš„åœ°å€éƒ½æ˜¯åŒä¸€ä¸ª 4. åŒäº²å§”æ´¾æœºåˆ¶å¦‚æœè‡ªå·±å»ºç«‹ä¸€ä¸ªåä¸ºjava.lang.Stringçš„åŒ…å’Œç±»ï¼Œèƒ½ä¸èƒ½æ›¿æ¢æ‰çœŸæ­£çš„Stringç±»å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸è¡Œçš„ã€‚ ClassLoaderæœ‰ä¸‰ç§ BootstrapClassLoader ==&gt; $JAVA_HOME/jre/lib ExtClassLoader ==&gt; $JAVA_HOME/jre/lib/ext AppClassLoader ==&gt; ç¬¬ä¸‰æ–¹å’Œè‡ªå·±é¡¹ç›®ä¸‹çš„ç±» æ‰€è°“åŒäº²å§”æ´¾æœºåˆ¶ï¼Œå°±æ˜¯å½“ç¨‹åºè¯»å–Stringçš„æ—¶å€™ï¼Œå…ˆä»BootstrapClassLoaderå¼€å§‹ï¼Œå±‚å±‚å¾€ä¸‹è¯»å–ï¼Œå¦‚æœèƒ½å¤ŸåŠ è½½Stringï¼Œé‚£ä¹ˆäº¤ç”±è¯¥ç±»åŠ è½½å™¨åŠ è½½ï¼Œå¦‚æœåˆ°AppClassLoaderéƒ½æ²¡æœ‰å‘ç°è¯¥ç±»ï¼Œä¼šæŠ¥ClassNotFoundException Stringåœ¨$JAVA_HOME/jre/lib/rt.jarä¸‹ï¼Œæ‰€ä»¥è¢«BootstrapClassLoaderåŠ è½½ã€‚ éœ€è¦æŸ¥çœ‹æ˜¯ä»€ä¹ˆç±»åŠ è½½å™¨ï¼ŒClassç±»æä¾›äº†getClassLoader()æ–¹æ³•ï¼Œå¦‚ä¸‹ 12Person p = new Person();System.out.println(p.getClass().getClassLoader()); å¦‚æœè¦çœ‹ä¸Šä¸€çº§ï¼Œå°±é€šè¿‡ç±»åŠ è½½å™¨çš„getParent() 1System.out.println(p.getClass().getClassLoader().getParent()); è¦æ³¨æ„çš„æ˜¯ï¼Œç”±BootstrapClassLoaderåŠ è½½çš„ç±»getClassLoader()ä¼šä¸ºnullï¼Œä¸æ˜¯æ²¡æœ‰è¯¥ç±»ï¼ˆæ²¡æœ‰ä¼šæŠ¥é”™ï¼‰ï¼Œè€Œæ˜¯æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œå·²ç»å»äº†cå†™çš„nativeé‡Œé¢","link":"/Java%E5%9F%BA%E7%A1%80/%E5%8F%8D%E5%B0%84%E5%92%8C%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/"},{"title":"å­—ç¬¦ä¸²ä¸­çš„æˆå¯¹æ‹¬å·é—®é¢˜å¤„ç†æŠ€å·§","text":"1. å‰è¨€é‡åˆ°æˆå¯¹æ‹¬å·é—®é¢˜ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯æ ˆï¼Œå› ä¸ºæˆ‘ä»¬è‡ªä»ç¿»å¼€ä¸¥è”šæ•çš„ã€Šæ•°æ®ç»“æ„ã€‹å¼€å§‹ï¼Œå°±ä¹ æƒ¯äºå°†â€œæ ˆâ€å’Œâ€œæˆå¯¹æ‹¬å·â€è”ç³»èµ·æ¥ã€‚ å…¶å®è¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œéå†ä¸€éï¼Œé‡åˆ°(å…¥æ ˆï¼Œ)å‡ºæ ˆï¼Œæœ€ååˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºï¼Œä¸­é—´è¿˜å¤¹æ‚ç€ä¸€äº›å…¶ä»–æŠ€å·§ï¼ˆæ ˆåº•æ˜¯)å°±ç›´æ¥ç»“æŸä¹‹ç±»çš„ï¼‰ã€‚è¯šç„¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œä½†æ˜¯åšé¢˜çš„æ—¶å€™è®²ç©¶å¿«é€Ÿç¼–å†™ï¼Œç ”ç©¶çš„æ—¶å€™æ‰è®²ç©¶å¿«é€Ÿè¿è¡Œï¼Œè€Œä¸”é€šå¸¸é¢˜ç›®ä¸ä»…ä»…è€ƒæ‹¬å·åŒ¹é…ï¼Œæ‹¬å·åªæ˜¯é¢˜ç›®çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å†™èµ·æ¥å°±æ¯”è¾ƒå¤æ‚ã€‚çœ‹æˆ‘è¿™æ–°æ€è·¯ï¼ 2. apiç”¨çš„è¶Šç†Ÿï¼Œå†™èµ·æ¥å°±è¶Šè½»æ¾ï¼è¿™æ˜¯æˆ‘åœ¨ç‰›å®¢æŸä¸€é¢˜çœ‹åˆ°çš„ï¼Œå¹ä¸ºè§‚æ­¢ï¼ŒçœŸçš„å¯¹apiäº†ç„¶äºå¿ƒï¼Œåæ¥åˆé‡è§äº†ä¸€é“é¢˜ï¼Œè‡ªå·±è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°å¼‚å¸¸å¥½ç”¨ï¼Œå› æ­¤è®°å½•ä¸‹æ¥ã€‚ å…ˆçœ‹è¿™ä¸¤ä¸ªå¤§å®¶å¾ˆç†Ÿäº† int IndexOf(String str)ï¼šå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾æŸä¸ªå­—ç¬¦çš„ç¬¬ä¸€æ¬¡å‡ºç°ä¸‹æ ‡ï¼Œæ²¡æœ‰åˆ™è¿”å›-1 int lastIndexOf(String str)ï¼šä¹Ÿæ˜¯æ‰¾ä¸‹æ ‡ï¼Œä½†æ˜¯æ˜¯æœ€åä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡ï¼Œæ²¡æœ‰åˆ™è¿”å›-1 å¥‡å¦™çš„æ˜¯ï¼Œä»–ä»¬çš„é‡è½½æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªå‚æ•°ï¼ int indexOf(String str, int fromIndex)ï¼šç¬¬ä¸€æ¬¡ï¼Œä»æŒ‡å®šä½ç½®å¾€åæ‰¾ï¼Œæ²¡æœ‰åˆ™è¿”å›-1 int lastIndexOf(String str, int fromIndex)ï¼šæœ€åä¸€æ¬¡ï¼Œä»æŒ‡å®šä½ç½®å¼€å§‹åå‘æœç´¢ï¼Œæ²¡æœ‰åˆ™è¿”å›-1 è®¤çœŸè§‚å¯Ÿï¼Œä½ å°±ä¼šå‘ç°â€¦OHHHï¼ï¼ï¼æ­é…ä»¥ä¸‹ç»äº†ï¼Œæ‹¬å·åŒ¹é…æ€è·¯ï¼šå¯ä»¥å…ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ª)ï¼Œç„¶åä»è¿™ä¸ª)å¼€å§‹å¾€å‰æ‰¾(ï¼Œç»äº†ï¼ï¼ï¼åŒ¹é…ä¸Šäº†ï¼Œä¸€å®šæ˜¯æœ€é è¿‘çš„ä¸€å¯¹ 12int r = str.indexOf(\"]\");int l = str.lastIndexOf(\"[\", r); æ— éœ€è€ƒè™‘æ˜¯å¦åµŒå¥—æ‹¬å·((())())ï¼ï¼ï¼è¿™ä¸¤è¡Œä»£ç ä¸€å®šæ˜¯æ‰¾åˆ°æœ€å†…å±‚æœ€å·¦è¾¹é‚£ä¸ªï¼ï¼ç®€ç›´å°†javaçš„apiå®Œç¾çš„ä½¿ç”¨ä¸Šäº†ï¼Œè¿™å¾—å¯¹apiå¤šç†Ÿç»ƒå•Šï¼ï¼ 3. æœ€å–œæ¬¢çš„å®æˆ˜ç¯èŠ‚3.1 è…¾è®¯2020æ˜¥æ‹›åç«¯-å‹ç¼©ç®—æ³• åŸé¢˜é“¾æ¥https://www.nowcoder.com/test/question/c27561e5b7e0441493adb9a54071888d?pid=21283868&amp;tid=37272348 é¢˜ç›®ï¼š å°Qæƒ³è¦ç»™ä»–çš„æœ‹å‹å‘é€ä¸€ä¸ªç¥ç§˜å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä»–å‘ç°å­—ç¬¦ä¸²çš„è¿‡äºé•¿äº†ï¼Œäºæ˜¯å°Qå‘æ˜äº†ä¸€ç§å‹ç¼©ç®—æ³•å¯¹å­—ç¬¦ä¸²ä¸­é‡å¤çš„éƒ¨åˆ†è¿›è¡Œäº†å‹ç¼©ï¼Œå¯¹äºå­—ç¬¦ä¸²ä¸­è¿ç»­çš„mä¸ªç›¸åŒå­—ç¬¦ä¸²Så°†ä¼šå‹ç¼©ä¸ºm|Sï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ABCABCABCå°†ä¼šè¢«å‹ç¼©ä¸º[3|ABC]ï¼Œç°åœ¨å°Qçš„åŒå­¦æ”¶åˆ°äº†å°Qå‘é€è¿‡æ¥çš„å­—ç¬¦ä¸²ï¼Œä½ èƒ½å¸®åŠ©ä»–è¿›è¡Œè§£å‹ç¼©ä¹ˆï¼Ÿ è¾“å…¥æè¿°: 12345è¾“å…¥ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œä»£è¡¨å‹ç¼©åçš„å­—ç¬¦ä¸²ã€‚Sçš„é•¿åº¦&lt;=1000;Sä»…åŒ…å«å¤§å†™å­—æ¯ã€[ã€]ã€|;è§£å‹åçš„å­—ç¬¦ä¸²é•¿åº¦ä¸è¶…è¿‡100000;å‹ç¼©é€’å½’å±‚æ•°ä¸è¶…è¿‡10å±‚; è¾“å‡ºæè¿°: 1è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä»£è¡¨è§£å‹åçš„å­—ç¬¦ä¸²ã€‚ è¾“å…¥ä¾‹å­1: 1HG[3|B[2|CA]]F è¾“å‡ºä¾‹å­1: 1HGBCACABCACABCACAF ä¾‹å­è¯´æ˜1: 1HG[3|B[2|CA]]Fâˆ’&gt;HG[3|BCACA]Fâˆ’&gt;HGBCACABCACABCACAF é¢˜è§£ï¼š ä¸ºäº†ç®€æ´ï¼Œè¿™é‡Œé™¤å»äº†mainéƒ¨åˆ†ï¼Œåªç»™å‡ºæ ¸å¿ƒå‡½æ•° 1234567891011121314151617181920212223/** * æ€è·¯ï¼šç›´æ¥å­—ç¬¦ä¸²æ›¿æ¢ï¼Œä½†æ˜¯è¦æ³¨æ„ä»å†…å±‚å¼€å§‹ï¼Œçœ‹ä½ çš„Stringç±»apiæŒæ¡ç¨‹åº¦äº† */public static String zxvf(String str){ //æ‰¾æœ€é‡Œé¢é‚£å¯¹æ‹¬å·ä½ç½® int l = 0, r = str.length() - 1; if (str.contains(\"]\")){ //å¦™çš„å¼€å§‹ r = str.indexOf(\"]\"); l = str.lastIndexOf(\"[\", r); }else { return str; } //æˆªå–å­—ç¬¦ä¸²å¹¶æ›¿æ¢ String words = str.substring(l + 1, r); //å¦™çš„ç»“æœ String[] split = words.split(\"\\\\|\"); int time = Integer.parseInt(split[0]); String word = \"\"; for (int i = 0; i &lt; time; i++) { word += split[1]; } str = str.replace(\"[\" + words + \"]\", word); return zxvf(str);} ä½ ç»†å“ï¼Œæ³¨é‡Šé‡Œé¢æ ‡æ˜çš„å¦™çš„åœ°æ–¹ï¼Œéå¸¸æ–¹ä¾¿ 3.2 å°çº¢ä¹¦2020æ ¡æ‹›æµ‹è¯•å¼€å‘&amp;åç«¯ç¬”è¯•é¢˜å·ä¸‰ åŸé¢˜é“¾æ¥https://www.nowcoder.com/question/next?pid=23567650&amp;qid=982135&amp;tid=37272851 é¢˜ç›®ï¼š è–¯é˜Ÿé•¿å†™äº†ä¸€ç¯‡ç¬”è®°è‰ç¨¿ï¼Œè¯·ä½ å¸®å¿™è¾“å‡ºæœ€åå†…å®¹ã€‚ 1.è¾“å…¥å­—ç¬¦åŒ…æ‹¬ï¼Œâ€(â€œ , â€œ)â€ å’Œ â€œ&lt;â€å’Œå…¶ä»–å­—ç¬¦ã€‚ 2.å…¶ä»–å­—ç¬¦è¡¨ç¤ºç¬”è®°å†…å®¹ã€‚ 3.()ä¹‹é—´è¡¨ç¤ºæ³¨é‡Šå†…å®¹ï¼Œä»»ä½•å­—ç¬¦éƒ½æ— æ•ˆã€‚ æ‹¬å·ä¿è¯æˆå¯¹å‡ºç°ã€‚ 4.â€&lt;â€è¡¨ç¤ºé€€æ ¼, åˆ å»å‰é¢ä¸€ä¸ªç¬”è®°å†…å®¹å­—ç¬¦ã€‚æ‹¬å·ä¸å—â€&lt;â€å½±å“ã€‚ è¾“å…¥æè¿°: 1è¾“å…¥ä¸€è¡Œå­—ç¬¦ä¸²ã€‚é•¿åº¦&lt;=10000. è¾“å‡ºæè¿°: 1è¾“å‡ºä¸€è¡Œå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæœ€ç»ˆçš„ç¬”è®°å†…å®¹ã€‚ ç¤ºä¾‹1ï¼š è¾“å…¥ 1Corona(Trump)USA&lt;&lt;&lt;Virus è¾“å‡º 1CoronaVirus é¢˜è§£ï¼š ç”±äºæ˜¯acmæ¨¡å¼ï¼Œæˆ‘ç›´æ¥è´´å‡ºå®Œæ•´ä»£ç  1234567891011121314151617181920import java.util.Scanner;public class Main { public static void main(String[] args) { Scanner sc = new Scanner(System.in); String note = sc.nextLine(); StringBuilder sb = new StringBuilder(); while (note.contains(\")\")){ //å»æ‰æ³¨é‡Š int r = note.indexOf(\")\"); int l = note.lastIndexOf(\"(\", r); note = note.replace(note.substring(l, r + 1), \"\"); } while (note.contains(\"&lt;\")){ //é€€æ ¼ int idx = note.indexOf(\"&lt;\"); note = note.replace(note.substring(idx - 1, idx + 1), \"\"); } System.out.println(note); }} å…¶å®æ²¡ä»€ä¹ˆåŸç†ï¼Œapiæ‘†åœ¨é‚£ï¼Œçœ‹ä½ ç†Ÿä¸ç†Ÿç»ƒç½¢äº†ï¼Œè¦æ˜¯çŸ¥é“è¿™ä¸ªapiæ­é…çš„è¯ï¼Œåšè¿™é¢˜æ˜¯å¾ˆè½»æ¾çš„ã€‚é‚£ä¹ˆå¯¹äºæ‹¬å·åŒ¹é…é—®é¢˜ï¼šwhileå¾ªç¯åˆ¤æ–­æ˜¯å¦contains(â€œ)â€)ï¼Œåªè¦æœ‰å°±replaceä¸ºç©ºä¸²ï¼Œæœ€ååˆ¤æ–­æ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºå³å¯ï¼Œåº”è¯¥éƒ½æœ‰æ€è·¯äº†å§ã€‚","link":"/algorithms/%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E6%88%90%E5%AF%B9%E6%8B%AC%E5%8F%B7%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86%E6%8A%80%E5%B7%A7/"},{"title":"å¤§åˆ›è®ºæ–‡","text":"å¤§åˆ›ç›¸å…³çš„å·¥ç¨‹æˆ‘æ˜¯æ²¡æœ‰ä¸Šä¼ åˆ°githubçš„ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæ•ˆæœå°±å°±ç›´æ¥æ‘†åœ¨åšå®¢é‡Œå¥½äº† 2019.04-2020.04 æ„Ÿè°¢å›¢é˜Ÿå°ä¼™ä¼´å…±åŒå¥‹æ–—ï¼Œä»ç”³è¯·ç«‹é¡¹ï¼Œåˆ°ç­”è¾©æµç¨‹ï¼Œé¡¹ç›®ç¼–å†™ï¼Œè®ºæ–‡æ”¥å†™ï¼Œè½¯è‘—ç”³è¯·ã€‚è™½ç„¶æˆ‘ä»¬æ˜¯ä¸ªå°å›¢é˜Ÿï¼Œä¼šè®®ä¹Ÿæ˜¯ä¸å‡ºåçš„è¾£é¸¡ä¼šè®®ï¼ˆé€ƒ~ï¼‰ï¼Œä½†æ— è®ºå¦‚ä½•ï¼Œç®—æ˜¯æˆ‘å¹³å‡¡çš„å¤§å­¦ç”Ÿæ¶¯ä¸­ä¸ºæ•°ä¸å¤šçš„ç²¾å½©ã€‚ ä¹Ÿå¾ˆæ„Ÿè°¢å›¢é˜ŸæŒ‡å¯¼è€å¸ˆè‹é™ï¼Œä¸ºäººå’Œè”¼äº²åˆ‡ï¼Œç»™æœ¬ç§‘ç”Ÿå‚ä¸ç§‘ç ”çš„æœºä¼šï¼Œæ„¿æ„å°½åŠ›æ‰€èƒ½åŠä¹‹åŠ›å¸®æˆ‘ä»¬æ‹¿åˆ°è¯¸å¤šèµ„æºã€‚ å½•ç”¨é€šçŸ¥ é¡¹ç›®å…³é”®éƒ¨åˆ†å±•ç¤ºç™»å½•é¡µé¢ æ•°æ®ç®¡ç†é¡µ æ¨¡å‹å’Œå› ç´ é€‰æ‹© è®­ç»ƒæ•ˆæœå’Œæ¨¡å‹å¯¹æ¯” æœ€è¿‘å¾ˆç«çš„ç½‘çº¢ç®—æ³•Xgboost é¢„æµ‹æ•ˆæœ ç®€å•è€Œå½¢è±¡çš„æ¶æ„è®¾è®¡ï¼ æ„Ÿæ…¨çœŸçš„å¾ˆå¼€å¿ƒï¼Œè™½ç„¶å­¦æ ¡æœ‰å¾ˆå¤šå¤§ä½¬ï¼Œæœ¬ç§‘å°±å¥½å‡ ä¸ªè½¯è‘—å¥½å‡ ç¯‡è®ºæ–‡ç”šè‡³è¿˜æœ‰é¡¶ä¼šâ€¦æˆ‘ä»¬ä¹Ÿæ¯”ä¸äº†ã€‚ä½œä¸ºä¸€åå¹³å‡¡çš„å­¦å­ï¼Œé‚£æ—¶å€™æ‰å¤§äºŒå¤§ä¸‰ï¼Œç¼–ç¨‹èƒ½åŠ›è¦è¯´æœ‰å¤šå¥½ç®€ç›´æ˜¯æ”¾å±ï¼Œjavaä¹Ÿæ‰å­¦äº†æ²¡å¤šä¹…ï¼ŒçœŸæ­£çš„çº¯èŒæ–°å°ä¼™ä¼´ã€‚ä»å¬è¯´äººå·¥æ™ºèƒ½å¾ˆç‰›é€¼ï¼Œå¸¦ç€å¥½å¥‡è‡ªå­¦pythonå’Œæ–¯å¦ç¦çš„cs231nè¯¾ç¨‹ï¼Œå¯¹ç¥ç»ç½‘ç»œæœ‰ä¸ªæœ‰äº†å¤§æ¦‚çš„äº†è§£ã€‚ è¯´èµ·æ¥å¾ˆæ¢¦å¹»ï¼Œå¤§äºŒä¸‹å­¦æœŸé€‰å¯¼å¸ˆï¼Œå˜‰é¸¿çš„å¯¼å¸ˆä¹Ÿå°±æ˜¯è‹é™è€å¸ˆï¼Œåœ¨ænlpç›¸å…³çš„ä¸œè¥¿ã€‚ä¸€å¤©ä¸­åˆæŠŠæˆ‘ä»¬å‡ ä¸ªå«å‡ºå»ï¼Œè¿˜å«äº†å‡ ä¸ªå¸ˆå…„ï¼Œå°±è¿™æ ·ç»„äº†ä¸ªå›¢é˜Ÿï¼Œå¯æ˜¯å¸ˆå…„éƒ½å‡†å¤‡ç§‹æ‹›äº†ï¼Œè€Œä¸”ä»–ä»¬ä¹Ÿæ²¡æœ‰æè¿‡ç¥ç»ç½‘ç»œç›¸å…³çš„ä¸œè¥¿ã€‚å¾—ï¼Œæˆ‘ä»¬æˆäº†ç¬¬ä¸€æ‰¹æ ¸å¿ƒæˆå‘˜ï¼Ÿæˆ‘ä»¬ç›¸æ¯”å…¶ä»–æŠ€æœ¯å›¢é˜Ÿï¼Œæ²¡æœ‰å¸ˆå…„ï¼Œæ²¡æœ‰ç»éªŒï¼Œæ²¡æœ‰èµ„æºã€‚ åæ¥å°±æ˜¯å­¦ä¹ æ¨¡å‹å’Œæ¡†æ¶ï¼Œä»€ä¹ˆbpã€cnnã€rnnã€lstmï¼Œä¹Ÿæ¥è§¦è¿‡sklearnã€tensorflowï¼Œpytorchï¼Œopencvï¼Œæ¦‚å¿µå¾ˆå¤šï¼Œå¾ˆæ™¦æ¶©éš¾æ‡‚ï¼Œä»€ä¹ˆæ¢¯åº¦ä¸‹é™ï¼Œæ•°æ®é›†ï¼Œepochï¼Œäº¤å‰éªŒè¯ï¼ŒlossæŸå¤±ï¼ŒçœŸçš„å¬ä¸ªä¸€çŸ¥åŠè§£çš„ï¼Œéšä¹‹è€Œæ¥çš„æ˜¯ä¸€äº›ç»å…¸çš„ç½‘ç»œç»“æ„å’Œæ¨¡å‹ï¼Œvgg16ï¼Œfastrcnnç³»åˆ—ã€ssdç³»åˆ—ã€mtcnnã€mobilenetã€resnetã€yoloç³»åˆ—ï¼Œéƒ½åŸºæœ¬ä¸Šåªæ˜¯çŸ¥é“æœ‰è¿™ä¹ˆä¸ªä¸œè¥¿ï¼Œå¤ªå¤šäº†ã€‚é‚£æ—¶å€™æ¦‚ç‡è®ºè¿˜æ²¡å­¦ï¼Œå­¦æ ¡æ•™çš„çº¿ä»£å¾€å¾€ä¸å¤Ÿç”¨ï¼Œè€Œä¸”è¿˜è¦å…¼é¡¾å­¦æ ¡è¯¾ç¨‹ã€‚ ä¸€å¼€å§‹æ˜¯è·Ÿç€è€å¸ˆæimage-captionçš„ï¼Œä¹Ÿå°±æ˜¯è¾“å…¥ä¸€å¼ å›¾åƒï¼Œèƒ½ç»™å‡ºä¸€å¥æè¿°ï¼Œé‚£æ—¶å€™attentionæœºåˆ¶å¾ˆç«ï¼ŒåŠ ä¸Šè€å¸ˆæœ¬èº«å°±æ˜¯ænlpçš„ï¼Œæˆ‘ä»¬å°±å¸®å¥¹å¤„ç†ä¸€äº›æ•°æ®ä¸Šçš„ä¸œè¥¿ï¼ˆæ‰“ä¸ªç»çº¬åº¦æ ‡æ³¨ä»€ä¹ˆçš„ï¼‰ï¼Œè€å¸ˆæƒ³å¼„æˆä¸€ç³»åˆ—å›¾ç‰‡ï¼Œç”Ÿæˆä¸€ç¯‡è¯­æ„è¿è´¯çš„æ–‡ç« è¿™æ ·ï¼Œideaç¡®å®å¾ˆç²¾å½©ï¼Œæˆ‘å¬å¾—éƒ½è§‰å¾—å¾ˆç²¾å½©ï¼Œä¸è¿‡è¿™äº‹åæ¥æ²¡æ¶ˆæ¯äº†ï¼Œä¸çŸ¥é“ä»–ä»¬è‡ªå·±æœ‰æ²¡æœ‰ç»§ç»­æï¼Œè®ºæ–‡æœ‰æ²¡æœ‰å‘æˆåŠŸï¼Œå°†æ¥æœ‰æœºä¼šï¼Œæˆ‘è¿˜æƒ³åšè¿™ä¸ªï¼ï¼ï¼ã€‚è€å¸ˆåæ¥ä¹Ÿè¯´äº†ï¼Œæç ”ç©¶æ–¹å‘çš„å¯èƒ½æ¯•ä¸šäº†ä¹Ÿæ²¡æœ‰æˆæœï¼Œå†µä¸”è®­ç»ƒæ¨¡å‹æ²¡æœ‰èµ„æºï¼Œç©å…·æ¨¡å‹æ‹¿ä¸ªç¬”è®°æœ¬è·‘å•Šè·‘ï¼Œå¤§ä¸€ç‚¹çš„è¿œç¨‹è¿æ¥è€å¸ˆçš„æœåŠ¡å™¨ï¼ˆå¥½åƒæ˜¯1080ï¼‰ï¼Œè€å¸ˆå°±è¯´ï¼šåšåº”ç”¨å§ã€‚ å…¶å®æˆ‘å†…å¿ƒè¿˜æ˜¯å¾ˆä½©æœå˜‰é¸¿çš„ï¼Œå¦‚æœæ¢æˆæ˜¯æˆ‘ï¼Œè¿™å›¢é˜Ÿç»„ä¸èµ·æ¥ï¼Œå˜‰é¸¿æ˜¯å¾ˆæœ‰é¢†å¯¼èƒ½åŠ›åšäº‹å¾ˆé è°±çš„ï¼Œè€Œé è°±æ˜¯æˆ‘å¯¹ä¸€ä¸ªäººçš„æœ€é«˜è¯„ä»·ï¼ˆæˆ‘å°±ä¸å¯é ï¼‰ï¼Œå˜‰é¸¿å¯èƒ½ä¸æ˜¯ç¼–ç¨‹èƒ½åŠ›æœ€å¼ºçš„é‚£ä¸ªï¼Œä½†ä»–è‚¯å®šæ˜¯æœ€é€‚åˆå¸¦é˜Ÿçš„é‚£ä½ã€‚åœ¨æˆ‘ä»¬éƒ½è¿˜ä¸æˆç†Ÿçš„æƒ…å†µä¸‹ï¼Œè¿œè§æ€§çš„æå‡ºå‚åŠ å¤§åˆ›æ¯”èµ›ï¼Œåšæ°´è´¨å†³ç­–ã€‚é‚£æ®µæ—¶é—´å°±æ˜¯ç”³æŠ¥é¡¹ç›®ï¼Œå’Œæ°´äº§å­¦é™¢å­¦ç”Ÿè¦æ•°æ®ï¼ˆæ‰€è°“å¹¿ä¸œæµ·æ´‹å¤§å­¦ï¼Œæ¯”èµ›æˆ–è€…ä»€ä¹ˆé¡¹ç›®æ­ä¸Šäº†æ°´äº§è¿™æ¡çº¿ï¼Œæ˜¯å¾ˆåƒé¦™çš„ï¼‰ï¼Œè¿™åº”è¯¥ä¹Ÿæ˜¯çœçº§ç«‹é¡¹çš„å¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› ï¼Œå˜‰é¸¿è¿™æ–¹é¢è€ƒè™‘è¿˜æ˜¯å¾ˆç²¾å¦™çš„ã€‚ åæ¥å°±æ˜¯è¿™ä¸ªäº†ï¼Œé›¶é›¶æ•£æ•£çš„å‚è€ƒäº†ç½‘ä¸Šä¸å°‘çš„ä¸œè¥¿ï¼Œæ‹¼æ‹¼å‡‘å‡‘ï¼Œä¿®ä¿®æ”¹æ”¹ï¼Œæ€»ç®—å¼„å‡ºä¸ªåƒæ ·çš„ä¸œè¥¿ï¼Œä¹ŸåŠ å…¥äº†ä¸å°‘ç‰¹è‰²åŠŸèƒ½ï¼Œå˜‰é¸¿å¯¹æ•°æ®è¿›è¡Œäº†å¤„ç†ï¼ˆæ°´äº§å­¦é™¢çš„å­¦ç”Ÿè®°å½•æ•°æ®èƒ½ä¸èƒ½ç”¨ç‚¹å¿ƒï¼ï¼‰ï¼Œæˆ‘å°†æ•°æ®æ”¾åˆ°äº†æˆ‘çš„åä¸ºäº‘ï¼ˆè–…ç¾Šæ¯›è–…çš„ï¼Œæ¯•ç«Ÿä¸ç”¨é’±ï¼ï¼‰ï¼Œæ¨¡å‹è¿™å—ä¸»è¦æ˜¯å˜‰é¸¿åœ¨åšï¼Œå¤„ç†æˆsklearnçš„æ•°æ®æ ¼å¼ï¼Œæˆ‘ä¹Ÿå¸®å¿™å†™äº†ä¸€éƒ¨åˆ†ï¼Œå¤„ç†äº†éƒ¨åˆ†æ¨¡å‹ä¸Šçš„æ—¶é—´é—®é¢˜ã€‚ç»“æ„ä¸Šï¼Œæ¨¡å‹è¿™å—ç´§ç´§å›´ç»•ï¼š å¤šå› ç´ äº¤å‰é¢„æµ‹å•å› ç´  å¤šæ¨¡å‹å¯¹æ¯” æ¨¡å‹èåˆå’Œæå‡ºæ‹©ä¼˜ç®—æ³• æ–‡å¾·å’Œæ…§ç²çš„ä¸­é€”åŠ å…¥ï¼Œæˆ‘åæ¥ä¹Ÿè½¬å‘äº†javaåå°ï¼Œwebè¿™è¾¹æ˜¯æˆ‘å’Œæ–‡å¾·åœ¨æï¼Œwebè¿™è¾¹å°è£…æ•°æ®ç»™pythonï¼Œç”¨äºæ¨¡å‹çš„è®­ç»ƒå’Œé¢„æµ‹ï¼Œé€»è¾‘ä¸Šæœ‰äº¤å‰ï¼Œæ•°æ®å¤„ç†èµ·æ¥æ¯”è¾ƒå›°éš¾ã€‚å› ä¸ºæ˜¯æ°´è´¨å†³ç­–å’Œé¢„è­¦ï¼Œæ–‡å¾·ä¸äº†è§£æ¨¡å‹ï¼Œå˜‰é¸¿ä¸äº†è§£åå°ï¼Œåªæœ‰ä¸¤è¾¹æˆ‘åŠæ–¤å…«ä¸¤ï¼æˆ‘åˆå°†æ°´è´¨é¢„è­¦åŠŸèƒ½åµŒå…¥åœ¨æ¨¡å‹è®­ç»ƒçš„è¯„ä»·ä¹‹åï¼Œåæ¥åˆåŠ å…¥äº†ç‰¹è‰²çš„é‚®ä»¶æé†’åŠŸèƒ½å°å½©è›‹â€¦æ…§ç²å‰ç«¯ï¼Œè®©æ•´ä¸ªé¡¹ç›®çš„è§†è§‰æ•ˆæœæå‡äº†ä¸å°‘ï¼Œæ˜æ°è´Ÿè´£ä¸»è¦è®ºæ–‡ç¼–å†™ï¼Œå¤§å®¶ä¸€èµ·æ…¢æ…¢çš„å°±åšå®Œäº†ã€‚ çœŸçš„å¾ˆæ„Ÿæ¦‚ï¼Œå›¢é­‚maxï¼Œåœ¨å¤§å­¦ä¹Ÿæ‹¼è¿‡ä¹Ÿé—¯è¿‡ï¼Œä¸è‡³äºæ˜¯ä¸ªç¢Œç¢Œæ— ä¸ºçš„å››å¹´ã€‚","link":"/Others/%E5%A4%A7%E5%88%9B%E8%AE%BA%E6%96%87/"},{"title":"å¯¹1000000007å–æ¨¡å’Œ0x3f3f3f3f","text":"1. ç»“æœå¯èƒ½å¾ˆå¤§çš„é¢˜ç›®ä¼šè¦æ±‚å¯¹1000000007å–æ¨¡(1å…«ä¸ªé›¶7)ï¼Œä¸ºä»€ä¹ˆï¼Ÿæœ€ç»ˆæˆ‘åœ¨æŸ³ç¥çš„åšå®¢ä¸‹æ‰¾åˆ°äº†ç­”æ¡ˆ 1000000007æ˜¯ä¸€ä¸ªè´¨æ•°ï¼ˆç´ æ•°ï¼‰ï¼Œå¯¹è´¨æ•°å–ä½™èƒ½æœ€å¤§ç¨‹åº¦é¿å…å†²çª int32ä½çš„æœ€å¤§å€¼ä¸º2147483647ï¼Œ1000000007åŒä¸€ä¸ªé‡çº§ï¼Œè¶³å¤Ÿå¤§ int64ä½çš„æœ€å¤§å€¼ä¸º2^63-1ï¼Œå¯¹äº1000000007æ¥è¯´å®ƒçš„å¹³æ–¹ä¸ä¼šåœ¨int64ä¸­æº¢å‡º æ‰€ä»¥åœ¨å¤§æ•°ç›¸ä¹˜çš„æ—¶å€™ï¼Œå› ä¸º(aâˆ—b)%c=((a%c)âˆ—(b%c))%cï¼Œæ‰€ä»¥ç›¸ä¹˜æ—¶ä¸¤è¾¹éƒ½å¯¹1000000007å–æ¨¡ï¼Œå†ä¿å­˜åœ¨int64é‡Œé¢ä¸ä¼šæº¢å‡º æŸ³ç¥è¯´å¥¹çŒœçš„ï¼https://www.liuchuo.net/archives/645 è®ºè¿°ç”ŸåŠ¨ï¼Œå†…å®¹å……åˆ†ï¼Œç»†èŠ‚ä¸°å¯Œï¼Œä»¤äººä¿¡æœï¼åæ­£æˆ‘ä¿¡äº† 2. æœ‰äº›é¢˜è§£ä¸æ˜¯ç”¨Integer.MAX_VALUEè€Œæ˜¯0x3f3f3fï¼Œä¸ºä»€ä¹ˆï¼Ÿ Javaæä¾›äº†Integer.MAX_VALUEï¼ŒInteger.MIN_VALUEï¼Œc++åœ¨climitså¤´æ–‡ä»¶ä¹Ÿæœ‰åŒæ ·çš„ç¬¦å·å®šä¹‰ï¼Œè¿™ä¸¤ä¸ªçš„å€¼é€šå¸¸æ˜¯ä¸ºäº†åˆå§‹åŒ–æ¯”è¾ƒå€¼ 12345int max = Integer.MIN_VALUE;Â·Â·Â·while(){ max = Math.max(a, max);} Integer.MAX_VALUEå€¼å°±æ˜¯intçš„æœ€å¤§å€¼ï¼Œä¹Ÿå°±æ˜¯0x7fffffffï¼ˆ7ä¸ƒä¸ªfï¼‰ï¼Œå³2,147,483,647 æœ‰äº›é¢˜ç›®ä¸ä»…ä»…æ˜¯è¦æ¯”è¾ƒï¼Œè¿˜éœ€è¦å…¶ä»–è¿ç®—ï¼Œå¦‚æœè¿›è¡Œäº†+1ï¼Œé‚£å°±ä¼šæº¢å‡ºæˆè´Ÿæ•°ã€‚å› æ­¤æœ‰çš„acmerä¼šé‡‡ç”¨0x3f3f3f3fï¼Œæ»¡è¶³â€œæ— ç©·å¤§åŠ æ— ç©·å¤§ä¾ç„¶æ˜¯æ— ç©·å¤§â€ï¼Œè¿™ä¸ªè®¾ç½®éå¸¸ç²¾å¦™ 0x3f3f3f3fè¶³å¤Ÿå¤§ï¼Œåè¿›åˆ¶æ˜¯10^9ä»ç„¶å’Œ0x7fffffffåœ¨åŒæ ·çš„æ•°é‡çº§ 0x3f3f3f3f+ 0x3f3f3f3fç»“æœä»åœ¨32-bit intçš„è¡¨ç¤ºèŒƒå›´ä¹‹å†…ï¼Œæ»¡è¶³äº†â€œæ— ç©·å¤§åŠ æ— ç©·å¤§è¿˜æ˜¯æ— ç©·å¤§â€çš„éœ€æ±‚ æ„æƒ³ä¸åˆ°çš„é¢å¤–å¥½å¤„ï¼šc++ä¸­é€šå¸¸ä¼šä½¿ç”¨memset(a,0,sizeof(a))è¿™æ ·çš„ä»£ç æ¥å°†æ•°ç»„æ¸…é›¶ï¼Œå› ä¸ºmemsetæ˜¯æŒ‰å­—èŠ‚æ“ä½œçš„å› æ­¤éå¸¸é«˜æ•ˆï¼Œå®ƒèƒ½å¤Ÿå¯¹æ•°ç»„æ¸…é›¶æ˜¯å› ä¸º0çš„æ¯ä¸ªå­—èŠ‚éƒ½æ˜¯0ã€‚ä½†æ˜¯å½“æˆ‘ä»¬æƒ³å°†æŸä¸ªæ•°ç»„å…¨éƒ¨èµ‹å€¼ä¸ºæ— ç©·å¤§æ—¶å°±ä¸èƒ½ä½¿ç”¨memsetå‡½æ•°è€Œå¾—è‡ªå·±å†™å¾ªç¯äº†ï¼ˆå†™è¿™äº›ä¸é‡è¦çš„ä»£ç çœŸçš„å¾ˆç—›è‹¦ï¼‰ï¼Œç°åœ¨å¥½äº†ï¼Œå¦‚æœæˆ‘ä»¬å°†æ— ç©·å¤§è®¾ä¸º0x3f3f3f3fï¼Œé‚£ä¹ˆå¥‡è¿¹å°±å‘ç”Ÿäº†ï¼Œ0x3f3f3f3fçš„æ¯ä¸ªå­—èŠ‚éƒ½æ˜¯0x3fï¼æ‰€ä»¥è¦æŠŠä¸€æ®µå†…å­˜å…¨éƒ¨ç½®ä¸ºæ— ç©·å¤§ï¼Œæˆ‘ä»¬åªéœ€è¦memset(a,0x3f,sizeof(a))ã€‚è‡³äºJavaå°šä¸æ¸…æ¥šArrays.fill(arr,0);ä»ç„¶æ˜¯å¾ªç¯","link":"/algorithms/%E5%AF%B91000000007%E5%8F%96%E6%A8%A1%E5%92%8C0x3f3f3f3f/"},{"title":"æˆ‘çš„FastIOå·¥å…·ç±»","text":"å‰è¨€ï¼šJavaåšç®—æ³•é¢˜çš„å¼Šç«¯ï¼ŒåŠ›æ‰£åªéœ€è¦å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä»–ojå¹³å°è¦æ±‚ä½¿ç”¨Scannerç±»åœ¨æ§åˆ¶å°è¾“å…¥è¾“å‡ºï¼Œå…¶ä¸­patæœ€åä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æ˜¯å¤§é‡æ•°æ®ï¼Œå› æ­¤javaåœ¨patä¸­ç»å¸¸è¶…æ—¶ï¼Œè¿™æ—¶å€™å¯ä»¥é‡‡ç”¨å¸¦ç¼“å­˜çš„readerå’Œbufferè€Œä¸æ˜¯System.in/outã€‚ è¿™ä¸ªå·¥å…·ç±»ï¼Œå¤åˆ¶å³å¯ç›´æ¥é£Ÿç”¨ï¼Œéƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œé€šè¿‡FastIO.xxå°±å¯ä»¥ä½¿ç”¨ æ–¹æ³•åä¿æŒå’ŒScanner/System.outä¸€è‡´ 12345678910111213141516171819202122232425262728293031323334353637383940/** * @author wjw * @date 2020/2/10 13:44 */import java.io.*;import java.util.StringTokenizer;public class FastIO { public static BufferedReader reader = new BufferedReader(new InputStreamReader(System.in),32768); public static StringTokenizer tokenizer = new StringTokenizer(\"\"); public static PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out)); public static double nextDouble() throws IOException{ return Double.parseDouble(next()); } public static float nextFloat() throws IOException{ return Float.parseFloat(next()); } public static int nextInt() throws IOException{ return Integer.parseInt(next()); } public static String next() throws IOException{ while (!tokenizer.hasMoreTokens()) { tokenizer = new StringTokenizer(reader.readLine()); } return tokenizer.nextToken(); } public static String nextLine() throws IOException{ return reader.readLine(); } public static void println(String str){ out.println(str); out.flush(); } public static void printf(String format, Object ... args){ out.printf(format, args); out.flush(); }}","link":"/util/%E6%88%91%E7%9A%84FastIO%E5%B7%A5%E5%85%B7%E7%B1%BB/"},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•ä¸è¿·è·¯å¯¼èˆª","text":"æ‰€æœ‰çš„ç³»åˆ—éƒ½åœ¨è¿™äº†ï¼Œå·¨å‘æ…¢æ…¢å¡«å“ˆï¼Œç°åœ¨å·²ç»ç ´ç™¾ï¼Œæ‰“ç®—åœ¨12æœˆå‰åˆ·å¤Ÿ300ï¼ˆç¬”è¯•é¢è¯•æ¯”è¾ƒæœ‰ä¿¡å¿ƒï¼Ÿï¼‰ï¼Œç„¶ååšå®¢è¡¥ä¸€ä¸‹ä¹‹å‰åšçš„ 1. å›æº¯ å›æº¯æ¨¡æ¿ 131-åˆ†å‰²å›æ–‡ä¸² 40-ç»„åˆæ€»å’ŒII 60-ç¬¬kä¸ªæ’åˆ— 784-å­—æ¯å¤§å°å†™å…¨æ’åˆ— 1219-é»„é‡‘çŸ¿å·¥ 1291-é¡ºæ¬¡æ•° 113-è·¯å¾„æ€»å’ŒII 2. åŠ¨æ€è§„åˆ’ 63-ä¸åŒè·¯å¾„II 70-çˆ¬æ¥¼æ¢¯ä»¥åŠè¿›åŒ–ç‰ˆ 121-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº 357-è®¡ç®—å„ä¸ªä½æ•°ä¸åŒçš„æ•°å­—ä¸ªæ•° 2.1 å­æ•°ç»„ç³»åˆ— 53-æœ€å¤§å­åºå’Œ 152-ä¹˜ç§¯æœ€å¤§å­æ•°ç»„ 3. æ ‘ä¸æ˜¯æœ‰æ„è¦æ‹†åˆ†é‚£å‡ ä¸ªæ²¡æœ‰æ•°å­—çš„éå†æ–‡ç« ï¼Œè€Œæ˜¯å¥—è·¯å’Œéš¾åº¦æˆ‘è®¤ä¸ºåº”è¯¥æŒ‰ä»¥ä¸‹é¡ºåºçœ‹ 404-å·¦å¶å­ä¹‹å’Œ Javaå®ç°æ ‘çš„å‰ä¸­ååºéå†åŠäºŒå‰æ ‘å¯è§†åŒ– 116/117-å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ JavaäºŒå‰æ ‘çš„å±‚æ¬¡éå† æ ¹æ®ä¸¤åºéå†æ¨å‡ºç¬¬ä¸‰åºä»¥åŠæ„å»ºæ ‘ 297-äºŒå‰æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼ˆå›°éš¾ï¼‰ 515-åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼ 654-æœ€å¤§äºŒå‰æ ‘ 4. æ ˆ20-æœ‰æ•ˆçš„æ‹¬å· 5. å•è°ƒæ ˆ 42-æ¥é›¨æ°´ï¼ˆå›°éš¾ï¼‰ 84-æŸ±çŠ¶å›¾ä¸­çš„æœ€å¤§çŸ©å½¢ 739-æ¯æ—¥æ¸©åº¦ï¼ˆä¸­ç­‰ï¼‰ 496-ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  Iï¼ˆç®€å•ï¼‰ 316-å»é™¤é‡å¤å­—æ¯ï¼ˆå›°éš¾ï¼‰ 901-è‚¡ç¥¨ä»·æ ¼è·¨åº¦ï¼ˆä¸­ç­‰ï¼‰ 402-ç§»æ‰Kä½æ•°å­— 456-132æ¨¡å¼ 581-æœ€çŸ­æ— åºè¿ç»­å­æ•°ç»„ 6. æ’åº è®°ä¸€æ¬¡å¿«é€Ÿæ’åºæ¢ç©¶ 56-åˆå¹¶åŒºé—´ 252-ä¼šè®®å®¤ 406-æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ— 7. å­—ç¬¦ä¸² å­—ç¬¦ä¸²ä¸­çš„æˆå¯¹æ‹¬å·é—®é¢˜å¤„ç†æŠ€å·§ 5 æœ€é•¿å›æ–‡å­ä¸² 3 æœ€é•¿æ— é‡å¤å­ä¸² 43-å­—ç¬¦ä¸²ç›¸ä¹˜ 179-æœ€å¤§æ•° 8. æ»‘åŠ¨çª—å£ 1208-å°½å¯èƒ½ä½¿å­—ç¬¦ä¸²ç›¸ç­‰ 480-æ»‘åŠ¨çª—å£ä¸­ä½æ•° 424-æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦ 9. é“¾è¡¨ é“¾è¡¨é¢˜æŠ€å·§ 206-åè½¬é“¾è¡¨ 19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ 21-åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨ 24-ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ 61-æ—‹è½¬é“¾è¡¨ 160-ç›¸äº¤é“¾è¡¨ 10. äºŒåˆ†æŸ¥æ‰¾ äºŒåˆ†æŸ¥æ‰¾æ¨¡æ¿ 11. åŒæŒ‡é’ˆ 11-ç››æ°´æœ€å¤šçš„å®¹å™¨ 15-ä¸‰æ•°ä¹‹å’Œ 19-åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ ä¸çŸ¥é“æ˜¯ä»€ä¹ˆé¢˜ 54-èºæ—‹çŸ©é˜µ(æ€ç»´) 136-137-260-åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—(ä½è¿ç®—) 31-ä¸‹ä¸€ä¸ªæ’åˆ—(æ•°å­¦) 48-æ—‹è½¬å›¾åƒ(æ€ç»´) 357-è®¡ç®—å„ä¸ªä½æ•°ä¸åŒçš„æ•°å­—ä¸ªæ•°(dp) 406-æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—(æ’åº) å…¶ä»– å¯¹1000000007å–æ¨¡å’Œ0x3f3f3f3f æˆ‘çš„FastIOå·¥å…·ç±» è®¡ç®—å¹³æ–¹æ ¹-ç‰›é¡¿è¿­ä»£æ³•","link":"/algorithms/algorithms-list-navigator/"},{"title":"æ‰‹æŠŠæ‰‹ä»0å®ç°ä¸€é¢—å†³ç­–æ ‘","text":"è¿™æ˜¯æˆ‘2019-09-24åœ¨çŸ¥ä¹ä¸Šé¢å†™çš„æ–‡ç« ï¼ŒåŸæ–‡è·³è½¬ç‚¹è¿™é‡Œï¼Œä»Šå¤©é¢è¯•javaä¸çŸ¥é“ä¸ºä»€ä¹ˆé¢è¯•å®˜æ„Ÿå…´è¶£è¢«æèµ·ï¼Œæèµ·äºæ˜¯æ¬è¿åˆ°åšå®¢ä¸Šï¼Œçº¯pythonå®ç°ï¼Œé™¤numpyå¤–æ— ç¬¬ä¸‰æ–¹åº“ å‰æ®µæ—¶é—´æ•°å­¦å»ºæ¨¡æˆ‘å’Œæˆ‘çš„å°ä¼™ä¼´ä»¬åˆ’äº†ä¸ªæ°´ï¼Œå‡ ä¸ªæ²¡æœ‰å»ºæ¨¡ç»éªŒçš„å°ä¼™ä¼´ä¸´æ—¶æŠ±ä½›è„šæœ€åé€šäº†ä¸ªå®µï¼Œåœ¨æ­¤æ„Ÿè°¢æˆ‘çš„é˜Ÿå‹ä»¬ã€‚æŠ±ä½›è„šçš„æ—¶å€™ç¬”è€…å¯¹å†³ç­–æ ‘èµ·äº†å…´è¶£ï¼ˆå¯æƒœæ²¡æœ‰ç”¨ä¸Šï¼‰ï¼Œä¹‹å‰çœ‹è¿‡ä¸€ç‚¹ç‚¹ç†è®ºç›¸å…³çš„çŸ¥è¯†ï¼Œä½†æ˜¯æ²¡æœ‰è‡ªå·±å®ç°è¿‡ï¼Œè¿™å‡ å¤©ç©ºä¸‹æ¥å†³å®šè‡ªå·±ä»0æ’¸ä¸€é¢—ç®€å•çš„ID3å†³ç­–æ ‘ã€‚ ç”±äºæˆ‘ä¹Ÿæ˜¯ä¸ªæ–°æ‰‹ï¼Œå› æ­¤æœ¬ç¯‡æ–‡ç« æ·±åº¦æœ‰é™ï¼Œå¤§ç¥è¯·ç»•é“^_^ï¼Œæˆ‘å°†ç€é‡äºä»£ç çš„å®ç°å’Œæ•´ä¸ªæµç¨‹çš„è¯´æ˜ï¼Œé€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼ˆæ¡ˆä¾‹å–è‡ªhttps://blog.csdn.net/mn_kw/article/details/79913786ï¼Œæœ¬æ–‡å°±æ˜¯å¯¹è¿™ç¯‡åšå®¢ä¸­çš„ä»‹ç»è¿›è¡Œä»£ç å®ç°ï¼‰ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥çœ‹æ‡‚æ•°æ®åœ¨å†³ç­–æ ‘ä¸­çš„è¡Œä¸ºï¼Œå‡å°‘ç†è®ºéƒ¨åˆ†çš„æ™¦æ¶©çŸ¥è¯†ã€‚å¿«æ¥åŠ¨æ‰‹è·Ÿæˆ‘ä¸€èµ·å®ç°ä¸€é¢—å†³ç­–æ ‘å§ï¼ ä¸€.ä»€ä¹ˆæ˜¯å†³ç­–æ ‘ ç°æƒ³è±¡ä¸€ä¸ªå¥³å­©çš„æ¯äº²è¦ç»™è¿™ä¸ªå¥³å­©ä»‹ç»ç”·æœ‹å‹ï¼Œäºæ˜¯æœ‰äº†ä¸‹é¢çš„å¯¹è¯ï¼šå¥³å„¿ï¼šå¤šå¤§å¹´çºªäº†ï¼Ÿæ¯äº²ï¼š26ã€‚å¥³å„¿ï¼šé•¿çš„å¸…ä¸å¸…ï¼Ÿæ¯äº²ï¼šæŒºå¸…çš„ã€‚å¥³å„¿ï¼šæ”¶å…¥é«˜ä¸ï¼Ÿæ¯äº²ï¼šä¸ç®—å¾ˆé«˜ï¼Œä¸­ç­‰æƒ…å†µã€‚å¥³å„¿ï¼šæ˜¯å…¬åŠ¡å‘˜ä¸ï¼Ÿæ¯äº²ï¼šæ˜¯ï¼Œåœ¨ç¨åŠ¡å±€ä¸Šç­å‘¢ã€‚å¥³å„¿ï¼šé‚£å¥½ï¼Œæˆ‘å»è§è§ã€‚è¿™ä¸ªå¥³å­©çš„å†³ç­–è¿‡ç¨‹å°±æ˜¯å…¸å‹çš„åˆ†ç±»æ ‘å†³ç­–ã€‚ï¼ˆå£°æ˜ï¼šæ­¤å†³ç­–æ ‘çº¯å±ä¸ºäº†å†™æ–‡ç« è€ŒYYçš„äº§ç‰©ï¼Œæ²¡æœ‰ä»»ä½•æ ¹æ®ï¼Œä¹Ÿä¸ä»£è¡¨ä»»ä½•å¥³å­©çš„æ‹©å¶å€¾å‘ï¼Œè¯·å„ä½å¥³åŒèƒè«è´¨é—®æˆ‘^_^ï¼‰ä¾‹å­å–è‡ªhttps://blog.csdn.net/mn_kw/article/details/79913786 å‡è®¾ç°åœ¨æœ‰è¿™ä¹ˆä¸€å¼ è¡¨ï¼Œç»Ÿè®¡äº†ä¸€äº›äººçš„æ‹©å¶æ ‡å‡†ï¼Œç§°ä¸ºè®­ç»ƒæ ·æœ¬ æˆ‘ä»¬å°†è¦å¯¹å…¶æ„å»ºç±»ä¼¼å¦‚ä¸‹çš„åˆ¤æ–­åˆ†æ”¯ç»“æ„ï¼Œè¿™å°±å«å†³ç­–æ ‘ã€‚ä¹‹åå†æœ‰ä¸€ç»„æ ·æœ¬ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™æ£µæ ‘æ¥åˆ¤å®šå«ä¸å«å•¦ï¼ çœ‹åˆ°è¿™é‡Œä½ è‚¯å®šä¼šæœ‰ä¸ªç–‘é—®ï¼šä¸ºä»€ä¹ˆå…ˆåˆ¤æ–­é«˜ä¸é«˜ï¼Ÿéš¾é“çœŸæ˜¯ä¼ è¯´ä¸­çš„ä¸€é«˜é®ç™¾ä¸‘å—ï¼Ÿ å½“ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯æ˜¯æœ‰ä¾æ®çš„ï¼è¿™ä¸ªä¾æ®å°±å«åšä¿¡æ¯å¢ç›Šï¼ˆGainï¼‰ï¼Œå…¬å¼å¦‚ä¸‹ï¼Œå°±æ˜¯ä¸¤ä¸ªå‡½æ•°ç›¸å‡è€Œå·²ï¼Œçœ‹ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼Œä¸‹é¢æœ‰ä¾‹å­è¯´æ˜ã€‚ )H(x)å«é¦™å†œç†µï¼ŒH(D|x)å«æ¡ä»¶ç†µ&lt;br&gt;å°±ä¸¤ä¸ªå‡½æ•°ç›¸å‡è€Œå·² å…¶ä¸­H(x)å’ŒH(Y|X)é•¿ä¸‹é¢è¿™æ · )p(x)æ˜¯æ¦‚ç‡ï¼Œæ¯”å¦‚çŸ®å èº«é«˜çš„ é‡Œé¢çš„H å¦‚æœ¬ä¾‹ä¸­:ä¸€å¼€å§‹å«çš„ä¸ªæ•°ä¸º6ä¸ªï¼Œå 1/2ï¼Œé‚£ä¹ˆä¿¡æ¯ç†µH(X)ä¸º-1/2log1/2-1/2log1/2 = -log1/2=1ç°åœ¨å‡å¦‚æˆ‘çŸ¥é“äº†ä¸€ä¸ªç”·ç”Ÿçš„èº«é«˜ä¿¡æ¯ã€‚èº«é«˜æœ‰ä¸‰ä¸ªå¯èƒ½çš„å–å€¼{çŸ®ï¼Œä¸­ï¼Œé«˜}çŸ®åŒ…æ‹¬{1,2,3,5,6,11,12}ï¼Œå«çš„ä¸ªæ•°ä¸º1ä¸ªï¼Œä¸å«çš„ä¸ªæ•°ä¸º6ä¸ªä¸­åŒ…æ‹¬{8,9} ï¼Œå«çš„ä¸ªæ•°ä¸º2ä¸ªï¼Œä¸å«çš„ä¸ªæ•°ä¸º0ä¸ªé«˜åŒ…æ‹¬{4,7,10}ï¼Œå«çš„ä¸ªæ•°ä¸º3ä¸ªï¼Œä¸å«çš„ä¸ªæ•°ä¸º0ä¸ªå…ˆå›å¿†ä¸€ä¸‹æ¡ä»¶ç†µçš„å…¬å¼å¦‚ä¸‹ï¼šæˆ‘ä»¬å…ˆæ±‚å‡ºå…¬å¼å¯¹åº”çš„:H(Y|X = çŸ®) = -1/7log1/7-6/7log6/7=0.592H(Y|X=ä¸­) = -1log1-0 = 0H(Y|X=é«˜ï¼‰ = -1log1-0=0p(X = çŸ®) = 7/12,p(X =ä¸­) = 2/12,p(X=é«˜) = 3/12åˆ™å¯ä»¥å¾—å‡ºæ¡ä»¶ç†µä¸ºï¼š7/120.592+2/120+3/12*0 = 0.345é‚£ä¹ˆæˆ‘ä»¬çŸ¥é“ä¿¡æ¯ç†µä¸æ¡ä»¶ç†µç›¸å‡å°±æ˜¯æˆ‘ä»¬çš„ä¿¡æ¯å¢ç›Šï¼Œä¸º1-0.345=0.655æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºæˆ‘ä»¬åœ¨çŸ¥é“äº†èº«é«˜è¿™ä¸ªä¿¡æ¯ä¹‹åï¼Œä¿¡æ¯å¢ç›Šæ˜¯0.655 ç»“è®ºæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæœ¬æ¥å¦‚æœæˆ‘å¯¹ä¸€ä¸ªç”·ç”Ÿä»€ä¹ˆéƒ½ä¸çŸ¥é“çš„è¯ï¼Œä½œä¸ºä»–çš„å¥³æœ‹å‹å†³å®šæ˜¯å¦å«ç»™ä»–çš„ä¸ç¡®å®šæ€§æœ‰1.0è¿™ä¹ˆå¤§ã€‚å½“æˆ‘ä»¬çŸ¥é“ç”·æœ‹å‹çš„èº«é«˜ä¿¡æ¯åï¼Œä¸ç¡®å®šåº¦å‡å°‘äº†0.655.ä¹Ÿå°±æ˜¯è¯´ï¼Œèº«é«˜è¿™ä¸ªç‰¹å¾å¯¹äºæˆ‘ä»¬å¹¿å¤§å¥³ç”ŸåŒå­¦æ¥è¯´ï¼Œå†³å®šå«ä¸å«ç»™è‡ªå·±çš„ç”·æœ‹å‹æ˜¯å¾ˆé‡è¦çš„ã€‚è‡³å°‘æˆ‘ä»¬çŸ¥é“äº†èº«é«˜ç‰¹å¾åï¼Œæˆ‘ä»¬åŸæ¥æ²¡æœ‰åº•çš„å¿ƒé‡Œï¼ˆ1.0ï¼‰å·²ç»æ˜æœ—ä¸€åŠå¤šäº†ï¼Œå‡å°‘0.655äº†ï¼ˆå¤§äºåŸæ¥çš„ä¸€åŠäº†ï¼‰ã€‚é‚£ä¹ˆè¿™å°±ç±»ä¼¼äºéè¯šå‹¿æ‰°èŠ‚ç›®é‡Œé¢çš„æ¡¥æ®µäº†ï¼Œè¯·é—®å¥³å˜‰å®¾ï¼Œä½ åªèƒ½çŸ¥é“ç”·ç”Ÿçš„ä¸€ä¸ªç‰¹å¾ã€‚è¯·é—®ä½ æƒ³çŸ¥é“å“ªä¸ªç‰¹å¾ã€‚å‡å¦‚å…¶å®ƒç‰¹å¾æˆ‘ä¹Ÿå…¨ç®—äº†ï¼Œä¿¡æ¯å¢ç›Šæ˜¯èº«é«˜è¿™ä¸ªç‰¹å¾æœ€å¤§ã€‚é‚£ä¹ˆæˆ‘å°±å¯ä»¥è¯´ï¼Œå­Ÿéå“¥å“¥ï¼Œæˆ‘æƒ³çŸ¥é“ç”·å˜‰å®¾çš„ä¸€ä¸ªç‰¹å¾æ˜¯èº«é«˜ç‰¹å¾ã€‚å› ä¸ºå®ƒåœ¨è¿™äº›ç‰¹å¾ä¸­ï¼Œå¯¹äºæˆ‘æŒ‘å¤«å›æ˜¯æœ€é‡è¦çš„ï¼Œä¿¡æ¯å¢ç›Šæ˜¯æœ€å¤§çš„ï¼ŒçŸ¥é“äº†è¿™ä¸ªç‰¹å¾ï¼Œå«ä¸ä¸å«çš„ä¸ç¡®å®šåº¦å‡å°‘çš„æ˜¯æœ€å¤šçš„ã€‚å–è‡ªhttps://blog.csdn.net/mn_kw/article/details/79913786 äºŒ.ä»£ç å®ç°1.å’±ä»¬å…ˆæ¥æ„å»ºæˆ‘ä»¬çš„æ•°æ®ï¼Œæˆ‘ç”¨çš„æ˜¯python3(day1) è¡¨å¤´ 1datas_header = ['æ˜¯å¦å¸…', 'è„¾æ°”æ˜¯å¦å¥½', 'æ˜¯å¦é«˜', 'æ˜¯å¦ä¸Šè¿›', 'ç»“æœ'] æ•°æ® 12345678910111213import numpy as npdatas = np.array([['å¸…', 'ä¸å¥½', 'çŸ®', 'ä¸ä¸Šè¿›'], ['ä¸å¸…', 'å¥½', 'çŸ®', 'ä¸Šè¿›'], ['å¸…', 'å¥½', 'çŸ®', 'ä¸Šè¿›'], ['ä¸å¸…', 'çˆ†å¥½', 'é«˜', 'ä¸Šè¿›'], ['å¸…', 'ä¸å¥½', 'çŸ®', 'ä¸Šè¿›'], ['å¸…', 'ä¸å¥½', 'çŸ®', 'ä¸Šè¿›'], ['å¸…', 'å¥½', 'é«˜', 'ä¸ä¸Šè¿›'], ['ä¸å¸…', 'å¥½', 'ä¸­', 'ä¸Šè¿›'], ['å¸…', 'çˆ†å¥½', 'ä¸­', 'ä¸Šè¿›'], ['ä¸å¸…', 'ä¸å¥½', 'é«˜', 'ä¸Šè¿›'], ['å¸…', 'å¥½', 'çŸ®', 'ä¸ä¸Šè¿›'], ['å¸…', 'å¥½', 'çŸ®', 'ä¸ä¸Šè¿›']]) æ ‡ç­¾ 1labels = np.array(['ä¸å«', 'ä¸å«', 'å«', 'å«', 'ä¸å«', 'ä¸å«', 'å«', 'å«', 'å«', 'å«', 'ä¸å«', 'ä¸å«']) 2.æ˜ç¡®ä»£ç æµç¨‹ï¼Œè‡ªé¡¶å‘ä¸‹è®¾è®¡ï¼Œè‡ªåº•å‘ä¸Šå®ç° 3.å®ç°é¦™å†œç†µ 1234567891011121314151617181920def get_shannon_entropy(labels: np.ndarray) -&gt; float: &quot;&quot;&quot; è®¡ç®—é¦™å†œç†µ å³H(X)=âˆ’âˆ‘(i=1,n)pi * log2pi :param labels: shape = (n, )ï¼Œnä¸ªæ ‡ç­¾ :return: floaté¦™å†œç†µå€¼ &quot;&quot;&quot; num_labels = len(labels) labels_dic = {} # è€ƒè™‘åˆ°labelsä¸ä¸€å®šæ˜¯æ•°å­—ï¼Œæˆ‘ä»¬ç”¨å­—å…¸æ¥è£… shannon_entropy = 0 for label in labels: # ç»Ÿè®¡å„labelä¸ªæ•°ï¼Œæœ¬ä¾‹ä¸­æœ€ålabels_dicæ ¼å¼ä¸º{&quot;å«&quot;:6, &quot;ä¸å«&quot;:6} if label not in labels_dic.keys(): labels_dic[label] = 0 labels_dic[label] += 1 for i in labels_dic.keys(): prob = labels_dic[i] / num_labels shannon_entropy += - prob * np.log2(prob) return shannon_entropy 4.å®ç°æ¡ä»¶ç†µ(day2) 1234567891011121314151617181920212223242526272829def get_conditional_entropy(datas: np.ndarray, labels: np.ndarray) -&gt; float: &quot;&quot;&quot; æ¥ä¸‹æ¥çš„æ¡ä»¶ç†µ å³H(Y|X)=âˆ‘(i=1,n)piH(Y|X=xi) Hå°±æ˜¯ä¸Šé¢çš„é¦™å†œç†µå‘€ï¼ Yå°±æ˜¯å«ä¸å«å‘€ï¼ Xå°±æ˜¯å½“å‰çš„ç‰¹å¾å‘€ï¼ æœ¬ä¾‹ä¸­å…¶ä¸­ä¸€ä¸ªç‰¹å¾ä¸¾ä¾‹ï¼šé«˜ä¸­çŸ®ï¼Œåˆ™è¡¨ç°ä¸º H(Y|X) = pçŸ® * H(å«|X = çŸ®) + pä¸­ * H(å«|X = ä¸­) + pé«˜ * H(å«|X = é«˜) :param datas:æŸä¸ªç‰¹å¾ä¸‹æ‰€æœ‰äººçš„å–å€¼ï¼Œä¾‹å¦‚['çŸ®', 'çŸ®', 'çŸ®', 'é«˜', 'çŸ®', 'çŸ®', 'é«˜', 'ä¸­', 'ä¸­', 'é«˜', 'çŸ®', 'çŸ®'] :param labels:è¯¥ç‰¹å¾ä¸‹å«æˆ–ä¸å«çš„ç»“æœï¼Œä¾‹å¦‚['ä¸å«', 'ä¸å«', 'å«', 'å«', 'ä¸å«', 'ä¸å«', 'å«', 'å«', 'å«', 'å«', 'ä¸å«', 'ä¸å«'] :return: &quot;&quot;&quot; num_data = len(datas) conditional_entropy = 0 num_class = {} # å…ˆå¾—çŸ¥é“èº«é«˜ç‰¹å¾åˆ†æˆäº†å‡ ç±»ï¼ˆé«˜ä¸­çŸ®3ç±»ï¼‰,æ¯ç±»å å¤šå°‘ for class_val in datas: # forå¾ªç¯å®Œåç»“æœä¸ºnum_class = {&quot;çŸ®&quot;: 7, &quot;ä¸­&quot;: 2, &quot;é«˜&quot;: 3} if class_val not in num_class.keys(): num_class[class_val] = 0 num_class[class_val] += 1 for i in num_class.keys(): prob = num_class[i] / num_data index = np.argwhere(datas == i).squeeze() # ä»¥ä¸‹ä¸¤å¥è·å¾—datasä¸­'çŸ®'çš„ä¸‹æ ‡å¹¶æ‰¾å‡ºæ¯ä¸ª'çŸ®'å¯¹åº”çš„labelså€¼ # print(index.shape) if index.shape != (): # è¿™é‡Œå¦‚æœä¸è¿™ä¹ˆå¤„ç†ä¼šå‡ºé—®é¢˜ï¼Œå°±æ˜¯indexåªæœ‰ä¸€ä¸ªæ•°çš„æƒ…å†µ,index = 2ï¼Œtypeæ˜¾ç¤ºndarrayæ²¡æœ‰é—®é¢˜ï¼Œshapeå´æ˜¾ç¤º()è€Œä¸æ˜¯(1,) i_labels = labels[index] # é€ æˆè¿™å¥çš„ç»“æœå±…ç„¶æ˜¯i_labels = 'no' è€Œä¸æ˜¯['no'],äºæ˜¯åœ¨åé¢éå†çš„æ—¶å€™å˜æˆäº†'n'å’Œ'o'ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ else: i_labels = list([]) # é€šè¿‡å…ˆé™å®ši_labelsçš„ç±»å‹ï¼Œä½¿ç”¨appendçš„æ–¹å¼æ·»åŠ ï¼Œè¿™æ—¶å€™i_labelså°±ä¼šæ˜¯æƒ³è¦çš„['no'],åé¢éå†çš„æ—¶å€™å°±æ˜¯éå†æ•°ç»„ä¸­çš„è¿™ä¸€ä¸ªå…ƒç´  i_labels.append(labels[index]) conditional_entropy += prob * get_shannon_entropy(i_labels) return conditional_entropy 5.è·å¾—æœ€ä½³ä¿¡æ¯å¢ç›Šgainå€¼å’Œå¯¹åº”ç‰¹å¾ 12345678910111213141516171819def get_best_gain(datas: np.ndarray, labels: np.ndarray) -&gt; (float, float): &quot;&quot;&quot; è®¡ç®—ä¿¡æ¯å¢ç›Šï¼Œå¹¶æ‰¾å‡ºæœ€ä½³çš„ä¿¡æ¯å¢ç›Šå€¼ï¼Œä½œä¸ºå½“å‰æœ€ä½³çš„åˆ’åˆ†ä¾æ® å³g(D,X)=H(D)âˆ’H(D|X) Hå°±æ˜¯é¦™å†œç†µå‘€ï¼ H(D|X)å°±æ˜¯ä¿¡æ¯ç†µå‘€ï¼ best_gain = max(g(D,X)) :param datas: shape(n, m) næ¡æ•°æ®ï¼Œmç§ç‰¹å¾ :param labels: shape = (n, )ï¼Œnä¸ªæ ‡ç­¾ :return:è¿”å›æœ€ä½³ç‰¹å¾å’Œå¯¹åº”çš„gainå€¼ &quot;&quot;&quot; best_gain = 0 best_feature = -1 (num_data, num_feature) = datas.shape for feature in range(num_feature): #éå†æ¯ä¸ªç‰¹å¾ï¼Œæ‰¾å‡ºåˆ°åº•è°çš„ä¿¡æ¯å¢ç›Šå€¼æœ€å¤§ current_data = datas[:, feature] gain = get_shannon_entropy(labels) - get_conditional_entropy(current_data, labels) # å…¬å¼ if gain &gt; best_gain: best_gain = gain best_feature = feature return best_feature, best_gain 6.å»ºæ ‘(day3) ç”±äºè¦å»ºæ ‘ï¼Œæ ‘å‹ç»“æ„å°±éœ€è¦å»ºç«‹èµ·æ¥ï¼Œæœ¬æ¥ä¹Ÿæ‰“ç®—å­˜åœ¨æ•°æ®ç»“æ„ä¸­ï¼Œä½†æ˜¯å°±åœ¨è¿™æ—¶å€™çœ‹åˆ°äº†csdnä¸Šä¸€ç¯‡åšå®¢é‡Œçš„æ ‘æ˜¯è¿™æ ·ç”¨å­—å…¸æ¥ä¿å­˜ åšå®¢åœ°å€https://blog.csdn.net/hongbin_xu/article/details/78516114 æˆ‘çš„å¤©ï¼ï¼ï¼æƒŠåˆ°æˆ‘äº†ï¼Œå­¦ï¼ç”¨å­—å…¸å»ºæ ‘ è¾“å…¥æ•°æ®å˜åŒ–è¿‡ç¨‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546def create_tree(datas_header: list, datas: np.ndarray, labels: np.ndarray) -&gt; dict: &quot;&quot;&quot; get_best_gain()æ˜¯ç»™ä¸€ç»„datas,labelsè®¡ç®—ä¸€æ¬¡æœ€ä½³åˆ’åˆ†ç‰¹å¾ è¦æ„å»ºä¸€æ£µå†³ç­–æ ‘ï¼Œé‚£å¿…é¡»è¦åœ¨åˆ’åˆ†å®Œå‰©ä¸‹çš„æ•°æ®é›†ç»§ç»­åˆ’åˆ†(é€’å½’è¿‡ç¨‹)ï¼Œç›´åˆ°ä»¥ä¸‹æƒ…å†µå‡ºç°ï¼š 1.å‰©ä¸‹å…¨éƒ¨ç»“æœéƒ½æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆç›´æ¥ä½œä¸ºç»“æœã€‚ å¦‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå‡å¦‚æœ€ä½³åˆ†ç»„ä¸ºå¸…æˆ–è€…ä¸å¸…ï¼Œå¸…å¯¹åº”çš„labelså…¨éƒ¨ä¸ºå«ï¼Œåˆ™ä¸ç”¨ç»§ç»­è®¨è®ºåé¢çš„åˆ†ç»„ã€‚åŒç†ï¼Œå¦‚æœä¸å¸…ä¸­æ—¢æœ‰å«å’Œä¸å«ï¼Œé‚£ä¹ˆéœ€è¦ç»§ç»­é€’å½’ 2.éå†å®Œäº†æ‰€æœ‰ç‰¹å¾ï¼Œä½†æ˜¯è¿˜æ˜¯æ— æ³•å¾—åˆ°å”¯ä¸€æ ‡ç­¾ï¼Œåˆ™å°‘æ•°æœä»å¤šæ•°ã€‚ å‡å¦‚åœ¨æœ¬ä¾‹ä¸­ï¼Œéå†åˆ°æœ€åä¸€ç»„ç‰¹å¾ï¼šæ˜¯å¦ä¸Šè¿›ï¼Œä½†ä¸Šè¿›çš„ç»„é‡Œè¿˜æ˜¯æœ‰å«æˆ–è€…ä¸å«ä¸¤ç§æ ‡ç­¾ï¼Œä¸”è¾ƒå¤šä¸ºå«ï¼Œé‚£å°±è®©å¥¹å« :param datas_header: :param datas: :param labels: :return: &quot;&quot;&quot; # ç»“æŸæ¡ä»¶1 if list(labels).count(labels[0]) == len(labels): return labels[0] # ç»“æŸæ¡ä»¶2 if len(datas) == 0 and len(set(labels)) &gt; 1: result_num = {} for result in labels: if result not in result_num.keys(): result_num[result] = 0 result_num[result] += 1 more = -1 decide = '' for result, num in result_num.items(): if num &gt; more: more = num decide = result return decide cur_best_feature_num, _ = get_best_gain(datas, labels) cur_best_feature_name = datas_header[cur_best_feature_num] # é¦–å…ˆçŸ¥é“è¯¥ç‰¹å¾ä¸‹æœ‰ä»€ä¹ˆå€¼ æœ¬ä¾‹ä¸­class_val = {'å¸…'ï¼Œ 'ä¸å¸…'} class_val = set([data[cur_best_feature_num] for data in datas]) trees = {cur_best_feature_name: {}} for val in class_val: # é€ä¸€æ‰¾å‡ºæ¯ä¸ªç‰¹å¾å€¼çš„æ•°æ® æœ¬ä¾‹ä¸­è¡¨ç°ä¸ºå«'å¸…'/'ä¸å¸…'çš„æ•°æ® new_datas = [datas[i] for i in range(len(datas)) if datas[i, cur_best_feature_num] == val] # ç”¨åˆ—è¡¨ç”Ÿæˆå¼ï¼Œè¯»ä½œ:éå†datasæ¯è¡Œï¼Œæ‰¾åˆ°æ¯è¡Œçš„'æ˜¯å¦å¸…'ç‰¹å¾ä¸‹å€¼ä¸º'å¸…'çš„è¡Œï¼Œè¿”å›è¯¥è¡Œ new_labels = [labels[i] for i in range(len(datas)) if datas[i, cur_best_feature_num] == val] new_datas = np.delete(new_datas, cur_best_feature_num, axis=1) # åˆ é™¤æœ€ä½³åˆ—ï¼Œå‡†å¤‡è¿›å…¥ä¸‹ä¸€ä¸ªåˆ’åˆ†ä¾æ®ï¼Œå³åˆ æ‰ new_datas_header = np.delete(datas_header, cur_best_feature_num) # é€’å½’:å»æ‰è¯¥è¡Œè¯¥åˆ—å†ä¸¢è¿› trees[cur_best_feature_name][val] = create_tree(list(new_datas_header), new_datas, np.array(new_labels)) return trees 7.é¢„æµ‹ï¼Œæ ‘å»ºå®Œäº†ï¼Œé¢„æµ‹æ—¶æˆ‘ä»¬å°±è¦é€’å½’éå†å­—å…¸(day4) 12345678910111213141516171819def predict_result(trees_model: dict, input_data: np, datas_header: list) -&gt; str: &quot;&quot;&quot; 1.æ‰¾å­—å…¸ä¸­çš„ç¬¬ä¸€ä¸ªåˆ’åˆ†ç‰¹å¾ æœ¬ä¾‹ä¸­æ˜¯'æ˜¯å¦é«˜' 2.åœ¨datas_headerä¸­æ‰¾åˆ°é«˜æ˜¯ç¬¬å‡ ä¸ªç‰¹å¾ æœ¬ä¾‹ä¸­æ˜¯ç¬¬2ä¸ªç‰¹å¾ 3.åœ¨input_dataä¸­æ‰¾åˆ°è¿™ä¸ªç‰¹å¾å¯¹åº”çš„å€¼ æ¯”å¦‚è¦é¢„æµ‹çš„æ•°æ®ä¸­æ˜¯å¦é«˜ï¼ˆç¬¬äºŒä¸ªç‰¹å¾ï¼‰å–å€¼ä¸ºçŸ® 4.æ‰¾åˆ°å­—å…¸ä¸­çš„'çŸ®'çš„å€¼ï¼Œå¦‚æœä¸ºstr(å«ä¸å«)ï¼Œåˆ™ç›´æ¥è¿”å›ç»“æœï¼Œå¦‚æœæ˜¯å­—å…¸ï¼Œåˆ™è¿›è¡Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹é¢„æµ‹ï¼ˆé€’å½’ï¼‰ :param trees_model: :param input_data: :param datas_header: :return: &quot;&quot;&quot; cur_judge = list(trees_model.keys())[0] # 'æ˜¯å¦é«˜' num_feature = datas_header.index(cur_judge) # æœ¬ä¾‹ä¸­æ˜¯ç¬¬2ä¸ªç‰¹å¾ cur_val = input_data[num_feature] # æ¯”å¦‚è¦é¢„æµ‹çš„æ•°æ®ä¸­æ˜¯å¦é«˜ï¼ˆç¬¬äºŒä¸ªç‰¹å¾ï¼‰å–å€¼ä¸ºçŸ® cur_tree = trees_model[cur_judge] # print(type(cur_tree[cur_val])) if type(cur_tree[cur_val]) == np.str_: return cur_tree[cur_val] return predict_result(cur_tree[cur_val], input_data, datas_header) 8.ä¿å­˜å’Œè¯»å–æ¨¡å‹æ–‡ä»¶ 123456789101112# ä¿å­˜å’Œè¯»å–å‡½æ•°def store_tree(input_tree, filename): import pickle with open(filename, 'wb') as f: pickle.dump(input_tree, f) f.close()def restore_tree(filename): import pickle with open(filename, 'rb') as f: return pickle.load(f) é€šè¿‡è¿™æ£µæ ‘ï¼Œæˆ‘ä»¬å°±çŸ¥é“ï¼Œå¸…ä¸å¦å¹¶ä¸æ˜¯å½±å“ä½ å‹¾æ­å°å§å§ä¸»è¦çš„å› ç´ ï¼Œè¿™ç»™äº†ä½œè€…è¶³å¤Ÿçš„è‡ªä¿¡ï¼Œå¥½äº†ï¼Œæˆ‘å»å‹¾æ­å°å§å§å•¦ï¼ ä»£ç å·²ä¸Šä¼ githubï¼Œåœ°å€ä¸ºhttps://github.com/wjwABCDEFG/wjw-DecisionTree ç™¾åº¦ç½‘ç›˜åœ°å€ä¸ºhttps://pan.baidu.com/s/18O1OpU1hPfHdoAh_qVF1-Qæå–ç 7qdv é›¶é›¶æ•£æ•£è€—æ—¶4å¤©ï¼Œå†™æ–‡ç« åˆéœ€è¦ç¢ç£¨ï¼Œæ„Ÿè§‰è¯´çš„è¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæœ‰ä¸æ‡‚çš„å¯ä»¥äº¤æµï¼Œæ‰“ç®—ä»¥åæœ‰ç©ºå°±å®ç°ä¸€äº›ç®€å•çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œä»£ç èœé¸Ÿï¼Œé£æ ¼ä¸å¤ªå¥½ï¼Œå¤šå¤šåŒ…æ¶µï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚","link":"/deeplearning/%E6%89%8B%E6%8A%8A%E6%89%8B%E4%BB%8E0%E5%AE%9E%E7%8E%B0%E4%B8%80%E9%A2%97%E5%86%B3%E7%AD%96%E6%A0%91/"},{"title":"æœ€çŸ­ä½œä¸šä¼˜å…ˆç®—æ³•(SJF)","text":"å°±æ˜¯CPUé€‰æ‹©å…ˆè¿è¡Œè€—æ—¶çŸ­çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ä»»åŠ¡Aéœ€è¦3sï¼Œä»»åŠ¡Béœ€è¦5sï¼Œé‚£ä¹ˆç¨‹åºé€‰æ‹©å…ˆè¿è¡ŒA 5ä¸ªç¨‹åºABCDEåŒæ—¶æäº¤ç»™CPUæ‰§è¡Œï¼ˆè™½ç„¶å¼åŒæ—¶æäº¤ï¼Œä½†æ˜¯æœ‰å…ˆåï¼Œå‡è£…Aæ¯”Bå¿«é‚£ä¹ˆä¸€ç‚¹ç‚¹çš„ä¸€ç‚¹ç‚¹çš„ä¸€ç‚¹ç‚¹å¥½äº†ï¼‰ ä½œä¸šå æ‰§è¡Œæ—¶é—´ A 5 B 5 C 2 D 3 E 4 é‚£ä¹ˆè¿è¡Œé¡ºåºä¸º å¹³å‡ç­‰å¾…æ—¶é—´=(ä»»åŠ¡å¼€å§‹æ—¶é—´ - ä»»åŠ¡æäº¤æ—¶é—´)/n ç­‰å¾…æ—¶é—´ A:9-0 B:14-0 C:0-0 D:2-0 E:5-0 å¹³å‡ç­‰å¾…æ—¶é—´=30/5=6 å¦‚æœä¸æ˜¯åŒæ—¶æäº¤ï¼Œé‚£ä¹ˆå‡ºç°éæŠ¢å å¼å’ŒæŠ¢å å¼ä¸¤ç§æƒ…å†µ éæŠ¢å å¼ï¼šåŒä¸€æ—¶é—´åˆ™é€‰æ‹©å…ˆè¿è¡Œè€—æ—¶çŸ­çš„ä»»åŠ¡ï¼Œä¸åŒæ—¶é—´åˆ™æŒ‰ç…§å…ˆæ¥å…ˆæœåŠ¡(FCFS) ä½œä¸šå æäº¤æ—¶é—´ æ‰§è¡Œæ—¶é—´ A 0 5 B 1 5 C 2 2 D 3 3 E 4 4 0sæ—¶ï¼šåªæœ‰Aï¼Œå› æ­¤å…ˆæ‰§è¡ŒAï¼Œå› ä¸ºæ˜¯éæŠ¢å å¼ï¼Œæ‰€ä»¥BCDEæäº¤æ—¶å³ä½¿æ‰§è¡Œæ—¶é—´å¯èƒ½æ›´çŸ­ï¼ˆæ¯”å¦‚Cä¸º2ï¼‰ä¹Ÿåªèƒ½ç­‰å¾…Aæ‰§è¡Œå®Œï¼ŒAæ‰§è¡Œå®Œä¸º5sï¼Œæ­¤æ—¶BCDEç›¸å½“äºåŒæ—¶æäº¤ï¼Œæƒ…å†µå’Œç¬¬ä¸€ç§ä¸€æ ·ï¼Œå› æ­¤é¡ºåºæ˜¯CDEB ç­‰å¾…æ—¶é—´ A:0-0 B:14â€‹-1 C:5-2 D:7-3 E:10-4 å¹³å‡ç­‰å¾…æ—¶é—´=(0+13+3+4+6)/5=5.2 æŠ¢å å¼ï¼šæ–°ä»»åŠ¡æäº¤æ—¶ï¼Œå°±åˆ¤æ–­æ­£åœ¨è¿è¡Œä¸­å‰©ä¸‹çš„æ—¶é—´å’Œæ–°ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´ï¼Œé‚£ä¸ªçŸ­å…ˆæ‰§è¡Œå“ªä¸ªï¼ŒåŸä»»åŠ¡å¦‚æœè¢«æŠ¢å ï¼Œåˆ™ä¸­é€”æš‚åœ ä»ç„¶æ˜¯è¿™ä¸ªä¾‹å­ ä½œä¸šå æäº¤æ—¶é—´ æ‰§è¡Œæ—¶é—´ A 0 5 B 1 5 C 2 2 D 3 3 E 4 4 1sæ—¶ï¼šBæäº¤ï¼Œä½†æ˜¯æ­¤æ—¶Aä¸º4ï¼Œå› æ­¤ç»§ç»­è¿è¡ŒA 2sæ—¶ï¼šCæäº¤ï¼Œæ­¤æ—¶Aä¸º3Cä¸º2ï¼Œå› æ­¤æŠ¢å è¿è¡ŒCï¼ŒAè¢«ä¸­æ–­è¿˜å‰©3s 4sæ—¶ï¼šCè¿è¡Œå®Œï¼Œæ‰€æœ‰ä»»åŠ¡éƒ½ä¸ºæäº¤çŠ¶æ€ï¼ŒAå’ŒCä¸º3sï¼Œå› ä¸ºAå…ˆæ¥ï¼Œæ‰€ä»¥å…ˆè¿è¡ŒA æµç¨‹å¦‚ä¸‹ ç­‰å¾…æ—¶é—´ A:4-2ï¼ˆè¿™ä¸ª2æ˜¯ç¬¬ä¸€æ®µçš„æ—¶é—´ï¼‰ B:14-1 C:2-2 D:7-3 E:10-4 å¹³å‡ç­‰å¾…æ—¶é—´=(2+13+0+4+6)/5=5 æœ‰äº†å¼€å§‹æ—¶é—´å’Œå®Œæˆæ—¶é—´ï¼Œè‡³äºè¦ç®—å…¶ä»–çš„ç»™å‡ºå…¬å¼å°±èƒ½è®¡ç®— å‘¨è½¬æ—¶é—´=ä½œä¸šå®Œæˆæ—¶é—´â€”ä½œä¸šæäº¤æ—¶é—´;å¹³å‡å‘¨è½¬æ—¶é—´=(ä½œä¸š1çš„å‘¨è½¬æ—¶é—´+â€¦+ä½œä¸šnçš„å‘¨è½¬æ—¶é—´)/n;å¸¦æƒå‘¨è½¬æ—¶é—´=ä½œä¸šå‘¨è½¬æ—¶é—´/ä½œä¸šå®é™…è¿è¡Œæ—¶é—´;å¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´=(ä½œä¸š1çš„å¸¦æƒå‘¨è½¬æ—¶é—´+â€¦+ä½œä¸šnçš„å¸¦æƒå‘¨è½¬æ—¶é—´)/n; ç®—è¿™äº›ä¸æ˜¯æœ‰æ‰‹å°±è¡Œï¼Ÿ sjfç®—æ³•èƒ½è®©å¹³å‡ç­‰å¾…æ—¶é—´æœ€çŸ­ï¼Œå› ä¸ºå…ˆæ‰§è¡Œäº†ç®€å•ä»»åŠ¡ï¼Œå½“ç„¶å®é™…åº”ç”¨ä¸­æ˜¯ç†æƒ³æƒ…å†µï¼Œå› ä¸ºä¸çŸ¥é“ä»»åŠ¡æ‰§è¡Œæ—¶é—´æ˜¯å¤šä¹…ã€‚","link":"/Others/%E6%9C%80%E7%9F%AD%E4%BD%9C%E4%B8%9A%E4%BC%98%E5%85%88%E7%AE%97%E6%B3%95(SJF)/"},{"title":"æ ¹æ®ä¸¤åºéå†æ¨å‡ºç¬¬ä¸‰åºä»¥åŠæ„å»ºæ ‘","text":"å‰è¨€ï¼šå¤ªä¹…äº†éƒ½å¿«å¿˜äº†ï¼Œæœ€è¿‘åšäº†ä¸€ä¸‹ç¬”è¯•é¢˜é‡åˆ°è¿™é¢˜ï¼Œå‘ç°ç»å¸¸è€ƒè¿™ç§é¢˜ï¼Œå…ˆæŠŠæŠ€å·§è®°å½•ä¸‹æ¥ï¼Œæœ‰äº†æŠ€å·§åç®€ç›´ä¸è¦å¤ªè½»æ¾ 1. æ ‘çš„ä¸‰ç§éå† å‰åºéå†ï¼ˆæ ¹å·¦å³ï¼‰ ä¸­åºéå†ï¼ˆå·¦æ ¹å³ï¼‰ ååºéå†ï¼ˆå·¦å³æ ¹ï¼‰ Javaå®ç°å‚è€ƒè¿™ç¯‡åšå®¢ï¼Œä¸å±•å¼€äº†Javaå®ç°æ ‘çš„éå†åŠäºŒå‰æ ‘å¯è§†åŒ– ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•é€šè¿‡å‰åºå’Œä¸­åºæ¨å‡ºååºä»¥åŠæ„é€ äºŒå‰æ ‘ 2. å‰+ä¸­â€“&gt;å2.1 æ‰‹å†™ç»“æœä¸ç»•å¼¯å­ï¼Œç›´æ¥ç»™å‡ºæŠ€å·§å†åšé¢˜ çœ‹å‰åºéå†ï¼šç¬¬ä¸€ä¸ªä¸ºæ ¹èŠ‚ç‚¹ çœ‹ä¸­åºéå†ï¼šæ‰¾åˆ°æ­¥éª¤1ä¸­çš„æ ¹èŠ‚ç‚¹ï¼Œå·¦è¾¹çš„å…¨ä¸ºå·¦å­æ ‘ï¼Œå³è¾¹çš„å…¨ä¸ºå³å­æ ‘ å°†å·¦å­æ ‘çœ‹æˆç‹¬ç«‹çš„æ ‘ï¼Œé‡å¤æ­¥éª¤1å’Œ2ï¼Œç›´åˆ°åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä¸ç”¨è„‘å­å°±å¯ä»¥åšå‡ºæ¥å•¦ï¼ ä¸‹é¢è¿›å…¥å®æˆ˜ç¯èŠ‚ï¼ˆç‰›å®¢ç½‘åŸé¢˜ï¼‰ï¼š å¯¹æŸäºŒå‰æ ‘è¿›è¡Œå…ˆåºéå†çš„ç»“æœæ˜¯ABDEFC,ä¸­åºéå†çš„ç»“æœæ˜¯DBFEACï¼Œåˆ™ååºéå†çš„ç»“æœæ˜¯ï¼ˆï¼‰ ï¼ˆå‚ç…§æ­¥éª¤1ï¼‰å‘ç°æ ¹èŠ‚ç‚¹æ˜¯A ï¼ˆå‚ç…§æ­¥éª¤2ï¼‰åˆ’åˆ†å‡ºå·¦å³å­æ ‘ ï¼ˆå‚ç…§æ­¥éª¤1ï¼‰å¸¦ç€è¿™äº›å·¦å­æ ‘çœ‹å‰åºéå†ï¼Œé‚£ä¹ˆå‰åºéå†çš„é¡ºåºæ˜¯BDEFå¯¹å§ï¼Œå°†å·¦å­æ ‘çœ‹æˆæ˜¯ä¸€é¢—ç‹¬ç«‹çš„æ ‘ï¼Œäºæ˜¯æ­¤æ—¶ç”±æ­¥éª¤1å¾—æ ¹èŠ‚ç‚¹æ˜¯B ï¼ˆå‚ç…§æ­¥éª¤2ï¼‰åœ¨å­æ ‘ä¸­ç»§ç»­åˆ’åˆ†å‡ºå·¦å³å­æ ‘ è¿˜ä¸æ˜ç™½ï¼Ÿé‚£ä¹ˆç»§ç»­ï¼Œåªæœ‰ä¸€ä¸ªå­—æ¯çš„å°±ç›´æ¥å¡«ä¸Šå»äº†ï¼Œå‰©ä¸‹FEï¼Œçœ‹å‰åºéå†åˆ™æ˜¯EFï¼Œæ—¢ç„¶å·²ç»çŸ¥é“æ˜¯å³å­æ ‘ï¼Œé‚£ä¹ˆå°†å³å­æ ‘çœ‹æˆæ˜¯ä¸€é¢—ç‹¬ç«‹çš„æ ‘ï¼Œï¼ˆå‚ç…§æ­¥éª¤1ï¼‰äºæ˜¯æ­¤æ—¶ç”±æ­¥éª¤1å¾—æ ¹èŠ‚ç‚¹æ˜¯E ï¼ˆå‚ç…§æ­¥éª¤2ï¼‰åˆ’åˆ†å·¦å³å­æ ‘ï¼Œå‘ç°åªæœ‰å·¦å­æ ‘äº†ï¼Œæ”¾å“ªå°±ä¸å¿…å¤šè¯´äº† åšå¤šä¸¤é¢˜ï¼Œå‘ç°æŒæ¡äº†æŠ€å·§åç”»å‡ºæ ‘æ ¹æœ¬ä¸éœ€è¦è„‘å­ï¼ ç”»å‡ºæ ‘åï¼Œå†åšååºéå†å°±ä¸éš¾äº†ï¼Œæˆ‘å°±ä¸è¯´äº†ï¼Œç­”æ¡ˆDFEBCA ä¸‹é¢æ¥çœ‹ä»£ç å®ç° 2.2 Javaå®ç°ï¼šæ„é€ æ ‘ åŠ›æ‰£105åŸé¢˜ï¼šhttps://leetcode-cn.com/problems/construct-binary-tree-from-preorder-and-inorder-traversal/ è€è§„çŸ©ï¼Œç›´æ¥ç»™æ¨¡æ¿ï¼Œè¿™æ˜¯æˆ‘ä¸ªäººåœ¨åŠ›æ‰£è¯„è®ºåŒºæ‰¾åˆ°çš„é£æ ¼æ¯”è¾ƒå–œæ¬¢çš„ä¸€å¥—ï¼Œä¸‹é¢çš„ä¸­+åâ€“&gt;å‰ä¹Ÿæ˜¯è¿™ä¸ªæ¨¡æ¿ 123456789101112131415161718private int pre = 0, in = 0; //è®°å½•å½“å‰å‰åºï¼Œä¸­åºçš„ä¸‹æ ‡ä½ç½®public TreeNode buildTree(int[] preorder, int[] inorder) { return recursive(preorder, inorder, Integer.MAX_VALUE);}//rootValæ˜¯å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œä»¥å½“å‰è¿™ä¸ªèŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹æ„é€ å·¦å³å­æ ‘ï¼Œæ²¡æœ‰çš„è¯ä¸ºInteger.MAX_VALUEï¼ˆæ¯”å¦‚æ ¹èŠ‚ç‚¹æƒ³è±¡æˆæ— é™å¤§çš„æŸä¸ªçˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼‰public TreeNode recursive(int[] preorder, int[] inorder, int rootVal) { if (pre &gt;= preorder.length) return null; //ç»“æŸæ¡ä»¶æ˜¯å‰åºä¸‹æ ‡å¤§äºé•¿åº¦ if (inorder[in] == rootVal) { //é€’å½’ç»“æŸæ¡ä»¶æ˜¯æ‰¾åˆ°ä¸­åºä¸‹æ ‡ in++; return null; } int curVal = preorder[pre++]; //ä¸‹ä¸€ä¸ªæ ¹èŠ‚ç‚¹å’Œå€¼ TreeNode cur = new TreeNode(curVal); cur.left = recursive(preorder, inorder, curVal); cur.right = recursive(preorder, inorder, rootVal); return cur;} åªéœ€ç¨å¾®çš„çœ‹ä¸€ä¸‹è¿™ä¸¤ç‚¹ ä¸€ä¸ªæ˜¯preå’Œinä»¥åŠä»–ä»¬çš„++ ä¸€ä¸ªæ˜¯recursiveçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä»£è¡¨äº†åˆ†ç•Œç‚¹çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å½“å‰è¿™ä¸ªèŠ‚ç‚¹ä½œä¸ºäº†å®ƒçš„å·¦å³å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼ŒrootValå°±æ˜¯å½“å‰è¿™ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚ä¼ çš„å‚æ•°æ€è€ƒè¿‡ç¨‹å¦‚ä¸‹ï¼š ä»æ•´æ£µæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹æƒ³ï¼šcur.leftè¿™ä¸€å¥å°±æ˜¯å‰åºæ•°ç»„ä¸­çš„èŠ‚ç‚¹ä½œä¸ºäº†æ ¹èŠ‚ç‚¹ï¼ˆå›æƒ³2.1ä»‹ç»çš„ä¸œè¥¿ï¼‰ï¼Œcur.rightè¿™ä¸€å¥çš„æ ¹èŠ‚ç‚¹å®é™…ä¸Šæ˜¯ä¸€å¼€å§‹ä¼ å…¥çš„èŠ‚ç‚¹ï¼ˆå°±æ˜¯ä»£ç æ³¨é‡Šä¸­ï¼šæƒ³è±¡æˆæ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯æ— é™å¤§çš„æŸä¸ªçˆ¶èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼‰é‚£å¥ï¼Œå› æ­¤æ˜¯ä¼ è¿›æ¥çš„rootValã€‚èƒ½ç†è§£å§â€¦ é‚£ä¹ˆè¯´åˆ°è¿™é‡Œï¼Œå¦‚ä½•ä»ä¸­åº+ååºæ¨å‡ºå‰åºçš„ä»£ç è‡ªå·±éƒ½èƒ½ä¿®æ”¹äº†å§ï¼špreå’Œinä¸€å¼€å§‹çš„ä½ç½®å˜æˆæœ«å°¾ï¼Œ++å˜æˆâ€“ï¼Œå…ˆcur.rightå†cur.leftï¼Œæ”¹å¥½äº†å¯ä»¥æ»‘åˆ°3.2èŠ‚å»å¯¹æ¯”ä»£ç å§ï¼ 2.3 Javaå®ç°ï¼šç›´æ¥è·å¾—ååºç»“æœç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‰åº+ä¸­åºâ€“&gt;æ„å»ºæ ‘â€“&gt;ååºéå†æ ‘â€“&gt;è·å¾—ååºéå†ç»“æœã€‚è¯šç„¶ï¼Œä»£ç çš„è¯ï¼Œå¯ä»¥ä¸æ„å»ºæ ‘è€Œç›´æ¥è·å¾—ååºéå†ç»“æœï¼Œæˆ‘ç›´æ¥è´´å®Œæ•´çš„ä»£ç  123456789101112131415161718192021222324252627282930313233public class one_zero_five_ä»å‰åºä¸ä¸­åºéå†è·å¾—ååºéå† { @Test public void test(){ int[] preorder = {3,9,20,15,7}; int[] inorder = {9,3,15,20,7}; totalLen = inorder.length; int[] res = buildPost(preorder, inorder, 0, totalLen - 1, 0); System.out.println(Arrays.toString(res)); } private int post, totalLen; private int[] postorder = null; /** * ç›´æ¥è·å¾—ååºç»“æœ * @param preorder å‰åºæ•°ç»„ * @param inorder ä¸­åºæ•°ç»„ * @param start å­æ ‘åœ¨ä¸­åºæ•°ç»„ä¸­çš„èµ·å§‹ä¸‹æ ‡ * @param end å­æ ‘åœ¨ä¸­åºæ•°ç»„ä¸­çš„ç»“æŸä¸‹æ ‡ * @param rootIndex å­æ ‘æ ¹èŠ‚ç‚¹åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ * @return ååºæ•°ç»„ */ public int[] buildPost(int[] preorder, int[] inorder, int start, int end, int rootIndex){ if (postorder == null) postorder = new int[totalLen]; //ç¬¬ä¸€æ¬¡è¿›å…¥æ‰æ„å»ºï¼ŒåæœŸå¯ä»¥è€ƒè™‘æ”¾è¿›æ„é€ å‡½æ•° if (start &gt; end) return null; int i = start; //iä»£è¡¨å‰åºéå†çš„æ ¹èŠ‚ç‚¹åœ¨ä¸­åºä¸­çš„ä¸‹æ ‡ while (i &lt; end &amp;&amp; inorder[i] != preorder[rootIndex]) i++; postorder[post++] = preorder[rootIndex]; buildPost(preorder, inorder, start, i - 1, rootIndex + 1); //æ„å»ºå·¦å­æ ‘ï¼Œstart ~ (i - 1)ï¼ŒrootIndex: buildPost(preorder, inorder, i + 1, end, rootIndex + i - start + 1); //æ„å»ºå³å­æ ‘ï¼Œ(i + 1) ~ endï¼ŒrootIndex: return postorder; }} çœ‹èµ·æ¥å“äººå‡½æ•°ä½“é™¤äº†æ³¨é‡Šä¸€å…±æ‰8è¡Œï¼ï¼å…¶å®è¿™ä¸ªç†è§£èµ·æ¥æ›´å®¹æ˜“ï¼Œ startä¸º0ï¼Œendä¸ºlen-1ï¼ŒrootIndexä¸€å¼€å§‹ä¸ºä¸ºå‰åºçš„å¼€å§‹æ‰€ä»¥æ˜¯0ï¼Œé‚£ä¹ˆpreorder[rootIndex]å°±æ˜¯æ ¹èŠ‚ç‚¹ åœ¨ä¸­åºä¸­æ‰¾åˆ°è¿™ä¸ªæ ¹èŠ‚ç‚¹ï¼Œiä¸ºä¸‹æ ‡ï¼Œé‚£ä¹ˆinorder[i]å·¦è¾¹ä¸ºå·¦å­æ ‘ï¼Œå³è¾¹ä¸ºå³å­æ ‘ é‚£ä¹ˆå·¦å­æ ‘çš„èŒƒå›´æ˜¯start ~ (i - 1)ï¼Œæ ¹èŠ‚ç‚¹åœ¨å‰åºä¸‹æ ‡ä¸ºï¼šrootIndex +1 å³å­æ ‘çš„èŒƒå›´æ˜¯(i + 1) ~ endï¼Œå‰åºæ˜¯æ ¹å·¦å³ï¼Œé‚£ä¹ˆå³å­æ ‘çš„æ ¹èŠ‚ç‚¹ä¸ºï¼šå½“å‰æ ¹èŠ‚ç‚¹ä½ç½® + å·¦å­æ ‘é•¿åº¦ + 1ï¼Œå·¦å­æ ‘é•¿åº¦æ€ä¹ˆè®¡ç®—å‘¢ï¼Ÿä»ä¸­åºï¼ˆå·¦æ ¹å³ï¼‰é‚£é‡Œè®¡ç®—å¯å¾—i - startå°±æ˜¯å·¦å­æ ‘é•¿åº¦ï¼Œå› æ­¤æ ¹èŠ‚ç‚¹ä¸‹æ ‡ä¸ºrootIndex + (i - start) + 1 3. ä¸­+åâ€“&gt;å‰3.1 æ‰‹å†™ç»“æœä¸­åºçš„ä½œç”¨ä»ç„¶æ˜¯åˆ’åˆ†å·¦å³å­æ ‘ï¼Œååºçš„ä½œç”¨å…¶å®è·Ÿå‰åºä¸€æ ·ï¼Œä¸è¿‡å¾—åè¿‡æ¥ä»åé¢å¼€å§‹çœ‹ï¼Œæœ€åä¸€ä¸ªæ‰æ˜¯æ ¹èŠ‚ç‚¹ çœ‹ååºéå†ï¼šæœ€åä¸€ä¸ªä¸ºæ ¹èŠ‚ç‚¹ çœ‹ä¸­åºéå†ï¼šæ‰¾åˆ°æ­¥éª¤1ä¸­çš„æ ¹èŠ‚ç‚¹ï¼Œå·¦è¾¹çš„å…¨ä¸ºå·¦å­æ ‘ï¼Œå³è¾¹çš„å…¨ä¸ºå³å­æ ‘ å°†å·¦å­æ ‘çœ‹æˆç‹¬ç«‹çš„æ ‘ï¼Œé‡å¤æ­¥éª¤1å’Œ2ï¼Œç›´åˆ°åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œä¸ç”¨è„‘å­å°±å¯ä»¥åšå‡ºæ¥å•¦ï¼ çœ‹é¢˜ï¼š ä¸­åºéå†: GBEDAFCH ååºéå†ï¼šGEDBFHCA æˆ‘å°±ç›´æ¥æ¥äº† çœ‹ååºï¼Œæ ¹èŠ‚ç‚¹æ˜¯A çœ‹ä¸­åºï¼Œå·¦è¾¹GBEDå³è¾¹FCH çœ‹ååºï¼Œè¦å…ˆçœ‹å³å­æ ‘ï¼ˆå› ä¸ºååºæ˜¯â€œå·¦å³æ ¹â€ï¼Œä¹‹å‰è¯´äº†åè¿‡æ¥çœ‹é‚£ä¹ˆæ ¹å®Œäº†åˆ°å³ï¼‰ï¼ŒFHCè¯´æ˜æ ¹èŠ‚ç‚¹æ˜¯C çœ‹ä¸­åºï¼Œå·¦è¾¹Få³è¾¹Hï¼Œå·¦å³éƒ½åªæœ‰ä¸€ä¸ªäº†ï¼Œå®Œæˆ çœ‹ååºï¼ŒGEDBè¯´æ˜æ ¹èŠ‚ç‚¹æ˜¯B çœ‹ä¸­åºï¼Œå·¦è¾¹å•Gï¼Œå³è¾¹ED çœ‹ååºï¼Œæ˜¯EDï¼Œè¯´æ˜Dæ˜¯æ ¹èŠ‚ç‚¹ çœ‹ä¸­åºï¼Œå·¦è¾¹Eï¼Œå®Œæˆ 3.2 Javaå®ç°ï¼šæ„é€ æ ‘æ ¹æ®2.2ä¸­çš„å¥—è·¯æ¨¡æ¿ï¼Œåªéœ€ç¨å¾®ä¿®æ”¹ä¸€ä¸‹é¡ºåºå³å¯è·å¾—æ­£ç¡®ç­”æ¡ˆ 12345678910111213141516171819private int in, post;public TreeNode buildTree(int[] inorder, int[] postorder) { in = inorder.length - 1; //ä»åé¢å¼€å§‹ post = postorder.length - 1; return recursive(inorder, postorder, Integer.MAX_VALUE);}public TreeNode recursive(int[] inorder, int[] postorder, int rootVal){ if (post &lt; 0) return null; if (inorder[in] == rootVal){ in--; return null; } int curVal = postorder[post--]; TreeNode cur = new TreeNode(curVal); cur.right = recursive(inorder, postorder, curVal); //ååºæ˜¯å…ˆå³å†å·¦ cur.left = recursive(inorder, postorder, rootVal); return cur;} 3.3 Javaå®ç°ï¼šç›´æ¥è·å¾—å‰åºç»“æœä¹Ÿæ˜¯è·Ÿ2.3ä¸€æ ·çš„æ¨¡æ¿ï¼Œç†è§£äº†å°±å¥½äº† 123456789101112131415161718192021222324252627282930313233public class one_zero_six_ä»ä¸­åºä¸ååºéå†è·å¾—å‰åºéå† { @Test public void test2(){ int[] inorder = {9,3,15,20,7}; int[] postorder = {9,15,7,20,3}; totalLen = inorder.length; int[] res = buildPre(inorder, postorder, 0, totalLen - 1, totalLen - 1); System.out.println(Arrays.toString(res)); } private int pre, in, post, totalLen; private int[] preorder = null; /** * ç›´æ¥è·å¾—å‰åºç»“æœ * @param inorder ä¸­åºæ•°ç»„ * @param postorder ååºæ•°ç»„ * @param start å­æ ‘åœ¨ä¸­åºæ•°ç»„ä¸­çš„èµ·å§‹ä¸‹æ ‡ * @param end å­æ ‘åœ¨ä¸­åºæ•°ç»„ä¸­çš„ç»“æŸä¸‹æ ‡ * @param rootIndex å­æ ‘æ ¹èŠ‚ç‚¹åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ * @return å‰åºæ•°ç»„ */ public int[] buildPre(int[] inorder, int[] postorder, int start, int end, int rootIndex) { if (preorder == null) preorder = new int[totalLen]; if (start &gt; end) return null; //ç»“æŸï¼Œéšä¾¿è¿”å› int i = start; //iä¸ºååºæ•°ç»„çš„æŸä¸ªå€¼åœ¨ä¸­åºæ•°ç»„ä¸­çš„ä½ç½® while (i &lt; end &amp;&amp; inorder[i] != postorder[rootIndex]) i++; //ä»¥iä¸ºåˆ†éš”ç¬¦ï¼Œinorderå·¦è¾¹ä¸ºå·¦å­æ ‘ï¼Œå³è¾¹ä¸ºå³å­æ ‘ preorder[pre++] = postorder[rootIndex]; buildPre(inorder, postorder, start, i - 1, rootIndex - 1 - end + i); //å·¦å­æ ‘ï¼Œæ ¹èŠ‚ç‚¹ä¸‹æ ‡ä¸ºrootIndex - (end - i + 1) buildPre(inorder, postorder, i + 1, end, rootIndex - 1); //å³å­æ ‘ï¼Œæ ¹èŠ‚ç‚¹ä¸‹æ ‡ä¸ºrootIndex - 1 return preorder; }} startä¸º0ï¼Œendä¸ºlen-1ï¼ŒrootIndexä¸€å¼€å§‹ä¸ºä¸ºååºçš„æœ€åæ‰€ä»¥æ˜¯len-1ï¼Œé‚£ä¹ˆpostorder[rootIndex]å°±æ˜¯æ ¹èŠ‚ç‚¹ åœ¨ä¸­åºä¸­æ‰¾åˆ°è¿™ä¸ªæ ¹èŠ‚ç‚¹ï¼Œiä¸ºä¸‹æ ‡ï¼Œé‚£ä¹ˆinorder[i]å·¦è¾¹ä¸ºå·¦å­æ ‘ï¼Œå³è¾¹ä¸ºå³å­æ ‘ é‚£ä¹ˆå·¦å­æ ‘çš„èŒƒå›´æ˜¯start ~ (i - 1)ï¼Œæ ¹èŠ‚ç‚¹ä¸‹æ ‡ä¸ºï¼šå½“å‰æ ¹èŠ‚ç‚¹ä¸‹æ ‡ - å³å­æ ‘é•¿åº¦ - 1ï¼Œå³å­æ ‘é•¿åº¦æ€ä¹ˆè®¡ç®—å‘¢ï¼Ÿä»ä¸­åºé‚£é‡Œè®¡ç®—å¯å¾—end - iå°±æ˜¯å³å­æ ‘é•¿åº¦ï¼Œå› æ­¤æ ¹èŠ‚ç‚¹ä¸‹æ ‡ä¸ºrootIndex - (end - i) - 1 å³å­æ ‘çš„èŒƒå›´æ˜¯(i + 1) ~ endï¼Œæ ¹èŠ‚ç‚¹åœ¨ååºçš„ä¸‹æ ‡ä¸ºrootIndex - 1 4. å‰+åâ€“&gt;æ— æ³•ç¡®å®šè¿™ç§æƒ…å†µæ ‘ä¸å”¯ä¸€ 5. é™„å½•ï¼šæ­é…ä¸Šä¸ªåšå®¢çš„å¯è§†åŒ–äºŒå‰æ ‘å·¥å…·ç±»ä¸€èµ·é£Ÿç”¨æ›´åŠ ï¼Œçœ‹çœ‹ä½ åšå¯¹äº†å— å‚è€ƒ/æ„Ÿè°¢ï¼š æ„é€ æ ‘çš„æ¨¡æ¿æå–è‡ªåŠ›æ‰£å®˜æ–¹é¢˜è§£ä¸‹çš„æœ‹å‹åä¸‰ç¾½æ‰¬ ç›´æ¥è·å¾—ç¬¬ä¸‰åºç»“æœçš„ä»£ç å‚è€ƒäº†æŸ³ç¥çš„ä»£ç ","link":"/algorithms/%E6%A0%B9%E6%8D%AE%E4%B8%A4%E5%BA%8F%E9%81%8D%E5%8E%86%E6%8E%A8%E5%87%BA%E7%AC%AC%E4%B8%89%E5%BA%8F%E4%BB%A5%E5%8F%8A%E6%9E%84%E5%BB%BA%E6%A0%91/"},{"title":"æ¢¦å¹»è¥¿æ¸¸æ¸¸æˆä½“éªŒ","text":"ä½œä¸ºä¸€æ¬¾MMOï¼Œè¿™ä¸ªæ¸¸æˆåœ¨ç¤¾äº¤æ–¹é¢è¿˜æ˜¯åšçš„éå¸¸å¥½çš„ é˜¿ç±³æœ‰ä¸ªå°å§å§idå«é˜¿ç±³å‘€ï¼Œæ˜¯åœ¨ä¸€æ¬¡æŠ“é¬¼ä¸­è®¤è¯†çš„ã€‚é‚£ä¼šæ˜¯æˆ‘ç©è¿™ä¸ªæ¸¸æˆçš„ç¬¬3å¤©ï¼Œè§‰å¾—è¿™æ¸¸æˆæŒºæ— èŠçš„ï¼Œä½†æ˜¯ä½œä¸šè¦æ±‚è¦è¾¾åˆ°65çº§ï¼Œäºæ˜¯å°±æ¯å¤©æŒ‚æœºåšæ—¥å¸¸ï¼Œæƒ³ç€åæ­£åˆ°65çº§å°±å¯ä»¥äº†ï¼Œé˜¿ç±³çš„å‡ºç°ä¸ºæˆ‘çš„æ¸¸æˆä½“éªŒå¢åŠ äº†ä¹è¶£ã€‚ â€œåŸæ¥ç»„é˜Ÿçš„äººä¸å¸¦æˆ‘ç©äº†ï¼Œä¸€ä¸ªäººç©æŒºæ— èŠçš„ï¼Œæˆ‘æ‰“ç®—å¸è½½äº†ï¼Œæƒ³åˆ°è·Ÿä½ è¿˜æ¯”è¾ƒç†Ÿï¼Œå¸è½½ä¹‹å‰è·Ÿä½ è¯´ä¸€å£°â€ï¼Œé˜¿ç±³å‘æ¥è¿™ä¹ˆä¸€æ¡æ¶ˆæ¯ã€‚ å—¯ï¼Ÿï¼Ÿå½“æ—¶æˆ‘å°±è§‰å¾—ä¸è¡Œï¼Œæˆ‘ç¦»65çº§è¿˜æœ‰é‚£ä¹ˆé¥è¿œï¼Œä¸èƒ½æˆ‘ä¸€ä¸ªäººè§‰å¾—æ— èŠã€‚â€œåˆ«å‘€ï¼Œå…ˆåˆ«å¸è½½ï¼Œå’±ä¿©å¯ä»¥ä¸€èµ·ç©å•Šï¼Œé™ªæˆ‘åˆ°65çº§ä¸€èµ·å¸è½½â€ï¼Œä¸ºäº†æŒ½ç•™è¿™ä¸ªå¯¹æ¸¸æˆå¤±æœ›çš„å°å§å§ï¼Œæˆ‘åˆè¯´äº†ä¸€äº›â€œä»Šå¹´æ¯•ä¸šå•Šï¼Œæˆ‘ä¹Ÿä»Šå¹´æ¯•ä¸šâ€è¿™ç±»æ‹‰è¿‘å…³ç³»çš„è¯ã€‚é˜¿ç±³ä¸çŸ¥é“çš„æ˜¯ï¼Œæˆ‘ç©è¿™ä¸ªæ¸¸æˆå¹¶ä¸æ˜¯å–œæ¬¢ç©æ¸¸æˆï¼Œåªæ˜¯ç½‘æ˜“æ–°äººé¡¹ç›®çš„å…¶ä¸­ä¸€é¡¹ä½œä¸šè¦æ±‚ã€‚ åæ¥çš„ä¸€äº›æ—¥å­é‡Œï¼Œå°±æ˜¯è·Ÿé˜¿ç±³æ¯å¤©çš„æŒ‚æœºèŠå¤©ï¼Œç­‰çº§ä¹Ÿå¾ˆå¿«å°±ä¸Šå»äº†ï¼ˆè¿™æ¸¸æˆè¯´æ˜¯å…»æˆï¼Œæˆ‘æ„Ÿè§‰è¿˜æ˜¯é€Ÿæˆï¼‰ã€‚é˜¿ç±³æ˜¯ä¸ªå¾ˆæœ‰æ„æ€çš„äººï¼Œç°å®ä¸­ä¹Ÿæ˜¯ä¸ªéå¸¸ä¼˜ç§€çš„å°å§å§ï¼Œå’Œå¥¹èŠäº†ä¸€æ®µæ—¶é—´æ‰çŸ¥é“ï¼Œå¥¹è¯´çš„æ¯•ä¸šæ˜¯ç¡•å£«æ¯•ä¸šï¼Œè¿˜æ˜¯å‡ºå›½ç•™å­¦çš„æµ·å½’ï¼Œæœ¬ç§‘å°±æ˜¯211ã€‚å¥½å®¶ä¼™ï¼Œè¿™æ˜¯ç»§ç½‘æ˜“æ–°äººç¾¤çš„åæ ¡å¤§ä½¬ï¼Œè®¨è®ºä½œä¸šçš„ä¸Šäº¤ç¡•å£«ä¹‹åç¬¬ä¸‰æ¬¡éœ‡æƒŠã€‚è¿™ç½‘æ˜“æ¸¸æˆä¸ä»…ç ”å‘éƒ½æ˜¯å¤§ä½¬ï¼Œè¿ç©å®¶éƒ½æ˜¯ç¡•å£«èµ·æ­¥äº†å—ï¼Ÿ 3æœˆç»“æŸè¦äº¤æ¸¸æˆä½“éªŒæŠ¥å‘Šäº†ï¼Œé˜¿ç±³çš„ä¸€å¥è¯è®©æ•´ç¯‡æŠ¥å‘Šæ´»äº†èµ·æ¥ï¼Œäº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œæ¢¦å¹»è¥¿æ¸¸çš„å±è”½è¯éå¸¸ä¸¥æ ¼ï¼Œä¼šè¢«â€œçˆ±ç”Ÿæ´»çˆ±æ¢¦å¹»è¥¿æ¸¸ä»£æ›¿â€ã€‚é˜¿ç±³è·Ÿæˆ‘èŠäº†ä¸€äº›å…³äºå·¥ä½œå®ä¹ çš„äº‹æƒ…ï¼Œä½†ç”±äºè¿‡å¤šå±è”½è¯è¢«ç¦è¨€äº†ï¼Œ ä¸ºäº†å®‰æ…°é˜¿ç±³ï¼Œæˆ‘è¯´äº†ä¸€å¥â€œç ”å‘è¾£é¸¡ï¼Œæ˜¯ç ”å‘çš„é—®é¢˜â€ï¼Œæ²¡æƒ³åˆ°é˜¿ç±³ä¹Ÿè·Ÿäº†å¥ æˆ‘æ‰“ä¸Šé©¬èµ›å…‹ï¼Œè¿™æ¸¸æˆä½“éªŒæŠ¥å‘Šæˆ‘æ„¿ç§°ä¹‹ä¸ºç»æ´»ï¼ å½“ç„¶ï¼Œè¯´åˆ°é˜¿ç±³çš„è¿™å¥â€œé ä½ ä»¬è¿™ä¸€ä»£æ–°ç”Ÿ..â€ï¼Œæˆ‘æƒ³å¤§æ¦‚é˜¿ç±³ä¹Ÿå¤šå¤šå°‘å°‘èƒ½çŒœå‡ºæ¥æˆ‘çš„å·¥ä½œäº†å§ï¼Œæ¯•ç«Ÿè¿™æ­£å¸¸äººå®ˆç€ä¸ªæ— èŠçš„æ¸¸æˆéè¦åˆ°65çº§ï¼ŒåŠ ä¸Šé˜¿ç±³è¿‡äººçš„èªæ…§ï¼ŒçŒœä¸ªå…«ä¹ä¸ç¦»åä¹Ÿå¾ˆæ­£å¸¸ã€‚ æ˜Ÿè¾°æ˜Ÿè¾°å…„æ˜¯æˆ‘åœ¨æ¸¸æˆé‡Œè®¤è¯†çš„ç¬¬ä¸€ä¸ªå¥½å‹ï¼Œæ˜¯ä¸ªèµ„æ·±è€ç©å®¶ï¼ŒåŒæ—¶æ˜¯ä¸ªè‚å¸ æ˜Ÿè¾°å…„æ˜¯ä¸ªç¥å¥‡çš„äººç‰©ï¼Œæˆ‘å’Œä»–æ˜¯é€ç»“ä¹‹äº¤ï¼Œæ¯å¤©äº’é€åŒå¿ƒç»“ã€‚æ®ä»–æ‰€è¯´ï¼Œä»–æ˜¯ä¸Šç­æ—¶é—´å·å·ç©çš„æ¸¸æˆï¼Œè·Ÿæˆ‘åæ§½åæ§½è€æ¿å’Œå·¥ä½œä»€ä¹ˆçš„â€¦ æˆ‘æœ‰ä¸€æ™šå‡Œæ™¨ç¡ä¸ç€ç™»å½•æ¸¸æˆï¼Œä»–å±…ç„¶è¿˜åœ¨çº¿ï¼Œå¤§å“¥å¯èƒ½å–å¤šäº†ï¼Œè·Ÿæˆ‘æå¿ƒæè‚ºè¯´äº†å¾ˆå¤šï¼Œæœ€åè¿˜è¯´è¦æ‰¾æˆ‘å–é…’ï¼Œå¯æ˜¯ä»–è¿æˆ‘äººåœ¨å“ªéƒ½ä¸çŸ¥é“â€¦ åæ¥è¿˜é‚€è¯·æˆ‘å½“ä»–ä»¬å¸®æ´¾çš„æŠ¤æ³•ï¼Œæ„Ÿè§‰è¿™ä¸ªæ¸¸æˆé‡Œçš„ç©å®¶é¢‡æœ‰ä¸€ç§æ±Ÿæ¹–ä¹‰æ°”ã€‚å½“ç„¶æœ€åæˆ‘æ²¡ç­”åº”ï¼Œå› ä¸ºé‚£ä¼šå·²ç»å¿«65çº§äº†ï¼Œæ€»ä¸èƒ½å½“äº†æŠ¤æ³•å°±æŠŠå¸®æ´¾ç»™æŠ›å¼ƒäº†å§ã€‚ é­”ç‹å¯¨é­”ç‹å¯¨æ˜¯ä¸ªç¥å¥‡çš„é—¨æ´¾ï¼Œé‡Œé¢éƒ½æ˜¯äººæ‰ï¼Œé—¨æ´¾é¢‘é“å¾ˆçƒ­é—¹ï¼Œä»ä¸èŠæ¸¸æˆï¼ŒèŠçš„æ˜¯äººç”Ÿã€æƒ…æ„Ÿã€æœªæ¥ã€å©šå§»ã€pkå”±æ­Œç”šè‡³å¼€è½¦â€¦æ¯å½“æˆ‘çœ‹é—¨æ´¾é¢‘é“éƒ½ä»¿ä½›è§‰å¾—è‡ªå·±ç©çš„ä¸æ˜¯æ¸¸æˆï¼Œæ˜¯äººæƒ…ä¸–æ•…ã€‚ æ€»ä¹‹ä¸æ¨èçº¯æ´çš„å°å§å§ç©è¿™ä¸ªé—¨æ´¾â€¦ ç¥ç§˜ç¬¦å·è¿™ä¸ªæ¸¸æˆé‡Œæœ‰ä¸€ä¸ªéå¸¸ç¥å¥‡çš„ç°è±¡ï¼Œå¾ˆå¤šäººåå­—åé¢ä¼šåŠ ä¸€ä¸ªç‰¹æ®Šç¬¦å·ï¼Œä¼¼ä¹æˆä¸ºäº†è¿™ä¸ªæ¸¸æˆé»˜è®¤çš„ä¼ ç»Ÿã€‚åæ¥æˆ‘é€šè¿‡å¥½å‹äº†è§£åˆ°å¸¦è¿™ä¸ªç¬¦å·çš„ç©å®¶è¯´æ˜æœ‰å›ºå®šé˜Ÿä¼ï¼Œæœ‰ç»„ç»‡æœ‰çºªå¾‹ï¼Œä»¿ä½›ä¸€é¢—å¿ƒæœ‰äº†è‡ªå·±çš„å½’å±ã€‚ å…¶ä»–çš„å…³äºæ¸¸æˆæ”»ç•¥æ¯”å¦‚æŠ“é¬¼å¦‚ä½•æ­é…åŒå€æ”¶ç›Šæœ€é«˜ï¼Œå‰å°˜æ—§æ¢¦ç‰›å¤´çš„å·§å¦™è¿ç”¨ç­‰ç­‰å°±ä¸è¯´äº†ï¼Œå…¨é è€ç©å®¶ç»™çš„æ”»ç•¥ã€‚ä½œä¸ºä¸€æ¬¾MMOï¼Œè™½ç„¶æŒ‚æœºå’Œå›åˆåˆ¶çš„æœºåˆ¶æŒºæ— èŠï¼Œä½†æ˜¯ç¤¾äº¤æ–¹é¢è¿˜æ˜¯åšçš„éå¸¸å¥½çš„ã€‚","link":"/life/mhxy-experience/"},{"title":"ç®€å•å·¥å‚æ¨¡å¼","text":"1. ä»‹ç»å’Œåº”ç”¨åœºæ™¯å·¥å‚æ¨¡å¼ï¼šåˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼ˆnewï¼‰ï¼Œè€Œæ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼šæ‚¨éœ€è¦ä¸€è¾†æ±½è½¦ï¼Œå¯ä»¥ç›´æ¥ä»å·¥å‚é‡Œé¢æè´§ï¼Œè€Œä¸ç”¨å»ç®¡è¿™è¾†æ±½è½¦æ˜¯æ€ä¹ˆåšå‡ºæ¥çš„ï¼Œä»¥åŠè¿™ä¸ªæ±½è½¦é‡Œé¢çš„å…·ä½“å®ç° ä»£ç ä¾‹å­ï¼šå¦‚æœåœ¨ç¨‹åºä¸­éœ€è¦åˆ›å»ºå¾ˆå¤šä¸ªåŒä¸€ç³»åˆ—çš„ç±»ï¼Œæ¯”å¦‚ï¼šåŠ æ³•ç±»å‡æ³•ç±»ä¹˜æ³•ç±»é™¤æ³•ç±»éƒ½å®Œæˆäº†è®¡ç®—(getResult)æ–¹æ³•ï¼Œæˆ–è€…åœ†ç±»æ­£æ–¹å½¢ç±»ä¸‰è§’å½¢ç±»éƒ½å®Œæˆäº†è®¡ç®—é¢ç§¯(getArea)æ–¹æ³•ï¼Œé‚£ä¹ˆå°±æ˜¯åŒä¸€ä¸ªç³»åˆ—çš„ç±»ã€‚è¿™äº›ç±»éƒ½å®ç°äº†ç›¸åŒçš„æ–¹æ³•ï¼Œè¿™æ—¶å€™å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼äº†ã€‚ 2. æ­¥éª¤ æ¥å£/çˆ¶ç±» å› ä¸ºéƒ½å±äºä¸€ç³»åˆ—çš„ç±»ï¼Œæ‰€ä»¥å¯ä»¥æŠ½è±¡å‡ºæ¥å£æˆ–è€…ä¸€ä¸ªçˆ¶ç±»ï¼Œæ˜¯ä¸æ˜¯æŠ½è±¡ç±»éƒ½å¯ä»¥ï¼Œå…³é”®æ˜¯æ˜ç™½è¿™æ˜¯ä¸€ç³»åˆ—ç±»çš„ä¸Šå±‚ 1234567891011121314151617181920212223242526272829303132/*** * è¿™ä¸ªç±»æ˜¯æ‰€æœ‰è¿ç®—ç±»çš„çˆ¶ç±» æ‹¥æœ‰è¿ç®—çš„åŸºæœ¬å±æ€§ */public class Operation { private double numberA; private double numberB; public double getNumberA() { return numberA; } public void setNumberA(double numberA) { this.numberA = numberA; } public double getNumberB() { return numberB; } public void setNumberB(double numberB) { this.numberB = numberB; } /** * @return è®¡ç®—çš„ç»“æœ * @throws Exception è¿ç®—æ—¶çš„å¼‚å¸¸ */ public double GetResult() throws Exception { double result = 0; return result; }} ä¸€å †åŒä¸€ç³»åˆ—çš„ç±»ï¼Œéƒ½ç»§æ‰¿/å®ç°äº†ä¸Šé¢çš„çˆ¶ç±»/æ¥å£ 123456789/** * åŠ æ³•ç±» */public class OperationAdd extends Operation { @Override public double GetResult() { return getNumberA() + getNumberB(); }} 123456789/** * å‡æ³•ç±» */public class OperationSub extends Operation { @Override public double GetResult() { return getNumberA()-getNumberB(); }} 123456789/** * ä¹˜æ³•ç±» */public class OperationMul extends Operation { @Override public double GetResult() { return getNumberA()*getNumberB(); }} 123456789101112/*** * é™¤æ³•ç±» */public class OperationDiv extends Operation { @Override public double GetResult() throws Exception { if (getNumberB() == 0) { throw new Exception(\"é™¤æ•°ä¸èƒ½ä¸º 0 !\"); } return getNumberA() / getNumberB(); }} æ­¤æ—¶ç»“æ„ï¼ˆideaç”Ÿæˆçš„å›¾æ˜¯æœ‰ç‚¹å¤æ‚ï¼Œçœ‹ä¸€æ¡çº¿å°±å¤Ÿäº†ï¼‰ å·¥å‚ç±»ï¼Œåˆ°è¿™é‡Œå°±çŸ¥é“ä¸ºä»€ä¹ˆè¦æŠ½è±¡å‡ºæ¥å£/çˆ¶ç±»äº†ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸çŸ¥é“ç”¨æˆ·æƒ³åˆ›å»ºåŠ æ³•è¿˜æ˜¯å‡æ³•ï¼Œä½†æ˜¯è¿”å›å€¼ä¸€å®šæ˜¯ä¸€ä¸ªç»Ÿä¸€çš„Operationç±»ã€‚å°±åƒä¹°è½¦çš„ä¾‹å­ä¸€æ ·ï¼Œè™½ç„¶ä¸çŸ¥é“å®¢æˆ·ä¹°ä»€ä¹ˆè½¦ï¼Œä½†æ¥äº†è½¦å‚ï¼Œä¹°çš„ä¸€å®šæ˜¯è½¦è€Œä¸æ˜¯é£æœºã€‚ 123456789101112131415161718192021222324/** * ç®€å•å·¥å‚ç±» å«æœ‰ä¸€ä¸ªé™æ€æ–¹æ³• * ç”¨äºæ ¹æ®è¿ç®—ç¬¦è¿”å›å…·ä½“çš„è¿ç®—å®ä¾‹ */public class OperationFactory { public static Operation createOperate(String operate) { Operation operation = null; switch (operate) { case \"+\": operation = new OperationAdd(); break; case \"-\": operation = new OperationSub(); break; case \"*\": operation = new OperationMul(); break; case \"/\": operation = new OperationDiv(); break; } return operation; }} è°ƒç”¨ 12345678910public class Main { public static void main(String[] args) throws Exception { Operation operation = OperationFactory.createOperate(\"+\"); operation.setNumberA(1); operation.setNumberB(2);// è¿™é‡Œå…¶å®æ˜¯ç”±Operationå…·ä½“çš„å­ç±»å®ç°çš„å…·ä½“åŠŸèƒ½ double result = operation.GetResult(); System.out.println(result); }} æœ€ç»ˆçš„ç»“æ„ä¸ºï¼ˆæˆ‘pè°ƒäº†å¤šä½™çš„çº¿ï¼‰ 3. ä¼˜åŒ–æˆ‘ä»¬è‡ªå·±å†™çš„switchå‡½æ•°ï¼Œæ‰€ä»¥å½“ç„¶çŸ¥é“æœ‰å“ªäº›æƒ…å†µã€‚ä½†æ˜¯å‡å¦‚æˆ‘ä»¬è¿™ä¸ªç¨‹åºå†™çš„å¾ˆå¤§äº†ï¼Œç”šè‡³å†™æˆäº†æ¡†æ¶ä¾›åˆ«äººä½¿ç”¨ã€‚ ä»ç”¨æˆ·çš„è§’åº¦æ¥è¯´ï¼šä»”ç»†çœ‹mainå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨å†™çš„æ—¶å€™ä¼ äº†â€+â€è¿™ä¸ªç¬¦å·ï¼Œå¯æ˜¯ç”¨æˆ·æ€ä¹ˆçŸ¥é“switché‡Œé¢æœ‰+å‘¢ï¼ˆè¦ä¹ˆç”¨æˆ·æŸ¥çœ‹æ‰‹å†Œæ–‡æ¡£ï¼Œè¦ä¹ˆç”¨æˆ·æŸ¥çœ‹æºç ï¼‰ï¼Œè¿™å°±å¾ˆéº»çƒ¦ï¼Œå¦‚æœå¯ä»¥ç”¨ä¸€ä¸ªæšä¸¾ä¾›ç”¨æˆ·é€‰æ‹©å°±å¤ªå¥½äº† 1234567//ä¾›ç”¨æˆ·é€‰æ‹©çš„æšä¸¾å˜é‡public enum OpType { ADD, SUB, MUL, DIV} å·¥å‚ç±»è¦ä¿®æ”¹çš„åœ°æ–¹ æ•ˆæœ å¦å¤–ï¼Œå°±æ˜¯å­¦ä¹ springçš„æ—¶å€™æåˆ°è¿‡BeanFactoryæœ‰ä¸€ç§getBeanæ–¹å¼ï¼ˆç‚¹å‡»ç©ºé™ï¼‰ï¼Œä¹Ÿæ˜¯é‡‡ç”¨äº†å·¥å‚æ¨¡å¼ï¼Œä¸è¿‡springæƒ…å†µæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä¸çŸ¥é“ç”¨æˆ·ä¼šåˆ›å»ºä»€ä¹ˆç±»ï¼Œä¹Ÿå°±æ²¡åŠæ³•switchï¼Œå› æ­¤é‡‡ç”¨çš„æ˜¯åå°„çš„æ–¹å¼ï¼Œé‚£ä¹ˆå†™æ³•å°±æ˜¯è¿™ä¸ªæ ·å­ 12345678910111213public class OperationFactory { public static &lt;T&gt; T createOperate(Class&lt;? extends T&gt; clazz) { T obj = null; try { obj = (T) Class.forName(clazz.getName()).newInstance(); } catch (Exception e) { e.printStackTrace(); } return obj; }} mainæ–¹æ³•çš„ä¿®æ”¹(å½“ç„¶å¦‚æœè¿˜æƒ³é‡‡ç”¨æšä¸¾ç±»ä¼˜åŒ–çš„è¯ï¼Œæšä¸¾ç±»ä¸­å°±è¦å­˜ç±»åäº†ã€‚) 12345678910public class Main { public static void main(String[] args) throws Exception { Operation operation = OperationFactory.createOperate(OperationAdd.class); //å°±æ”¹äº†è¿™é‡Œ operation.setNumberA(1); operation.setNumberB(2);// è¿™é‡Œå…¶å®æ˜¯ç”±Operationå…·ä½“çš„å­ç±»å®ç°çš„å…·ä½“åŠŸèƒ½ double result = operation.GetResult(); System.out.println(result); }} ä½¿ç”¨åå°„çš„å¥½å¤„æ˜¯ä¸éœ€è¦å†™å¾ˆå¤šifï¼Œswitchï¼Œä½†æ˜¯åå°„ä¼šé™ä½æ•ˆç‡ï¼Œåªæ˜¯å‘Šè¯‰å¤§å®¶springé‡‡ç”¨è¿‡è¿™ç§æ–¹å¼ï¼ŒçŸ¥é“ä¸€ä¸‹å³å¯ã€‚ å‚è€ƒé“¾æ¥ https://blog.csdn.net/qq_41113081/article/details/88170881 https://www.runoob.com/design-pattern/factory-pattern.html","link":"/designpattern/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"},{"title":"ç»“æŸç§‹æ‹›ï¼Œä¸€ç‚¹æ„Ÿæƒ³","text":"è¿‘æ®µæ—¶é—´äº‹ä»¶[DONE] åŒç›¾offer ç¥å·ä¿¡æ¯offer ç½‘æ˜“offer æ¯•è®¾é€‰é¢˜ [TODO] springcloudå’ŒçŸ¥è¯† ç½‘æ˜“çŸ¥è¯†å‡†å¤‡ æ¯•è®¾ ç§‹æ‹›æ„Ÿè¨€ç§‹æ‹›ç»“æŸäº†ï¼Œæˆªæ­¢ç›®å‰æ”¶åˆ°äº†æµ™æ±Ÿå¤§åï¼ŒåŒç›¾ç§‘æŠ€ï¼Œç½‘æ˜“ç­‰offerã€‚è™½ç„¶æ¯”ä¸ä¸Šç­ä¸Šçš„å¤§ä½¬ä»¬ï¼ˆæˆ‘æ„¿ç§°è½¯ä»¶å“è¶Š1171ä¸ºç½‘æ˜“äººæ‰å­µåŒ–åŸºåœ°ï¼‰ï¼Œä½†æ˜¯ä¹Ÿè¿œè¿œè¶…è¿‡äº†æˆ‘çš„é¢„æœŸã€‚æœ€åé€‰çš„æ˜¯ç½‘æ˜“ï¼Œå¹¿å·ï¼Œå¤§å‚ï¼Œå¯ä»¥è¯´æ˜¯éå¸¸æ»¡æ„çš„offerã€‚ å·¥ä½œå²—ä½æ˜¯å¼•æ“æŠ€æœ¯æ”¯æŒï¼Œæˆ‘é—®è¿‡å¾ˆå¤šäººç”šè‡³æ˜¯ç½‘æ˜“çš„å†…éƒ¨äººå‘˜ï¼ŒçŸ¥é“ä»–æ˜¯ä¸€ä¸ªéçº¯æŠ€æœ¯çš„å²—ä½ï¼Œæ›´å¤šçš„æ˜¯éœ€æ±‚æ²Ÿé€šï¼Œå¶å°”ä¼šæœ‰å¼€å‘å·¥ä½œï¼Œæˆ‘æ„¿æ„å°è¯•ï¼Œä¸»è¦åŸºäºä»¥ä¸‹å‡ ç‚¹ã€‚ è™½ç„¶ä¸æ˜¯çº¯æŠ€æœ¯å²—ï¼Œä½†ä»»ç„¶å±äºæŠ€æœ¯ç±»å²—ä½ï¼šleaderé¢çš„æ—¶å€™æˆ‘æ›¾é—®è¿‡leaderå¯¹å²—ä½çš„çœ‹æ³•ï¼Œä»–ç»™å‡ºçš„ç­”æ¡ˆæ˜¯â€œå¯èƒ½ä¸ä¼šå¤ªæ·±å…¥ï¼Œä½†æ˜¯æŠ€æœ¯è‚¯å®šæ˜¯ä¸ä¼šè¯´è½ååŒé¾„äººâ€ï¼Œè¯´å®è¯æˆ‘æ ¹æœ¬ä¸çŸ¥é“è¿™ä¸ªå²—ä½å‰æ™¯å¦‚ä½•ï¼Œæˆ‘çš„æœªæ¥ä¼šå¾€ä½•å¤„å‘å±•ï¼Œä½†æ˜¯è¿™å¥è¯ç»™äº†æˆ‘è¶³å¤Ÿçš„ä¿¡å¿ƒ javaæ˜¯å·ç‹å­ï¼šjavaå°¤å…¶æ˜¯webæ–¹å‘ï¼Œå¯ä»¥è¯´æ˜¯å¾ˆå·äº†ï¼Œç°åœ¨æœ¬ç§‘åº”å±Šä¸ä¼šç‚¹åˆ†å¸ƒå¼å¾®æœåŠ¡éƒ½å¾ˆéš¾æ‰¾å·¥ä½œäº†ã€‚ç½‘æ˜“è¿™è¾¹åº”è¯¥æ˜¯pythonå±…å¤šï¼Œæˆ‘æœ‰æ”¹å˜çš„æƒ³æ³•å¹¶ä¸”æ„¿æ„æ‹¥æŠ±å˜åŒ–ã€‚javawebæˆ‘å·²ç»å†™çš„æœ‰ç‚¹åŒå€¦ï¼Œè¿™æ¬¡æ¯•è®¾é¢˜ç›®æ˜¯FreeWorkæ‹›è˜å¹³å°ï¼Œæˆ‘ä¼šç”¨ä¸Šæ‰€å­¦çš„æœ€æ·±å…¥çš„çŸ¥è¯†å®ç°ï¼Œå¹¶æ‰“ç®—è¿›è¡Œé•¿ä¹…çš„ç»´æŠ¤ï¼Œä»¥åå¯¹äºjavaå¯èƒ½å°±æ˜¯å…´è¶£ä½¿ç„¶ï¼Œå¶å°”å­¦ä¹ æ–°çš„çŸ¥è¯†å°±å¾€é¡¹ç›®é‡ŒåŠ  æˆ‘é€‚åˆæ²Ÿé€šï¼šå°±æˆ‘è€Œè¨€ï¼Œæ¯”è¾ƒæ²™é›•ï¼Œä¸ºäººä¹è§‚å¼€æœ—ã€‚æˆ‘è®¤çœŸæƒ³äº†æƒ³ï¼Œå¤§å¤šæ•°æŠ€æœ¯äººå‘˜è‚¯å®šæ˜¯å–œæ¬¢é’»ç ”æŠ€æœ¯çš„ï¼Œæˆ‘ä¹Ÿä¸ä¾‹å¤–ã€‚ä½†æ˜¯æˆ‘ä¹ŸçŸ¥é“æŠ€æœ¯æœ¬èº«æ˜¯æ²¡æœ‰ä»·å€¼çš„ï¼Œå¤šçœ‹çœ‹ï¼Œå¤šè®¤è¯†ç‚¹äººï¼Œå¤šä¸äººæ‰“äº¤é“ï¼Œè®©æŠ€æœ¯æˆä¸ºè‡ªå·±çš„é™„å±å·¥å…·ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹© ç¦åˆ©ç¡®å®å¥½ï¼šè¯šç„¶ï¼Œç½‘æ˜“ä½œä¸ºä¸€å®¶å¤§å‚ï¼Œè™½ç„¶ç»™æˆ‘å¼€çš„å¾ˆä½ï¼Œä½†ä¹Ÿæ˜¯æˆ‘ç›®å‰æ”¶åˆ°æœ€é«˜çš„äº†â€¦ ç»™å­¦å¼Ÿå­¦å¦¹ä»¬çš„ä¸€ç‚¹ç§‹æ‹›å»ºè®® ç§‹æ‹›å’Œå­¦ä¹ æ˜¯ä¸¤å›äº‹ã€‚ä½ å­¦çš„å†å¥½ï¼Œè¯´ä¸å®šè¿æ°”ä¸å¥½ç¬”è¯•æŸä¸€é“ç®—æ³•é¢˜ä½ å°±æ˜¯åšä¸å‡ºæ¥ã€‚æŠ€æœ¯å¯èƒ½å·®é‚£ä¹ˆä¸€ç‚¹ï¼Œä½†æ˜¯è¿æ°”æœ‰ç‚¹å¥½ï¼Œä½ å°±è¿›å»äº†ã€‚ ä¸è¦å¤ªè¿‡äºé’»ç ”ä¸šåŠ¡ä»£ç å’Œæ¡†æ¶ï¼Œè¶Šæ˜¯å¤§å‚è¶Šæ³¨é‡åŸºç¡€ï¼Œæ•´ä¸ªç§‹æ‹›ï¼Œé—®çš„é¢‘ç‡å¦‚ä¸‹ï¼šæ•°æ®ç»“æ„å’Œç®—æ³•&gt;mysql&gt;ç½‘ç»œ&gt;jvm&gt;redis&gt;javaè¯­æ³•&gt;æ“ä½œç³»ç»Ÿã€‚ç®—æ³•ã€mysqlã€jvmå¿…è€ƒï¼Œredisç®€å†å†™äº†å¿…é—®ï¼Œå¤§å‚ï¼šç½‘ç»œå’Œæ“ä½œç³»ç»Ÿé—®çš„å¤šï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½åªé—®ä¸€é¢˜ä½†æ˜¯æ¯ä¸€é¢éƒ½ä¼šé—® æˆ‘è¯´è¯´æ¯ä¸€ç‚¹å¦‚ä½•å‡†å¤‡ ç®—æ³•ï¼šç‰›å®¢å’Œå‰‘æŒ‡offerã€‚å°±é¢è¯•æ¥è¯´ï¼ŒåŠ›æ‰£ä½ å¯ä»¥ä¸åˆ·ï¼Œä½†æ˜¯ç‰›å®¢å’Œå‰‘æŒ‡offerä½ å¿…åˆ·ï¼Œä¸ä¼šéƒ½è¦é»˜å‡ºæ¥é‚£ç§ã€‚ç¬”è¯•çš„è¯å…ˆçœ‹labuladongï¼Œå†åšåŠ›æ‰£ï¼ŒåŠ›æ‰£çš„è¯æœ‰1000å¤šé“å¶å°”åˆ·åˆ·å°±å¯ä»¥äº† é¢ç»ï¼šé¢ç»å¿…ç„¶æ˜¯è¦çœ‹çš„ï¼Œä¸‰å¤ªå­æ•–ä¸™ï¼Œé©¬å£«å…µã€‚å°¤å…¶æ˜¯æ•–ä¸™çš„æ–‡ç« ï¼Œmysqlï¼Œjvmï¼Œredisä»€ä¹ˆéƒ½æœ‰ï¼Œé‡åˆ°ä¸æ‡‚çš„å°±ç™¾åº¦æŸ¥ï¼Œå¤ªç»†çš„ä¸œè¥¿ä»¥åå­¦ï¼Œå†æ¬¡å¼ºè°ƒï¼Œå…ˆç§‹æ‹›å†å­¦ä¹  ç®€å†ï¼šwonderCVï¼Œé¡¹ç›®ä¸è¦å¤ªå¤šï¼Œä¸¤ä¸‰ä¸ªå°±å¤Ÿäº†ï¼Œå®ä¹ å¯ä»¥åŠ åˆ†ï¼Œç”šè‡³æœ‰ç‚¹å…³é”®ï¼Œä¸ç›¸å…³çš„ä¸œè¥¿å°‘å†™ï¼ˆå­¦ç”Ÿä¼šï¼Ÿï¼‰åæ­£ä¸èƒ½è¶…è¿‡æŠ€æœ¯éƒ¨åˆ† åƒä¸‡ä¸è¦å®³æ€•è§‰å¾—è‡ªå·±æŠ€æœ¯è¿˜ä¸å¤Ÿï¼šæˆ‘çœ‹åˆ°è¿™ä¸ªæ—¶å€™è¿˜æœ‰äººåœ¨å‡†å¤‡ç®€å†ä¸Šçš„é¡¹ç›®çš„ï¼Œä¸šåŠ¡ä»£ç å¤Ÿäº†çœŸçš„å¤Ÿäº†ï¼Œéƒ½è¿™æ—¶å€™äº†åˆ«æspringäº†ï¼Œè‡³å°‘åœ¨æˆ‘æ•´ä¸ªç§‹æ‹›ä¸­æ²¡æœ‰è¢«é—®è¿‡ä¸€ç‚¹ç‚¹springç›¸å…³çš„ï¼ˆiocå’Œaopä¹‹ç±»ï¼‰ï¼Œè€Œä¸”è¿™ä¸ªæœ¬æ¥å°±æ˜¯å¾ˆæŠ½è±¡çš„ä¸œè¥¿ï¼Œè¯´ä¸å‡ºä¸ªæ‰€ä»¥ç„¶æ¥ï¼Œå¤§å®¶çš„å›ç­”éƒ½ç±»ä¼¼ï¼Œæ‰€ä»¥ç°åœ¨é¢è¯•å®˜ä¹Ÿä¸é—®äº† ç½‘ç»œï¼šæˆ‘æ˜¯ç›´æ¥æ‹¿è¯¾å ‚ä¸Šçš„è€å¸ˆçš„pptè¯¾ä»¶å­¦ä¹ çš„ æˆ‘ä¸æ˜¯å«å¤§å®¶ä¸è¦å­¦ä¹ åªèƒŒé¢ç»ï¼Œä¹Ÿä¸æ˜¯æ•™å¤§å®¶æŠ•æœºå–å·§ã€‚å­¦ä¹ è¿˜æ˜¯è¦å­¦ä¹ çš„ï¼Œåªæ˜¯å¦‚æœè¿é¢ç»ä¸Šè¿™äº›åŸºç¡€çš„æ¦‚å¿µéƒ½æ²¡æœ‰ææ¸…æ¥šï¼Œå­¦ä¹Ÿå®¹æ˜“èµ°åã€‚ç‰¹æ®Šæ—¶æœŸå…ˆèƒŒèƒŒé¢ç»ï¼Œå°±å½“ä½œå¤ä¹ åŸºç¡€çŸ¥è¯†äº†è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œæ ¡æ‹›å…ˆä¸Šå²¸å†ç»§ç»­æ·±å…¥å­¦ä¹ ä¹Ÿä¸è¿Ÿã€‚æœ€åï¼Œç¥å¤§å®¶éƒ½èƒ½æ‹¿åˆ°è‡ªå·±å¿ƒä»ªçš„offer","link":"/life/%E7%BB%93%E6%9D%9F%E7%A7%8B%E6%8B%9B%EF%BC%8C%E4%B8%80%E7%82%B9%E6%84%9F%E6%83%B3/"},{"title":"è®¡ç®—å¹³æ–¹æ ¹-ç‰›é¡¿è¿­ä»£æ³•","text":"è¿™æ˜¯2019/09/06çš„ä¸€ç¯‡ç¬”è®°ï¼Œç°åœ¨è¡¥ä¸Šã€‚è¿™æ˜¯ã€Šç®—æ³•ã€‹ç¬¬å››ç‰ˆä¸­æåˆ°çš„ï¼Œå¦‚ä½•å®ç°sqrt(x)ï¼Œå½“æ—¶å’Œæ–‡å¾·åœ¨å®éªŒå®¤é‡Œé¢ä¸€èµ·ç ”ç©¶äº†ä¸€ä¸‹ã€‚ä»Šå¤©æ·±ä¿¡æœç¬”è¯•åˆé‡åˆ°äº†ç®€å•ç‰ˆçš„é¢˜ç›®ã€‚ æ•´æ•°å‹æ”¾åœ¨ä»¥å‰ï¼Œåªèƒ½æ±‚æ•´æ•°çš„å¹³æ–¹æ ¹ï¼š 12345public int sqrt(int n){ for(int i = 0; i * i &lt; n; i++){ if(i * i == n) return i; //æˆ–è€…æƒ³è¦è®°å½•i * i &lt;= n }} è‡³äºæ·±ä¿¡æœä¹Ÿæ˜¯ç®€åŒ–åˆ°intï¼Œç¬”è¯•å˜›â€¦æˆ‘ç›´æ¥ return (int)Math.sqrt(n); æµ‹è¯•ç”¨ä¾‹å½“ç„¶æ˜¯100%ï¼Œèƒ½ä¸èƒ½æ‹¿åˆ°åˆ†æˆ‘å°±ä¸çŸ¥é“äº†ï¼Œç¬”è¯•å˜›è°ç®¡è¿™ä¸ªï¼Œä»–ä¹Ÿæ²¡è¯´ä¸èƒ½ç”¨ï¼Œæ—¶é—´é‡è¦å“ˆ å°æ•°å‹-ç‰›é¡¿è¿­ä»£æ³•å†æ¥è¯´ä¸€ä¸‹æ­£ç»çš„sqrtå®ç°ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæ˜¯å°æ•°ï¼Œä½ å°±ä¸çŸ¥é“æ¯æ¬¡è¿­ä»£åŠ å¤šå°‘äº†ï¼Œ0.01ï¼Ÿè¿˜æ˜¯0.001ï¼Ÿéƒ½ä¸å¤Ÿç²¾ç¡®ã€‚ä¹¦ä¸­æåˆ°äº†ç‰›é¡¿è¿­ä»£æ³•ï¼š å‡è®¾è¦æ±‚âˆš2çš„å€¼ï¼Œé‚£ä¹ˆæ„é€ f(x) = xÂ² - 2ï¼Œ å½“y=0æ—¶ï¼Œä¸xè½´çš„äº¤ç‚¹å°±æ˜¯âˆš2(çº¢ç‚¹) éšæœºå–ä¸€ç‚¹pï¼Œæ±‚å¾—f(p)ï¼Œæ–œç‡ä¸º2p ç‚¹æ–œå¼æ„é€ (y â€“ y0) = k(x â€“ x0)å¾— y â€“ f(p) = 2p(x - p) ä»¤y = 0ï¼Œæ±‚å¾—ç›´çº¿ä¸yè½´äº¤ç‚¹å¤„xçš„å€¼x = p â€“ f(p)/2p è¿™ä¸€ç‚¹ä¼šæ¯”(4, 0)æ›´æ¥è¿‘çº¢ç‚¹ï¼Œäºæ˜¯å–p = è¿™ä¸€ç‚¹å¹¶é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œæ…¢æ…¢é€¼è¿‘çº¢ç‚¹å¤„xçš„å€¼ å°†f(p)åŒ–å¼€æ¥ï¼šx = p â€“ (pÂ² - 2)/2p ä¸€èˆ¬åŒ–ï¼Œè‹¥pä¸ºxä¸Šä»»æ„ä¸€ç‚¹ï¼Œxåˆ™ä¸ºä¸‹ä¸€ä¸ªé è¿‘ç‚¹ å³next_x = x â€“ (xÂ² - 2) / 2xï¼ŒåŒ–ç®€å¾—next_x = (x + 2/x) / 2 åœ¨ä»£ç ä¸­åˆ™ç›´æ¥éƒ½è¡¨ç¤ºä¸ºxï¼Œå³x = (x + 2/x) / 2 å†ä¸€èˆ¬åŒ–ï¼Œæ±‚æ ¹å·cçš„å€¼ï¼šx = (x + c/x) / 2 é€¼è¿‘ä¸ª7 8æ¬¡å°±å·²ç»å¾ˆæ¥è¿‘âˆš2äº† Javaå®ç°é€¼è¿‘ä¸ª7 8æ¬¡è¿™ä¸ªè¯´æ³•å¤ªå®½æ³›äº†ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªèƒ½æ¥å—çš„è¯¯å·®ç¨‹åº¦ï¼Œæ¯”å¦‚err = 1e-15 123456789public double sqrt(double c){ if(c &lt; 0) return Double.NaN; //å°äº0æ˜¯æ²¡æœ‰å¹³æ–¹æ ¹çš„ double err = 1e-15; //å› ä¸ºæ˜¯é€¼è¿‘ï¼Œâˆš2æ˜¯æ— ç†æ•°ï¼Œéœ€è¦ç»“æŸæ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯èƒ½æ¥å—çš„è¯¯å·®ç¨‹åº¦,å¦åˆ™æ°¸è¿œå¾ªç¯ double res = c; //ä¸€å¼€å§‹å–p = cï¼Œå› ä¸ºâˆš2ä¸€å®š&lt;2 while(Math.abs(res - c / res) &gt; err * res){ //ç»“æŸæ¡ä»¶: abs(resÂ² - c) &lt;= err res = (res + c / res) / 2.0; //å‰é¢æ¨å¯¼çš„å…¬å¼ } return res;} psï¼šè¿™æ˜¯ä»€ä¹ˆï¼Ÿå½“æ—¶çœ‹è¿™ä¸ªçš„æ—¶å€™æˆ‘å¿½ç„¶å‘ç°ï¼Œè¿™ä¸å°±ç±»ä¼¼bpç¥ç»ç½‘ç»œçš„æ¢¯åº¦ä¸‹é™å˜›ï¼ï¼ï¼ï¼ç¥ç»ç½‘ç»œçš„é‚£äº›å¬èµ·æ¥é«˜å¤§ä¸Šçš„åå‘ä¼ æ’­ï¼Œæ¢¯åº¦ä¸‹é™ã€‚ä¸å°±æ­£æ˜¯å’Œè¿™ä¸ªä¸€æ ·æ±‚å¯¼é€¼è¿‘çš„æ€æƒ³å—ï¼Œè¿˜ä¸å¦‚ä»è¿™ä¸ªç‰›é¡¿è¿­ä»£æ³•å¼€å§‹è®²è§£å‘¢ï¼Œæ›´åŠ ç›´è§‚ã€‚","link":"/algorithms/%E8%AE%A1%E7%AE%97%E5%B9%B3%E6%96%B9%E6%A0%B9-%E7%89%9B%E9%A1%BF%E8%BF%AD%E4%BB%A3%E6%B3%95/"},{"title":"çº¿ç¨‹å’Œçº¿ç¨‹æ± ","text":"1. çº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«è¿›ç¨‹ï¼šèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œæ˜¯ç¨‹åºï¼ˆç¡¬ç›˜ä¸Šçš„QQ.exeï¼‰çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ¯”å¦‚åŒå‡»QQ.exeï¼Œç¨‹åºå¯åŠ¨ï¼Œè¿›å…¥å†…å­˜ çº¿ç¨‹ï¼šç¨‹åºæ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œæ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œæ¯”å¦‚è½¯ä»¶ç®¡å®¶å¯ä»¥åŒæ—¶æ¸…ç†åƒåœ¾å’Œæ‰«æç—…æ¯’ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹ è¿›ç¨‹æœ‰è‡ªå·±çš„ç‹¬ç«‹åœ°å€ç©ºé—´ï¼Œæ¯å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œç³»ç»Ÿå°±ä¼šä¸ºå®ƒåˆ†é…åœ°å€ç©ºé—´ï¼Œå»ºç«‹æ•°æ®è¡¨æ¥ç»´æŠ¤ä»£ç æ®µã€å †æ ˆæ®µå’Œæ•°æ®æ®µã€‚å¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å †å’Œæ–¹æ³•åŒºèµ„æºï¼Œä½†æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œåˆ›å»º/åˆ‡æ¢çº¿ç¨‹çš„å¼€é”€æ¯”è¿›ç¨‹å° çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ›´æ–¹ä¾¿ï¼ŒåŒä¸€è¿›ç¨‹ä¸‹çš„çº¿ç¨‹å…±äº«å…¨å±€å˜é‡ã€é™æ€å˜é‡ç­‰æ•°æ®ï¼Œè€Œè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡éœ€è¦ä»¥é€šä¿¡çš„æ–¹å¼ï¼ˆIPC)è¿›è¡Œ(ç®¡é“ï¼Œä¿¡å·ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå…±äº«å†…å­˜ï¼Œå¥—æ¥å­—ç­‰é€šä¿¡æœºåˆ¶)ã€‚ä¸è¿‡å¦‚ä½•å¤„ç†å¥½åŒæ­¥ä¸äº’æ–¥æ˜¯ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºçš„éš¾ç‚¹ã€‚ 2. çº¿ç¨‹é—´é€šä¿¡åŒä¸€è¿›ç¨‹ä¸‹çš„çº¿ç¨‹è™½ç„¶èƒ½å…±äº«å…¨å±€å˜é‡ã€é™æ€å˜é‡ç­‰æ•°æ®æ˜¯æ²¡é”™ï¼Œä½†æ˜¯ç”±äºJMMçš„é™åˆ¶ï¼Œä¸€ä¸ªçº¿ç¨‹æ”¹å˜å…¨å±€å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹å¹¶ä¸èƒ½æ„ŸçŸ¥åˆ°ï¼Œå› ä¸ºJMMä¸­æœ‰è§„å®šï¼Œçº¿ç¨‹ä¸èƒ½ç›´æ¥æ“ä½œä¸»å­˜ä¸­çš„å€¼ï¼Œåªèƒ½æ‹·è´åˆ°è‡ªå·±çš„å·¥ä½œå†…å­˜å†è¿›è¡Œæ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´å¤§å®¶éƒ½çŸ¥é“æœ‰ä¸ªprivate int a = 5ï¼Œä½†æ˜¯çº¿ç¨‹ä¸€å°†å…¶æ”¹ä¸º6åçº¿ç¨‹äºŒä¸èƒ½å¾—çŸ¥ã€‚è¿™ä¸ªé—®é¢˜æˆ‘ä»¬åœ¨volatileä¸€æ–‡ä¸­æ¢ç©¶è¿‡ã€‚æ˜¯çš„ï¼Œvolatileå°±æ˜¯çº¿ç¨‹é—´é€šä¿¡çš„å…¶ä¸­ä¸€ç§æ–¹å¼ã€‚ volatile ä½¿ç”¨Objectç±»çš„wait() å’Œ notify() / notifyAll() æ–¹æ³• JUCä¸‹çš„ä¸€äº›åŒ…ï¼ˆCountDownLatch/ReentrantLock/LockSupportï¼‰çš„é”æœºåˆ¶ 3. çº¿ç¨‹çš„çŠ¶æ€ç½‘ä¸Šè¯´çš„å¾ˆä¹±ï¼Œåˆ°å¤„ä¹±ä¼ ï¼Œè¿˜åˆ†ä»€ä¹ˆrunnableå’Œrunningä»€ä¹ˆçš„ï¼Œå¾ˆå¤šéƒ½æ˜¯é”™çš„ï¼æœ¬ç€ä¸é€ è°£ä¸ä¿¡è°£ä¸ä¼ è°£çš„åŸåˆ™ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æºç å°±çŸ¥é“äº† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364public enum State { /** * Thread state for a thread which has not yet started. */ NEW, /** * Thread state for a runnable thread. A thread in the runnable * state is executing in the Java virtual machine but it may * be waiting for other resources from the operating system * such as processor. */ RUNNABLE, /** * Thread state for a thread blocked waiting for a monitor lock. * A thread in the blocked state is waiting for a monitor lock * to enter a synchronized block/method or * reenter a synchronized block/method after calling * {@link Object#wait() Object.wait}. */ BLOCKED, /** * Thread state for a waiting thread. * A thread is in the waiting state due to calling one of the * following methods: * &lt;ul&gt; * &lt;li&gt;{@link Object#wait() Object.wait} with no timeout&lt;/li&gt; * &lt;li&gt;{@link #join() Thread.join} with no timeout&lt;/li&gt; * &lt;li&gt;{@link LockSupport#park() LockSupport.park}&lt;/li&gt; * &lt;/ul&gt; * * &lt;p&gt;A thread in the waiting state is waiting for another thread to * perform a particular action. * * For example, a thread that has called &lt;tt&gt;Object.wait()&lt;/tt&gt; * on an object is waiting for another thread to call * &lt;tt&gt;Object.notify()&lt;/tt&gt; or &lt;tt&gt;Object.notifyAll()&lt;/tt&gt; on * that object. A thread that has called &lt;tt&gt;Thread.join()&lt;/tt&gt; * is waiting for a specified thread to terminate. */ WAITING, /** * Thread state for a waiting thread with a specified waiting time. * A thread is in the timed waiting state due to calling one of * the following methods with a specified positive waiting time: * &lt;ul&gt; * &lt;li&gt;{@link #sleep Thread.sleep}&lt;/li&gt; * &lt;li&gt;{@link Object#wait(long) Object.wait} with timeout&lt;/li&gt; * &lt;li&gt;{@link #join(long) Thread.join} with timeout&lt;/li&gt; * &lt;li&gt;{@link LockSupport#parkNanos LockSupport.parkNanos}&lt;/li&gt; * &lt;li&gt;{@link LockSupport#parkUntil LockSupport.parkUntil}&lt;/li&gt; * &lt;/ul&gt; */ TIMED_WAITING, /** * Thread state for a terminated thread. * The thread has completed execution. */ TERMINATED;} 6ç§ï¼ï¼æ²¡æœ‰ä»€ä¹ˆRunningçŠ¶æ€ï¼ï¼ï¼è®°å¥½äº†ï¼ï¼ wait()å’Œsleep()çš„åŒºåˆ«å®ƒä»¬éƒ½å¯ä»¥è®©çº¿ç¨‹é˜»å¡ã€‚ä¸åŒçš„æ˜¯ï¼š waitæ–¹æ³•å¿…é¡»åœ¨synchronizedä¿æŠ¤çš„ä»£ç ä¸­ä½¿ç”¨ï¼Œè€Œ sleep æ–¹æ³•å¹¶æ²¡æœ‰è¿™ä¸ªè¦æ±‚ åœ¨åŒæ­¥ä»£ç ä¸­æ‰§è¡Œ sleep æ–¹æ³•æ—¶ï¼Œå¹¶ä¸ä¼šé‡Šæ”¾monitoré”ï¼Œä½†æ‰§è¡Œwaitæ–¹æ³•æ—¶ä¼šä¸»åŠ¨é‡Šæ”¾monitoré” sleepæ–¹æ³•ä¸­ä¼šè¦æ±‚å¿…é¡»å®šä¹‰ä¸€ä¸ªæ—¶é—´ï¼Œæ—¶é—´åˆ°æœŸåä¼šä¸»åŠ¨æ¢å¤ï¼Œè€Œå¯¹äºæ²¡æœ‰å‚æ•°çš„waitæ–¹æ³•è€Œè¨€ï¼Œæ„å‘³ç€æ°¸ä¹…ç­‰å¾…ï¼Œç›´åˆ°è¢«ä¸­æ–­æˆ–è¢«å”¤é†’æ‰èƒ½æ¢å¤ï¼Œå®ƒå¹¶ä¸ä¼šä¸»åŠ¨æ¢å¤ wait/notify æ˜¯ Object ç±»çš„æ–¹æ³•ï¼Œè€Œ sleep æ˜¯Threadç±»çš„æ–¹æ³• 4. startæ–¹æ³•åˆ°åº•æ˜¯ä»€ä¹ˆä¸ºä»€ä¹ˆè¦è°ƒç”¨startè€Œä¸æ˜¯run 1234567891011121314151617181920212223public synchronized void start() { if (threadStatus != 0) throw new IllegalThreadStateException(); group.add(this); boolean started = false; try { start0(); //å…³é”®å°±æ˜¯è¿™ä¸ªæ–¹æ³• started = true; } finally { try { if (!started) { group.threadStartFailed(this); } } catch (Throwable ignore) { /* do nothing. If start0 threw a Throwable then it will be passed up the call stack */ } }}private native void start0(); //æ˜¯ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œç³»ç»Ÿè°ƒç”¨å¼€äº†ä¸€ä¸ªçº¿ç¨‹ 4. çº¿ç¨‹æ±  é™ä½èµ„æºæ¶ˆè€—ï¼šé‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹ï¼Œé™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯é€ æˆçš„æ¶ˆè€—ã€‚ æé«˜å“åº”é€Ÿåº¦ï¼šå½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦è¦ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œã€‚ æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ã€‚çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œå¦‚æœæ— é™åˆ¶çš„åˆ›å»ºï¼Œä¸ä»…ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œè¿˜ä¼šé™ä½ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§ã€‚ 4.1 çº¿ç¨‹æ± çš„å‚æ•°1234567public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) corePoolSizeï¼šæ ¸å¿ƒçº¿ç¨‹æ•°çº¿ã€‚çº¿ç¨‹æ± ä¸­ä¼šç»´æŠ¤ä¸€ä¸ªæœ€å°çš„çº¿ç¨‹æ•°é‡ï¼Œå³ä½¿è¿™äº›çº¿ç¨‹å¤„ç†ç©ºé—²çŠ¶æ€ï¼Œä»–ä»¬ä¹Ÿä¸ä¼šè¢«é”€æ¯ï¼Œé™¤éè®¾ç½®äº†allowCoreThreadTimeOutã€‚è¿™é‡Œçš„æœ€å°çº¿ç¨‹æ•°é‡å³æ˜¯corePoolSize maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ã€‚ä¸€ä¸ªä»»åŠ¡è¢«æäº¤åˆ°çº¿ç¨‹æ± ä»¥åï¼Œé¦–å…ˆä¼šæ‰¾æœ‰æ²¡æœ‰ç©ºé—²å­˜æ´»çº¿ç¨‹ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¼šç¼“å­˜åˆ°å·¥ä½œé˜Ÿåˆ—ï¼ˆåé¢ä¼šä»‹ç»ï¼‰ä¸­ï¼Œå¦‚æœå·¥ä½œé˜Ÿåˆ—æ»¡äº†ï¼Œæ‰ä¼šåˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œç„¶åä»å·¥ä½œé˜Ÿåˆ—çš„å¤´éƒ¨å–å‡ºä¸€ä¸ªä»»åŠ¡äº¤ç”±æ–°çº¿ç¨‹æ¥å¤„ç†ï¼Œè€Œå°†åˆšæäº¤çš„ä»»åŠ¡æ”¾å…¥å·¥ä½œé˜Ÿåˆ—å°¾éƒ¨ã€‚çº¿ç¨‹æ± ä¸ä¼šæ— é™åˆ¶çš„å»åˆ›å»ºæ–°çº¿ç¨‹ï¼Œå®ƒä¼šæœ‰ä¸€ä¸ªæœ€å¤§çº¿ç¨‹æ•°é‡çš„é™åˆ¶ï¼Œè¿™ä¸ªæ•°é‡å³ç”±maximunPoolSizeæŒ‡å®š keepAliveTimeï¼šä¸€ä¸ªçº¿ç¨‹å¦‚æœå¤„äºç©ºé—²çŠ¶æ€ï¼Œå¹¶ä¸”å½“å‰çš„çº¿ç¨‹æ•°é‡å¤§äºcorePoolSizeï¼Œé‚£ä¹ˆåœ¨æŒ‡å®šæ—¶é—´åï¼Œè¿™ä¸ªç©ºé—²çº¿ç¨‹ä¼šè¢«é”€æ¯ï¼Œè¿™é‡Œçš„æŒ‡å®šæ—¶é—´ç”±keepAliveTimeæ¥è®¾å®š TimeUnitï¼šæ—¶é—´å•ä½ workQueueï¼šå½“æ–°ä»»åŠ¡æ¥çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­å½“å‰è¿è¡Œçš„çº¿ç¨‹æ•°é‡æ˜¯å¦è¾¾åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå¦‚æœè¾¾åˆ°çš„è¯ï¼Œæ–°ä»»åŠ¡å°±ä¼šè¢«å­˜æ”¾åœ¨é˜Ÿåˆ—ä¸­ï¼Œæœ‰å››ç§ä»»åŠ¡é˜Ÿåˆ— â‘ ArrayBlockingQueue åŸºäºæ•°ç»„çš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼ŒæŒ‰FIFOæ’åºã€‚æ–°ä»»åŠ¡è¿›æ¥åï¼Œä¼šæ”¾åˆ°è¯¥é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œæœ‰ç•Œçš„æ•°ç»„å¯ä»¥é˜²æ­¢èµ„æºè€—å°½é—®é¢˜ã€‚å½“çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°é‡è¾¾åˆ°corePoolSizeåï¼Œå†æœ‰æ–°ä»»åŠ¡è¿›æ¥ï¼Œåˆ™ä¼šå°†ä»»åŠ¡æ”¾å…¥è¯¥é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾…è¢«è°ƒåº¦ã€‚å¦‚æœé˜Ÿåˆ—å·²ç»æ˜¯æ»¡çš„ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œå¦‚æœçº¿ç¨‹æ•°é‡å·²ç»è¾¾åˆ°maxPoolSizeï¼Œåˆ™ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚ â‘¡LinkedBlockingQueue åŸºäºé“¾è¡¨çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼ˆå…¶å®æœ€å¤§å®¹é‡ä¸ºInterger.MAXï¼‰ï¼ŒæŒ‰ç…§FIFOæ’åºã€‚ç”±äºè¯¥é˜Ÿåˆ—çš„è¿‘ä¼¼æ— ç•Œæ€§ï¼Œå½“çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°é‡è¾¾åˆ°corePoolSizeåï¼Œå†æœ‰æ–°ä»»åŠ¡è¿›æ¥ï¼Œä¼šä¸€ç›´å­˜å…¥è¯¥é˜Ÿåˆ—ï¼Œè€Œä¸ä¼šå»åˆ›å»ºæ–°çº¿ç¨‹ç›´åˆ°maxPoolSizeï¼Œå› æ­¤ä½¿ç”¨è¯¥å·¥ä½œé˜Ÿåˆ—æ—¶ï¼Œå‚æ•°maxPoolSizeå…¶å®æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ â‘¢SynchronousQueue ä¸€ä¸ªä¸ç¼“å­˜ä»»åŠ¡çš„é˜»å¡é˜Ÿåˆ—ï¼Œç”Ÿäº§è€…æ”¾å…¥ä¸€ä¸ªä»»åŠ¡å¿…é¡»ç­‰åˆ°æ¶ˆè´¹è€…å–å‡ºè¿™ä¸ªä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´æ–°ä»»åŠ¡è¿›æ¥æ—¶ï¼Œä¸ä¼šç¼“å­˜ï¼Œè€Œæ˜¯ç›´æ¥è¢«è°ƒåº¦æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å¯ç”¨çº¿ç¨‹ï¼Œåˆ™åˆ›å»ºæ–°çº¿ç¨‹ï¼Œå¦‚æœçº¿ç¨‹æ•°é‡è¾¾åˆ°maxPoolSizeï¼Œåˆ™æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚è¯´ç™½äº†å°±æ˜¯ä¸ªå‡é˜Ÿåˆ— â‘£PriorityBlockingQueue å…·æœ‰ä¼˜å…ˆçº§çš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§é€šè¿‡å‚æ•°Comparatorå®ç° ThreadFactoryï¼šçº¿ç¨‹å·¥å‚ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ—¶ä½¿ç”¨çš„å·¥å‚ï¼Œå¯ä»¥ç”¨æ¥è®¾å®šçº¿ç¨‹åã€æ˜¯å¦ä¸ºdaemonçº¿ç¨‹ç­‰ç­‰ RejectedExecutionHandlerï¼šæ‹’ç»ç­–ç•¥ AbortPolicyï¼šæŠ›å‡º RejectedExecutionExceptionæ¥æ‹’ç»æ–°ä»»åŠ¡çš„å¤„ç†ã€‚ CallerRunsPolicyï¼šè°ƒç”¨æ‰§è¡Œè‡ªå·±çš„çº¿ç¨‹è¿è¡Œä»»åŠ¡ã€‚æ‚¨ä¸ä¼šä»»åŠ¡è¯·æ±‚ã€‚ä½†æ˜¯è¿™ç§ç­–ç•¥ä¼šé™ä½å¯¹äºæ–°ä»»åŠ¡æäº¤é€Ÿåº¦ï¼Œå½±å“ç¨‹åºçš„æ•´ä½“æ€§èƒ½ã€‚å¦å¤–ï¼Œè¿™ä¸ªç­–ç•¥å–œæ¬¢å¢åŠ é˜Ÿåˆ—å®¹é‡ã€‚å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥æ‰¿å—æ­¤å»¶è¿Ÿå¹¶ä¸”ä½ ä¸èƒ½ä»»åŠ¡ä¸¢å¼ƒä»»ä½•ä¸€ä¸ªä»»åŠ¡è¯·æ±‚çš„è¯ï¼Œä½ å¯ä»¥é€‰æ‹©è¿™ä¸ªç­–ç•¥ã€‚ï¼ˆè¯´ç™½äº†ï¼Œè°ç®¡ç†ä»»åŠ¡çš„ï¼Œè°å°±è´Ÿè´£å¸®å¿™ï¼‰ DiscardPolicyï¼šä¸å¤„ç†æ–°ä»»åŠ¡ï¼Œç›´æ¥ä¸¢å¼ƒæ‰ã€‚ DiscardOldestPolicyï¼šæ­¤ç­–ç•¥å°†ä¸¢å¼ƒæœ€æ—©çš„æœªå¤„ç†çš„ä»»åŠ¡è¯·æ±‚ã€‚ 4.2 å¸¸è§çº¿ç¨‹æ± newFixedThreadPool12345678// coreå’Œmaxæ˜¯ä¸€æ ·çš„// blockQueueæ˜¯æ— ç•Œé˜»å¡é˜Ÿåˆ—// å—¯ï¼Œ ä¸å¥½ä¸å¥½ï¼ï¼ï¼public static ExecutorService newFixedThreadPool(int nThreads) { return new ThreadPoolExecutor(nThreads, nThreads, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());} newSingleThreadExecutor123456789// coreå’Œmaxæ— ééƒ½æ˜¯1è€Œå·²// blockQueueæ˜¯æ— ç•Œé˜»å¡é˜Ÿåˆ—// å—¯ï¼Œ ä¸å¥½ä¸å¥½ï¼ï¼ï¼public static ExecutorService newSingleThreadExecutor() { return new FinalizableDelegatedExecutorService (new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()));} newCachedThreadPool12345678// core 0// maxæœ‰ç‚¹ç‹ ï¼Œä¸æ€•æš´æ ˆï¼Ÿ// é˜Ÿåˆ—è¿˜æ˜¯SynchronousQueueï¼Œè¿˜çœŸæ€•public static ExecutorService newCachedThreadPool() { return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;());} è¿˜æœ‰äº›åˆ«çš„æ¯”å¦‚newScheduledThreadPoolï¼ˆå¸¦å®šæ—¶å™¨çš„çº¿ç¨‹æ± ï¼‰ï¼Œå°±ä¸ä»‹ç»äº† å¯ä»¥çœ‹åˆ°è¿™äº›éƒ½å¤ªæç«¯äº†ï¼Œè¦ä¹ˆcoreç­‰äºmaxï¼Œè¦ä¹ˆç›´æ¥ä¸º0ï¼Œé˜Ÿåˆ—ä¹Ÿæ˜¯æ— ç•Œï¼Œæ‰€ä»¥é˜¿é‡Œå·´å·´çš„è§„èŒƒä¼šæç¤ºè‡ªå®šä¹‰çº¿ç¨‹æ±  4.3 çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°é‡æ€ä¹ˆç¡®å®š ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ˜¯CPUå¯†é›†å‹åº”ç”¨ï¼Œåˆ™çº¿ç¨‹æ± å¤§å°è®¾ç½®ä¸ºN+1ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæ˜¯IOå¯†é›†å‹åº”ç”¨ï¼Œåˆ™çº¿ç¨‹æ± å¤§å°è®¾ç½®ä¸º2N+1ã€‚ åœ¨IOä¼˜åŒ–ä¸­ï¼Œçº¿ç¨‹ç­‰å¾…æ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œéœ€è¦è¶Šå¤šçº¿ç¨‹ï¼Œçº¿ç¨‹CPUæ—¶é—´æ‰€å æ¯”ä¾‹è¶Šé«˜ï¼Œéœ€è¦è¶Šå°‘çº¿ç¨‹ã€‚è¿™æ ·çš„ä¼°ç®—å…¬å¼å¯èƒ½æ›´é€‚åˆï¼šæœ€ä½³çº¿ç¨‹æ•°ç›® = ï¼ˆï¼ˆçº¿ç¨‹ç­‰å¾…æ—¶é—´+çº¿ç¨‹CPUæ—¶é—´ï¼‰/çº¿ç¨‹CPUæ—¶é—´ ï¼‰* CPUæ•°ç›® å‚è€ƒ çº¿ç¨‹é—´é€šä¿¡ï¼šhttps://blog.csdn.net/jisuanji12306/article/details/86363390 çº¿ç¨‹çš„çŠ¶æ€ï¼šhttps://blog.csdn.net/pange1991/article/details/53860651","link":"/Java%E5%9F%BA%E7%A1%80/%E7%BA%BF%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0/"},{"title":"è®°ä¸€æ¬¡å¿«é€Ÿæ’åºæ¢ç©¶","text":"å¿«é€Ÿæ’åºä¸‰ç§å®ç°æ–¹å¼å¤§å®¶éƒ½çŸ¥é“å¿«é€Ÿæ’åºä¸€æ¬¡åå·¦è¾¹æ¯”æ ‡å…µå°ï¼Œå³è¾¹æ¯”æ ‡å…µå¤§ã€‚ä½†æ˜¯è¦æ³¨æ„å¸‚é¢ä¸Šç°åœ¨ä¸»è¦æœ‰ä¸¤ç§å¿«é€Ÿæ’åºï¼šä¸€ç§æ˜¯æ ‡å…µä¸åŠ¨ç‰ˆï¼ˆåªåœ¨æ¯è¶Ÿæœ€ååšä¸€æ¬¡äº¤æ¢ï¼‰ï¼Œä¸€ç§æ˜¯æ ‡å…µç§»åŠ¨ç‰ˆã€‚ä¸¤ç§æ•ˆç‡éƒ½ä¸€æ ·ï¼ŒåŸå› åœ¨äºæœ€åˆçš„è®ºæ–‡å’Œã€Šç®—æ³•ã€‹ä¹¦ä¸­çš„ä¸ä¸€æ ·ã€‚ ä¸€èˆ¬åšé€‰æ‹©é¢˜æ¥è¯´éƒ½é‡‡ç”¨æ ‡å…µç§»åŠ¨ç‰ˆï¼Œä¸”é»˜è®¤æ ‡å…µé€‰æ¯éƒ¨åˆ†æœ€å·¦è¾¹çš„ç¬¬ä¸€ä¸ªã€‚ æ ‡å…µç§»åŠ¨ç‰ˆï¼šä»å³å¾€å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”æ ‡å…µå°çš„å€¼å¹¶äº¤æ¢ï¼Œä»å·¦å¾€å³æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”æ ‡å…µå¤§çš„å€¼å¹¶äº¤æ¢ã€‚ æ ‡å…µä¸åŠ¨ç‰ˆï¼šå°†[1 : n]åˆ†ä¸ºå·¦è¾¹å°[1 : mid]ï¼Œå³è¾¹å¤§[mid + 1 : n]ï¼Œè¿™è¶Ÿåå†å°†æ ‡å…µ0å’Œmidäº¤æ¢ã€‚ ä¸¤ç§éƒ½èƒ½è¾¾åˆ°æœ€ç»ˆç›®çš„ï¼šæ’åºä¸€æ¬¡åå·¦è¾¹æ¯”æ ‡å…µå°ï¼Œå³è¾¹æ¯”æ ‡å…µå¤§ æ ‡å…µç§»åŠ¨ç‰ˆï¼ˆæ¨èï¼‰ä¸€èˆ¬é€‰æ‹©é¢˜éƒ½é»˜è®¤è¿™ç§æœ€åˆç‰ˆæœ¬ï¼Œæˆ‘æ¨èè¿™ç§åšæ³•ã€‚åšäº†ä¼˜åŒ–ï¼Œæ— éœ€æ¯æ¬¡éƒ½æ¢æ¥æ¢å»ï¼Œåªéœ€è¦æ¢è¯¥æ¢çš„å…ƒç´ ï¼Œæœ€åæ¢æ‰æ ‡å…µå³å¯ã€‚ä¾‹å¦‚ï¼šæ ‡å…µä»0æ¢åˆ°äº†5ï¼Œåˆä»5æ¢åˆ°äº†3ï¼Œåˆä»3æ¢åˆ°äº†4ï¼Œé‚£ä¹ˆå…ˆç”¨ä¸€ä¸ªtempæš‚å­˜æ ‡å…µçš„å€¼ï¼Œç›´æ¥n[0]=n[5], n[5]=n[3],n[3]=n[4],æœ€ån[4]=tempå³å¯ 1234567891011121314151617181920public void quickSort(int[] nums, int l, int r){ if (nums == null || nums.length &lt;= 1 || l &gt;= r) return; //é€’å½’ç»“æŸæ¡ä»¶ int left = l, right = r; //è¦é€’å½’çš„ï¼Œåˆ«ç ´åäº†å‚æ•° int temp = nums[left]; //æ”¹è¿›ï¼Œæ ‡å…µå­˜èµ·æ¥ while (left &lt; right) { while (temp &lt;= nums[right] &amp;&amp; left &lt; right) right--; //ä»å³å¾€å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äºå“¨å…µçš„å€¼ if (left &lt; right) { nums[left] = nums[right]; left++; } while (temp &gt;= nums[left] &amp;&amp; left &lt; right) left++; //ä»å·¦å¾€å³æ‰¾ç¬¬ä¸€ä¸ªå¤§äºå“¨å…µçš„å€¼ if (left &lt; right) { nums[right] = nums[left]; right--; } } nums[left] = temp; //æœ€åæ‰è®©å“¨å…µå»è¯¥å»çš„åœ°æ–¹ï¼Œæ­¤æ—¶å†™leftå’Œrightéƒ½æ˜¯ä¸€æ ·çš„ quickSort(nums, l, left); //å†å¼ºè°ƒä¸€éï¼Œæ­¤æ—¶leftå’Œrightæ˜¯ä¸€æ ·çš„ quickSort(nums, left + 1, r);} æ ‡å…µä¸åŠ¨ç‰ˆå‚è€ƒæŸ³ç¥ä»£ç ï¼Œæ”¹æˆäº†å·¦è¾¹ä¸ºæ ‡å…µ 123456789101112131415161718public int[] quickSort(int[] nums, int l, int r) { int mid = r; for (int i = r; i &gt;= l; i--) { if (nums[i] &gt; nums[l]) { nums[i] = swap(nums[mid], nums[mid] = nums[i]); //äº¤æ¢iå’Œmid mid--; } } nums[l] = swap(nums[mid], nums[mid] = nums[l]); //äº¤æ¢midå’Œæ ‡å…µ //é€’å½’å·¦å³ if (mid &gt; l + 1) quickSort(nums, l, mid - 1); if (mid &lt; r - 1) quickSort(nums, mid + 1, r); return nums;}public static int swap(int a, int b){ return a;} BFSç‰ˆæœ¬ï¼Œå¯ä»¥è·å–ç¬¬næ¬¡çš„æ’åºç»“æœç›¸æ¯”äºDFSæ›´ç®€å•çš„å®ç°ï¼ŒBFSæ›´åŠ ç¬¦åˆæ‰‹å†™é¡ºåº åœ¨æ ‡å…µç§»åŠ¨ç‰ˆçš„åŸºç¡€ä¸Šæ”¹è¿›ï¼Œä¸ç”¨é€’å½’ï¼ˆdfsï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨é˜Ÿåˆ—ï¼ˆbfsï¼‰ 1234567891011121314151617181920212223242526272829303132public void quickSort(int[] nums){ Queue&lt;int[]&gt; queue = new LinkedList&lt;&gt;(); //å­˜å·¦å³ä¸‹æ ‡ int[] idx = {0, nums.length - 1}; queue.offer(idx); while (!queue.isEmpty()){ idx = queue.poll(); if (idx[0] &gt; idx[1]) continue; //å¼€å§‹ä¸€è½®äº¤æ¢ï¼ˆæ³¨æ„ä¸æ˜¯ä¸€è¶Ÿï¼‰ int left = idx[0], right = idx[1], temp = nums[left]; while (left &lt; right){ //ä»å³å¾€å·¦ while (left &lt; right &amp;&amp; temp &lt;= nums[right]) right--; if (left &lt; right){ nums[left] = nums[right]; left++; } //ä»å·¦å¾€å³ while (left &lt; right &amp;&amp; temp &gt;= nums[left]) left++; if (left &lt; right){ nums[right] = nums[left]; right--; } } //äº¤æ¢æ ‡å…µï¼Œå®Œæˆåä»£è¡¨ä¸€è½®ç»“æŸ nums[left] = temp; //å·¦å³å…¥é˜Ÿ int[] idxL = {idx[0], left - 1}; queue.offer(idxL); int[] idxR = {left + 1, idx[1]}; queue.offer(idxR); }} æˆ‘æƒ³åœ¨åšå®¢é‡Œé«˜å†·ä¸€ç‚¹ï¼Œç»†èŠ‚ä¸å¤šè¯´äº†ï¼Œè¿™å‡ ç§è‡ªå·±è°ƒè°ƒçœ‹å§ï¼Œæ–­ç‚¹æ‰“åœ¨å“¨å…µäº¤æ¢å‰å°±å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹å‡º3ç§æ–¹æ³•çš„åŒºåˆ«äº† 2020.10.29åœºä¸­ä¿¡ä¿¡ç”¨å¡é™„åŠ é¢˜æ±‚ç¬¬nè¶Ÿå¿«æ’ç»“æœ å®Œæ•´ä»£ç å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556public class zhongxin_004_å¿«é€Ÿæ’åºç¬¬nè¶Ÿç»“æœ { @Test public void test(){ int[] array = {42,35,63,96,56,11,17,42,88}; int[] res = nthResultOfQuickSort(array, 4); System.out.println(Arrays.toString(res)); } private int sum = 1; public int[] nthResultOfQuickSort (int[] array, int n) { // write code here //è®¡ç®—æ¬¡æ•° for (int i = 1; i &lt; n; i++) { sum += 2 * i; } quickSort(array); return array; } public void quickSort(int[] nums){ Queue&lt;int[]&gt; queue = new LinkedList&lt;&gt;(); //å­˜å·¦å³ä¸‹æ ‡ int[] idx = {0, nums.length - 1}; queue.offer(idx); while (!queue.isEmpty()){ idx = queue.poll(); if (idx[0] &gt; idx[1]) continue; //å¼€å§‹ä¸€è½®äº¤æ¢ï¼ˆæ³¨æ„ä¸æ˜¯ä¸€è¶Ÿï¼‰ int left = idx[0], right = idx[1], temp = nums[left]; while (left &lt; right){ //ä»å³å¾€å·¦ while (left &lt; right &amp;&amp; temp &lt;= nums[right]) right--; if (left &lt; right){ nums[left] = nums[right]; left++; } //ä»å·¦å¾€å³ while (left &lt; right &amp;&amp; temp &gt;= nums[left]) left++; if (left &lt; right){ nums[right] = nums[left]; right--; } } //äº¤æ¢æ ‡å…µï¼Œå®Œæˆåä»£è¡¨ä¸€è½®ç»“æŸ nums[left] = temp; //äº¤æ¢ç»“æŸï¼Œåˆ¤æ–­æ˜¯å¦å®Œæˆäº†ç¬¬nè¶Ÿ if (--sum == 0) return; //å·¦å³å…¥é˜Ÿ int[] idxL = {idx[0], left - 1}; queue.offer(idxL); int[] idxR = {left + 1, idx[1]}; queue.offer(idxR); } }} å…¶ä»–æ’åºçš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/quicksort/"},{"title":"é‚®ä»¶å·¥å…·ç±»","text":"é‚®ä»¶å·¥å…·ç±»ï¼Œä½¿ç”¨javaå‘é€é‚®ä»¶ï¼Œå¸¸ç”¨äºé‚®ç®±æ¿€æ´»åœºæ™¯ï¼Œç”¨äºå‘é€çš„è´¦å·éœ€è¦è¿›è¡Œä»¥ä¸‹é…ç½®ï¼š ä»¥QQé‚®ç®±ä¸ºä¾‹ï¼Œéœ€è¦åœ¨è®¾ç½®-&gt;è´¦æˆ·ä¸‹æ‰“å¼€POP3å’ŒIMAPæœåŠ¡ï¼ˆä¹Ÿå¯ä»¥ç›´æ¥å…¨å¼€ï¼‰ï¼Œè¿™æ ·æ‰èƒ½ç¬¬ä¸‰æ–¹ç™»å½•é‚®ç®±ï¼ˆJavaä¸­ç™»å½•ä¹Ÿç®—ç¬¬ä¸‰æ–¹ï¼‰ å¼€å¯çš„æ—¶å€™ä¼šè·å–ä¸€ä¸ªæˆæƒç ï¼ˆæ²¡è®°ä¸‹æ¥å°±å†æ¬¡å…³é—­æ‰“å¼€ï¼Œæ¯æ¬¡éƒ½ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯æ¯ä¸ªéƒ½æœ‰æ•ˆï¼‰ ç›´æ¥å¤åˆ¶å³å¯é£Ÿç”¨ï¼Œå°±åªæœ‰ä¸€ä¸ªé™æ€æ–¹æ³•è°ƒç”¨å³å¯ï¼Œå‚æ•°å·²æ³¨æ˜åœ¨æ³¨é‡Šä¸­ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667import javax.mail.*;import javax.mail.internet.InternetAddress;import javax.mail.internet.MimeMessage;import java.util.Properties;/** * å‘é‚®ä»¶å·¥å…·ç±» */public final class MailUtils { private static final String USER = \"975504808@qq.com\"; // å‘ä»¶äººé‚®ç®±åœ°å€ private static final String PASSWORD = \"åˆšåˆšè¯´çš„æˆæƒç \"; // å¦‚æœæ˜¯qqé‚®ç®±å¯ä»¥ä½¿æˆ·ç«¯æˆæƒç ï¼Œæˆ–è€…ç™»å½•å¯†ç  /** * * @param to æ”¶ä»¶äººé‚®ç®± * @param text é‚®ä»¶æ­£æ–‡ * @param title æ ‡é¢˜ */ /* å‘é€éªŒè¯ä¿¡æ¯çš„é‚®ä»¶ */ public static boolean sendMail(String to, String text, String title){ try { final Properties props = new Properties(); props.put(\"mail.smtp.auth\", \"true\"); props.put(\"mail.smtp.host\", \"smtp.qq.com\"); // å‘ä»¶äººçš„è´¦å· props.put(\"mail.user\", USER); //å‘ä»¶äººçš„å¯†ç  props.put(\"mail.password\", PASSWORD); // æ„å»ºæˆæƒä¿¡æ¯ï¼Œç”¨äºè¿›è¡ŒSMTPè¿›è¡Œèº«ä»½éªŒè¯ Authenticator authenticator = new Authenticator() { @Override protected PasswordAuthentication getPasswordAuthentication() { // ç”¨æˆ·åã€å¯†ç  String userName = props.getProperty(\"mail.user\"); String password = props.getProperty(\"mail.password\"); return new PasswordAuthentication(userName, password); } }; // ä½¿ç”¨ç¯å¢ƒå±æ€§å’Œæˆæƒä¿¡æ¯ï¼Œåˆ›å»ºé‚®ä»¶ä¼šè¯ Session mailSession = Session.getInstance(props, authenticator); // åˆ›å»ºé‚®ä»¶æ¶ˆæ¯ MimeMessage message = new MimeMessage(mailSession); // è®¾ç½®å‘ä»¶äºº String username = props.getProperty(\"mail.user\"); InternetAddress form = new InternetAddress(username); message.setFrom(form); // è®¾ç½®æ”¶ä»¶äºº InternetAddress toAddress = new InternetAddress(to); message.setRecipient(Message.RecipientType.TO, toAddress); // è®¾ç½®é‚®ä»¶æ ‡é¢˜ message.setSubject(title); // è®¾ç½®é‚®ä»¶çš„å†…å®¹ä½“ message.setContent(text, \"text/html;charset=UTF-8\"); // å‘é€é‚®ä»¶ Transport.send(message); return true; }catch (Exception e){ e.printStackTrace(); } return false; }} ååºçš„å·¥å…·ç±»æˆ‘æƒ³åšæˆæ–‡ä»¶ä¸‹è½½è€Œä¸æ˜¯è´´ä»£ç â€¦çœ‹ä¸‹ä»€ä¹ˆæ—¶å€™æœ‰ç©ºå†è¯´ï¼ˆæ‹–å»¶ç—‡æ™šæœŸï¼‰","link":"/util/%E9%82%AE%E4%BB%B6%E5%B7%A5%E5%85%B7%E7%B1%BB/"},{"title":"é“¾è¡¨é¢˜æŠ€å·§","text":"é“¾è¡¨é¢˜ä¸€èˆ¬éƒ½æ˜¯é€»è¾‘é—®é¢˜ï¼Œç©ºæŒ‡é’ˆå¤„ç†ï¼Œå¾ˆå°‘ä¼šæœ‰éš¾æ€è€ƒçš„æ™ºåŠ›å‹é¢˜ç›®ã€‚ä¸€èˆ¬éƒ½æ˜¯ä¸€å±‚whileå¾ªç¯åŠ ä¸Šä¸€äº›æŒ‡é’ˆæ“ä½œï¼ŒæŒæ¡ä»¥ä¸‹å‡ ä¸ªæŠ€å·§ï¼Œä¼šå¦‚é±¼å¾—æ°´ 123456//æœ´å®æ— åçš„ç®€é™‹ç‰ˆæ¡†æ¶while(node != null){ //æŒ‡é’ˆæ“ä½œé€»è¾‘ node = node.next;}//æŒ‡é’ˆæ“ä½œé€»è¾‘ æŠ€å·§1. åœ¨å‰ä¸€ä¸ªèŠ‚ç‚¹åœä¸‹æ¯”å¦‚a-&gt;b-&gt;cï¼Œæˆ‘ç°åœ¨æ“ä½œåˆ°äº†bï¼Œå‡è®¾æ“ä½œé€»è¾‘è¦æ±‚åˆ é™¤å½“å‰èŠ‚ç‚¹bï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯a.next = cï¼Œå‘ç°æ ¹æœ¬æ²¡æœ‰æŒ‡é’ˆèƒ½è·å¾—èŠ‚ç‚¹aï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨å‰ä¸€ä¸ªèŠ‚ç‚¹åœä¸‹ï¼Œæ‰€ä»¥æ ¹æ®é€»è¾‘çš„éœ€è¦ï¼Œå…ˆæ€è€ƒæ˜¯å¦éœ€è¦ç”¨åˆ°å‰ä¸€ä¸ªèŠ‚ç‚¹ 123456while(node.next != b){ //åœ¨å‰ä¸€ä¸ªèŠ‚ç‚¹åœä¸‹ //æŒ‡é’ˆæ“ä½œé€»è¾‘ node = node.next;}//æ­¤æ—¶nodeåœ¨anode.next = node.next.next 2. è™šæ‹Ÿå¤´éƒ¨è¿˜æ˜¯a-&gt;b-&gt;cåˆ é™¤æŸä¸ªèŠ‚ç‚¹ï¼Œè¿˜æ˜¯åˆšåˆšé‚£å¥—é€»è¾‘ï¼Œå¦‚æœæˆ‘è¦åˆ çš„æ˜¯aï¼Œæ€ä¹ˆåŠï¼Ÿä½ å¯èƒ½ä¼šè¯´ç›´æ¥head = aå°±è¢«â€œåˆ é™¤â€äº†ï¼Œä¸é”™ï¼Œä½†æ˜¯è¿™æ ·çš„è¯å¾—å•ç‹¬åˆ¤æ–­è¦åˆ çš„èŠ‚ç‚¹æ˜¯ä¸æ˜¯å¤´èŠ‚ç‚¹ï¼Œä»£ç çœ‹èµ·æ¥å°±å¾ˆå•°å—¦ï¼Œæ‰€ä»¥é“¾è¡¨é¢˜é€šå¸¸å¯ä»¥ä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ã€‚ä»€ä¹ˆæ—¶å€™è¦åŠ å‘¢ï¼Ÿä¹Ÿæ˜¯æ€è€ƒæ˜¯å¦éœ€è¦ç”¨åˆ°å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœéœ€è¦ï¼Œé‚£ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¿…ç„¶ä¹Ÿéœ€è¦ä¸€ä¸ªå‰ç½®èŠ‚ç‚¹ 12ListNode root = new ListNode();root.next = head; ç”¨äº†è™šæ‹Ÿå¤´éƒ¨åï¼Œå¤´èŠ‚ç‚¹ä¹Ÿå¯ä»¥å’Œå…¶ä»–èŠ‚ç‚¹ä¸€èµ·æ“ä½œäº† è®°å¾—return root.nextè€Œä¸æ˜¯head 3. xx.nextï¼Œåˆ¤æ–­xx != nullé“¾è¡¨é¢˜å®¹æ˜“ç©ºæŒ‡é’ˆï¼Œä¸ºä»€ä¹ˆä¼šç©ºæŒ‡é’ˆï¼Œä¸€ä¸ªæ–¹æ³•æ•™ä½ æ°¸è¿œä¸ç©ºæŒ‡é’ˆï¼šåªè¦ä»£ç é‡Œé¢æœ‰node.nextï¼Œé‚£ä¹ˆå°±åˆ¤æ–­node != nullï¼Œå¦‚æœæœ‰node.next.nextï¼Œé‚£å°±åˆ¤æ–­node != null &amp;&amp; node.next != null å½’æ ¹åˆ°åº•ï¼Œç©ºæŒ‡é’ˆå¼‚å¸¸æ˜¯ç”±äºnull.nexté€ æˆçš„ 4. åŒæŒ‡é’ˆï¼Œä¸è¡Œå°±ä¸‰æŒ‡é’ˆç ”ç©¶è¡¨æ˜ï¼ŒæŒ‡é’ˆè¶Šå¤šï¼Œé“¾è¡¨é¢˜è¶Šå®¹æ˜“åšï¼ŒåŒæŒ‡é’ˆä¸è¡Œå°±ä¸‰æŒ‡é’ˆï¼Œå†ä¸è¡Œå°±å››æŒ‡é’ˆï¼ŒnæŒ‡é’ˆç§’ä¸€åˆ‡é“¾è¡¨é¢˜! åƒä»€ä¹ˆå‰åæŒ‡é’ˆï¼Œå¿«æ…¢æŒ‡é’ˆï¼Œéƒ½æ˜¯é“¾è¡¨é¢˜å¸¸ç”¨çš„æ“ä½œ æ¨¡æ¿ç»¼ä¸Šæ‰€è¿°ï¼Œæ¨¡æ¿å¦‚ä¸‹ï¼š 123456789101112public ListNode LinkedList(ListNode head) { //è™šæ‹Ÿå¤´éƒ¨å’ŒnæŒ‡é’ˆåˆå§‹ä½ç½® ListNode root = new ListNode(0); root.next = head; while (pre != null &amp;&amp; pre.next != null){ //æŒ‡é’ˆæ“ä½œé€»è¾‘ pre = pre.next; } return root.next;} çœ‹ä¸€é¢˜ åŠ›æ‰£19 https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/ ä¸è§£é‡Šï¼Œåªæ˜¯çœ‹ä»£ç ç»“æ„ 12345678910111213141516171819public ListNode removeNthFromEnd(ListNode head, int n) { if (head == null) return null; //è™šæ‹Ÿå¤´éƒ¨ ListNode root = new ListNode(0); root.next = head; //næŒ‡é’ˆä½ç½®å‡†å¤‡ ListNode pre = root, post = root; while (n-- != 0) { pre = pre.next; } while (pre != null &amp;&amp; pre.next != null){ //whileåœ¨å‰ä¸€ä¸ªèŠ‚ç‚¹åœä¸‹ pre = pre.next; post = post.next; } if (post != null &amp;&amp; post.next != null) post.next = post.next.next; //åˆ¤ç©º return root.next;} è‡³äºæœ¬é¢˜å…·ä½“çš„æ€è·¯å’Œå…¶ä»–é“¾è¡¨ç±»å‹çš„é¢˜ç›®ç‚¹å‡»è¿™é‡Œ","link":"/algorithms/linked-list-template/"},{"title":"è®¡ç®—æœºç½‘ç»œåŸºç¡€","text":"ç½‘ç»œçš„çŸ¥è¯†å¤ªå¤šäº†ï¼Œæˆ‘å†³å®šæ…¢æ…¢å†™ï¼Œé›¶é›¶æ•£æ•£å†™ï¼Œæœ‰å¾ˆå¤šå¯¹è½¯ä»¶å­¦ç”Ÿæ¥è¯´ä¸å¤ªé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘è¿˜æ˜¯è®°ä¸‹æ¥äº†ï¼Œä½†æœ‰æ ‡æ³¨é‡è¦ğŸ˜€/ä¸€èˆ¬èˆ¬ğŸ¤ª/ä¸é‡è¦ğŸ˜­ 1. TCP/IP 5å±‚æ¨¡å‹ğŸ˜€ ç‰©ç†å±‚ï¼šè´Ÿè´£è½¬æ¢æ¯”ç‰¹æµ(101001010)å’Œé«˜ä½ç”µå¹³ã€‚ä¸­ç»§å™¨ã€é›†çº¿å™¨ã€RJ45æ¥å£ æ•°æ®é“¾è·¯å±‚ï¼šè´Ÿè´£ç½‘ç»œé—´æ•°æ®ä¼ é€ã€‚è·¯ç”±å™¨ã€ä»¥å¤ªç½‘ã€MACã€ç½‘æ¡¥ã€äº¤æ¢æœºã€VLAN ç½‘ç»œå±‚ï¼šä¸»æœºå¯¹ä¸»æœºã€‚IPã€ARPã€RARPã€ICMPã€IGMPã€RIPç­‰åè®® ä¼ è¾“å±‚ï¼šç«¯å£å¯¹ç«¯å£(è¯´ç™½äº†å°±æ˜¯ç¨‹åºå¯¹ç¨‹åº)ã€‚TCPã€UDPã€SSLç­‰åè®® åº”ç”¨å±‚ï¼šåº”ç”¨å’Œå±•ç¤ºã€‚HTTPã€SSHã€FTPã€DNSã€DHCPã€RPC 2. ç‰©ç†å±‚ğŸ˜­ç‰©ç†å±‚æœ‰ä¸ªä¸œè¥¿è¦çŸ¥é“ï¼šä¿¡é“å¤ç”¨æŠ€æœ¯ï¼Œå¿«é€Ÿåˆ’è¿‡çŸ¥é“æœ‰å“ªå‡ ç§å¤ç”¨æŠ€æœ¯å°±è¡Œ é¢‘åˆ†å¤ç”¨FDMğŸ˜­ æ—¶åˆ†å¤ç”¨TDMğŸ˜­ ç»Ÿè®¡æ—¶åˆ†å¤ç”¨STDMï¼šæ•°æ®åˆ°è¾¾çš„æ—¶é—´æ˜¯ä¸å›ºå®šçš„ æ³¢åˆ†å¤ç”¨WDMğŸ˜­ä¸ä»‹ç»äº† ç åˆ†å¤ç”¨CDMğŸ¤ªè¿™é‡Œå¯èƒ½ä¼šæœ‰ç¬”è¯•é¢˜ï¼š Sç«™çš„ç ç‰‡åºåˆ—æ˜¯ 00011011ï¼ˆä¹Ÿæœ‰äº›åœ°æ–¹0ç”¨-1è¡¨ç¤ºï¼‰ å‘é€æ¯”ç‰¹ 1 æ—¶ï¼Œå°±å‘é€åºåˆ— 00011011 å‘é€æ¯”ç‰¹ 0 æ—¶ï¼Œå°±å‘é€åç  11100100 å¦‚æœå¤šä¸ªç«™ï¼Œæ¯ä¸ªç«™çš„ç ç‰‡åºåˆ—å¿…é¡»æ­£äº¤ï¼ˆä¹Ÿå°±æ˜¯å¯¹åº”ç›¸ä¹˜å†ç›¸åŠ ç­‰äº0ï¼‰æ¯”å¦‚ Sç«™(â€“1 â€“1 â€“1 +1 +1 â€“1 +1 +1) Tç«™(â€“1 â€“1 +1 â€“1 +1 +1 +1 â€“1) 3. æ•°æ®é“¾è·¯å±‚ğŸ¤ªä¸‹å›¾çº¢çº¿è¿‡ç¨‹å°±æ˜¯æ•°æ®é“¾è·¯å±‚çš„å·¥ä½œ ç‰¹ç‚¹ğŸ¤ªè¿™å±‚è§£å†³äº†ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ å°è£…æˆå¸§ é€æ˜ä¼ è¾“ å·®é”™æ§åˆ¶ å°è£…æˆå¸§ğŸ˜­ä¹Ÿå°±æ˜¯ç”¨å¼€å§‹å’Œç»“æŸç¬¦åˆ†æ®µæ ‡è®°äº†æ•°æ® é€æ˜ä¼ è¾“ğŸ˜­å¸§çš„æ•°æ®éƒ¨åˆ†å¦‚æœæ°å¥½ä¹Ÿæœ‰å¼€å§‹/ç»“æŸç¬¦ï¼Œé‚£ä¹ˆä¹Ÿè¦æ±‚èƒ½æ¥æ”¶å¹¶ä¸”æ­£ç¡®ä¼ ï¼Œè€Œä¸æ˜¯è§„å®šæ•°æ®ä¸èƒ½å«å¼€å§‹/ç»“æŸç¬¦ï¼Œè¿™å°±å«é€æ˜ä¼ è¾“ã€‚ å®ç°æ–¹å¼æœ‰å­—èŠ‚å¡«å……å’Œé›¶æ¯”ç‰¹å¡«å……ä¸¤ç§ å­—èŠ‚å¡«å…… â€œSOHâ€æˆ–â€œEOTâ€çš„å‰é¢æ’å…¥ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦â€œESCâ€(åå…­è¿›åˆ¶ç¼–ç æ˜¯ 1B) å¦‚æœè½¬ä¹‰å­—ç¬¦ä¹Ÿå‡ºç°æ•°æ®å½“ä¸­ï¼Œé‚£ä¹ˆåº”åœ¨è½¬ä¹‰å­—ç¬¦å‰é¢æ’å…¥ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ æ¥æ”¶ç«¯å¿…é¡»å°†è½¬ä¹‰å­—ç¬¦åˆ é™¤å†å°†æ•°æ®ç§»äº¤ç»™ä¸Šå±‚ é›¶æ¯”ç‰¹å¡«å…… å°†æ•°æ®å­—æ®µä¸­å‡ºç°è¿ç»­6ä¸ª1çš„æƒ…å†µç ´å å‘é€ç«¯ï¼šåªè¦å‘ç°æœ‰5 ä¸ªè¿ç»­ 1ï¼Œç«‹å³å¡«å…¥ä¸€ä¸ª 0 æ¥æ”¶ç«¯ï¼šåªè¦å‘ç° 5 ä¸ªè¿ç»­1ï¼Œå¯¹ä¹‹åä¸€ä½è¿›è¡Œæ£€æŸ¥ï¼Œè‹¥ä¸º0ï¼Œåˆ™åˆ é™¤ï¼›è‹¥ä¸º1ï¼Œåˆ™è¡¨ç¤ºå¸§å¼€å§‹æˆ–å¸§ç»“æŸã€‚ å·®é”™æ§åˆ¶ğŸ¤ªç”±äºç‰©ç†å’Œç¯å¢ƒåŸå› ï¼Œä¼ è¾“æ•°æ®å¯èƒ½å‡ºç°å·®é”™ï¼Œæ¯”å¦‚ç”±1å˜æˆ0ï¼Œæ‰€ä»¥æ¥æ”¶ç«¯éœ€è¦å¾ªç¯å†—ä½™æ£€éªŒCRC //TODO æ³¨æ„ï¼šå¾ªç¯å†—ä½™æ£€éªŒCRCå·®é”™æ£€æµ‹æŠ€æœ¯åªèƒ½åšåˆ°æ— å·®é”™æ¥å—ï¼Œè€Œä¸æ˜¯å¯é ä¼ è¾“ MACå­å±‚ğŸ˜€ IEEE802å§”å‘˜ä¼šå°†å±€åŸŸç½‘çš„æ•°æ®é“¾è·¯å±‚æ‹†æˆä¸¤ä¸ªå­å±‚ é€»è¾‘é“¾è·¯æ§åˆ¶ LLC (Logical Link Control)å­å±‚ åª’ä½“æ¥å…¥æ§åˆ¶ MAC (Medium Access Control)å­å±‚ LLCå­å±‚çš„ä½œç”¨å·²ç»æ¶ˆå¤± MACåœ°å€åˆç§°ä¸ºç¡¬ä»¶åœ°å€æˆ–ç‰©ç†åœ°å€ã€‚ å›ºåŒ–åœ¨è®¡ç®—æœºçš„ç½‘å¡çš„ROMä¸­,å®é™…ä¸Šæ˜¯é€‚é…å™¨ï¼ˆç½‘å¡ï¼‰çš„æ ‡è¯†ç¬¦ MACåœ°å€6ä¸ªå­—èŠ‚,48ä½ã€‚å‰ä¸‰ä¸ªå­—èŠ‚(å³é«˜ä½ 24 ä½)æ˜¯ç»„ç»‡å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæœ‰æ³¨å†Œæœºæ„RAå‘ç”Ÿäº§ç½‘å¡çš„å‚å®¶åˆ†é…ã€‚åä¸‰ä¸ªå­—èŠ‚(å³ä½ä½ 24 ä½)æ˜¯æ‰©å±•æ ‡è¯†ç¬¦ï¼Œä¸€ä¸ªåœ°å€å—å¯ä»¥ç”Ÿæˆ2^24ä¸ªä¸åŒçš„åœ°å€ äº¤æ¢æœºğŸ˜€äº¤æ¢æœºåˆšæ¥å…¥ä»¥å¤ªç½‘æ—¶ï¼Œäº¤æ¢è¡¨æ˜¯ç©ºç™½çš„ï¼Œäº¤æ¢æœºé€šè¿‡è‡ªå­¦ä¹ ç®—æ³•å¤„ç†æ”¶åˆ°çš„æ•°æ®å¸§ï¼Œä»è€Œé€æ­¥å»ºç«‹èµ·äº¤æ¢è¡¨ï¼šäº¤æ¢æœºæ¯æ”¶åˆ°ä¸€ä¸ªæ•°æ®å¸§ï¼Œå°±å°†å…¶æºåœ°å€å†™åˆ°äº¤æ¢è¡¨çš„åœ°å€é¡¹ï¼Œå°†å…¶è¿›å…¥çš„æ¥å£å†™åˆ°äº¤æ¢è¡¨çš„æ¥å£é¡¹ å¸§è½¬å‘è¿‡ç¨‹ è½¬å‘å¸§ã€‚æŸ¥æ‰¾äº¤æ¢è¡¨ å¦‚æ²¡æœ‰ï¼Œåˆ™å‘æ‰€æœ‰å…¶ä»–æ¥å£ï¼ˆè¿›å…¥çš„æ¥å£é™¤å¤–ï¼‰è½¬å‘ã€‚ å¦‚æœ‰ï¼Œåˆ™è½¬å‘ç»™å¯¹åº”æ¥å£ã€‚ è‹¥äº¤æ¢è¡¨ä¸­ç»™å‡ºçš„æ¥å£å°±æ˜¯è¯¥å¸§è¿›å…¥äº¤æ¢æœºçš„æ¥å£ï¼Œåˆ™åº”ä¸¢å¼ƒè¿™ä¸ªå¸§ VLANğŸ˜€è™šæ‹Ÿå±€åŸŸç½‘ VLANï¼ˆVirtual LANï¼‰ è¿™å›¾ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ˜¯è¯´åŸæ¥çš„å±€åŸŸç½‘åˆ†é…çš„ä¸åˆç†ï¼Œå¯ä»¥é€šè¿‡VLANé‡æ–°åˆ†é…å±€åŸŸç½‘ã€‚ ä¸¾ä¸ªä¾‹å­ï¼šå…¬å¸åŸæ¥æ˜¯æ¯å±‚æ¥¼ä¸€ä¸ªéƒ¨é—¨ï¼ˆè´¢åŠ¡éƒ¨ï¼Œå¼€å‘éƒ¨ï¼‰ï¼Œæ¯å±‚å„è‡ªä¸ºä¸€ä¸ªå±€åŸŸç½‘ï¼Œæœ‰ä¸€å¤©é¢†å¯¼æ”¹æˆ˜ç•¥äº†ï¼Œæ¯å±‚æ¥¼ç»„æˆä¸€ä¸ªå­å…¬å¸ï¼Œè´¢åŠ¡äººå‘˜å’Œå¼€å‘äººå‘˜éƒ½åˆ†åŒºå„ä¸ªå­å…¬å¸ï¼Œä½†æ˜¯ç”µè„‘å‘¢è¿˜æ˜¯æƒ³å¼€å‘äººå‘˜å’Œå¼€å‘äººå‘˜å…±ç”¨ä¸€ä¸ªå±€åŸŸç½‘ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ·»åŠ äº¤æ¢æœº4ï¼Œé‡ç»„VLANï¼Œå¦‚ä¸Šå›¾ï¼ŒVLAN1ä¸ºä¸€ä¸ªå±€åŸŸç½‘ï¼ŒVLAN2ä¸ºä¸€ä¸ªå±€åŸŸç½‘ã€‚ äº¤æ¢æœºçš„æ¥å£åˆ†ä¸ºä¸¤ç§ç±»åˆ«ï¼š æ¥å…¥æ¥å£ï¼ˆaccessæ¥å£ï¼‰ï¼šç”¨äºè¿æ¥ä¸»æœºè®¾å¤‡ï¼Œåªèƒ½è½¬å‘æŸä¸€ç‰¹å®šVLANçš„æ•°æ®ã€‚å³ä¸Šå›¾çš„äº¤æ¢æœº1-3çš„1-4å·æ¥å£ å¹²é“æ¥å£ï¼ˆtrunkæ¥å£ï¼‰ï¼šé€šå¸¸ç”¨äºäº¤æ¢æœºäº’è¿ï¼Œå®ƒèƒ½è½¬å‘æ‰€æœ‰VLANçš„æ•°æ®ã€‚å³ä¸Šå›¾çš„äº¤æ¢æœº1-3çš„5å·æ¥å£ï¼Œäº¤æ¢æœº4çš„1-3å·æ¥å£ 4. ç½‘ç»œå±‚ğŸ˜€ç½‘ç»œå±‚è´Ÿè´£çš„æ˜¯ä¸»æœºåˆ°ä¸»æœºä¹‹é—´çš„é€šä¿¡ä»¥åŠIPæ•°æ®åŒ…çš„è·¯å¾„é€‰æ‹© é“¾è·¯å±‚æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ï¼Œç½‘ç»œå±‚æ˜¯å¤šä¸ªèŠ‚ç‚¹å¯èƒ½æ„æˆä¸åŒçš„é€šè·¯ï¼Œè´Ÿè´£é€‰æ‹©è·¯å¾„ ç½‘ç»œå±‚æä¾›æ— è¿æ¥çš„ï¼Œå°½æœ€å¤§åŠªåŠ›äº¤ä»˜çš„ï¼Œä¸å¯é çš„ä¼ è¾“æœåŠ¡ è¿™ä¸€å±‚æœ€ä¸»è¦çš„æ˜¯IP(Internet Protocol)åè®®ï¼Œä¸ä¹‹é…å¥—çš„ åœ°å€è§£æåè®® ARP(Address Resolution Protocol)é€†åœ°å€è§£æåè®® RARP(Reverse Address Resolution Protocol)ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®® ICMP(Internet Control Message Protocol)ç½‘é™…ç»„ç®¡ç†åè®® IGMP (Internet Group Management Protocol) IPåœ°å€å’Œç¼–å€æ–¹æ³•ğŸ˜€å…¨ä¸–ç•ŒèŒƒå›´æ˜¯å”¯ä¸€çš„32ä½çš„æ ‡è¯†ç¬¦ï¼Œç°åœ¨ç”±â€œå› ç‰¹ç½‘åå­—ä¸å·ç æŒ‡æ´¾å…¬å¸â€ICANNè¿›è¡Œåˆ†é…ã€‚ ä¸¤ä¸ªç‰¹ç‚¹ ICANNåªåˆ†é…ç½‘ç»œå·ï¼Œä¸»æœºå·å¯ä»¥è‡ªè¡Œç¼–å€ã€‚ è·¯ç”±å™¨è·¯ç”±è¡¨ä»…æ ¹æ®ç›®çš„ä¸»æœºæ‰€è¿æ¥çš„ç½‘ç»œå·æ¥è½¬å‘åˆ†ç»„ï¼Œè€Œä¸è€ƒè™‘ç›®çš„ä¸»æœºå·ï¼ˆä¸‹é¢è®²arpçš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œè®°ä½å®ƒï¼‰ ç¼–å€æ–¹æ³•ç»å†äº†3ä¸ªé˜¶æ®µï¼šåˆ†ç±»çš„IPåœ°å€ã€å­ç½‘çš„åˆ’åˆ†ã€æ„é€ è¶…ç½‘ã€‚ä¸‰ä¸ªé˜¶æ®µæ˜¯å› ä¸ºipåœ°å€ä¸å¤Ÿç”¨äº†ï¼ŒåŸæ¥çš„æ–¹æ³•è¦ä¹ˆå¤ªå¤šè¦ä¹ˆå¤ªå°‘å¤ªæµªè´¹äº†ï¼ åˆ†ç±»çš„IPåœ°å€ğŸ˜€ç½‘ç»œå· + ä¸»æœºå· net-id + host-id æ³¨ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªç½‘ç»œï¼Œå°±çœ‹net-idæ˜¯å¦ä¸€æ · åˆ†æˆäº†è¿™å‡ ç±» å¸¸è¡¨ç¤ºæˆç‚¹åˆ†åè¿›åˆ¶è®°æ³•ï¼Œä¹Ÿå°±æ˜¯æ¯8ä¸ªè½¬æ¢æˆåè¿›åˆ¶ï¼Œæˆ‘ä»¬å¸¸è§çš„192.168.1.1å°±æ˜¯è¿™ä¹ˆæ¥çš„ æœ‰ä¸€äº›ipæ¯”è¾ƒç‰¹æ®Šï¼ˆç½‘ç»œå·å…¨0,ä¸»æœºå·å…¨0ï¼‰ï¼Œæ‰€ä»¥å®é™…ä¸Šå¯ç”¨çš„ç½‘ç»œå·å’Œä¸»æœºå·ä¸º è¯´æ˜ï¼š Aç±»ï¼š ç½‘ç»œä½å…¨0ä¸º00000000è¡¨ç¤ºæœ¬ç½‘ç»œï¼Œå…¨1ä¸º01111111ç”¨äºè½¯ä»¶ç¯å›æµ‹è¯•(ä¹Ÿå°±æ˜¯127å¼€å¤´çš„æ¯”å¦‚127.0.0.1)ï¼Œå› æ­¤è¦-2 æ‰€ä»¥ç¬¬ä¸€ä¸ªå¯ç”¨çš„ç½‘ç»œå·ä¸º00000001ï¼Œæœ€åä¸€ä¸ªä¸º01111110 ä¸»æœºæ•°2^24 - 2ï¼Œå…¨0å’Œå…¨1çš„ä¸»æœºå·æœ‰ç‰¹æ®Šçš„ä½œç”¨ Bç±»ï¼š ç½‘ç»œä½å…¨100000000 00000000ä¸æŒ‡æ´¾ï¼Œå› æ­¤è¦-1ï¼ˆBã€Cç±»ä¸éœ€è¦è½¯ä»¶ç¯å›æµ‹è¯•ï¼‰ æ‰€ä»¥ç¬¬ä¸€ä¸ªå¯ç”¨çš„ç½‘ç»œå·ä¸º100000000 00000001å³128.1.0.0ï¼Œæœ€åä¸€ä¸ªä¸º10111111 11111111å³191.255.0.0 ä¸»æœºæ•°2^24 - 2ï¼Œå…¨0å’Œå…¨1çš„ä¸»æœºå·æœ‰ç‰¹æ®Šçš„ä½œç”¨ Cç±»ï¼š ç½‘ç»œä½å…¨110000000 00000000 00000000ä¸æŒ‡æ´¾ï¼Œå› æ­¤è¦-1 æ‰€ä»¥ç¬¬ä¸€ä¸ªå¯ç”¨çš„ç½‘ç»œå·ä¸º110000000 00000000 00000001å³192.0.1.0ï¼Œæœ€åä¸€ä¸ªä¸º11011111 11111111 11111111å³223.255.255.0 ä¸»æœºæ•°2^8 - 2ï¼Œå…¨0å’Œå…¨1çš„ä¸»æœºå·æœ‰ç‰¹æ®Šçš„ä½œç”¨ ç‰¹æ®Šä½œç”¨ç©¶ç«Ÿæ˜¯æŒ‡ä»€ä¹ˆå‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸€å¼ è¡¨ åˆ’åˆ†å­ç½‘å’Œå­ç½‘æ©ç ğŸ˜€åˆ†ç±»çš„IPåœ°å€æœ‰ä¸åˆç†çš„åœ°æ–¹ï¼Œæ¯”å¦‚æˆ‘ç¼–å€çš„æ—¶å€™æœ‰300å°æœºå­ï¼ŒCç±»ç½‘ç»œä¸å¤Ÿï¼ŒBç±»åˆå¤ªæµªè´¹ã€‚ å¼•å…¥äº†å­ç½‘æ©ç çš„æ¦‚å¿µï¼šå­ç½‘æ©ç è¯´ç™½äº†å°±æ˜¯11100000â€¦000è¿™æ ·çš„æ ‡å¿—ä½ï¼Œå’Œipåœ°å€ä¸€æ ·ä¹Ÿæ˜¯32ä½ï¼Œ1ä»£è¡¨ç½‘ç»œä½ï¼Œ0ä»£è¡¨ä¸»æœºä½ã€‚å¦‚ä½•å¾—åˆ°ç½‘ç»œå·å‘¢ï¼Ÿç”¨ipå’Œå­ç½‘æ©ç ç›¸ä¸ï¼Œç”±äº&amp;è¿ç®—çš„æ€§è´¨ï¼Œä¼šä½¿å¾—ç½‘ç»œå·ç•™ä¸‹ï¼Œä¸»æœºå·å…¨å˜ä¸º0ï¼Œã€‚ æ¯”å¦‚192.168.10.1,å­ç½‘æ©ç æ˜¯255.255.255.0ï¼Œé‚£ä¹ˆäºŒè¿›åˆ¶æ¥çœ‹ï¼Œ192.168.10éƒ½èƒ½&amp;1è¢«ä¿ç•™ä¸‹æ¥ï¼Œè€Œæœ€åçš„.1&amp;0ï¼Œå¾—åˆ°0ï¼Œé‚£ä¹ˆå°±å¾—åˆ°äº†ç½‘ç»œå·192.168.10.0 è¿™æ ·ä¸€æ¥ï¼Œå¯ä»¥ä»»æ„çš„åˆ’åˆ†ç½‘ç»œä½äº†ï¼Œ7ä½ï¼Œ10ä½ï¼Œ12ä½â€¦â€¦ å› ç‰¹ç½‘è§„å®šï¼šæ‰€æœ‰çš„ç½‘ç»œéƒ½å¿…é¡»ä½¿ç”¨å­ç½‘æ©ç ï¼Œåœ¨è·¯ç”±å™¨çš„è·¯ç”±è¡¨ä¸­ä¹Ÿå¿…é¡»æœ‰å­ç½‘æ©ç å­—æ®µ å¦‚æœä¸€ä¸ªç½‘ç»œä¸åˆ’åˆ†å­ç½‘ï¼Œåˆ™è¯¥ç½‘ç»œä½¿ç”¨é»˜è®¤çš„å­ç½‘æ©ç  æ³¨ï¼šåˆ’åˆ†å­ç½‘å±äºå•ä½å†…éƒ¨çš„äº‹æƒ…ï¼Œå¯¹å¤–ä»ç„¶è¡¨ç°ä¸ºä¸€ä¸ªç½‘ç»œ ABC3ä¸ªä¼ä¸šéƒ½æ˜¯300äººï¼Œç”³è¯·äº†3ä¸ªBç±»å­ç½‘ï¼Œç°åœ¨å¯ä»¥æˆç«‹ä¸€ä¸ªè”ç›Ÿï¼Œç”³è¯·ä¸€ä¸ªBç±»ç½‘ç»œï¼Œåˆ’åˆ†ç»™3ä¸ªä¼ä¸š æ— åˆ†ç±»ç¼–å€CIDRğŸ˜€åˆ’åˆ†å­ç½‘åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†å› ç‰¹ç½‘åœ¨å‘å±•ä¸­é‡åˆ°çš„å›°éš¾ã€‚ç„¶è€Œå› ç‰¹ç½‘ä»ç„¶é¢ä¸´ä¸‰ä¸ªå¿…é¡»å°½æ—©è§£å†³çš„é—®é¢˜ï¼šBç±»åœ°å€åœ¨1992å¹´å·²åˆ†é…äº†è¿‘ä¸€åŠï¼Œçœ¼çœ‹å°±è¦å…¨éƒ¨åˆ†é…å®Œæ¯•ï¼å› ç‰¹ç½‘ä¸»å¹²ç½‘ä¸Šçš„è·¯ç”±è¡¨ä¸­çš„é¡¹ç›®æ•°æ€¥å‰§å¢é•¿ã€‚æ•´ä¸ª IPv4 çš„åœ°å€ç©ºé—´æœ€ç»ˆå°†å…¨éƒ¨è€—å°½ CIDR æ¶ˆé™¤äº†ä¼ ç»Ÿçš„ A ç±»ã€B ç±»å’Œ C ç±»åœ°å€ä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µï¼Œå°†IPåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå‰é¢éƒ¨åˆ†æ˜¯ç½‘ç»œå‰ç¼€ï¼Œç”¨äºæŒ‡æ˜ç½‘ç»œï¼Œåé¢éƒ¨åˆ†æŒ‡æ˜ä¸»æœºã€‚å³ç½‘ç»œå‰ç¼€ + host-id æ–œçº¿è®°æ³•ï¼šå¦‚128.14.35.7/20è¡¨ç¤ºå‰é¢20ä½æ˜¯ç½‘ç»œå‰ç¼€ï¼Œåé¢çš„12ä½æ˜¯ä¸»æœºå· å‡è®¾ä¸€ä¸ªä¼ä¸šæœ‰800å°ä¸»æœºï¼Œ2^9&lt;800&lt;2^10ï¼Œ32-10=22ï¼Œç°åœ¨å¯ä»¥ç”³è¯·ä¸€ä¸ªç½‘ç»œå‰ç¼€ä¸º22çš„åœ°å€å—äº† æœ€é•¿å‰ç¼€åŒ¹é…ï¼šå¦‚æœè·¯ç”±è¡¨ä¸¤æ¡è·¯ç”±éƒ½å¯ä»¥åŒ¹é…ï¼Œä¼˜å…ˆé€‰å“¦å‰ç¼€æœ€å¤§çš„ï¼Œä¹Ÿå°±æ˜¯22å’Œ25è¦é€‰25 å¦‚æœ æ„é€ è¶…ç½‘ï¼ˆè·¯ç”±èšåˆï¼‰ğŸ˜€æ„æˆè¶…ç½‘ï¼Œä¹Ÿç§°ä¸ºè·¯ç”±èšåˆï¼Œç›®çš„åœ¨äºå‡å°‘è·¯ç”±è¡¨çš„è·¯ç”±æ¡ç›® åŒ–æˆäºŒè¿›åˆ¶ä¸€çœ‹å°±æ˜ç™½äº†ï¼Œä¸è§£é‡Š ç¼–å€é¢˜ğŸ˜€å…ˆç¼–ç½‘ç»œï¼Œæ ¹æ®é¢˜ç›®å¯¹åº”çš„ç¼–å€æ–¹æ³•ï¼ˆåˆ†ç±»/å­ç½‘/è¶…ç½‘ï¼‰åˆç†çš„åˆ’åˆ†å¯¹åº”çš„ç½‘ç»œï¼Œæ€ä¹ˆæ‰ç®—åˆç†ï¼Ÿè¦çœ‹ä¸»æœºæ•°é‡ï¼Œæ¯”å¦‚ä¸‹é¢è¿™é¢˜ï¼Œå¦‚æœé¢˜ç›®åˆ¶å®šé‡‡ç”¨åˆ†ç±»çš„IPåœ°å€è¿›è¡Œç¼–å€ï¼Œå‘ç°åŒä¸€ç½‘ç»œä¸»æœºæ•°é‡æœ€å¤šä¸º4å°ï¼ŒåŠ ä¸Šè·¯ç”±å™¨çš„æ¥å£ä¹Ÿæ‰5ä¸ªä¸»æœºå·ï¼Œé‚£ä¹ˆè‚¯å®šé‡‡ç”¨Cç±» å¦‚æœé¢˜ç›®å…è®¸è‡ªç”±å‘æŒ¥ï¼Œé‚£ä¹ˆæˆ‘éšä¾¿ç¼–ï¼Œæ¯”å¦‚222.1.xï¼ˆå½“ç„¶æ¯ä¸ªç‚¹8ä½æœ€å¤§ä¹Ÿæ˜¯225ä½ ä¸èƒ½555.555.1.0ï¼‰ï¼Œé‚£ä¹ˆLAN1ä¸º222.1.1.0ï¼ŒLAN2ä¸º222.1.2.0ä»¥æ­¤ç±»æ¨ è·¯ç”±å™¨ä¹‹é—´ï¼šæ¯ä¸ªæ¥å£è¦å±äºä¸åŒçš„ç½‘ç»œï¼Œæ‰€ä»¥æ‰æœ‰å›¾ä¸­çš„222.1.4.0ï¼Œ222.1.5.0ï¼Œ222.1.6.0 çœ‹ä¸€çœ‹å°±ä¼šäº†ï¼Œé‡‡ç”¨å…¶ä»–ç¼–å€æ–¹å¼å¤§ä½“ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸»è¦æ˜¯ä»¥è·¯ç”±å™¨ä¸ºåˆ’åˆ†çš„ç½‘ç»œå·ä¸åŒ åˆ†ç»„è½¬å‘å’Œè·¯ç”±è¡¨ğŸ¤ªè·¯ç”±è¡¨ğŸ¤ªè®²æ¸…æ¥šäº†IPåœ°å€ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ç½‘ç»œä¸­çš„IPæ•°æ®åŒ…æ˜¯å¦‚ä½•è½¬å‘çš„ IPæ•°æ®æŠ¥ï¼ˆä¹Ÿç§°ä¸ºç½‘ç»œå±‚çš„åˆ†ç»„ï¼‰æ˜¯ç”±è·¯ç”±å™¨è½¬å‘çš„ï¼Œè·¯ç”±å™¨è½¬å‘åˆ†ç»„çš„ä¾æ®æ˜¯è·¯ç”±è¡¨ï¼Œè·¯ç”±è¡¨æœ€ä¸»è¦çš„ä¸¤ä¸ªä¿¡æ¯ï¼šç›®çš„ç½‘ç»œåœ°å€ï¼Œä¸‹ä¸€è·³åœ°å€[æˆ–è½¬å‘æ¥å£] ç›®çš„ç½‘ç»œåœ°å€ï¼šè¦åˆ°è¾¾çš„ç›®çš„ä¸»æœºçš„ç½‘ç»œå· ä¸‹ä¸€è·³åœ°å€ï¼ˆé¥è¿œç½‘ç»œï¼‰ï¼šè·¯ç”±å™¨ä¸ºäº†èƒ½å°†åˆ†ç»„é€è¾¾ç›®çš„ç½‘ç»œï¼Œä¸‹ä¸€æ­¥åº”å°†åˆ†ç»„äº¤ä»˜ç»™å“ªä¸ªIPåœ°å€çš„æ¥å£ è½¬å‘æ¥å£ï¼ˆç›¸é‚»ç½‘ç»œï¼‰ï¼šè·¯ç”±å™¨å°†åˆ†ç»„ä»è‡ªå·±çš„å“ªä¸ªæ¥å£è½¬å‘ è·¯ç”±è¡¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ 1route -n è¦æ‰¾çš„ipä¸å­ç½‘æ©ç ç›¸ä¸ï¼Œèƒ½åŒ¹é…çš„å°±æ˜¯ä¸‹ä¸€è·³ã€‚ä¸€èˆ¬å­ç½‘æ©ç ä¸º0.0.0.0éƒ½æ˜¯åœ¨æœ€åä¸€æ¡ï¼Œæ¥å£enp6s0ä»£è¡¨çš„æ˜¯è·¯ç”±å™¨ï¼Œå‰é¢çš„æ˜¯å±€åŸŸç½‘ï¼Œå½“ç„¶å›¾ä¸­æ²¡æœ‰å±€åŸŸç½‘ï¼Œå±€åŸŸç½‘åŒ¹é…åˆ°çš„è¯ç›´æ¥èµ°äº¤æ¢æœºçš„æ¥å£ æŠ½è±¡ä¸€ç‚¹çš„å›¾å¯ä»¥å¸®åŠ©ç†è§£ï¼š è·¯ç”±è¡¨ä¸­çš„æ¯ä¸€æ¡è®°å½•ç§°ä¸ºä¸€æ¡è·¯ç”±ï¼Œè·¯ç”±çš„ç±»å‹ä¸»è¦æœ‰ä¸‰ç§ï¼š ç½‘ç»œè·¯ç”±ï¼šå¦‚æœè®°å½•çš„æ˜¯ä¸»æœºå·ï¼Œè·¯ç”±è¡¨è¿‡äºåºå¤§ï¼Œæ‰€ä»¥è®°å½•çš„æ˜¯ä¸€ä¸ªç½‘ç»œ ç‰¹å®šä¸»æœºè·¯ç”±ï¼šæœ‰æ—¶å°±åƒæŒ‡å®šè·¯ç”±åˆ°æŸä¸€ä¸ªä¸»æœºï¼Œæˆ–è€…ç½‘ç»œç®¡ç†äººå‘˜ä¸ºäº†æ›´æ–¹ä¾¿åœ°æ§åˆ¶ç½‘ç»œå’Œæµ‹è¯•ç½‘ç»œï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªç‰¹å®šçš„ç›®çš„ä¸»æœºçš„IPåœ°å€ é»˜è®¤è·¯ç”±ï¼š0.0.0.0ï¼Œèƒ½ä¸æ‰€æœ‰ç½‘ç»œåŒ¹é…ï¼Œå…¶å®å°±æ˜¯ç°åœ¨çš„è·¯ç”±è¡¨ä¸­æ²¡æœ‰ï¼Œå¾—ä»å› ç‰¹ç½‘æ‰¾åœ°å€ ä¸‹é¢æ˜¯ä¸€å¼ å¸¦ç‰¹å®šä¸»æœºè·¯ç”±çš„è·¯ç”±è¡¨ï¼Œè‡ªå·±è¯•è¯•å†™ä¸‹ä¸€è·³çœ‹æŒæ¡æ²¡æœ‰ åˆ†ç»„è½¬å‘ç®—æ³•ğŸ˜€ ä»æ•°æ®æŠ¥çš„é¦–éƒ¨æå–ç›®çš„åœ°å€D, å’Œå­ç½‘æ©ç ç›¸ä¸æå–å‡ºç›®çš„ç½‘ç»œåœ°å€ä¸ºN Nä¸ºæœ¬ç½‘ç»œåˆ™ç›´æ¥é€šè¿‡arpåè®®è½¬å‘åˆ°ç›®çš„ä¸»æœº(arpåè®®ä¸‹é¢ä¼šè®²)ï¼Œå¦åˆ™æ‰§è¡Œ3 è‹¥ç½‘ç»œ N ä¸æ­¤è·¯ç”±å™¨ç›´æ¥ç›¸è¿ï¼Œåˆ™æŠŠæ•°æ®æŠ¥ç›´æ¥äº¤ä»˜ç›®çš„ç½‘ç»œï¼Œéšåç»arpåè®®äº¤ç»™ç›®çš„ä¸»æœºï¼Œå¦åˆ™é—´æ¥äº¤ä»˜ï¼Œæ‰§è¡Œ4 è‹¥è·¯ç”±è¡¨ä¸­æœ‰ç›®çš„åœ°å€ä¸º D çš„ç‰¹å®šä¸»æœºè·¯ç”±ï¼Œåˆ™æŠŠæ•°æ®æŠ¥ä¼ é€ç»™è·¯ç”±è¡¨ä¸­æ‰€æŒ‡æ˜çš„ä¸‹ä¸€è·³è·¯ç”±å™¨ï¼Œå¦åˆ™æ‰§è¡Œ5 å¯¹è·¯ç”±è¡¨ä¸­çš„æ¯ä¸€è¡Œçš„å­ç½‘æ©ç å’Œ D é€ä½ç›¸â€œä¸â€çœ‹æ˜¯å¦æœ‰åˆ°è¾¾ç½‘ç»œ N çš„è·¯ç”±ï¼Œåˆ™æŠŠæ•°æ®æŠ¥ä¼ é€ç»™è·¯ç”±è¡¨æŒ‡æ˜çš„ä¸‹ä¸€è·³è·¯ç”±å™¨ï¼Œå¦åˆ™æ‰§è¡Œ6 èµ°é»˜è®¤è·¯ç”±0.0.0.0ï¼Œä»internetä¸Šæ‰¾ æ‰¾ä¸åˆ°ï¼Œåˆ†ç»„è½¬å‘å‡ºé”™ ARPåè®®ğŸ˜€åœ°å€è§£æåè®®ARPï¼šå°±æ˜¯å°†åŒä¸€ä¸ªå±€åŸŸç½‘å†…IPåœ°å€è½¬æ¢ä¸ºMACåœ°å€ è¿˜è®°å¾—æ•°æ®é“¾è·¯å±‚è¯´çš„â€œä¸»æœºA/è·¯ç”±å™¨å‘é€å¸§ç»™ä¸»æœºDæ—¶æŸ¥æ‰¾å’Œå»ºç«‹äº¤æ¢è¡¨çš„è¿‡ç¨‹å—â€ï¼ˆä¸è®°å¾—çš„å¯ä»¥ç‚¹å‡»ç›®å½•ä¸­çš„â€œäº¤æ¢æœºâ€é‚£èŠ‚ï¼‰ï¼Œä¸»æœºAæ€ä¹ˆçŸ¥é“è¦å‘é€ç»™ä¸»æœºDå‘¢ï¼Ÿé€šè¿‡IPåœ°å€ï¼Ÿipåœ°å€æ˜¯ä¸ªè™šæ‹Ÿçš„ä¸œè¥¿ï¼Œå¿…é¡»è¦æ˜ å°„æˆç‰©ç†åœ°å€ï¼ˆMACåœ°å€æ‰å¯ä»¥çŸ¥é“æ˜¯å“ªå°ä¸»æœºï¼‰ æˆ–è€…çœ‹å‰é¢è¯´çš„ipåˆ†ç»„è½¬å‘ï¼Œè½¬å‘åˆ°ç›®çš„ç½‘ç»œäº†ï¼Œå¦‚ä½•ç»™ç›®çš„ä¸»æœºå‘¢ï¼Ÿipæ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»è¦ç‰©ç†åœ°å€ arpåè®®ç›¸å½“äºç½‘ç»œå±‚å’Œæ•°æ®é“¾è·¯å±‚ä¸­é—´çš„ä¸€ä¸ªä¸œè¥¿ æ¯ä¸€ä¸ªä¸»æœºã€è·¯ç”±å™¨éƒ½è®¾æœ‰ä¸€ä¸ª ARPé«˜é€Ÿç¼“å­˜(ARP cache)ï¼Œé‡Œé¢æœ‰æ‰€åœ¨çš„å±€åŸŸç½‘ä¸Šçš„å„ä¸»æœºå’Œè·¯ç”±å™¨çš„ IP åœ°å€åˆ°ç¡¬ä»¶åœ°å€çš„æ˜ å°„è¡¨ å¯ä»¥é€šè¿‡arp -aå‘½ä»¤æ¥çœ‹arpæ˜ å°„è¡¨ å¤ªå°‘äº†æ•ˆæœä¸æ˜¯å¾ˆå¥½ï¼Œå…¶å®å°±æ˜¯ipå’Œmac 1. å½“ä¸»æœºAï¼ˆæˆ–è·¯ç”±å™¨ï¼‰æ¬²å‘æœ¬å±€åŸŸç½‘ä¸Šçš„æŸä¸ªä¸»æœºBï¼ˆæˆ–è·¯ç”±å™¨ï¼‰å‘é€IPæ•°æ®æŠ¥æ—¶ï¼Œå°±å…ˆåœ¨è‡ªå·±çš„ ARP é«˜é€Ÿç¼“å­˜ä¸­æŸ¥çœ‹æœ‰æ— ä¸»æœºBçš„IPåœ°å€ 2. å¦‚æœ‰ï¼Œåˆ™å°†å…¶å¯¹åº”çš„ç¡¬ä»¶åœ°å€å†™å…¥MACå¸§ï¼Œç„¶åé€šè¿‡å±€åŸŸç½‘å°†è¯¥MACå¸§å‘å¾€ä¸»æœºB 3. å¦‚æœæ²¡æœ‰ï¼Œåˆ™è¿›è¡ŒARPå¹¿æ’­ï¼Œå¾—åˆ°ä¸»æœºBçš„ç¡¬ä»¶åœ°å€ï¼Œå†™å…¥MACå¸§ï¼Œå†å‘é€ å¦‚ä½•éªŒè¯å‘¢ï¼Ÿ è¿˜æ˜¯é€šè¿‡æŠ“åŒ… 1tcpdump -nn -i enp6s0 -p 80 or arp å¦ä¸€ä¸ªçª—å£ 1arp -d æœ¬æœºip &amp;&amp; curl www.baidu.com å¦‚æœæ²¡æœ‰å»ºç«‹è¿‡æ˜ å°„ï¼Œé‚£ä¹ˆåœ¨ä¸‰æ¬¡æ¡æ‰‹ä¹‹å‰ä¼šå‘arpåŒ… 5. ä¼ è¾“å±‚ğŸ˜€æä¾›ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯ç«¯å£æˆ–è€…è¯´è¿›ç¨‹ä¹‹é—´ SocketğŸ˜­æˆ‘ä»¬è¯´ç½‘ç»œç¼–ç¨‹å­¦è¿‡socketï¼Œå®ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä»–æ˜¯ç½‘ç»œä¸­è¿›ç¨‹é€šä¿¡çš„ä¸€ç§æ–¹å¼ã€‚èµ·æºäºUnix/LinuxåŸºæœ¬å“²å­¦ä¹‹ä¸€å°±æ˜¯â€œä¸€åˆ‡çš†æ–‡ä»¶â€ï¼Œç†è§£ä¸ºä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œç”¨â€œæ‰“å¼€open â€“&gt; è¯»å†™write/read â€“&gt; å…³é—­closeâ€æ¨¡å¼æ¥å®Œæˆç½‘ç»œé—´çš„è¿›ç¨‹é€šä¿¡ã€‚Socketä¸æ˜¯ä»€ä¹ˆæ¨¡å‹å•Šå±‚å•Šï¼Œåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ¥å£æ— éå°±æ˜¯ç±»ä¼¼åè®®/æ ‡å‡†/è§„èŒƒå˜›ï¼ŒTCP/UDPè¿æ¥å°±å¯ä»¥ç”¨å®ƒæ¥å®ç°å»ºç«‹ æˆ‘ä»¬èƒ½çœ‹åˆ°å—ï¼Ÿèƒ½ï¼æ–‡ä»¶å˜›æ€ä¹ˆä¸èƒ½çœ‹åˆ°å‘¢ï¼æˆ‘ä»¬é¦–å…ˆè¦æŠ›å¼€javaçš„socketå°è£…ï¼Œå’±ä»¬ç”¨ubuntuçœ‹çœ‹è¿™ä¸ªsocketâ€œæ–‡ä»¶â€ å’Œç™¾åº¦è¿›è¡Œsocketè¿æ¥ exec 8&lt;&gt; /dev/tcp/www.baidu.com/80 ä½¿ç”¨çš„æ˜¯tcpæ–¹å¼ï¼ˆåˆ«é—®ä¸ºä»€ä¹ˆtcpè¿™ä¸ªç›®å½•å°±å¯ä»¥å»ºç«‹tcpè¿æ¥ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œä¸€åˆ‡çš†æ–‡ä»¶ï¼‰ 8æ˜¯ä»€ä¹ˆï¼Ÿ8å°±æ˜¯è¿™ä¸ªsocketæ–‡ä»¶ &lt;&gt;æ˜¯è¾“å…¥è¾“å‡ºæµ ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šç”¨ä¸€ä¸ªç§°ä¸º8çš„æ–‡ä»¶ä»£è¡¨äº†è¿™ä¸ªsocketè¿æ¥ å»ºç«‹äº†tcpè¿æ¥åå¯ä»¥å‘é€httpè¯·æ±‚æ ¹ç›®å½• echo -e &quot;GET / HTTP/1.0\\n&quot; 1&gt;&amp; 8 echoæ˜¯è¾“å‡ºï¼Œ -eæ˜¯è§£æ\\nè½¬ç§»å­—ç¬¦ä¸²ï¼Œ1æ˜¯è¾“å…¥æµï¼Œ&gt;æ˜¯é‡å®šå‘ï¼Œä¹Ÿå°±æ˜¯æœ¬æ¥echoæ˜¯è¾“å‡ºåœ¨æ§åˆ¶å°ä¸Šçš„ï¼Œç”¨äº†&gt;å°±è¢«è¾“å…¥åˆ°äº†è¿™ä¸ªå«8çš„æ–‡ä»¶ä¸­å» æ—¢ç„¶å‘é€äº†è¯·æ±‚ï¼Œæ‰“å¼€çœ‹ä¸€ä¸‹è¿™ä¸ª8å“åº”äº†ä»€ä¹ˆï¼Ÿ cat 0&lt;&amp; 8 è¿™ä¸å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„httpå“åº”å¤´å’Œhtmlå˜›ï¼Œè¿™ä¸å°±æ˜¯æ‰€è°“çš„tcpåå‘é€äº†httpå˜› ä»ç›®å½•ä¸­çœ‹çœ‹è¿™ä¸ª8ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªsocketæ–‡ä»¶ $$ä»£è¡¨å½“å‰è¿›ç¨‹çš„æ„æ€ï¼Œ/procé‡Œé¢ä¸€ä¸ªè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆæ–‡ä»¶å¤¹å¯ä»¥ä»£è¡¨è¿›ç¨‹ï¼Œé—®å°±æ˜¯linuxä¸€åˆ‡çš†æ–‡ä»¶ æ€»ä¹‹ï¼Œæˆ‘æƒ³è¯´çš„å°±æ˜¯socketæ˜¯ç¡®å®å­˜åœ¨çš„ï¼Œè®©ä½ èƒ½çœŸå®çš„æ„Ÿå—åˆ°è¿™ä¸ªsocketåƒä¸€ä¸ªç®¡é“ä¸€æ ·èƒ½è¾“å…¥è¾“å‡ºè¿›è¡Œè¿›ç¨‹é—´çš„é€šä¿¡ï¼Œåœ¨linuxä¸‹è¡¨ç°ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶ä»–ç³»ç»Ÿæœ‰å…¶ä»–ç³»ç»Ÿçš„è¡¨ç°æ–¹å¼ å¥—æ¥å­—ç©¶ç«Ÿæ˜¯ä»€ä¹ˆğŸ˜­æˆ‘ä»¬å¸¸æŠŠsocketç¿»è¯‘æˆå¥—æ¥å­—ï¼Œå¥—æ¥å­—æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦è¿™ä¹ˆç¿»è¯‘ï¼Ÿæ‰€è°“å¥—æ¥å­—ï¼Œå°±æ˜¯ src: port -&gt; dest: port ä½ æƒ³ï¼Œç½‘ç»œä¸­ä¸»æœºå’Œç«¯å£åƒåƒä¸‡ï¼Œå°†æŸä¸¤ä¸ªå¯¹åº”èµ·æ¥ï¼Œè¿™ä¸å°±â€œå¥—æ¥â€ä¸Šäº†å˜›ï¼Œæ‰€ä»¥å«å¥—æ¥å­— æˆ‘ä»¬é€šè¿‡netstatå‘½ä»¤å¯ä»¥æŸ¥çœ‹ï¼Œè¿™ä¸ªå‘½ä»¤ä½¿ç”¨æ¥æŸ¥çœ‹ç½‘ç»œçŠ¶æ€çš„ 1netstat -natp å‚æ•°tä»£è¡¨åªçœ‹tcpçš„ï¼Œnä»£è¡¨ä¸è§£æåç§°ï¼ˆå¦åˆ™localé‚£é‡Œæ˜¾ç¤ºçš„æ˜¯wjwï¼‰pä»£è¡¨æ˜¾ç¤ºpidï¼ˆå°±æ˜¯æœ€åä¸€åˆ—ï¼‰ï¼Œaè‡ªç„¶æ˜¯ä»£è¡¨å…¨éƒ¨ å‚è€ƒï¼šç®€ä¹¦yongfutian é“¾æ¥ï¼šhttps://www.jianshu.com/p/066d99da7cbd ä¸‰å¤§è¦ç´ ğŸ¤ªä¸å…¶è¯´æ˜¯socketä¸‰ä¸ªå‚æ•°ï¼Œä¸å¦‚è¯´æ˜¯ç½‘ç»œè¿›ç¨‹é€šä¿¡çš„ä¸‰å¤§è¦ç´  ï¼ˆipåœ°å€ï¼Œåè®®ï¼Œç«¯å£ï¼‰ åè®®å°±æ˜¯tcpå’Œudpï¼Œå½“ç„¶å®é™…ä¸Šå‚æ•°ä¸ºä»¥ä¸‹ä¸¤ä¸ª SOCK_STREAMï¼šè¡¨ç¤ºé¢å‘è¿æ¥çš„æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å»ºç«‹tcpè¿æ¥ SOCK_DGRAMï¼šè¡¨ç¤ºæ— è¿æ¥çš„æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œå³udp ç«¯å£ï¼ŒæœåŠ¡ç«¯éœ€è¦ç›‘å¬ä¸€ä¸ªç«¯å£ï¼ˆä¸èƒ½å†²çªï¼‰ï¼Œå®¢æˆ·ç«¯çš„ç«¯å£æ˜¯éšæœºçš„ï¼ˆ0ï½65535ï¼‰ è¿™é‡Œæœ‰ä¸€é“é¢è¯•é¢˜ï¼šä¸¤ä¸ªæœåŠ¡ç«¯ipA:80ï¼ŒipB:80ï¼Œé—®å®¢æˆ·ç«¯ipCæœ€å¤šå¯ä»¥å»ºç«‹å¤šå°‘ä¸ªtcp/udpè¿æ¥ï¼Ÿæˆ–è€…è¯´socketè¿æ¥ è¦æƒ³å¼„æ˜ç™½è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæ˜¯çœ‹æœåŠ¡ç«¯ï¼Œä¸¤ä¸ªä¸ä¸€æ ·çš„ipï¼Œè‚¯å®šæ²¡æœ‰å…³ç³»ï¼Œæ¯”å¦‚ipAæ˜¯é˜¿é‡Œçš„æœåŠ¡å™¨ï¼ŒipBæ˜¯è…¾è®¯çš„æœåŠ¡å™¨ï¼Œéƒ½èƒ½ç”¨80ç«¯å£å¯¹å§ï¼Œä¸å½±å“ï¼Œè¿™ä¸ªå¥½ç†è§£ã€‚é—®é¢˜åœ¨äºå®¢æˆ·ç«¯å‘¢ï¼Ÿæˆ‘ä»¬è¯´ä¸è€ƒè™‘ä»»ä½•ç³»ç»Ÿå’Œå…¶ä»–åº”ç”¨è¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œæœ€å¤šæ˜¯65536ä¸ªï¼Œé‚£ä¹ˆipC:3000è®¿é—®ipA:80åè¿˜å¯ä»¥è®¿é—®ipB:80å—ï¼Ÿ ç­”æ¡ˆæ˜¯å¯ä»¥ï¼Œæˆ‘ä»¬è¯´socketæ˜¯é‡‡ç”¨å¥—æ¥å­—ï¼Œä¹Ÿå°±æ˜¯src: port -&gt; dest: portï¼Œé‚£ä¹ˆipC:3000 -&gt; ipA:80å’ŒipC:3000 -&gt; ipB:80è‡ªç„¶ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿(å…¶å®å°±æ˜¯ä¸Šé¢netstaté‚£å¼ å›¾çš„æœ€åä¸€åˆ—PID) é¢˜ç›®2ï¼šå®¢æˆ·ç«¯å¤šä¸ªè¿æ¥ï¼ŒæœåŠ¡ç«¯æ¶ˆè€—å¤šå°‘ä¸ªç«¯å£å·ï¼Ÿè¿™ä¸ªé—®é¢˜æ¯”è¾ƒç®€å•ï¼Œç­”æ¡ˆå°±æ˜¯ç›‘å¬çš„é‚£ä¸€ä¸ªï¼Œä¸ç®¡å¤šå°‘ä¸ªè¿æ¥è¿›æ¥ï¼Œlinuxè¡¨ç°ä¸ºforké‚£ä¸ªæ–‡ä»¶8ï¼Œjavaè¡¨ç°ä¸ºå¼€å¯ä¸€ä¸ªçº¿ç¨‹å®Œæˆè¯·æ±‚ã€‚ä½†æ˜¯ç«¯å£ä»£è¡¨è¿›ç¨‹ï¼Œä¸€ç›´å°±ä¸€ä¸ª èƒ½ä¸èƒ½å¤šä¸ªsocketå¯¹åº”ä¸€ä¸ªè¿›ç¨‹å‘¢ï¼Ÿèƒ½ï¼è¿™ä¸ªå°±å«åšå¤šè·¯å¤ç”¨æ¯”å¦‚epollï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼ŒåŸ‹ä¸ªå‘ä»¥åæœ‰æœºä¼šå¡« UDPğŸ˜€ç”¨æˆ·æ•°æ®æŠ¥åè®® UDP (User Datagram Protocol) ç‰¹ç‚¹ğŸ˜€ é¢å‘æ•°æ®æŠ¥ï¼ˆæ— è¿æ¥ï¼‰ æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼ˆä¸å¯é ï¼‰ ä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ï¼ˆä¸åˆ†æ®µï¼‰ æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€å’Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ å¼€é”€å° é¦–éƒ¨æ ¼å¼ğŸ˜€ ä¼ªé¦–éƒ¨ä»…ä»…æ˜¯ä¸ºäº†è®¡ç®—æ£€éªŒå’Œ è®¡ç®—æ£€éªŒå’ŒğŸ˜­ åœæ­¢ç­‰å¾…åè®®ARQ//TODO TCPğŸ˜€ä¼ è¾“æ§åˆ¶åè®® TCP (Transmission Control Protocol) ç‰¹ç‚¹ğŸ˜€ é¢å‘è¿æ¥ å­—èŠ‚æµï¼Œå¯æ‹†åˆ† å¯é äº¤ä»˜ ä¸€å¯¹ä¸€ ç¡®è®¤ã€è¶…æ—¶é‡ä¼ ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶ é¦–éƒ¨æ ¼å¼ğŸ˜€ ä¸‰æ¬¡æ¡æ‰‹ğŸ˜€ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šClientå°†æ ‡å¿—ä½SYNç½®ä¸º1ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Jï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒClientè¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…Serverç¡®è®¤ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šServeræ”¶åˆ°æ•°æ®åŒ…åç”±æ ‡å¿—ä½SYN=1çŸ¥é“Clientè¯·æ±‚å»ºç«‹è¿æ¥ï¼ŒServerå°†æ ‡å¿—ä½SYNå’ŒACKéƒ½ç½®ä¸º1ï¼Œack=J+1(è¿™æ˜¯å€¼è€Œä¸æ˜¯æ ‡å¿—ä½)ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼seq=Kï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Clientä»¥ç¡®è®¤è¿æ¥è¯·æ±‚ï¼ŒServerè¿›å…¥SYN_RCVDçŠ¶æ€ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šClientæ”¶åˆ°ç¡®è®¤åï¼Œæ£€æŸ¥ackæ˜¯å¦ä¸ºJ+1ï¼ŒACKæ ‡å¿—ä½æ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™å°†æ ‡å¿—ä½ACKç½®ä¸º1ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™Serverï¼ŒServeræ£€æŸ¥ACKæ˜¯å¦ä¸º1ï¼Œå¦‚æœæ­£ç¡®åˆ™è¿æ¥å»ºç«‹æˆåŠŸï¼ŒClientå’ŒServerè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼ŒéšåClientä¸Serverä¹‹é—´å¯ä»¥å¼€å§‹ä¼ è¾“æ•°æ®äº†ã€‚ å››æ¬¡æŒ¥æ‰‹ğŸ˜€ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼Œå®¢æˆ·ç«¯è®¾ç½®seqå’Œ ACK ,å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ª FIN(ç»ˆç»“)æŠ¥æ–‡æ®µã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯è¿›å…¥FIN_WAIT_1çŠ¶æ€ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯æ²¡æœ‰æ•°æ®è¦å‘é€ç»™æœåŠ¡ç«¯äº†ã€‚ ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°äº†å®¢æˆ·ç«¯å‘é€çš„ FIN æŠ¥æ–‡æ®µï¼Œå‘å®¢æˆ·ç«¯å›äº†ä¸€ä¸ª ACK æŠ¥æ–‡æ®µã€‚æœåŠ¡ç«¯è¿›å…¥CLOSE_WAITçŠ¶æ€ï¼Œå®¢æˆ·ç«¯è¿›å…¥FIN_WAIT_2çŠ¶æ€ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼ŒæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€FIN æŠ¥æ–‡æ®µï¼Œè¯·æ±‚å…³é—­è¿æ¥ï¼ŒåŒæ—¶æœåŠ¡ç«¯è¿›å…¥LAST_ACKçŠ¶æ€ã€‚ ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯å‘é€çš„ FIN æŠ¥æ–‡æ®µåï¼Œå‘æœåŠ¡ç«¯å‘é€ ACK æŠ¥æ–‡æ®µ,ç„¶åå®¢æˆ·ç«¯è¿›å…¥ TIME_WAITçŠ¶æ€ã€‚æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡æ®µä»¥åï¼Œå°±å…³é—­è¿æ¥ã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯ç­‰å¾…2MSLï¼ˆæŒ‡ä¸€ä¸ªç‰‡æ®µåœ¨ç½‘ç»œä¸­æœ€å¤§çš„å­˜æ´»æ—¶é—´ï¼‰åä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™è¯´æ˜æœåŠ¡ç«¯å·²ç»æ­£å¸¸å…³é—­ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥å…³é—­è¿æ¥äº†ã€‚ ä¸ºä»€ä¹ˆç¬¬äºŒæ¬¡æŒ¥æ‰‹çš„æ—¶å€™æœåŠ¡ç«¯ä¸å‘FINç›´æ¥å…³é—­ï¼Ÿ å› ä¸ºæœåŠ¡ç«¯è¿˜æœ‰æ•°æ®æœªå‘é€ï¼Œå‘é€å®Œå†ä¸»åŠ¨å…³é—­ ä¸€å¼ å……æ»¡æ°´å°çš„å›¾é“æ¸…äº†ä¸€åˆ‡â€¦ 6. åº”ç”¨å±‚ğŸ˜€HTTPğŸ˜€å¸¸è§çš„HTTPè¯·æ±‚åŠ¨è¯ğŸ˜€ GET: ä»æœåŠ¡å™¨è·å–èµ„æºPOST: åœ¨æœåŠ¡å™¨æ–°å»ºèµ„æºPUT: åœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºDELETE: åœ¨æœåŠ¡å™¨åˆ é™¤èµ„æºHEAD: è·å–èµ„æºçš„å…ƒæ•°æ®OPTIONAL: æŸ¥è¯¢å¯¹æŒ‡å®šçš„èµ„æºæ”¯æŒçš„æ–¹æ³• HTTPçŠ¶æ€ç è¡¨ğŸ˜€ çŠ¶æ€ç  çŠ¶æ€ç è‹±æ–‡åç§° ä¸­æ–‡æè¿° 1** ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ 100 Continue ç»§ç»­ã€‚å®¢æˆ·ç«¯åº”ç»§ç»­å…¶è¯·æ±‚ 101 Switching Protocols åˆ‡æ¢åè®®ã€‚æœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ‡æ¢åè®®ã€‚åªèƒ½åˆ‡æ¢åˆ°æ›´é«˜çº§çš„åè®®ï¼Œä¾‹å¦‚ï¼Œåˆ‡æ¢åˆ°HTTPçš„æ–°ç‰ˆæœ¬åè®® 2** æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç† 200 OK è¯·æ±‚æˆåŠŸã€‚ä¸€èˆ¬ç”¨äºGETä¸POSTè¯·æ±‚ 201 Created å·²åˆ›å»ºã€‚æˆåŠŸè¯·æ±‚å¹¶åˆ›å»ºäº†æ–°çš„èµ„æº 202 Accepted å·²æ¥å—ã€‚å·²ç»æ¥å—è¯·æ±‚ï¼Œä½†æœªå¤„ç†å®Œæˆ 203 Non-Authoritative Information éæˆæƒä¿¡æ¯ã€‚è¯·æ±‚æˆåŠŸã€‚ä½†è¿”å›çš„metaä¿¡æ¯ä¸åœ¨åŸå§‹çš„æœåŠ¡å™¨ï¼Œè€Œæ˜¯ä¸€ä¸ªå‰¯æœ¬ 204 No Content æ— å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†ï¼Œä½†æœªè¿”å›å†…å®¹ã€‚åœ¨æœªæ›´æ–°ç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯ç¡®ä¿æµè§ˆå™¨ç»§ç»­æ˜¾ç¤ºå½“å‰æ–‡æ¡£ 205 Reset Content é‡ç½®å†…å®¹ã€‚æœåŠ¡å™¨å¤„ç†æˆåŠŸï¼Œç”¨æˆ·ç»ˆç«¯ï¼ˆä¾‹å¦‚ï¼šæµè§ˆå™¨ï¼‰åº”é‡ç½®æ–‡æ¡£è§†å›¾ã€‚å¯é€šè¿‡æ­¤è¿”å›ç æ¸…é™¤æµè§ˆå™¨çš„è¡¨å•åŸŸ 206 Partial Content éƒ¨åˆ†å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†éƒ¨åˆ†GETè¯·æ±‚ 3** é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚ 300 Multiple Choices å¤šç§é€‰æ‹©ã€‚è¯·æ±‚çš„èµ„æºå¯åŒ…æ‹¬å¤šä¸ªä½ç½®ï¼Œç›¸åº”å¯è¿”å›ä¸€ä¸ªèµ„æºç‰¹å¾ä¸åœ°å€çš„åˆ—è¡¨ç”¨äºç”¨æˆ·ç»ˆç«¯ï¼ˆä¾‹å¦‚ï¼šæµè§ˆå™¨ï¼‰é€‰æ‹© 301 Moved Permanently æ°¸ä¹…ç§»åŠ¨ã€‚è¯·æ±‚çš„èµ„æºå·²è¢«æ°¸ä¹…çš„ç§»åŠ¨åˆ°æ–°URIï¼Œè¿”å›ä¿¡æ¯ä¼šåŒ…æ‹¬æ–°çš„URIï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å®šå‘åˆ°æ–°URIã€‚ä»Šåä»»ä½•æ–°çš„è¯·æ±‚éƒ½åº”ä½¿ç”¨æ–°çš„URIä»£æ›¿ 302 Found ä¸´æ—¶ç§»åŠ¨ã€‚ä¸301ç±»ä¼¼ã€‚ä½†èµ„æºåªæ˜¯ä¸´æ—¶è¢«ç§»åŠ¨ã€‚å®¢æˆ·ç«¯åº”ç»§ç»­ä½¿ç”¨åŸæœ‰URI 303 See Other æŸ¥çœ‹å…¶å®ƒåœ°å€ã€‚ä¸301ç±»ä¼¼ã€‚ä½¿ç”¨GETå’ŒPOSTè¯·æ±‚æŸ¥çœ‹ 304 Not Modified æœªä¿®æ”¹ã€‚æ‰€è¯·æ±‚çš„èµ„æºæœªä¿®æ”¹ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤çŠ¶æ€ç æ—¶ï¼Œä¸ä¼šè¿”å›ä»»ä½•èµ„æºã€‚å®¢æˆ·ç«¯é€šå¸¸ä¼šç¼“å­˜è®¿é—®è¿‡çš„èµ„æºï¼Œé€šè¿‡æä¾›ä¸€ä¸ªå¤´ä¿¡æ¯æŒ‡å‡ºå®¢æˆ·ç«¯å¸Œæœ›åªè¿”å›åœ¨æŒ‡å®šæ—¥æœŸä¹‹åä¿®æ”¹çš„èµ„æº 305 Use Proxy ä½¿ç”¨ä»£ç†ã€‚æ‰€è¯·æ±‚çš„èµ„æºå¿…é¡»é€šè¿‡ä»£ç†è®¿é—® 306 Unused å·²ç»è¢«åºŸå¼ƒçš„HTTPçŠ¶æ€ç  307 Temporary Redirect ä¸´æ—¶é‡å®šå‘ã€‚ä¸302ç±»ä¼¼ã€‚ä½¿ç”¨GETè¯·æ±‚é‡å®šå‘ 4** å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚ 400 Bad Request å®¢æˆ·ç«¯è¯·æ±‚çš„è¯­æ³•é”™è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•ç†è§£ 401 Unauthorized è¯·æ±‚è¦æ±‚ç”¨æˆ·çš„èº«ä»½è®¤è¯ 402 Payment Required ä¿ç•™ï¼Œå°†æ¥ä½¿ç”¨ 403 Forbidden æœåŠ¡å™¨ç†è§£è¯·æ±‚å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œæ­¤è¯·æ±‚ 404 Not Found æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰¾åˆ°èµ„æºï¼ˆç½‘é¡µï¼‰ã€‚é€šè¿‡æ­¤ä»£ç ï¼Œç½‘ç«™è®¾è®¡äººå‘˜å¯è®¾ç½®â€æ‚¨æ‰€è¯·æ±‚çš„èµ„æºæ— æ³•æ‰¾åˆ°â€çš„ä¸ªæ€§é¡µé¢ 405 Method Not Allowed å®¢æˆ·ç«¯è¯·æ±‚ä¸­çš„æ–¹æ³•è¢«ç¦æ­¢ 406 Not Acceptable æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯è¯·æ±‚çš„å†…å®¹ç‰¹æ€§å®Œæˆè¯·æ±‚ 407 Proxy Authentication Required è¯·æ±‚è¦æ±‚ä»£ç†çš„èº«ä»½è®¤è¯ï¼Œä¸401ç±»ä¼¼ï¼Œä½†è¯·æ±‚è€…åº”å½“ä½¿ç”¨ä»£ç†è¿›è¡Œæˆæƒ 408 Request Time-out æœåŠ¡å™¨ç­‰å¾…å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æ—¶é—´è¿‡é•¿ï¼Œè¶…æ—¶ 409 Conflict æœåŠ¡å™¨å®Œæˆå®¢æˆ·ç«¯çš„ PUT è¯·æ±‚æ—¶å¯èƒ½è¿”å›æ­¤ä»£ç ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚æ—¶å‘ç”Ÿäº†å†²çª 410 Gone å®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºå·²ç»ä¸å­˜åœ¨ã€‚410ä¸åŒäº404ï¼Œå¦‚æœèµ„æºä»¥å‰æœ‰ç°åœ¨è¢«æ°¸ä¹…åˆ é™¤äº†å¯ä½¿ç”¨410ä»£ç ï¼Œç½‘ç«™è®¾è®¡äººå‘˜å¯é€šè¿‡301ä»£ç æŒ‡å®šèµ„æºçš„æ–°ä½ç½® 411 Length Required æœåŠ¡å™¨æ— æ³•å¤„ç†å®¢æˆ·ç«¯å‘é€çš„ä¸å¸¦Content-Lengthçš„è¯·æ±‚ä¿¡æ¯ 412 Precondition Failed å®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯çš„å…ˆå†³æ¡ä»¶é”™è¯¯ 413 Request Entity Too Large ç”±äºè¯·æ±‚çš„å®ä½“è¿‡å¤§ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†ï¼Œå› æ­¤æ‹’ç»è¯·æ±‚ã€‚ä¸ºé˜²æ­¢å®¢æˆ·ç«¯çš„è¿ç»­è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šå…³é—­è¿æ¥ã€‚å¦‚æœåªæ˜¯æœåŠ¡å™¨æš‚æ—¶æ— æ³•å¤„ç†ï¼Œåˆ™ä¼šåŒ…å«ä¸€ä¸ªRetry-Afterçš„å“åº”ä¿¡æ¯ 414 Request-URI Too Large è¯·æ±‚çš„URIè¿‡é•¿ï¼ˆURIé€šå¸¸ä¸ºç½‘å€ï¼‰ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç† 415 Unsupported Media Type æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚é™„å¸¦çš„åª’ä½“æ ¼å¼ 416 Requested range not satisfiable å®¢æˆ·ç«¯è¯·æ±‚çš„èŒƒå›´æ— æ•ˆ 417 Expectation Failed æœåŠ¡å™¨æ— æ³•æ»¡è¶³Expectçš„è¯·æ±‚å¤´ä¿¡æ¯ 5** æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ 500 Internal Server Error æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ 501 Not Implemented æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚çš„åŠŸèƒ½ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ 502 Bad Gateway ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»è¿œç¨‹æœåŠ¡å™¨æ¥æ”¶åˆ°äº†ä¸€ä¸ªæ— æ•ˆçš„å“åº” 503 Service Unavailable ç”±äºè¶…è½½æˆ–ç³»ç»Ÿç»´æŠ¤ï¼ŒæœåŠ¡å™¨æš‚æ—¶çš„æ— æ³•å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å»¶æ—¶çš„é•¿åº¦å¯åŒ…å«åœ¨æœåŠ¡å™¨çš„Retry-Afterå¤´ä¿¡æ¯ä¸­ 504 Gateway Time-out å……å½“ç½‘å…³æˆ–ä»£ç†çš„æœåŠ¡å™¨ï¼ŒæœªåŠæ—¶ä»è¿œç«¯æœåŠ¡å™¨è·å–è¯·æ±‚ 505 HTTP Version not supported æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚çš„HTTPåè®®çš„ç‰ˆæœ¬ï¼Œæ— æ³•å®Œæˆå¤„ç† HTTPå’ŒHTTPSçš„åŒºåˆ«ğŸ¤ªHTTPSï¼ˆHyper Text Transfer Protocol over SecureSocket Layerï¼‰æ˜¯èº«æŠ«SSLå¤–å£³çš„HTTPï¼Œä¸HTTPæ˜æ–‡åè®®å¯¹æ¯”ï¼ŒHTTPSå…·å¤‡ä¸¤å¤§ç½‘ç»œå®‰å…¨åŠŸèƒ½ï¼šåŠ å¯†ä»¥åŠèº«ä»½éªŒè¯ã€‚ åŠ å¯†ï¼šHTTPSä¼ è¾“åè®®å¯å¯¹å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¼ è¾“æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œé˜²æ­¢ç¬¬ä¸‰æ–¹çš„çªƒå–ã€ç¯¡æ”¹ã€çª¥è§†ç­‰ä¸­é—´äººæ”»å‡»ï¼ˆä¸­é—´äººæ”»å‡»å¯ä»¥çœ‹å¤§ä½¬çš„è®²è§£https://www.zhihu.com/question/304030251ï¼‰ã€‚ èº«ä»½éªŒè¯ï¼šå®¢æˆ·ç«¯ç”¨æˆ·å¯é€šè¿‡HTTPSèƒŒåçš„SSLè¯ä¹¦å¯¹æœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯ï¼Œè¾¨åˆ«çœŸå‡ç½‘ç«™ï¼Œé¿å…æ‰å…¥é’“é±¼ç½‘ç«™çš„é™·é˜±ã€‚ //TODO è¾“å…¥ç½‘å€æ•²ä¸‹å›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆğŸ˜€ç¬¬ä¸€æ­¥ï¼šæµè§ˆå™¨æŸ¥æ‰¾åŸŸåçš„IPåœ°å€ï¼ˆDNSåè®®ï¼‰ æŸ¥æ‰¾æµè§ˆå™¨ç¼“å­˜ï¼šå› ä¸ºæµè§ˆå™¨ä¸€èˆ¬ä¼šç¼“å­˜DNSè®°å½•ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœæœ‰ç¼“å­˜åˆ™è¿”å›IP æŸ¥æ‰¾ç³»ç»Ÿç¼“å­˜ï¼šæµè§ˆå™¨ä¼šè¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼ŒæŸ¥æ‰¾æœ¬æœºçš„hostsæ–‡ä»¶ï¼Œå¦‚æœæ‰¾åˆ°åˆ™è¿”å›IP æŸ¥æ‰¾è·¯ç”±å™¨ç¼“å­˜ï¼šå€ŸåŠ©ç½‘ç»œï¼Œè·¯ç”±å™¨ä¸€èˆ¬éƒ½æœ‰è‡ªå·±çš„DNSç¼“å­˜ï¼Œä¼šå»æŸ¥æ‰¾ISP æœåŠ¡å•†ç¼“å­˜DNSçš„æœåŠ¡å™¨ï¼Œå¦‚æœæŸ¥æ‰¾åˆ°åˆ™è¿”å›IP é€’å½’æŸ¥è¯¢ï¼šæ‰€è°“é€’å½’æŸ¥è¯¢å°±æ˜¯å¦‚æœä¸»æœºæ‰€è¯¢é—®çš„æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸çŸ¥é“è¢«æŸ¥è¯¢åŸŸåçš„IPåœ°å€ï¼Œé‚£ä¹ˆæœ¬åœ°åŸŸåæœåŠ¡å™¨å°±ä»¥DNSå®¢æˆ·çš„èº«ä»½ï¼Œå‘å…¶ä»–æ ¹åŸŸåæœåŠ¡å™¨ç»§ç»­å‘å‡ºæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡ è¿­ä»£æŸ¥è¯¢ï¼šå…¶ä»–æ ¹åŸŸåæœåŠ¡å™¨å‘Šè¯‰æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸‹ä¸€çº§çš„æœåŠ¡å™¨ipï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨å‘è¿™ä¸ªæœåŠ¡å™¨ipæŸ¥æ‰¾ï¼Œå†å¾—åˆ°ä¸‹ä¸€çº§ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨å†æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æƒ³æŸ¥æ‰¾çš„åŸŸåå¯¹åº”çš„ipï¼Œæœ¬åœ°æœåŠ¡å™¨å†å‘é€ç»™ä¸»æœº ç¬¬äºŒæ­¥ï¼šæµè§ˆå™¨ä¸ç›®æ ‡æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ï¼ˆTCPåè®®ï¼‰ ä¸‰æ¬¡æ¡æ‰‹ï¼Œå‚è€ƒä¸Šé¢ç¬¬5å°ç»“TCPä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸‰æ­¥ï¼šæµè§ˆå™¨å‘é€HTTPè¯·æ±‚ï¼ˆHTTPåè®®ï¼‰ å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„httpè¯·æ±‚ï¼Œè¿™é‡ŒåŒ…æ‹¬äº†è¯·æ±‚å¤´ï¼Œgetçš„è¯å¯èƒ½ä¼šæœ‰æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œpostçš„è¯å¯èƒ½è¿˜æœ‰è¯·æ±‚ä½“ï¼š ç¬¬å››æ­¥ï¼šå¯èƒ½ä¼šæœ‰é‡å®šå‘ éƒ¨åˆ†ç½‘ç«™ä¼šæ˜¾ç¤º300å¼€å¤´çš„é‡å®šå‘ï¼Œè¿™æ˜¯å› ä¸ºæœ‰äº›ç½‘ç«™å±•ç¤ºé¡µéœ€è¦åšSEOä¼˜åŒ–ã€‚ä¸ºäº†æé«˜SEOæ’åï¼Œé€šå¸¸å°†www.wjw.todayå’Œwjw.todayç»‘å®šä¸ºä¸€ä¸ªç½‘ç«™ï¼Œç»Ÿä¸€ç»è¿‡ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå†åšè´Ÿè½½å‡è¡¡åˆ°ä¸åŒä¸»æœºæœåŠ¡å™¨ã€‚ å¦‚æœæœ‰é‡å®šå‘ï¼Œé‚£ä¹ˆè·å–åˆ°é‡å®šå‘çš„è®¿é—®åœ°å€åï¼Œä¼šå†å‘é€ä¸€æ¬¡httpè¯·æ±‚ ç¬¬å››æ­¥ï¼šæœåŠ¡å™¨å¤„ç†å’Œå“åº” ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„åå°ï¼Œæ¥æ”¶åˆ°è¯·æ±‚ååšå¤„ç†ï¼Œé€šå¸¸æ˜¯æ“ä½œæ•°æ®åº“å•¦ç­‰ç­‰ç­‰ç­‰ï¼Œç„¶åè¿”å›ä¸€ä¸ªå“åº”ï¼Œå¯èƒ½æ˜¯æ•´é¡µHTMLï¼Œä¹Ÿå¯èƒ½æ˜¯ç°åœ¨æµè¡Œçš„jsonï¼Œå¹¶è¿”å›ä¸€ä¸ª200 OKçŠ¶æ€ç  ç¬¬äº”æ­¥ï¼šé‡Šæ”¾TCPè¿æ¥ å››æ¬¡æŒ¥æ‰‹ï¼Œå‚è€ƒä¸Šé¢ç¬¬5å°ç»“TCPå››æ¬¡æŒ¥æ‰‹ ç¬¬å…­æ­¥ï¼šæµè§ˆå™¨æ¸²æŸ“ æµè§ˆå™¨æ ¹æ®Content-typeå¯¹è¿”å›çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ï¼Œhtmlå°±æ˜¯text/htmlï¼Œjsonæ˜¯application/jsonï¼Œè¿™é‡Œé€šå¸¸éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œæµè§ˆå™¨ä¸éœ€è¦å®Œå…¨æ¥æ”¶åˆ°å“åº”æ•°æ®åŒ…å°±å·²ç»å¼€å§‹æ¸²æŸ“äº†ï¼Œæ¥æ”¶åˆ°æ•°æ®åå†è¿›è¡Œç›¸åº”çš„æ¸²æŸ“ã€‚æ¥ä¸‹æ¥æ˜¯ä¸€äº›æ ·å¼/å›¾ç‰‡/jsæ–‡ä»¶ï¼Œæµè§ˆå™¨é€šè¿‡è¿™äº›æ–‡ä»¶çš„urlå‘é€å¯¹åº”çš„è¯·æ±‚ï¼Œå’Œä¹‹å‰çš„htmlé¡µé¢ä¸€æ ·çš„è¿‡ç¨‹ï¼Œåªæ˜¯æœ‰æ—¶è¿™äº›æ–‡ä»¶ä¸åœ¨è‡ªå·±çš„æœåŠ¡å™¨ï¼Œè€Œæ˜¯ç¼“å­˜æˆ–è€…cdnæ‰˜ç®¡ å‚è€ƒ https://blog.csdn.net/jiao_0509/article/details/82491299","link":"/cs/network/"},{"title":"é˜¿é‡ŒçŸ­ä¿¡","text":"æ³¨å†Œçš„æ—¶å€™æˆ–è€…ä»€ä¹ˆæ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨çŸ­ä¿¡éªŒè¯ç ï¼Œè®°å½•ä¸€ä¸‹é˜¿é‡ŒçŸ­ä¿¡çš„ä½¿ç”¨ 1. ç™»å½•é˜¿é‡Œäº‘åå…ˆç»™è‡ªå·±çš„è´¦æˆ·å……å€¼é˜”æ°”çš„å¤§æ‰‹ä¸€æŒ¥ï¼Œå……ä»–ä¸ª2å—é’± 2. è®¾ç½®ä¸€äº›å¿…è¦çš„ä¸œè¥¿æŸ¥çœ‹é˜¿é‡Œäº‘å®˜æ–¹çš„ä½¿ç”¨æ–‡æ¡£ï¼Œè·Ÿç€æ­¥éª¤æ¥å³å¯ï¼Œè™½ç„¶çœ‹èµ·æ¥å¾ˆå¤æ‚ ä¸»è¦éœ€è¦çš„ä¸œè¥¿åŒ…æ‹¬ AccessKey ID AccessKey SECRET ç­¾å æ¨¡ç‰ˆCODE AccessKey SECRETåªæœ‰åœ¨åˆ›å»ºçš„ç¬¬ä¸€æ¬¡å¯ä»¥çœ‹åˆ°ï¼Œè®°å¾—è®°å½•ä¸‹æ¥ï¼Œé”™è¿‡äº†å°±è¦å†åˆ›å»ºä¸€ä¸ªï¼Œæé†’ä¸€ä¸‹ï¼Œè™½ç„¶åˆ›å»ºåªéœ€è¦ç‚¹ä¸€ä¸‹é¼ æ ‡ã€‚ 3. Java SDKä½¿ç”¨å®˜ç½‘çš„æ–‡æ¡£ä¹Ÿå†™å¾—å¾ˆè¯¦ç»†äº† mavenä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.aliyun&lt;/groupId&gt; &lt;artifactId&gt;aliyun-java-sdk-core&lt;/artifactId&gt; &lt;version&gt;4.5.3&lt;/version&gt;&lt;/dependency&gt; ä»£ç å°±ç›´æ¥ä»å®˜ç½‘ç”Ÿæˆçš„æ¨¡æ¿æ‹‰ä¸‹æ¥å°±å¯ä»¥è¿è¡Œäº† ç”±äºçœŸæ­£ä½¿ç”¨çš„æ—¶å€™ç”µè¯å·ç æ˜¯ç”¨æˆ·å¡«å†™çš„ï¼ŒéªŒè¯ç æ˜¯éšæœºç”Ÿæˆçš„ï¼Œç­¾åå’Œæ¨¡æ¿ä¸ä¸€å®šéƒ½åªä½¿ç”¨ä¸€å¥—ï¼Œæ€»ä¹‹ï¼Œä¸èƒ½å†™æ­»ã€‚å†™ä¸€ä¸ªUtilå·¥å…·ç±»ï¼Œç”¨å‚æ•°çš„æ–¹å¼ä¼ è¿›å»ï¼Œåªéœ€è¦æ›¿æ¢æˆè‡ªå·±çš„accessKeyIdå’ŒaccessKeySecretå°±å¯ä»¥ä½¿ç”¨äº† 12345678910111213141516171819202122232425262728293031323334public class SmsUtils //äº§å“åç§°:äº‘é€šä¿¡çŸ­ä¿¡APIäº§å“,å¼€å‘è€…æ— éœ€æ›¿æ¢ static final String product = \"Dysmsapi\"; //äº§å“åŸŸå,å¼€å‘è€…æ— éœ€æ›¿æ¢ static final String domain = \"dysmsapi.aliyuncs.com\"; static final Logger logger = LoggerFactory.getLogger(SmsUtils.class); public CommonResponse sendSms(String phone, String code, String signName, String template) throws ClientException { DefaultProfile profile = DefaultProfile.getProfile(\"cn-hangzhou\", \"æ›¿æ¢æˆä½ çš„accessKeyId\", \"æ›¿æ¢æˆä½ çš„accessKeySecret\"); IAcsClient client = new DefaultAcsClient(profile); CommonRequest request = new CommonRequest(); request.setSysMethod(MethodType.POST); request.setSysDomain(\"dysmsapi.aliyuncs.com\"); request.setSysVersion(\"2017-05-25\"); request.setSysAction(\"SendSms\"); request.putQueryParameter(\"RegionId\", \"cn-hangzhou\"); request.putQueryParameter(\"PhoneNumbers\", phone); request.putQueryParameter(\"SignName\", signName); request.putQueryParameter(\"TemplateCode\", template); request.putQueryParameter(\"TemplateParam\", \"{\\\"code\\\":\\\"\" + code + \"\\\"}\"); request.putQueryParameter(\"OutId\", \"suibian123\"); CommonResponse response = client.getCommonResponse(request); logger.info(\"å‘é€çŸ­ä¿¡çŠ¶æ€ï¼š{}\", response.getHttpStatus()); logger.info(\"å‘é€çŸ­ä¿¡æ¶ˆæ¯ï¼š{}\", response.getData()); return response; }} å½“ç„¶ï¼ŒaccessKeyIdå’ŒaccessKeySecretä¹Ÿå¯ä»¥ä¸å†™æ­»ï¼Œé€šè¿‡propertiesæˆ–ymlæ–‡ä»¶æ¥è¯»å–ï¼Œé‚£å°±æœ€å¥½äº†ï¼Œä¸å±•å¼€äº† æœ€åä¸Šæ•ˆæœå›¾","link":"/Others/ali-mail/"},{"title":"é”å’ŒåŒæ­¥","text":"å¼•è¨€æœ¬æ–‡å°†ä»‹ç»synchronizedï¼Œcasç­‰æ¦‚å¿µ 1. Synchronized1.1 é”å¯¹è±¡æ˜¯è°åŠ åœ¨ä»£ç å—ä¸Š 1234Object o = new Object();synchronized(o){ //å¯¹è±¡oå°±æ˜¯è¿™æŠŠé”} åŠ åœ¨æ–¹æ³•ä¸Š 1234public synchronized void fun(){ //æœ¬ç±»çš„å¯¹è±¡å°±æ˜¯è¿™æŠŠé” //ç­‰åŒäºsynchronized(this)} åŠ åœ¨é™æ€æ–¹æ³•ä¸Š 1234public static synchronized void fun(){ //æœ¬ç±»çš„Classç±»å¯¹è±¡ //ç­‰åŒäºsynchronized(è¿™ä¸ªç±».class)} åªè¦é”æ˜¯åŒä¸€æŠŠå³å¯å®ç°åŒæ­¥ è¸©å‘ï¼ï¼ï¼è¦æ³¨æ„æœ‰äº›æ—¶å€™é”ä½çš„å¹¶ä¸æ˜¯åŒä¸€æŠŠé” ä½ ä»¥ä¸ºä½ é”ä½äº†å®ƒï¼Œå…¶å®å¹¶ä¸ç„¶ æ¯”å¦‚å‰é¢çš„åŠ åœ¨ä»£ç å—ä¸Šé‚£æ®µï¼Œå¦‚æœè¿™æ ·å†™ï¼š 1234567891011121314151617181920212223242526272829/** * @author wjw * @date 2020/11/21 14:56 */public class Synchronizedé”å¯¹è±¡è¸©å‘è¯´æ˜ { public static void main(String[] args) { TestSynchronized test = new TestSynchronized(); for (int i = 0; i &lt; 1000; i++) { new Thread(()-&gt;{ test.fun(); }).start(); } }}class TestSynchronized{ private int num = 0; public void fun() { Object o = new Object(); //æ³¨æ„è¿™é‡Œæ˜¯åœ¨æ–¹æ³•é‡Œé¢ synchronized(o){ for (int i = 0; i &lt; 1000; i++) { System.out.println(Thread.currentThread().getName() + \" : \" + num++); } } }} åœ¨å¤šçº¿ç¨‹ä¸‹æ¯è°ƒç”¨ä¸€æ¬¡funï¼Œé”å¯¹è±¡oå…¶å®éƒ½newäº†ï¼Œä¸æ˜¯åŒä¸€ä¸ªï¼Œæ‰€ä»¥æ˜¯èµ·ä¸åˆ°åŒæ­¥ä½œç”¨çš„ï¼Œå¯ä»¥è·‘è·‘çœ‹ï¼Œè¿™é‡Œè®¾ç½®çš„çº¿ç¨‹æ•°å’Œé‡éƒ½æ¯”è¾ƒå¤§ï¼Œä¸ç„¶ä¸æ˜æ˜¾ ä¸€ä¸ªæ˜¯æœ€ç»ˆçš„ç»“æœå…¶å®æ˜¯ä¸å¯¹çš„ è¿˜æœ‰ä¸€ä¸ªæ˜¯è¿‡ç¨‹å¯ä»¥çœ‹åˆ°å…¶å®çº¿ç¨‹ä¹‹é—´å¾ˆå¤šæ—¶å€™æ˜¯ç©¿æ’æ‰§è¡Œçš„ æ‰€ä»¥æ­£ç¡®çš„å†™æ³•åº”å½“å°†é”å¯¹è±¡oæ”¾åœ¨ç±»ä¸­ï¼Œé€šå¸¸å°†é”å¯¹è±¡ç”¨finalä¿®é¥°(åŠ ä¸åŠ éƒ½è¡Œï¼Œåªæ˜¯è¯´ä¸€èˆ¬éƒ½ä¼šåŠ )ï¼Œæˆ–è€…åœ¨mainé‡Œé¢ä¼ è¿‡å»ï¼Œä¸ç®¡æ€æ ·ï¼Œåªè¦ä¿è¯åŒä¸€æŠŠé”å°±è¡Œ 12345678910111213class TestSynchronized{ private final Object o = new Object(); //å°†é”å¯¹è±¡æ”¾åœ¨ç±»ä¸Š private int num = 0; public void fun() { synchronized(o){ for (int i = 0; i &lt; 1000; i++) { System.out.println(Thread.currentThread().getName() + \" : \" + num++); } } }} ç»“æœå¦‚ä¸‹å›¾ï¼Œå¯ä»¥çœ‹åˆ°ç»“æœæ˜¯å¯¹çš„ï¼Œä¸”çº¿ç¨‹ä¹‹é—´éƒ½æ˜¯é—´éš”çš„ï¼Œè¿™æ‰æ˜¯çœŸæ­£åšåˆ°äº†åŒæ­¥ å†æ¯”å¦‚åŒæ—¶æœ‰ä¸€ä¸ªsynchronizedé™æ€æ–¹æ³•ï¼Œå’Œsynchronizedæ–¹æ³•ï¼Œä¹Ÿæ˜¯ä¸åŒçš„é”ï¼Œå¹¶æ²¡æœ‰é”ä½æ•´ä¸ªç±»è¿™ä¸ªè¯´æ³•ï¼Œåªæ˜¯å°†è¿™ä¸ªç±»çš„classå¯¹è±¡ä½œä¸ºäº†é”å¯¹è±¡ï¼ï¼ï¼ å‚è€ƒ https://www.cnblogs.com/codebj/p/10994748.html 1.2 é”å‡çº§è¿‡ç¨‹æ—§ç‰ˆæœ¬javaçš„synchronizedæ˜¯ç›´æ¥åˆ°é‡é‡çº§é”çš„ï¼Œ1.6ä»¥åæ˜¯ä¸€ä¸ªé”å‡çº§çš„è¿‡ç¨‹ï¼š æ²¡æœ‰é”-&gt;åå‘é”-&gt;è½»é‡çº§é”-&gt;é‡é‡çº§é” åå‘é”ï¼šä¸¥æ ¼æ¥è¯´ä¸æ˜¯é”ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„æ—¶å€™ï¼Œsynchronizedå°†çº¿ç¨‹æ ‡è¯†è´´åœ¨å¯¹è±¡çš„markwordä¸Šï¼ˆmarkwordåœ¨é™„å½•ï¼šJavaå¯¹è±¡ç»„æˆä¸­ä»‹ç»äº†ï¼‰ï¼Œå°±ä»£è¡¨è¯¥çº¿ç¨‹æŒæœ‰äº†é”ï¼Œæœ‰åå‘é”çš„æ¦‚å¿µæ˜¯å› ä¸ºå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ç”¨Vectorï¼ŒHashTableï¼ŒStringBufferçš„æ—¶å€™å…¶å®åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦‚æœç›´æ¥é”ç«äº‰ä¼šæµªè´¹èµ„æº è½»é‡çº§é”ï¼šä¸¤ä¸ªåŠä»¥ä¸Šçº¿ç¨‹å¼€å§‹é”ç«äº‰ï¼Œå‡çº§æˆè½»é‡çº§é”ã€‚è¯´åˆ°åº•å°±æ˜¯ä¸€ä¸ªwhileå¾ªç¯ï¼Œä¼šæ¶ˆè€—cpuèµ„æºï¼Œä½†æ˜¯å¦‚æœçº¿ç¨‹çš„ä»»åŠ¡ä¸é‡ï¼Œå…¶è¿‡ç¨‹æ˜¯å¾ˆå¿«çš„ é‡é‡çº§é”ï¼šè‡ªæ—‹ä¸€å®šæ¬¡æ•°åå‡çº§ä¸ºé‡é‡çº§é”ï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œäº¤ç”±osè°ƒåº¦ï¼Œæ¯æ¬¡è°ƒåº¦ä¼šæœ‰ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢ åœ¨JDK1.6ä¸­è‡ªæ—‹çš„é»˜è®¤æ¬¡æ•°ä¸º10æ¬¡ï¼Œå¯ä»¥é€šè¿‡å‚æ•°-XX:PreBlockSpinæ¥è°ƒæ•´ JDK1.7åï¼Œå»æ‰æ­¤å‚æ•°ï¼Œç”±jvmæ§åˆ¶ï¼Œåœ¨æ–°çš„HotSpot VMé‡Œï¼Œä½¿ç”¨åŠ¨æ€è°ƒæ•´çš„æ¬¡æ•°ï¼Œæ‰€ä»¥å«åšadaptive spinningï¼ˆè‡ªé€‚åº”è‡ªæ—‹ï¼‰ https://www.zhihu.com/question/31187779 1.3 è½»é‡çº§é”ä¸€å®šæ¯”é‡é‡çº§é”æ•ˆç‡é«˜å—å½“ç„¶è¿™ä¹ˆé—®äº†ç­”æ¡ˆè‚¯å®šæ˜¯ä¸ä¸€å®šï¼Œæˆ‘ä»¬åˆ†åˆ«åˆ†æä»–ä»¬çš„å¼€é”€ è½»é‡çº§é”ä¸»è¦çš„å¼€é”€åœ¨whileä¼šæ¶ˆè€—cpuçš„èµ„æºï¼Œé‡é‡çº§é”ä¸»è¦çš„å¼€é”€åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„åˆ‡æ¢ ä¹Ÿå°±æ˜¯è¯´å–å†³äºä»»åŠ¡ï¼Œå¦‚æœä»»åŠ¡ç®€å•ï¼Œé”ç«äº‰çš„çº¿ç¨‹å°‘çš„æƒ…å†µä¸‹whileå¾ªç¯ç­‰å¾…çš„æ—¶é—´æ˜¯å¾ˆå°‘çš„ï¼Œå¦‚æœä»»åŠ¡æ—¶é—´å¾ˆä¹…æˆ–è€…ç­‰å¾…çš„çº¿ç¨‹å¤ªå¤šï¼Œè¿›å…¥ä»»åŠ¡é˜Ÿåˆ—é‡‡ç”¨é‡é‡çº§é”åè€Œæ›´é«˜æ•ˆï¼Œsynchronizedçš„é”å‡çº§ä¹Ÿæ­£æ˜¯åŸºäºè¿™ä¸ªè€ƒè™‘æ¥å®ç°çš„ 2. CASCompareAndSwapï¼Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼Œä¹Ÿå«è‡ªæ—‹é”ï¼Œæ˜¯ä¹è§‚é”çš„ä¸€ç§å®ç° ç›¸æ¯”äºsynchronizedå…³é”®å­—ï¼Œ JUCï¼ˆjava.util.concurrentï¼‰åŒ…ä¸‹æ‰€æœ‰ç±»éƒ½æ˜¯åŸºäºCASçš„ 2.1 è¯´æ˜æ¯”å¦‚çº¿ç¨‹1è¦å°†å˜é‡açš„å€¼+1ï¼Œé‚£ä¹ˆçº¿ç¨‹1è¿›è¡Œå¦‚ä¸‹æ“ä½œ è¯»å–aåŸå€¼ â€“&gt; +1 â€“&gt; å†™å›å‰åˆ¤æ–­æ­¤æ—¶aæ˜¯å¦è¿˜æ˜¯åŸå€¼ â€“&gt;æ˜¯åˆ™å†™å› â€“&gt;å¦åˆ™å¾ªç¯é‡æ¥ 2.2 ä»¥AtomicIntegerä¸ºä¾‹AtomicIntegerå°±æ˜¯JUCä¸‹çš„ä¸€ä¸ªç±»ï¼Œç›¸æ¯”äºnum++ï¼Œå®ƒçš„incrementAndGet()æ–¹æ³•å¯ä»¥ä¿è¯åŸå­æ€§ï¼Œäºæ˜¯å°±ä¸ç”¨synchronizedè¿›è¡ŒåŒæ­¥äº† 123public final int incrementAndGet() { return unsafe.getAndAddInt(this, valueOffset, 1) + 1;} è·Ÿè¿› 1234567891011public final int getAndAddInt(Object var1, long var2, int var4) { int var5; do { var5 = this.getIntVolatile(var1, var2); } while(!this.compareAndSwapInt(var1, var2, var5, var5 + var4)); return var5;}//å†è·Ÿè¿›å°±çœ‹åˆ°æ˜¯nativeæ–¹æ³•äº†public final native boolean compareAndSwapInt(Object var1, long var2, int var4, int var5); 2.3 ABAé—®é¢˜å°±æ˜¯è¯´çº¿ç¨‹1å°†açš„å€¼ä»8å˜ä¸º9ï¼Œå†™å›ä¹‹å‰çº¿ç¨‹2å°†8å˜ä¸º100ï¼Œçº¿ç¨‹3åˆå°†100å˜å›8ã€‚æ­¤æ—¶çº¿ç¨‹1ä¸æ˜¯è¦å†™å›å‰åˆ¤æ–­å˜›ï¼Œåˆ¤æ–­ç»“æœè¿˜æ˜¯8ï¼Œä»–ä»¥ä¸ºæ²¡æœ‰å˜ï¼Œå…¶å®ä¸­é—´ç»å†äº†ä¸€ä¸ªå˜åŒ–åˆå˜å›çš„è¿‡ç¨‹ã€‚ ABAé—®é¢˜ç»“æœå…¶å®æ˜¯æ­£ç¡®çš„ï¼Œä¸»è¦å–å†³äºä½ çš„ä¸šåŠ¡åœ¨ä¸åœ¨ä¹ã€‚å°±åƒæ˜¯è·Ÿå¥³æœ‹å‹åˆ†æ‰‹äº†ï¼Œç„¶åå¥³æœ‹å‹è·Ÿåˆ«çš„ç”·ç”Ÿå¥½ï¼Œä¸­é—´ç»å†äº†åˆ«çš„ç”·äººï¼Œç°åœ¨å¥¹æƒ³å’Œå¥½ï¼Œæ­¤æ—¶å¥³æœ‹å‹è¿˜æ˜¯é‚£ä¸ªå¥³æœ‹å‹ï¼Œä½†å¥½åƒåˆä¸æ˜¯é‚£ä¸ªå¥³æœ‹å‹ï¼Œå–å†³äºä½ åœ¨ä¸åœ¨ä¹ç½¢äº†ã€‚ è§£å†³æ–¹å¼å°±æ˜¯åŠ ç‰ˆæœ¬å·ï¼Œ //TODO å…·ä½“æ˜¯æ€ä¹ˆåŠ çš„ 2.3 CASä¿®æ”¹å€¼çš„åŸå­æ€§ä¹Ÿå°±æ˜¯åˆ¤æ–­å®Œè¿˜æ˜¯åŸæ¥çš„å€¼ä»¥åï¼Œè¦å†™å›ï¼Œè¿™ä¸€æ­¥è¦ä¿è¯æ˜¯åŸå­æ€§ã€‚æ¯”å¦‚ä¸¤ä¸ªçº¿ç¨‹éƒ½æ˜¯å°†0è¿›è¡Œ++ï¼Œå¦‚æœè¿™é‡Œæ²¡æœ‰ä¿è¯åŸå­æ€§ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰ä»»ä½•åŒæ­¥æ‰‹æ®µï¼Œå¯èƒ½ä¸¤ä¸ªçº¿ç¨‹åˆ¤æ–­å®ŒåŸå€¼0ç„¶å++ï¼Œç»“æœä¸º1è€Œä¸æ˜¯2ã€‚é‚£è¿™ä¸€æ­¥æ˜¯å¦‚ä½•ä¿è¯åŸå­æ€§çš„å‘¢ æˆ‘ä»¬ä¸‹è½½open jdkçš„æºç ï¼Œå¯ä»¥æ‰¾åˆ°åˆšåˆšé‚£ä¸ªnativeçš„åå­—ç›¸åŒçš„å¯¹åº”cppæ–‡ä»¶unsafe.cppï¼Œæ‰¾åˆ°å¯¹åº”æ–¹æ³•Unsafe_CompareAndSwapInt() ç»§ç»­è·Ÿè¿›Atomic::cmpchg() æœ‰ä¸ª__asm__æ±‡ç¼–æŒ‡ä»¤ï¼ŒLOCK_IF_MPï¼Œç»§ç»­è·Ÿè¿›ä¼šå‘ç°æœ€ç»ˆå®ç°ä¸ºlock cmpxchgæŒ‡ä»¤ã€‚ åœ¨ç¡¬ä»¶å±‚é¢ï¼ŒlockæŒ‡ä»¤èƒ½é”å®šä¿¡å·åŒ—æ¡¥ï¼Œä¹Ÿå°±æ˜¯é”æ€»çº¿ï¼Œå‡ ä¹æ‰€æœ‰cpuéƒ½æ”¯æŒlockæŒ‡ä»¤ ps:MPæ˜¯multi processorçš„æ„æ€ï¼Œå°±æ˜¯è¯´å¤šæ ¸çš„æ—¶å€™æ‰lockï¼Œå¦åˆ™åªæ‰§è¡Œcmpxchgï¼Œå½“ç„¶ç°åœ¨çš„cpuéƒ½æ˜¯å¤šæ ¸ é™„å½•Javaå¯¹è±¡ç»„æˆmarkwordï¼šå­˜å‚¨å¯¹è±¡çš„HashCode,åˆ†ä»£å¹´é¾„å’Œé”æ ‡å¿—ä½ä¿¡æ¯ klass pointerï¼šå¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ª ç±»çš„å®ä¾‹ instance dataï¼šå®ä¾‹æ•°æ® paddingï¼šå› ä¸ºä¸€å®šè¦æ˜¯8kbçš„å€æ•°ï¼Œæ‰€ä»¥ä¼šæ‰©å±•ä¸€äº›æ²¡æœ‰æ„ä¹‰çš„å†…å®¹ æˆ‘ä»¬å¯ä»¥é€šè¿‡jolå·¥å…·æŸ¥çœ‹ 12345&lt;dependency&gt; &lt;groupId&gt;org.openjdk.jol&lt;/groupId&gt; &lt;artifactId&gt;jol-core&lt;/artifactId&gt; &lt;version&gt;0.9&lt;/version&gt;&lt;/dependency&gt; 12Object o = new Object();System.out.println(ClassLayout.parseInstance(o).toPrintable()); ç»“æœå¦‚ä¸‹ å½“æˆ‘ä»¬åŠ ä¸Šsynchronized 123synchronized (o){ System.out.println(ClassLayout.parseInstance(o).toPrintable());} å…¶å®å°±æ˜¯é”ä¿¡æ¯ï¼Œè¿™ä¸ªå¯¹è±¡è¢«ä½œä¸ºé”ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯æ‰€è¯´çš„åå‘é”çš„åŸç† ç¼“å­˜è¡ŒCache Lineè®¡ç®—æœºcpuå’Œä¸»å­˜ä¹‹é—´è¯»å–æ•°æ®é€Ÿåº¦å·®è·å¤ªå¤§ï¼Œæ‰€ä»¥é‡‡ç”¨äº†ä¸‰çº§ç¼“å­˜ï¼ˆä¸‰å±‚æ˜¯å·¥ä¸šå®è·µçš„ç»“æœï¼‰ï¼Œè¯»å–è¿›ç¼“å­˜çš„æ—¶å€™æ˜¯æ¯æ¬¡è¯»å–â€œä¸€å—â€ï¼Œè¿™ä¸ªå—å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç¼“å­˜è¡Œï¼Œç°åœ¨æ˜¯64å­—èŠ‚ï¼ˆå·¥ä¸šå®è·µçš„ç»“æœï¼‰ ç¼“å­˜ä¸€è‡´æ€§ï¼Œæœ‰äº†ç¼“å­˜è¡Œçš„æ¦‚å¿µä¹‹åï¼Œè¦æ˜ç™½ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚ä¸‹å›¾ï¼Œå½“ä¸¤ä¸ªæ•°æ®åœ¨åŒä¸€ä¸ªç¼“å­˜è¡Œçš„æ—¶å€™ï¼Œå¦‚æœcpu1ï¼ˆæˆ–è€…æŸä¸ªæ ¸æˆ–è€…æŸä¸ªçº¿ç¨‹ï¼‰ä¿®æ”¹äº†xï¼Œä¼šé€šçŸ¥å…¶ä»–cpu/æ ¸/çº¿ç¨‹ï¼Œæ¥å›é€šçŸ¥æ˜¯ä¼šé™ä½æ•ˆç‡çš„ å…¶å®è¿™ä¸æ˜¯å¾ˆæ¦‚å¿µå¾ˆè™šçš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ä¸ªæœ‰è¶£çš„ç¨‹åºæ¥å¯¹æ¯”æ„Ÿå—åˆ°ç¼“å­˜è¡Œæ˜¯çœŸå®å­˜åœ¨çš„ 123456789101112131415161718192021222324252627282930313233343536373839public class ç¼“å­˜è¡Œç¤ºä¾‹1_åŒä¸€è¡Œ { public static long COUNT = 1_0000_0000L; private static class T{ public volatile long x = 0L; } public static T[] arr = new T[2]; static { arr[0] = new T(); arr[1] = new T(); } public static void main(String[] args) throws InterruptedException { CountDownLatch latch = new CountDownLatch(2); Thread t1 = new Thread(()-&gt;{ for (int i = 0; i &lt; COUNT; i++) { arr[0].x = i; } latch.countDown(); }); Thread t2 = new Thread(()-&gt;{ for (int i = 0; i &lt; COUNT; i++) { arr[1].x = i; } latch.countDown(); }); final long start = System.nanoTime(); t1.start(); t2.start(); latch.await(); System.out.println((System.nanoTime() - start) / 100_0000); }} è¿™æ®µç¨‹åºéå¸¸éå¸¸ç®€å•ï¼ŒæŠ›å¼€è®¡æ—¶ç­‰ä¸é‡è¦çš„ä»£ç ï¼Œè¯´åˆ°åº•ä¸è¿‡æ˜¯ä¸¤ä¸ªçº¿ç¨‹å¯¹ä¸€ä¸ªT[]æ•°ç»„æ“ä½œï¼ŒTå…¶å®åªæœ‰ä¸ªlongæˆå‘˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œçº¿ç¨‹1æ”¹å˜T[0]çš„å€¼ï¼Œçº¿ç¨‹2æ”¹å˜T[1]çš„å€¼ã€‚ ç»“æœå¦‚ä¸‹ è¦æ˜ç™½ï¼Œæ•°ç»„æ˜¯ç”³è¯·äº†è¿ç»­çš„å†…å­˜ï¼Œä¸€ä¸ªlongå 4ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆè¿™ä¸ªarråŒ…å«ä¸¤ä¸ªlongä¹Ÿå°±æ˜¯è¿ç»­çš„16ä¸ªå­—èŠ‚ã€‚ é‚£ä¹ˆæ ¹æ®å‰é¢è¯´çš„ï¼Œå°†å†…å­˜ä¸­çš„æ•°æ®è¯»å–ä¸€ä¸ªç¼“å­˜è¡Œ64å­—èŠ‚è¿›å…¥cacheï¼Œä¹Ÿå°±æ˜¯è¯´arr[0]å’Œarr[1]éƒ½åœ¨åŒä¸€ä¸ªç¼“å­˜è¡Œä¸­ï¼Œçº¿ç¨‹1çº¿ç¨‹2éƒ½å°†å®ƒä»¬ä¿å­˜è¿›è‡ªå·±çš„cacheã€‚çº¿ç¨‹1/çº¿ç¨‹2åˆ†åˆ«ä¿®æ”¹arr[0]/arr[1]çš„æ—¶å€™ï¼Œéœ€è¦é€šçŸ¥å¯¹æ–¹ï¼Œæƒ…å†µä¹Ÿå°±å®Œå…¨å’Œå‰é¢é‚£å¼ ç¤ºä¾‹å›¾ä¸€æ ·äº†ã€‚ ç¬¬äºŒä¸ªç¨‹åºåªéœ€è¦å°†class Tçš„å£°æ˜æ”¹æˆå¦‚ä¸‹ï¼Œå…¶ä»–å®Œå…¨ä¸€æ · 12345private static class T{ public long p1, p2, p3, p4, p5, p6, p7; //å‰é¢7ä¸ª public volatile long x = 0L; public long p9, p10, p11, p12, p13, p14, p15; //åé¢7ä¸ª} è¿™æ ·ä¸€æ¥ï¼Œxå‰é¢æœ‰7ä¸ªlongï¼Œåé¢æœ‰7ä¸ªlongï¼Œç®—ä¸Šxï¼Œ8*8=64ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯è¯´arr[0]ä¸­çš„xå’Œarr[1]çš„ä»»ä½•ä¸€ä¸ªå…ƒç´ éƒ½ä¸ä¼šåœ¨åŒä¸€ä¸ªç¼“å­˜è¡Œ æ­¤æ—¶ä¿®æ”¹çš„æ—¶å€™ä¸éœ€è¦é€šçŸ¥å¯¹æ–¹ï¼Œå› ä¸ºå¯¹æ–¹çš„ç¼“å­˜è¡Œä¸­æ²¡æœ‰ä¿å­˜è‡ªå·±ä¿®æ”¹çš„æ•°æ® æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ç¡®å®å¿«äº†ä¸å°‘ ä½ å¯èƒ½ä¼šé—®ï¼ŒçœŸçš„æœ‰äººè¿™æ ·å†™ä»£ç å—ï¼Ÿ ä½ å¥½ï¼Œæœ‰çš„ã€‚æœ‰ä¸ªå•æœºç‰ˆæœ€å¿«MQå«disruptorï¼Œé‡Œé¢çš„RingBufferç±»çš„çˆ¶ç±»å°±æœ‰å¦‚ä¸‹ä»£ç  è®²ä¸ªé¢˜å¤–ï¼šMESIåªæ˜¯å› ç‰¹å°”çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼Œä¸è¦ä¸€è®²åˆ°ç¼“å­˜ä¸€è‡´æ€§åè®®å°±æ˜¯MESI ä¸»å­˜å’Œå†…å­˜ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿è®¡ç»„ä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œå­¦çš„æ—¶å€™å°±å¾ˆç–‘æƒ‘ï¼Œæ¯”å¦‚ä¸»å­˜æ˜¯ä¸æ˜¯æˆ‘ä»¬è¯´çš„å†…å­˜æ¡å•Šä»€ä¹ˆçš„ï¼Œå­¦å¾ˆä¹…äº†æ€•è‡ªå·±å¿˜è®°ï¼Œå…ˆè®°ä¸‹æ¥ å†…å­˜æ˜¯ä¸ªå¾ˆå®½æ³›çš„æ¦‚å¿µï¼Œä¸åŒçš„ä¹¦å®šä¹‰ä¹Ÿä¸åŒï¼Œä½†æ˜¯ä¸€èˆ¬è®¤ä¸ºå†…å­˜æ˜¯åŒ…æ‹¬cacheå’Œä¸»å­˜çš„ çŸ¥ä¹ä¸Šçœ‹è§ä¸€å¼ ä¸é”™çš„å›¾ï¼š å‚è€ƒ çŸ¥ä¹ï¼šä¹”ä¹”-ç¼©å¤´è€…çš„å›ç­”https://www.zhihu.com/question/28445273","link":"/Java%E5%9F%BA%E7%A1%80/%E9%94%81%E5%92%8C%E5%90%8C%E6%AD%A5/"},{"title":"Unity3Då­¦ä¹ ç¬”è®°","text":"æœ¬ç¬”è®°æ˜¯å­¦ä¹ è‡ªå¤æ‘æ•£äººéŸ©è€å¸ˆçš„unityæ•™ç¨‹https://www.bilibili.com/video/BV1B7411L74Wï¼Œè‡ªå·±çš„ä¸€äº›è®°å½•å’Œæ•´ç† ä¸€ã€åŸºç¡€1.1 unityç¼–è¾‘å™¨å³è¾¹æ æ˜¯ç»„ä»¶æ ï¼Œç‰©å“ã€åœ°å½¢ã€ç›¸æœºç­‰å…¨éƒ½æ˜¯å¯¹è±¡GameObjectï¼Œæ¯ä¸ªGameObjectæœ‰è‡ªå·±çš„ç»„ä»¶componentï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰ç‰©ä½“éƒ½åŒ…å«transformç»„ä»¶ç”¨äºç¼©æ”¾å’Œæ—‹è½¬ã€‚åœ°å½¢ï¼Œç›¸æœºç­‰ç‰¹æ®Šç‰©ä½“å¯èƒ½æœ‰è‡ªå·±ç‰¹æ®Šçš„ç»„ä»¶ã€‚ 1.2 åœ°å½¢ç³»ç»Ÿåˆ›å»ºåœ°å½¢ ç¬”åˆ·ï¼ˆä¾æ¬¡æ˜¯æŠ¬é«˜é™ä½ã€ç©ºæ´ã€çº¹ç†ã€å¹³å°é«˜åº¦ã€å¹³æ»‘ï¼‰ çº¹ç† 1.3 æ ‡å‡†èµ„æºåŒ…18å¹´åçš„ç‰ˆæœ¬éœ€è¦è‡ªå·±ä¸‹è½½ï¼Œå¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½ [https://assetstore.unity.com/top-assets/top-download?q=Standard%20Assets&amp;orderBy=1](https://assetstore.unity.com/top-assets/top-download?q=Standard Assets&amp;orderBy=1) ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç¼–è¾‘å™¨windows-&gt;assets store æŠ¥é”™å¯ä»¥å‚è€ƒè¿™ä¸ªæ•™ç¨‹ https://blog.csdn.net/zhang2333333333/article/details/105000621 1.4 è„šæœ¬è„šæœ¬ä¹Ÿä½œä¸ºä¸€ç§componentï¼Œå¯ä»¥æ·»åŠ c#è„šæœ¬ï¼Œå…¶ä¸­è‡ªå¸¦çš„startå’Œupdateå‡½æ•°å°±æ˜¯ç”Ÿå‘½å‘¨æœŸï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ï¼Œå…¶ä¸­startåœ¨GameObjectåˆå§‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡ï¼Œupdateæ¯å¸§è°ƒç”¨ä¸€æ¬¡ã€‚publicæˆå‘˜å¯ä»¥åœ¨è„šæœ¬å®Œæˆåé€šè¿‡unityç¼–è¾‘å™¨æ‹–æ‹½ç»™ç‰©ä½“ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚ ä¸‹é¢ä»‹ç»ä¸€äº›è„šæœ¬ç›¸å…³çš„ç±»ï¼ˆç»„ä»¶ï¼‰ï¼š Transformï¼šå¯ä»¥å¯¹åº”ä¸€ä¸ªunityä¸­çš„GameObject å…·ä½“çš„ç±»å’Œæ–¹æ³•å¯ä»¥çœ‹å¸®åŠ© ç‚¹å‡»åæ‰“å¼€apié¡µé¢å¯ä»¥æœç´¢ å…¶ä¸­ï¼Œmanualæ˜¯ä»¥æ•™ç¨‹çš„å½¢å¼ï¼Œapiåªæ˜¯å•çº¯çš„ç”¨æ³•å’Œå‚æ•°ä»‹ç» å¦‚æœæ²¡æœ‰ä»£ç æç¤ºï¼Œæ˜¯ç”±äºé»˜è®¤ç¼–è¾‘å™¨æ²¡æœ‰è®¾ç½®çš„åŸå› ï¼Œå‚è€ƒ https://blog.csdn.net/LiYAnErr/article/details/105137157 ä»¥ä¸‹æ˜¯ä¸€ä¸ªé•œå¤´è·Ÿéšè„šæœ¬demo 1.5 å‘å¸ƒ è‹¥è¦é€‰æ‹©çª—å£ç­‰æ¨¡å¼ï¼Œå¦‚ä¸‹ï¼š 1.5.1åˆ¶ä½œæ¸¸æˆæ¬¢è¿é¡µé¢1.unityä¸­ä¸€ä¸ªé¡µé¢sceneå…¶å®å°±æ˜¯ä¸€ä¸ªå…³å¡ï¼Œå› æ­¤æ¬¢è¿é¡µå¯ä»¥è§†ä¸ºä¸€ä¸ªå…³å¡ï¼Œè¯¥å…³å¡å•¥éƒ½æ²¡æœ‰ï¼Œåªæœ‰ä¸€ä¸ªè„šæœ¬ï¼ŒæŒ‰ä¸‹æŸä¸ªé”®å°±å¼€å§‹æ¸¸æˆ sceneåå­—éšä¾¿èµ·ï¼Œæ¯”å¦‚å«welcome 2.è„šæœ¬ è„šæœ¬åå­—ä¸èƒ½éšä¾¿èµ·ï¼Œå«GameManagerï¼ˆä¹Ÿä¸æ˜¯ä¸èƒ½éšä¾¿èµ·ï¼Œåªä¸è¿‡å«è¿™ä¸ªçš„è¯å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å›¾æ ‡ï¼‰ 3.å°†è„šæœ¬åº”ç”¨åˆ°ç‰©ä½“ä¸Šï¼Œç†è®ºä¸Šå¯ä»¥åº”ç”¨ç»™åœºæ™¯é»˜è®¤è‡ªå¸¦çš„å…‰ç…§æˆ–è€…ç›¸æœºéƒ½å¯ä»¥ï¼Œä½†æ˜¯æ ‡å‡†çš„åº”è¯¥æ˜¯åœ¨è¯¥åœºæ™¯æ–°å»ºä¸€ä¸ªç©ºçš„GameObjectï¼Œå¹¶å°†è„šæœ¬æ‹–æ‹½ç»™ä»– 4.è°ƒæ•´å‘å¸ƒåœºæ™¯ç¼–å· 1.5.2 éå…¨å± äºŒã€åŠ¨ç”»2.1 åœºæ™¯åŠ¨ç”»unityæ”¯æŒå¤–éƒ¨åŠ¨ç”»æ¨¡å‹å¯¼å…¥ï¼ˆæ¯”å¦‚mayaå’Œ3dmaxï¼‰ï¼Œæˆä¸ºæ¨¡å‹åŠ¨ç”»ã€‚å½“ç„¶ä¹Ÿå¯ä»¥åœ¨unityä¸­åˆ¶ä½œç®€å•çš„åŠ¨ç”»ï¼Œç§°ä¸ºåœºæ™¯åŠ¨ç”» 2.1.1 å½•åˆ¶ é€‰æ‹©åŠ¨ç”»ç‰‡æ®µä¿å­˜ä½ç½® ç‚¹å‡»å½•åˆ¶æŒ‰é’® 2.1.2 å¤šæ®µåŠ¨ç”»çš„çŠ¶æ€æœºè½¬æ¢å¯ä»¥æ·»åŠ å¤šä¸ªåŠ¨ç”»ç‰‡æ®µ æ·»åŠ å¤šä¸ªåŠ¨ç”»ç‰‡æ®µåï¼Œé»˜è®¤åªä¼šæ’­æ”¾ç¬¬ä¸€ä¸ª å¦‚æœéœ€è¦ç»„ç»‡å¤šä¸ªåŠ¨ç”»ç‰‡æ®µï¼Œå°±éœ€è¦animator controller è°ƒæ•´çŠ¶æ€æœºä½¿å…¶èƒ½å¤Ÿè½¬æ¢åˆ°å¦ä¸€ä¸ªåŠ¨ç”»ç‰‡æ®µ æ•ˆæœå°±æ˜¯åŠ¨ç”»è¿ç€æ’­æ”¾ï¼Œç„¶ååœ¨æœ€åä¸€ä¸ªåŠ¨ç”»å¾ªç¯ é™¤äº†é¼ æ ‡æ“ä½œçŠ¶æ€æœºï¼Œä¹Ÿå¯ä»¥é€šè¿‡è„šæœ¬è¿›è¡Œç‰¹å®šæ¡ä»¶ä¸‹çŠ¶æ€æœºçš„è½¬æ¢ï¼Œå¦‚ä¸‹åˆ›å»ºä¸€ä¸ªè½¬æ¢æ¡ä»¶c æœ‰Float, int, bool, triggerç±»å‹ï¼Œæœ€åä¸€ä¸ªæ˜¯è§¦å‘å™¨ï¼Œä¹Ÿå°±æ˜¯è„‰å†²ï¼Œè§¦å‘å®Œä¸€æ¬¡ä¼šè‡ªåŠ¨å›åˆ°åˆå§‹çŠ¶æ€ç­‰å¾…ä¸‹ä¸€æ¬¡è„‰å†² ç„¶åæ·»åŠ ä¸€ä¸ªè„šæœ¬ï¼ŒæŒ‡å®šè§¦å‘æ¡ä»¶ å°†è„šæœ¬æ‹–æ‹½ç»™cubeï¼Œå³å¯è‡ªåŠ¨åˆ›å»ºå‡ºanimator controllerè¿™ä¸ªç»„ä»¶ æ•ˆæœï¼šåœåœ¨ç¬¬äºŒä¸ªåŠ¨ç”»åå¤å¾ªç¯ï¼ŒæŒ‰ä¸‹ç©ºæ ¼ï¼ˆå¹¶å½“å½“å‰åŠ¨ç”»æ”¾å®Œä¹‹åï¼‰æ‰è¿›å…¥ç¬¬ä¸‰ä¸ªåŠ¨ç”» è‹¥éœ€è¦æŒ‰ä¸‹ç©ºæ ¼æ—¶å¼ºåˆ¶è·³è½¬åˆ°ç¬¬ä¸‰ä¸ªåŠ¨ç”»ï¼Œå¦‚ä¸‹å–æ¶ˆå‹¾é€‰ 2.1.3 eventeventäº‹ä»¶ï¼Œç”¨äºåœ¨æŸä¸ªç‰¹å®šæ—¶é—´ç‚¹æ‰§è¡ŒæŸä¸ªè„šæœ¬ä¸­çš„å‡½æ•° é¦–å…ˆæ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œè¿™é‡Œæ˜¯é”€æ¯ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯åœ¨æœ€åä¸€ä¸ªåŠ¨ç”»ç»“æŸåé”€æ¯ ç„¶ååœ¨æœ€åä¸€æ®µåŠ¨ç”»ï¼ˆç¼©æ”¾çš„æŸä¸ªåœ°æ–¹æ·»åŠ ä¸€ä¸ªeventï¼‰ï¼Œå¡«å…¥å‡½æ•°å 2.2 éª¨éª¼åŠ¨ç”»2.2.1 space robot kyleèµ„æºåŒ…å’Œé…ç½®unityå®˜æ–¹æä¾›çš„ä¸€ä¸ªèµ„æºåŒ…ï¼Œå¯ä»¥åœ¨å•†åº—æœç´¢ä¸‹è½½ å°†rigè°ƒæ•´ä¸ºç±»äººéª¨æ¶humannoidï¼Œè®°å¾—ç‚¹å‡»apply è¿™ä¸ªéª¨æ¶æœ‰ä¸ªå¥½å¤„æ˜¯å¯ä»¥å®¹æ˜“çš„å®ç°åŠ¨ç”»é‡å®šå‘ï¼ˆä¸ºä¸€ä¸ªéª¨æ¶è®¾è®¡çš„åŠ¨ç”»å¯ä»¥ç§»æ¤åˆ°å¦ä¸€ä¸ªéª¨æ¶ä¸Šï¼‰ï¼Œç‚¹å‡»applyåconfigureæŒ‰é’®äº®èµ·ï¼Œç‚¹å‡»å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ è¿™åªæ˜¯ä¸€ä¸ªæ¨¡å‹ï¼Œæ‹‰å–åˆ°åœºæ™¯ä¸­æ²¡æœ‰åŠ¨ç”»æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥ä»æ ‡å‡†èµ„æºåŒ…å¦‚ä¸‹ä½ç½®æ‹‰å–ä¸€ä¸ªé¢„å®ç°çœ‹çœ‹æ•ˆæœ 2.2.2 éª¨éª¼åŠ¨ç”»äº¤äº’æ•ˆæœè¯´æ˜å¯¹æ¯”æˆ‘ä»¬å¯ä»¥å‘ç°é¢„å®ç°çš„äººç‰©æœ‰animation controller æˆ‘ä»¬å¯ä»¥ä¸ºè‡ªå·±çš„æœºå™¨äººæ¨¡å‹ä¹Ÿæ·»åŠ åŒæ ·çš„controller äººç‰©éšä¹‹å¯ä»¥æ‘†åŠ¨ï¼Œä½†æ²¡æœ‰é”®ç›˜äº¤äº’æ•ˆæœ ä¸éš¾å‘ç°ï¼Œé¢„å®ç°çš„äººç‰©å¯¹è±¡ä¸­è¿˜æœ‰ä¸€äº›è„šæœ¬ ç¬¬ä¸€ä¸ªè„šæœ¬æœ‰[RequireComponent(typeof (ThirdPersonCharacter))]ï¼Œä¹Ÿå°±æ˜¯åŒ…å«äº†ç¬¬äºŒä¸ªè„šæœ¬ æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠç¬¬ä¸€ä¸ªè„šæœ¬æ‹–æ‹½ç»™è‡ªå·±çš„æ¨¡å‹ æˆ‘ä»¬é€šè¿‡å³è¾¹çš„capsuleå°†æ¡†æ¶è°ƒæ•´åˆ°å¦‚ä¸Šå›¾æ‰€ç¤ºå¤§çº¦åŒ…è£¹èº«ä½“ï¼Œæ­¤æ—¶è¿è¡Œå¦‚ä¸‹å›¾æ‰€ç¤º è¿™æ˜¯ç”±äºåœ°é¢æ£€æµ‹åŸå› ï¼Œå°†å…¶è°ƒå¤§å³å¯ 2.3 æ›²çº¿æ›²çº¿æ˜¯ç”¨å‡½æ•°çš„å½¢å¼è®©æ—¶é—´å’ŒæŸä¸ªå˜é‡å…³è”èµ·æ¥ï¼Œå³value = func(time)ï¼Œfuncå¯ä»¥æ˜¯äºŒæ¬¡å‡½æ•°æˆ–è€…åˆ«çš„å‡½æ•°ï¼Œvalueçš„å€¼ä¾¿ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¯ä»¥ç”¨è¿™ä¸ªå€¼å½±å“åŠ¨ç”» æ¯”å¦‚ï¼šæœºå™¨äººåœ¨è·‘æ­¥çš„æ—¶å€™å¦‚æœæƒ³è®©ä»–å¹ä¸€ä¸ªæ³¡æ³¡ï¼Œæ³¡æ³¡éšæ—¶é—´å˜å¤§å˜å° æ–°å»ºä¸€ä¸ªåœºæ™¯ï¼Œæ·»åŠ æœºå™¨äººï¼Œæ–°å»ºä¸€ä¸ªanimation controllerï¼Œæ–°å»ºä¸€ä¸ªç©ºçŠ¶æ€ï¼Œä¸ºçŠ¶æ€æ·»åŠ ä¸€ä¸ªäººç‰©è·‘æ­¥åŠ¨ä½œ å¹¶æ‹–æ‹½ç»™æœºå™¨äººï¼Œæœºå™¨äººå¯ä»¥è·‘æ­¥ ä¸ºäº†æ›´å¥½çš„æ¼”ç¤ºï¼Œå°†æœºå™¨äººå–æ¶ˆè¿æ¥æ ¹èŠ‚ç‚¹ï¼ˆåº”è¯¥å°±æ˜¯ä¸è½¬æ¢ä¸ºä¸–ç•Œåæ ‡ï¼‰ï¼Œä¾¿å¯ä»¥åŸåœ°è·‘æ­¥ æ¥ä¸‹æ¥æ·»åŠ æ›²çº¿ï¼Œåœ¨controllerçš„parametersä¸­æ·»åŠ å‚æ•°ï¼Œå‚æ•°åå¾ˆé‡è¦ï¼Œç„¶åç‚¹å‡»motionï¼Œunityä¼šè‡ªåŠ¨å®šä½è¿™ä¸ªrunåŠ¨ä½œçš„ä½ç½®ï¼Œç‚¹å‡»å®ƒ ç‚¹å‡»editä¾¿å¯ä»¥ç¼–è¾‘å±æ€§å€¼ æ‰¾åˆ°æ›²çº¿ï¼Œæ·»åŠ ï¼Œ æ›²çº¿çš„åå­—å¿…é¡»è·Ÿparametersä¸­æŸä¸ªå˜é‡çš„åå­—ä¸€æ ·ï¼Œç‚¹å‡»æ›²çº¿å¹¶é€‰æ‹©ä¸€ç§æ›²çº¿ é€‰å®Œåä¸€å®šè¦ç‚¹å‡»ä¸€ä¸‹ä¸‹é¢çš„apply ä¸‹é¢æ¥åˆ›å»ºæ³¡æ³¡ï¼Œæ–°å»ºä¸€ä¸ªGameObjectå‘½åä¸ºæ³¡æ³¡ï¼Œå¹¶ä½œä¸ºå¤´éƒ¨çš„å­ç‰©ä½“ ç‚¹å‡»transformä¸­çš„resetï¼Œçƒä½“ä¾¿ä¼šå°†æœ¬åœ°åæ ‡å˜ä¸ºå¤´éƒ¨ä½ç½®ï¼ˆå’Œå¤´éƒ¨é‡åˆï¼‰ å†å°†æ³¡æ³¡ç»†å¾®è°ƒæ•´ä»¥ä¸‹ æ–°å»ºè„šæœ¬ï¼Œè®¾ç½®æœºå™¨äººçš„åŠ¨ä½œï¼ˆå…¶å®æ˜¯è®¾ç½®æœºå™¨äººé‡Œé¢æ³¡æ³¡çš„åŠ¨ä½œï¼‰ è¿™é‡Œçš„bubbleå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥è®¾ç½®ä¸ºpublicï¼Œç„¶åå†unityä¸­ç›´æ¥å°†æ³¡æ³¡æ‹–æ‹½èµ‹å€¼ã€‚å› ä¸ºè¿™ä¸ªè„šæœ¬æœ€ç»ˆä¼šæ‹–æ‹½ç»™æœºå™¨äººï¼Œæ³¡æ³¡æ˜¯æœºå™¨äººçš„å­ç‰©ä½“ï¼Œæ‰€ä»¥å¯ä»¥è®¾ç½®ä¸ºprivateç„¶åé€šè¿‡transformçš„Findå‡½æ•°è·å–å­ç‰©ä½“ã€‚ å®Œäº‹ï¼Œè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°æœºå™¨äººè·‘æ­¥çš„è¿‡ç¨‹ä¸­æ³¡æ³¡å˜å¤§å˜å° 2.4 åŠ¨ç”»å±‚åŠ¨ç”»å±‚å°±æ˜¯å¤šä¸ªåŠ¨ç”»å åŠ ï¼Œèƒ½åŒæ—¶å±•ç°ï¼Œæ¯”å¦‚è¾¹èµ°è·¯è¾¹å¼€æª 2.4.1 åŠ¨ç”»å±‚çš„æ·»åŠ æ–°å»ºåœºæ™¯ï¼Œæ·»åŠ æœºå™¨äººï¼Œæ–°å»ºanimition controllerï¼Œæ·»åŠ æ–°çŠ¶æ€ï¼Œæ·»åŠ èµ°è·¯åŠ¨ä½œ é»˜è®¤æœ‰ä¸ªåŠ¨ç”»å±‚ï¼Œç°åœ¨æ–°å»ºä¸€ä¸ªå±‚æ¯”å¦‚å«ArmUp æŠ¬æ‰‹ æ–°å»ºçŠ¶æ€Jumpï¼Œæ·»åŠ motion JumpUp è¿è¡Œå‘ç°å¹¶æ²¡æœ‰å åŠ åŠ¨ç”»ï¼Œå› ä¸ºç¬¬äºŒä¸ªåŠ¨ç”»æ²¡æœ‰æ·»åŠ æƒé‡ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œblendingé‡‡ç”¨çš„æ˜¯overrideæ¨¡å¼ï¼Œæ‰€ä»¥ArmUpæƒé‡è¶Šå¤§ï¼Œæ‰‹æŠ¬å¾—è¶Šé«˜ï¼Œä½†æ˜¯BaseLayerä¸­çš„walké€Ÿåº¦å˜æ…¢äº†ï¼ï¼ï¼ è€Œå¦‚æœé‡‡ç”¨addtiveï¼Œåˆ™æ˜¯å åŠ ï¼Œæ•´ä¸ªäººéƒ½è¢«æŠ¬èµ·æ¥ï¼Œæ•ˆæœå°±ä¼šå˜å¾—èµ°èµ·è·¯æ¥ä¸€éœ‡ä¸€éœ‡çš„ 2.4.2 é®ç½©maskå¦‚ä¸Šæ‰€è¯´ï¼Œå¦‚æœè¦æŸä¸€éƒ¨åˆ†ä¸å—å½±å“æ€ä¹ˆåšå‘¢ï¼Ÿæ‰‹è‡‚æŠ¬èµ·æ¥ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿè¦æ­£å¸¸èµ°è·¯ï¼Œå°±éœ€è¦maské®ç½© æ–°å»ºavatar maskï¼Œå¹¶æ‰“å¼€ å¦‚ä¸‹å›¾æ‰€ç¤ºå°†ä¸‹åŠèº«çš„æ´»åŠ¨å±è”½ ä¸ºè¯¥å±‚çš„åŠ¨ä½œé€‰æ‹©ä¸€å±‚é®ç½© è¿™æ—¶å€™è¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰‹æŠ¬åˆ°äº†æœ€é«˜ï¼ˆæƒé‡ä¸º1ï¼‰ï¼Œwalkä¹Ÿæ­£å¸¸èµ°è·¯ 2.4.3åŒæ­¥SyncSyncæŒ‰é’®çš„æ„æ€æ˜¯å½“å‰å±‚ä¸ä½¿ç”¨è‡ªå·±çš„åŠ¨ç”»çŠ¶æ€æœºï¼Œè€Œæ˜¯ç”¨åˆ«çš„å±‚å·²æœ‰çš„åŠ¨ç”»çŠ¶æ€æœºã€‚ä¸¾ä¸ªä¾‹å­ï¼šèµ°è·¯ï¼Œå¦‚æœäººç‰©è¢«å‡»ä¸­é‚£ä¹ˆèµ°è·¯çš„å§¿åŠ¿å°±ä¸å¤ªä¸€æ ·äº†ï¼Œè€Œå…¶ä»–çš„é€»è¾‘ä¸€æ ·ï¼ˆå¦‚æœå…¶ä»–é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨å…¶ä»–å±‚ä½¿ç”¨Syncï¼Œæ–¹ä¾¿é€»è¾‘çš„å¤ç”¨ 2.4.2 è„šæœ¬æ–¹å¼å åŠ å±‚å¾ˆå¤šæ—¶å€™éœ€è¦é€šè¿‡è„šæœ¬çš„æ–¹å¼å®Œæˆæ›´åŠ å¤æ‚çš„åŠ¨ç”»å±‚é€»è¾‘ï¼Œæ¯”å¦‚å’Œé¼ æ ‡äº¤äº’ ä¸‹é¢ç¤ºä¾‹æ˜¯æŒ‰ä¸‹é¼ æ ‡å·¦é”®ï¼Œå¢åŠ armUpçš„æƒé‡ï¼Œæœ€åå¢åŠ åˆ°1 æ–°å»ºè„šæœ¬ å°†è„šæœ¬æ‹–æ‹½ç»™æœºå™¨äººï¼Œå¹¶å°†ä¸€å¼€å§‹çš„ArmUpå±‚æƒé‡è®¾ç½®ä¸º0ï¼Œè¿è¡Œå°±å¯ä»¥çœ‹è§æ•ˆæœäº† ä¸€å¼€å§‹æ‰‹æ”¾ä¸‹ï¼Œé¼ æ ‡é•¿æŒ‰æ…¢æ…¢æŠ¬èµ·ï¼Œæ¾å¼€åˆæ…¢æ…¢æ”¾ä¸‹ 2.5 é€†å‘è¿åŠ¨å­¦ï¼šæ³¨é‡ŠåŠ¨ç”»å‰é¢çš„åœºæ™¯åŠ¨ç”»å’Œéª¨éª¼åŠ¨ç”»éƒ½å±äºå‰å‘è¿åŠ¨å­¦ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªéª¨éª¼èŠ‚ç‚¹çš„åŠ¨ç”»æ•ˆæœå…¶å®æ˜¯ä¸€å±‚ä¸€å±‚æ¨å‡ºæ¥çš„ï¼Œæ¯”å¦‚æŠ¬èµ·è‚¡å…³èŠ‚ï¼Œå†æŠ¬èµ·è†å…³èŠ‚é‚£ä¹ˆå°±è¡¨ç°ä¸ºæŠ¬è…¿åŠ¨ä½œã€‚ ä½†æœ‰äº›æƒ…å†µä¸‹éœ€è¦é€†å‘æ¨å¯¼ï¼Œæ¯”å¦‚å·²çŸ¥å‰é¢æœ‰ä¸ªè‹¹æœï¼Œæ‰‹æŒ‡è¦ç¢°åˆ°ï¼Œé‚£ä¹ˆè‚˜å…³èŠ‚å’Œè‚©å…³èŠ‚æ€ä¹ˆè½¬æ‰æ˜¾å¾—æ¯”è¾ƒè‡ªç„¶å‘¢ï¼Ÿåˆæˆ–è€…å·²çŸ¥ä¸€ä¸ªæ–¹ä½ï¼ˆæ¯”å¦‚çœ‹åƒé¼ æ ‡ç§»åŠ¨çš„ä½ç½®ï¼‰ï¼Œé‚£ä¹ˆé€†æ¨å¤´å’Œè…°çš„è½¬å‘ã€‚è¿™ç§ï¼Œä¾é ç»ˆç«¯èŠ‚ç‚¹ï¼ˆæŒ‡å…³èŠ‚ï¼‰é€†å‘æ¨æ¼”å…¶ä»–èŠ‚ç‚¹å¦‚ä½•é…ç½®çš„è¿‡ç¨‹å°±å«åšé€†å‘è¿åŠ¨å­¦ï¼ˆIKï¼Œå…¨ç§°inverse kinematicsï¼‰ ä¸‹é¢çš„ç¤ºä¾‹å°±å±•ç¤ºæœºå™¨äººçš„æ³¨è§†ç‚¹è·Ÿéšé¼ æ ‡ç§»åŠ¨ æ–°å»ºåœºæ™¯ã€animator controllerï¼Œæ·»åŠ çŠ¶æ€å’Œmotionä¸ºidleï¼ˆä¸€ç§æ‚ é—²è‡ªç„¶ç«™ç«‹ï¼Œèº«ä½“è½»è½»æ‘‡åŠ¨çš„åŠ¨ä½œï¼‰å¹¶æ‹–æ‹½ç»™æœºå™¨äººï¼Œæ–°å»ºè„šæœ¬ 123456789101112void OnAnimatorIK(){ Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition); // ä»¥MainCameraä¸ºèµ·ç‚¹ï¼ŒmousePositionä¸ºæ–¹å‘ Plane plane = new Plane(Vector3.up, transform.position); // ä»¥æœºå™¨äººçš„ä¸­å¿ƒä¸ºå¹³é¢ä¸Šä¸€ç‚¹ï¼Œ(0,1,0)ä¸ºæ³•çº¿åšä¸€ä¸ªæ°´å¹³é¢ float enter = 0.0f; // è·ç¦» if (plane.Raycast(ray, out enter)) // å¹³é¢çš„æ–¹æ³•ï¼šè®¡ç®—äº¤ç‚¹ï¼Œå¹¶å°†äº¤ç‚¹å’ŒrayåŸç‚¹çš„è·ç¦»èµ‹å€¼ç»™enterå˜é‡ { Vector3 target = ray.GetPoint(enter); // å°„çº¿çš„æ–¹æ³•ï¼šä»åŸç‚¹èµ°enterçš„è·ç¦»çš„ç‚¹ anim.SetLookAtPosition(target); // å’Œç›¸æœºLookAtä¸åŒï¼Œæ˜¯animä¸­çš„æ–¹æ³• anim.SetLookAtWeight(0.3f); }} åœ¨åŠ¨ç”»å±‚å‹¾é€‰IK Passï¼Œè¡¨ç¤ºå…è®¸ä½¿ç”¨IKæ–¹å¼ç¡®å®šè§’è‰²å§¿æ€ æ•ˆæœï¼šæœºå™¨äººç›®å…‰è·Ÿéšé¼ æ ‡ï¼Œå®é™…ä¸Šæ˜¯ç›¸æœºå’Œé¼ æ ‡å½¢æˆçš„å°„çº¿å’Œæœºå™¨äººæ°´å¹³é¢çš„äº¤ç‚¹ SetLookAtWeightè¿™ä¸ªå‡½æ•°å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œä½¿å¾—èº«ä½“ï¼Œå¤´ï¼Œçœ¼ç›éƒ½è¿åŠ¨èµ·æ¥ anim.SetLookAtWeight(0.5f, 0.3f, 0.6f, 0.2f); 2.6 é€†å‘è¿åŠ¨å­¦ï¼šæœ«ç«¯èŠ‚ç‚¹åŠ¨ç”»å‰é¢æåˆ°ï¼Œé™¤äº†æ³¨è§†åŠ¨ç”»ï¼Œè¿˜æœ‰é€†å‘è®¡ç®—æ‰‹è§¦ç¢°ç‰©ä½“æ—¶æ‰‹è‚˜ç­‰èŠ‚ç‚¹çš„åŠ¨ç”»ï¼Œå½“ç„¶è„šä¹Ÿä¸€æ ·ã€‚è¿™å°±æ˜¯å¦ä¸€ç§ï¼šæœ«ç«¯èŠ‚ç‚¹åŠ¨ç”»ã€‚ è„šæœ¬å¦‚ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637383940using System.Collections;using System.Collections.Generic;using UnityEngine;[RequireComponent(typeof(Animator))]public class IK2 : MonoBehaviour{ private Animator animator; public Transform target; // æ‰‹æˆ–è€…å…¶ä»–æœ«ç«¯èŠ‚ç‚¹éœ€è¦è§¦ç¢°åˆ°çš„ä½ç½® public Transform hint; // å‚è€ƒä½ç½®ï¼šè¡¨ç¤ºæ‰‹ä¸å¤Ÿé•¿æ—¶ï¼Œéœ€è¦è‚˜éƒ¨ä¹Ÿæ”¹å˜ï¼Œè‚˜éƒ¨èŠ‚ç‚¹è§¦ç¢°åˆ°çš„ä½ç½® public bool isHand = true; // æˆ‘ä»¬åšä¸€ä¸ªæ‰‹å’Œè„šçš„ï¼Œè¿™ä¸ªå˜é‡åˆ¤æ–­æ˜¯æ‰‹è¿˜æ˜¯è„š // Start is called before the first frame update void Start() { animator = GetComponent&lt;Animator&gt;(); } private void OnAnimatorIK(int layerIndex) { AvatarIKGoal g = isHand ? AvatarIKGoal.RightHand : AvatarIKGoal.RightFoot; // æœ«ç«¯èŠ‚ç‚¹ AvatarIKHint h = isHand ? AvatarIKHint.RightElbow : AvatarIKHint.RightKnee; // å‚è€ƒèŠ‚ç‚¹ // æœ«ç«¯èŠ‚ç‚¹ä¿¡æ¯ï¼šå…¶ä¸­çš„æƒé‡è¡¨ç¤ºï¼šæ˜¯å®Œå…¨è§¦ç¢°ç›®æ ‡ç‚¹è¿˜æ˜¯æ›´å¤šçš„ç…§é¡¾å§¿æ€çš„è‡ªç„¶åº¦ animator.SetIKPositionWeight(g, 1f); //å…¨éƒ¨äº¤ç»™ikæ§åˆ¶åˆ™1ï¼Œå¦åˆ™åœ¨0-1ä¹‹é—´ animator.SetIKPosition(g, target.position); animator.SetIKRotationWeight(g, 1f); animator.SetIKRotation(g, target.rotation); // å‚è€ƒèŠ‚ç‚¹ä¿¡æ¯ animator.SetIKHintPositionWeight(h, 1f); animator.SetIKHintPosition(h, hint.position); ; } // Update is called once per frame void Update() { }} æ–°å»ºä¸€ä¸ªtargetå°çƒ ä¸ºå…¶åˆ¶ä½œå°çƒæ‰è½å†å¼¹èµ·çš„åŠ¨ç”» æ–°å»ºç©ºGameObjectä½œä¸ºè¾…åŠ©ç»“ç‚¹çš„ä½ç½®ï¼ˆæ‰‹è‡‚ï¼Œè†ç›–çš„ä½ç½®ï¼‰å¹¶æ”¾å…¥æœºå™¨äººå†…éƒ¨ è¿è¡Œ (è„šæœå†…æ˜¯å°çƒçš„æ–¹å‘é—®é¢˜ï¼Œå°†å°çƒç»•yè½´è½¬180å³å¯) ç‚¹å‡»isHandåˆ‡æ¢æˆæ‰‹ä¹Ÿç±»ä¼¼ å¯ä»¥çœ‹å‡ºhintèŠ‚ç‚¹çš„ä½ç½®å°±æ˜¯ä¸­é—´èŠ‚ç‚¹ï¼ˆæ‰‹è‚˜ï¼Œè†ç›–ï¼‰è§¦ç¢°çš„ä½ç½® 2.7 å­çŠ¶æ€æˆ‘ä»¬å·²çŸ¥animator controllerå¯ä»¥æ–°å»ºä¸€ä¸ªçŠ¶æ€ï¼Œunityæ”¯æŒæ–°å»ºå­çŠ¶æ€ï¼Œä¸€ä¸ªçŠ¶æ€åŒ…å«å¤šä¸ªå­çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å°†è¿™å‡ ä¸ªå­çŠ¶æ€å°è£…æˆä¸€ä¸ªæ•´ä½“ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªçŠ¶æ€æ˜¯ idel-&gt;walk-&gt;run-&gt;idelï¼Œä¹Ÿå°±æ˜¯å°†è¿™å‡ ä¸ªåŠ¨ä½œå°è£…æˆä¸€ä¸ªçŠ¶æ€ã€‚ 2.7.1 åˆ›å»ºå­çŠ¶æ€æ–°å»ºåœºæ™¯ï¼Œæ”¾ç½®æœºå™¨äººï¼Œæ–°å»ºanimation controllerï¼Œæ–°å»ºçŠ¶æ€ï¼Œæ–°å»ºå­çŠ¶æ€ è®©idleæ‹¥æœ‰motionä¸ºhumannoid idleï¼Œmake transtionä½¿å¾—idleæŒ‡å‘å­çŠ¶æ€ï¼ŒåŒå‡»å­çŠ¶æ€ å‘ç°åˆæ˜¯ä¸€ä¸ªç±»ä¼¼çš„controllerç•Œé¢ åˆ›å»ºwalk,run,jumpåŠ¨ä½œå¹¶è¿çº¿ï¼Œæœ€åæŒ‡å‘base layerçš„idleåŠ¨ä½œ è¿™æ ·å°±å®Œæˆäº†ç±»ä¼¼ä¸€ä¸ªå‡½æ•°æ ˆçš„æ•ˆæœï¼Œè¿”å›base layerå°±å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æ•ˆæœ å°†è¿™ä¸ªcontrolleræ‹–æ‹½ç»™æœºå™¨äººï¼Œå¹¶ä½¿å¾—åŸåœ°è¿åŠ¨ï¼Œè¿è¡Œ å°±å¯ä»¥çœ‹åˆ°ä¸€è¿æ‰§è¡Œäº†ä¸€ä¸²åŠ¨ç”»ï¼Œä½ å¯èƒ½è¯´ä¸ç”¨å­çŠ¶æ€ä¹Ÿè¡Œï¼Œç›´æ¥å…¨éƒ¨å†™å¤–é¢ï¼Œå½“ç„¶å¯ä»¥ï¼Œåˆä¸æ˜¯ç¼–ç¨‹æ–°æ‰‹äº†ï¼Œå°ä¸å°è£…éƒ½å¯ä»¥çš„ï¼Œå¦‚æœè§‰å¾—æŸå‡ ä¸ªåŠ¨ä½œéƒ½æ˜¯å›ºå®šè¿ç»­å‘ç”Ÿï¼Œå¯ä»¥è§†ä¸ºä¸€ä¸ªåŠ¨ä½œï¼Œå°±å°è£…å§ 2.7.2 å¸¦æ¡ä»¶è½¬æ¢å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šè§¦å‘æ¡ä»¶ æ·»åŠ triggerç±»å‹çš„å‚æ•° æ–°å»ºè„šæœ¬ 123456void Update(){ if (Input.GetKeyUp(KeyCode.Space)){ GetComponent&lt;Animator&gt;().SetTrigger(&quot;start&quot;); }} å°†è„šæœ¬æŒ‚æ¥ç»™æœºå™¨äººï¼Œè¿è¡Œï¼Œé»˜è®¤idleï¼Œåªæœ‰æŒ‰ä¸‹ç©ºæ ¼æ‰ä¾æ¬¡è¿›å…¥ï¼šwalk-&gt;run-&gt;jumpup åŒæ ·çš„å¯ä»¥é€‰æ‹©ç«‹å³è§¦å‘ 2.8 blend treeæ··åˆæ ‘ï¼Œå’Œtransitionç±»ä¼¼ï¼Œå¯ä»¥åœ¨å¤šä¸ªåŠ¨ç”»ç‰‡æ®µä¹‹é—´è¿›è¡Œå åŠ å’Œè½¬æ¢ï¼Œæ¯”å¦‚èµ°è·¯è¿‡æ¸¡åˆ°è·‘æ­¥ã€‚åŒºåˆ«åœ¨äºtransitionæ˜¯ä¸€ä¸ªçŠ¶æ€åˆ°å¦ä¸€ä¸ªçŠ¶æ€ï¼Œblend treeå¯ä»¥å¤šä¸ªçŠ¶æ€ä½œç”¨äºè§’è‰²ï¼Œå„åŠ¨ç”»å¯ä»¥æœ‰è‡ªå·±çš„æƒé‡ï¼Œç„¶åè¿›è¡Œå åŠ ã€‚ 2.8.1 åˆ›å»ºblend treeæ–°å»ºåœºæ™¯ï¼Œæ·»åŠ æœºå™¨äººï¼Œæ–°å»ºAnimator controllerï¼Œåˆ›å»ºBlendTreeçŠ¶æ€ åŒå‡»æ‰“å¼€ï¼Œå¯¹BlendTreeå³é”®å¯ä»¥æ–°å»ºmotionï¼Œè¿™é‡Œå»º3ä¸ª æ·»åŠ motionå¦‚ä¸‹ï¼šåˆ†åˆ«æ˜¯çŒ«è…°èµ°ï¼ˆè¹²èµ°ï¼‰ï¼Œæ­£å¸¸èµ°å’Œè·‘æ­¥ï¼ŒåŒæ—¶è¿™é‡Œä¿®æ”¹äº†å‚æ•°åç§° åœ¨å³ä¸Šè§’å¯ä»¥çœ‹åˆ°blendé»˜è®¤æ˜¯ä¸€ç»´çš„1Dï¼Œå°†controlleræ‹–æ‹½åˆ°æœºå™¨äººèº«ä¸Šï¼Œè¿è¡Œï¼Œè¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥ä¸æ–­è°ƒæ•´Speedï¼Œå°±å¯ä»¥å‘ç°åœ¨ä¸‰ä¸ªåŠ¨ä½œä¹‹é—´å¹³æ»‘çš„è½¬æ¢åŠ¨ä½œäº†ã€‚ å› æ­¤1Dçš„æ··åˆæ ‘å®é™…æ•ˆæœå’Œtransitionå·®ä¸å¤šï¼Œåªæ˜¯å¯èƒ½æ›´ç›´è§‚ä¸€äº›ã€‚ 2.8.2 directç±»å‹ä¸‹é¢æˆ‘ä»¬å°†1Dæ”¹æˆDirect ä»æ¯ä¸ªåŠ¨ä½œå³è¾¹æ çš„å˜åŒ–å¯ä»¥çœ‹å‡ºï¼ŒDirectæ˜¯å¯ä»¥ä¸ºæ¯ä¸ªåŠ¨ä½œæ·»åŠ è‡ªå·±çš„æƒé‡çš„ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹3ä¸ªå‚æ•°åˆ†åˆ«èµ‹å€¼ç»™ä¸‰ä¸ªåŠ¨ä½œ è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­è°ƒæ•´å„è‡ªåˆ°åˆé€‚çš„æƒé‡ï¼Œè¿è¡Œèµ·æ¥æœ‰ç‚¹å¥‡æ€ªï¼Œå› ä¸ºæ˜¯å åŠ  æˆ‘ä»¬å¯ä»¥å¯¹å®ƒå½’ä¸€åŒ– è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è‡ªç”±ç»„åˆå‡ºï¼šçŒ«è…°è·‘ï¼Œæ…¢è·‘ï¼ˆæˆ–è€…æ›´åƒç«èµ°ï¼‰ä¹‹ç±»çš„åŠ¨ä½œ 2.8.3 äºŒç»´ç¬›å¡å°”åæ ‡æ˜¯ä»¥x yè½´çš„äºŒç»´å¸ƒç‚¹æ–¹å¼ï¼Œç‚¹å’Œç‚¹ä¸­é—´çš„ç©ºç™½é€šè¿‡æ’å€¼è¿›è¡Œã€‚ è¿™é‡Œæˆ‘ä»¬xyè½´è®¾ç½®çš„å¥½ï¼Œå¯ä»¥å½“æˆä¿¯è§†å›¾æ¥è¿›è¡Œå¸ƒç‚¹ï¼Œå› æ­¤è½´çš„æ„ä¹‰å®šä¹‰å¾ˆé‡è¦ è¿è¡Œå¹¶è°ƒå‚ï¼Œå‘å·¦å‘å³è·‘æ­¥æˆ–è€…èµ°è·¯ ç®€å•çš„åšä¸€ä¸ªè„šæœ¬è¿›è¡Œäº¤äº’ 12345678910111213141516171819202122232425262728293031using System.Collections;using System.Collections.Generic;using UnityEngine;using UnityStandardAssets.CrossPlatformInput;[RequireComponent(typeof(Animator))]public class BlendTree : MonoBehaviour{ Animator anim = null; // Start is called before the first frame update void Start() { anim = GetComponent&lt;Animator&gt;(); } // Update is called once per frame void Update() { // è·¨å¹³å°çš„wsadæ§åˆ¶ float h = CrossPlatformInputManager.GetAxis(&quot;Horizontal&quot;); float v = CrossPlatformInputManager.GetAxis(&quot;Vertical&quot;); Vector3 move = v * Vector3.forward + h * Vector3.right; if (Input.GetKey(KeyCode.LeftShift)) move.z *= 0.5f; // å½“æŒ‰ä¸‹å·¦shifté”®æ—¶ä»è·‘æ­¥å˜ä¸ºèµ°è·¯ï¼Œå˜æ…¢ float turn = move.x; float forward = move.z; anim.SetFloat(&quot;Speed&quot;, forward, 0.1f, Time.deltaTime); anim.SetFloat(&quot;turn&quot;, turn, 0.1f, Time.deltaTime); }} æ‹–æ‹½ç»™æœºå™¨äººï¼Œè¿è¡Œï¼ŒæŒ‰ä¸‹wadï¼Œå’Œå·¦shiftï¼Œè‡ªå·±ä½“éªŒå§ 3. å›¾å½¢æ¸²æŸ“3.1 å…¨å±€å…‰ç…§æ˜æ•ˆæœå…‰ç…§åˆ†ä¸ºæ–¹å‘å…‰ï¼ˆæ–°å»ºåœºæ™¯æ—¶é»˜è®¤é‚£ä¸ªå¤ªé˜³å°±æ˜¯æ–¹å‘å…‰ï¼‰ï¼Œç‚¹å…‰æºï¼Œèšå…‰ç¯å’Œé¢ç§¯å…‰ å‰ä¸‰ç§éƒ½å±äºç›´æ¥å…‰æºï¼Œä¹Ÿå°±æ˜¯å¯¹ç‰©ä½“è¡¨é¢äº§ç”Ÿäº†ç›´æ¥çš„å½±å“ï¼Œç”¨äºå®æ—¶å…‰ç…§ï¼Œè®¡ç®—é‡å° ä¸ºäº†æ¸²æŸ“å‡ºæ›´åŠ çœŸå®çš„æ•ˆæœï¼Œé¢ç§¯å…‰å¯ä»¥è¿›è¡Œé¢„è®¡ç®—ï¼Œè¿™ç§è®¡ç®—é‡å¾ˆå¤§ï¼Œé€šå¸¸ç”¨äºé™æ€æ¸²æŸ“ï¼Œå› ä¸ºç‰©ä½“ç§»åŠ¨äº†å°±ä¼šç ´åé¢„è®¡ç®—çš„æ•ˆæœã€‚ å½“æˆ‘ä»¬åˆ›å»ºä¸€ç§å…‰ç…§çš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰é˜´å½±çš„ï¼Œå¦‚æœéœ€è¦é˜´å½±å¯ä»¥è‡ªå·±æ‰“å¼€ softä¼šæ¨¡ç³Šé˜´å½±çš„è¾¹ç¼˜ã€‚ å¯¹äºé¢„è®¡ç®—çš„å…‰ç…§ï¼Œç»“æœä¼šè¢«çƒ˜ç„™æˆlight mapä¿å­˜ï¼Œåœ¨window-&gt;rendering-&gt;lightingä¸­å¯ä»¥çœ‹åˆ°auto generalè¿™ä¸ªæ¡†æ¡†ï¼Œå¦‚æœæ‰“ä¸Šï¼Œä¼šå¯¹åœºæ™¯ä¸­å‹¾é€‰äº†staticçš„ç‰©ä½“è¿›è¡Œè‡ªåŠ¨çƒ˜ç„™ï¼Œå½“ç„¶ï¼Œä¸ºäº†å¼€å‘æ—¶çš„æ€§èƒ½ï¼Œå¯ä»¥å…³é—­ï¼Œåœ¨å‘å¸ƒä¹‹å‰è¿›è¡Œä¸€æ¬¡çƒ˜ç„™ã€‚å› æ­¤ï¼Œå¯¹äºä¸åŠ¨çš„ç‰©ä½“ï¼Œæˆ‘ä»¬æœ€å¥½è®¾ç½®ä¸ºstaticï¼Œå¯ä»¥å¾—åˆ°å…‰ç…§æ•ˆæœçš„ä¼˜åŒ–ã€‚ å¦‚ä¸‹å›¾ï¼Œå¯ä»¥çœ‹åˆ°è®¾ç½®æˆstaticåï¼Œç»¿çš„çš„ç‰©ä½“çš„é˜´å½±æœ‰ä¸€ç‚¹ç‚¹çš„ç»¿è‰²ï¼Œå…¶ä»–ç‰©ä½“ä¹Ÿä¸€æ ·ï¼Œæ›´åŠ å¯Œæœ‰è¡¨ç°åŠ›ï¼Œå¦‚æœæ²¡æœ‰staticçš„ç‰©ä½“ï¼Œæ˜¯ä¸å‚ä¸è¿™ç§æ™•æŸ“çš„ 3.2 æè´¨ï¼Œç€è‰²å™¨å’Œçº¹ç†å…‰å½±è®¡ç®—ä¸­å¾ˆé‡è¦çš„ä¸‰ä¸ªæ¦‚å¿µï¼šmaterialï¼Œshaderï¼Œtexture æ–°å»ºä¸€ä¸ªæè´¨ï¼Œå¯ä»¥çœ‹è§æè´¨ä¸­åŒ…å«äº†shaderå’Œuvçº¹ç†è´´å›¾ç­‰å„ç§ä¿¡æ¯ ç€è‰²å™¨ï¼šåƒç´ ç€è‰²å™¨æ˜¯è´Ÿè´£æ¸²æŸ“æè´¨é¢œè‰²çš„ç¨‹åºç‰‡æ®µï¼Œé¡¶ç‚¹ç€è‰²å™¨å°±è´Ÿè´£æè´¨è¡¨é¢çº¹ç†ï¼Œæ³•çº¿è´´å›¾ï¼ˆç²—ç³™ç¨‹åº¦ï¼‰ï¼Œåå°„ç‡ç­‰ä¸œè¥¿ã€‚é»˜è®¤æ˜¯æ ‡å‡† rendering modeï¼šOpaqueæ˜¯ä¸é€æ˜ï¼Œcutoutå¯ä»¥é€‰é€æ˜åº¦ï¼Œfadeæ˜¯æ¶ˆéšå¯ä»¥å®ç°æ·¡å…¥æ·¡å‡ºï¼Œtransparentæ˜¯é€æ˜å¯ä»¥è®¾ç½®é€æ˜é€šé“ albedoæ˜¯åŸºæœ¬çš„é¢œè‰²ï¼Œç‚¹å‡»åœ†åœˆå¯ä»¥é€‰çº¹ç† cutouté€æ˜ï¼Œå¯ä»¥è°ƒèŠ‚é€æ˜åº¦ fadeï¼Œå¯ä»¥æ ¹æ®alphaé€šé“ï¼ˆRGBAä¸­çš„Aï¼‰é€æ­¥æ¶ˆéšæ‰ç‰©ä½“ï¼Œè·Ÿå¤šçš„ç”¨äºé­”æ³•æ•ˆæœ transparentä¹Ÿä¸€æ ·ï¼Œä¸è¿‡ä¼šä¿ç•™å…‰ç…§ä¿¡æ¯ï¼Œæ›´å¤šçš„ç”¨äºç»ç’ƒæ•ˆæœ metallicå¯ä»¥æ§åˆ¶é‡‘å±æ•ˆæœ smoothnesså¯ä»¥æ§åˆ¶å¹³æ»‘ç¨‹åº¦ï¼Œæ›´åŠ æ¥è¿‘é•œé¢ normal mapä¿å­˜äº†æ³•çº¿ä¿¡æ¯ï¼Œç”¨äºæ³•çº¿è´´å›¾ height map å’Œæ³•çº¿è´´å›¾ç±»ä¼¼ï¼Œéœ€è¦å’Œnomal mapç»“åˆä½¿ç”¨ï¼Œnormalmapåªæ˜¯æ•ˆæœæ”¹å˜äº†ï¼Œè€Œheightmapä½¿å¾—å‡ ä½•ä½“å®é™…è¡¨é¢å—åˆ°å½±å“ å½“ç„¶ä¸Šè¿°æ‰€æœ‰æ•ˆæœéƒ½æ˜¯åŸºäºstandardçš„shaderï¼Œunityå…¶å®è‡ªå¸¦äº†è®¸å¤šæ¯”å¦‚å¡é€šæ•ˆæœï¼Œæ‰‹ç»˜æˆ–è€…ç®€ç¬”ç”»æ•ˆæœç­‰ç€è‰²å™¨ 3.3 æ‘„åƒæœºè®¾ç½®å¯ä»¥å»ºç«‹å¤šä¸ªæ‘„åƒæœºï¼ˆæ¯”å¦‚å¾ˆå¤šæ¸¸æˆçš„å°åœ°å›¾å…¶å®æ˜¯ä¸ªé¡¶è§†è§’æ‘„åƒæœºï¼‰ï¼Œåˆ›å»ºæ–¹æ³•å’Œåˆ›å»ºæ™®é€šGameObjectä¸€æ ·ã€‚ é»˜è®¤ä¸»ç›¸æœºmain cameraä¼šè¢«è¦†ç›–ï¼Œæ˜¯æ ¹æ®depthè¦†ç›–çš„ï¼Œä¸»ç›¸æœºçš„depthæ˜¯æœ€å°çš„-1ï¼Œåé¢å»ºç«‹çš„ç›¸æœºä¾æ¬¡æ˜¯0ï¼Œ1ï¼Œ2â€¦ å¦‚æœè¦å¤šä¸ªç›¸æœºå¹¶å­˜ï¼Œåªéœ€è¦ç¼©å°å…¶ä»–æ‘„åƒæœºçš„å®½é«˜ã€‚å› ä¸ºåŸç†æ˜¯è¿™æ ·çš„ï¼šå…¶å®ç›¸æœºè¦†ç›–ï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªå®½åº¦å’Œé»˜è®¤ç›¸æœºä¸€æ ·çš„è§†å›¾ç›´æ¥è¦†ç›–äº†åº•éƒ¨çš„â€¦ï¼ˆæˆ‘è§‰å¾—unityæ˜¯ä¸æ˜¯æœ‰ç‚¹éšä¾¿ï¼Ÿï¼Ÿï¼‰ 3.4 å‰”é™¤ä¹Ÿå°±æ˜¯ä¸æ¸²æŸ“ç›¸æœºçœ‹ä¸åˆ°çš„åœ°æ–¹ ç‚¹å‡»å³ä¸‹è§’çš„bakeï¼Œunityä¼šå¯¹staticç‰©ä½“è¿›è¡Œå‰”é™¤ï¼ˆæ¶ˆéšï¼‰ï¼Œæ³¨æ„ä¸€å®šè¦æ˜¯staticçš„ é™¤äº†è§†é‡å¤–ï¼Œè¿˜æœ‰é®æŒ¡ï¼Œè¯•è¯•åˆ›å»ºä¸€ä¸ªå·¨å¤§çš„ç‰©ä½“æŒ¡ä½ç›¸æœºå¹¶é‡æ–°bakeä¸€ä¸‹ï¼Œå‘ç°ä¹ŸæŒ¡ä½äº† å½“æŠŠç‰©ä½“å»é™¤åéœ€è¦é‡æ–°bakeï¼Œå¦åˆ™ä¼šç»´æŒåŸæ•ˆæœ 3.5 åå¤„ç†æ•ˆæœPostProcessåˆå«åšå…¨å±å¹•å¤„ç†æ•ˆæœï¼Œåœ¨çœŸæ­£æ¸²æŸ“åˆ°å±å¹•ä¹‹å‰å¯¹åå¤‡ç¼“å­˜é‡Œçš„å›¾åƒå¤„ç†ã€‚å¯ä»¥æ·»åŠ ä¸€äº›æ¯”å¦‚è‰²è°ƒå•Šä¹‹ç±»çš„ã€‚ 1.ä¸ºæ‘„åƒæœºæ·»åŠ åå¤„ç†å±‚ Component-&gt;Rendering-&gt;Post-Process Layer å¦‚æœæ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Œå…ˆåœ¨package managerä¸‹è½½ Layeré€‰æ‹©PostProcessingï¼Œæ²¡æœ‰å°±è‡ªå·±æ–°å»ºè‡ªå®šä¹‰ä¸€ä¸ª 2.åœ¨åœºæ™¯ä¸­æ·»åŠ åå¤„ç†ä½“ æ˜¯ä¸€ä¸ªå¤§å¤§çš„ç»¿è‰²cubeï¼Œä¸è¿‡å¤šäº†box colliderç»„ä»¶ è€ŒProfileå°±æ˜¯å…·ä½“çš„åå¤„ç†æ–¹æ³•ï¼Œç›´æ¥æ–°å»ºï¼ŒåŒå‡»å®šä½ï¼Œæ‰“å¼€ åŒå‡»åå¦‚ä¸‹å›¾æ·»åŠ ä¸€ä¸ªï¼Œ 3.6 æ¢é’ˆé¢„å¤„ç†åªèƒ½ç”¨äºé™æ€ç‰©ä½“ï¼Œå¯¹äºéé™æ€ç‰©ä½“ï¼Œå¦‚æœéœ€è¦æ•ˆæœä¼˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨æ¢é’ˆã€‚ æ¢é’ˆæ˜¯åœ¨åœºæ™¯ä¸­æå‰å¸ƒç‚¹ï¼Œå¦‚æœè¿åŠ¨ç‰©ä½“ç§»åŠ¨åˆ°äº†æ¢é’ˆåŒºåŸŸå†…ï¼Œå°±è¿›è¡Œæ¸²æŸ“æ•ˆæœä¼˜åŒ–ã€‚ 3.6.1 å…‰ç…§æ¢é’ˆå»ºç«‹å¦‚ä¸‹åœºæ™¯ ä¸ºæ¡†æ¡†ä¸­çš„ä¸¤ä¸ªç‰©ä½“æ·»åŠ å·¦å³ç§»åŠ¨åŠ¨ç”»ï¼Œæ¥ä¸‹æ¥æ·»åŠ æ¢é’ˆç»„ è¿™äº›é»„è‰²çš„ç‚¹å°±æ˜¯æ¢é’ˆï¼Œåœºæ™¯å¤æ‚çš„æ—¶å€™å¯ä»¥æ·»åŠ çš„å¯†ä¸€ç‚¹ï¼ˆæ¢é’ˆç»„å±æ€§é¡µé¢å¯ä»¥çœ‹åˆ°add probeé€‰é¡¹ï¼Œæ·»åŠ æ¢é’ˆï¼‰ æƒ³æ”¹å˜æ¢é’ˆå¸ƒç‚¹ä½ç½®æˆ–è€…æ·»åŠ æ¢é’ˆéƒ½è¦å…ˆç‚¹ä¸Šå›¾é‚£ä¸ªå…è®¸ä¿®æ”¹ï¼Œä¸‹é¢è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°ç‰©ä½“ç§»åŠ¨æ—¶ä¼šæ£€æµ‹å—å½±å“çš„æ¢é’ˆ ç§»åŠ¨çš„ç‰©ä½“å·¦è¾¹æœ‰è½»å¾®çš„æ™•æŸ“ç»¿è‰²ï¼Œå³è¾¹æœ‰è½»å¾®çš„æ™•æŸ“çº¢è‰²æ•ˆæœ 3.6.2 åå°„æ¢é’ˆéœ€è¦æ³¨æ„çš„æ˜¯å¼€å¯å…¨å±€å…‰ç…§çƒ˜ç„™ï¼Œæœ€å¥½ä¸€ç›´éƒ½å¼€ï¼ˆè™½ç„¶å¾ˆåƒç”µè„‘æ€§èƒ½ï¼‰ï¼Œå¦åˆ™çœ‹ä¸åˆ°åå°„æ•ˆæœï¼Œå°†åœ†å˜ä¸ºé€æ˜åº¦åå°„çƒä½“ è¿è¡Œï¼Œé€æ˜çƒæ•ˆæœæ¯”è¾ƒç”Ÿç¡¬ï¼Œä¸ä¼šæ”¹å˜ ç‚¹å‡»æ·»åŠ å¤šä¸ªåå°„æ¢é’ˆ è¿è¡Œï¼Œå‘ç°ç§»åŠ¨æ—¶åå°„çƒä¼šæ”¹å˜äº† ä¸ç®¡æ˜¯åå°„æ¢é’ˆè¿˜æ˜¯å…‰ç…§æ¢é’ˆï¼Œå…¶å®å°±æ˜¯é¢„å¤„ç†æ¸²æŸ“ä¿¡æ¯å­˜å‚¨åœ¨æ¢é’ˆä¸­ï¼Œç­‰åˆ°è¿è¡Œçš„æ—¶å€™å°†é™„è¿‘å„æ¢é’ˆçš„å­˜å‚¨çš„ä¿¡æ¯è¿›è¡Œä¸€ä¸ªå åŠ èåˆä½œä¸ºå½“å‰è¿åŠ¨åˆ°æŸä¸ªä½ç½®æ—¶çš„æ¸²æŸ“ä¿¡æ¯ï¼Œä»è€Œæé«˜åœºæ™¯çš„çœŸå®æ„Ÿã€‚ 3.7 è§†é¢‘æ’­æ”¾é€‰ä¸­å¢™å£å¹³é¢ï¼Œcomponent-&gt;video-&gt;video playerï¼Œè§†é¢‘æ’­æ”¾çš„åŸç†æ˜¯æ”¹å˜äº†å¢™å£çš„æè´¨.. ä¹Ÿå¯ä»¥é€‰æ‹©URL å½“ç„¶ï¼Œä»¥ä¸Šä¸æ¶‰åŠåˆ°è§†é¢‘çš„æ§åˆ¶ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹è§†é¢‘è¿›è¡Œæ§åˆ¶ã€‚æ¯”å¦‚ç©ºæ ¼æš‚åœ æ–°å»ºc#è„šæœ¬ 12345678910111213141516171819202122232425using System.Collections;using System.Collections.Generic;using UnityEngine;using UnityEngine.Video;public class VedioCOntrol : MonoBehaviour{ VideoPlayer videoPlayer; // Start is called before the first frame update void Start() { videoPlayer = GetComponent&lt;VideoPlayer&gt;(); Debug.Assert(videoPlayer); } // Update is called once per frame void Update() { if (Input.GetKeyDown(KeyCode.Space)) { if (videoPlayer.isPlaying) videoPlayer.Pause(); else videoPlayer.Play(); } }} 3.8 ç²’å­ç³»ç»Ÿç”¨äºå»‰ä»·è€Œå®ç”¨çš„ç‰¹æ•ˆï¼Œæ¯”å¦‚çˆ†ç‚¸ï¼ŒçƒŸé›¾ï¼Œæ²™å°˜ã€‚ä¼šæ¯”ç›´æ¥è´´å¤šå¸§å›¾æ•ˆæœå¥½å¾ˆå¤š ç›´æ¥å°±èƒ½çœ‹åˆ°æ•ˆæœï¼Œé›ªèŠ±å¾€ä¸Šé£˜ æˆ‘ä»¬åˆ¶ä½œåˆ«çš„æ•ˆæœåªéœ€è¦ç¼–è¾‘å‚æ•°ï¼Œæ¯”å¦‚åˆ¶ä½œç«ç„° å³è¾¹å¾ˆå¤šé€‰é¡¹å¡çš„ åŸºæœ¬é€‰é¡¹å¡ï¼šstart speed å¾€ä¸Šå‡çš„é€Ÿåº¦æ…¢ç‚¹ï¼Œstart coloré¢œè‰²è°ƒä¸ºç«ç„°è‰² shapeé€‰é¡¹å¡ï¼šangleæ˜¯å¾€ä¸Šå‡çš„æ—¶å€™çš„æ•£å‘åº¦ï¼Œè°ƒä¸º0ï¼Œradiusæ˜¯å‡ºç”Ÿç‚¹é‚£ä¸ªåœˆçš„èŒƒå›´å¤§å°ï¼Œé€‚å½“è°ƒå°ï¼Œä½¿å¾—ç«ç„°æ›´é›†ä¸­ éšæ—¶é—´çš„å‡½æ•°é€‰é¡¹å¡ï¼š å¯ä»¥ä¸ºå…¶æ·»åŠ å­GameObjectæ©™è‰²ç‚¹å…‰æºå°±å¯ä»¥ç…§äº®ï¼Œä¹Ÿå¯ä»¥å°†ç«ç„°çš„çº¹ç†æ‹–æ‹½ç»™å®ƒï¼Œæ˜¯å›¾ç‰‡çš„å½¢å¼ï¼ŒèƒŒæ™¯è¦é€æ˜ï¼Œç±»ä¼¼å¸ƒå‘Šæ¿ï¼Œè™½ç„¶æ˜¯å›¾ç‰‡ï¼Œä½†æ˜¯é¢å‘æ‘„åƒæœºï¼Œæ•ˆæœå°±å¥½åƒç«‹ä½“çš„ã€‚ å½“ç„¶è¿™æ ·åšå‡ºæ¥çš„æ•ˆæœéƒ½æ¯”è¾ƒç®€å•ï¼Œæ ‡å‡†èµ„æºåŒ…æœ‰ä¸€äº›é¢„å®ç°ï¼Œå¯ä»¥æ‹‰å‡ºæ¥çœ‹çœ‹ï¼Œåšçš„å¾ˆå®Œå¤‡ï¼Œåƒä»€ä¹ˆçˆ†ç‚¸å‘€ï¼Œç«ç„°å‘€ï¼Œæ²™å°˜æš´ï¼ŒçƒŸé›¾ä¹‹ç±»çš„ 4. UIUIä¸æ˜¯æŒ‡3Dçš„ç‰©ä½“ï¼Œè€Œæ˜¯æ¸¸æˆå¼€å§‹ç•Œé¢çš„æŒ‰é’®å‘€ï¼Œå›¾ç‰‡å‘€ï¼Œæ–‡å­—ä¹‹ç±»çš„ï¼Œå½“ç„¶æ¸¸æˆé‡Œé¢ä¹Ÿæœ‰ã€‚ æ–°å»ºGameObject-&gt;UI-&gt;Text/Image/Button ä¸ºTextæ–°å»ºè„šæœ¬ï¼Œå†…å®¹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“å‡½æ•°è°ƒç”¨æ—¶æ”¹å˜æ–‡æœ¬ é€‰ä¸­buttonï¼Œå±æ€§æ¡†onclickç‚¹å‡»+å·ï¼Œé€‰æ‹©Textæ§ä»¶ï¼Œå¹¶é€‰æ‹©åˆšåˆšå†™çš„å‡½æ•° canvasæœ‰ä¸ªå±æ€§å«render mode å¯ä»¥é€‰æ‹©æ˜¯delayæ°¸è¿œæ˜¾ç¤ºåœ¨å±å¹•ç©ºé—´ï¼Œè¿˜æ˜¯cameraæŸä¸ªç›¸æœºçš„å±å¹•ç©ºé—´ï¼Œè¿˜æ˜¯ä¸–ç•Œç©ºé—´ï¼ˆè™½ç„¶æ˜¯äºŒç»´çš„ï¼Œå®é™…ä¸Šå˜æˆäº†3Dçš„ç‰©ä½“ï¼‰ 5. ç‰©ç†ç³»ç»Ÿ5.1 ç‰©ç†ä»¿çœŸåŸºç¡€colliderï¼šç¢°æ’æ£€æµ‹ regidï¼šåˆšä½“ï¼ˆæ¯”å¦‚é‡åŠ›ï¼Œæˆ–è€…å…¶ä»–åŠ›ï¼‰ æ–°å»ºå¦‚ä¸‹åœºæ™¯ï¼Œä¸ºå¢™å£æ·»åŠ æè´¨å¹¶ç”»å¥½é¢œè‰² ç»™å°çƒæ·»åŠ rigid body è¿è¡Œï¼Œå°çƒä¼šè‡ªç”±è½ä½“ åœ¨collideré‡Œå¯ä»¥çœ‹åˆ°æè´¨ï¼Œè¿™ä¸ªæè´¨ä¸åŒäºæ™®é€šæè´¨ï¼Œå«åšç‰©ç†æè´¨ï¼Œç±»æ¯”ç”Ÿæ´»æ¥è¯´ï¼Œè¿™ä¸ªåº”è¯¥å«åšâ€œææ–™â€ï¼Œè€Œæ™®é€šæè´¨åº”è¯¥å¯¹åº”â€œæ¶‚æ–™â€ æ·»åŠ ç‰©ç†æè´¨ æ‹–æ‹½ç»™çƒä½“å¯ä»¥è‡ªåŠ¨å¤åˆ¶materialï¼ŒåŒå‡»å¯ä»¥è®¾ç½®æ‘©æ“¦åŠ›å’Œå¼¹è·³ï¼Œå¼¹è·³ä¸º0~1 è¿è¡Œï¼Œå¯ä»¥çœ‹è§çš®çƒæ•ˆæœ ä¸ºå°çƒæ·»åŠ ä¸€ä¸ªæ’åŠ›ï¼ˆå›ºå®šæ–¹å‘çš„åŠ›ï¼‰ è¿™å››ä¸ªåŠ›å‚æ•°ä¾æ¬¡æ˜¯ä¸–ç•Œç©ºé—´ï¼Œå±€éƒ¨ç©ºé—´ï¼Œä¸–ç•Œç©ºé—´åŠ›çŸ©ï¼Œå±€éƒ¨ç©ºé—´åŠ›çŸ© å¯ä»¥æŠŠå°çƒé è¿‘ä¸€ç‚¹å¢™ï¼Œåœ¨æ‰è½è¿‡ç¨‹ä¸­æ’åˆ°åœ°é¢ï¼Œè¿è¡Œ å‘ç°åæ ‡è½´ä¼šæ¥å›è½¬åŠ¨ï¼Œè¿™æ˜¯å› ä¸ºå°çƒè½åœ°åä¼šæœ‰æ‘©æ“¦å’Œæ»šåŠ¨æ•ˆæœï¼ˆæ˜¯çš„æ·»åŠ æè´¨åå°±è‡ªåŠ¨å¸¦æœ‰è¿™äº›åŠŸèƒ½ï¼‰ï¼Œå¯¼è‡´å±€éƒ¨çš„åæ ‡ä¸€ç›´éšç€æ»šåŠ¨å˜åŒ– å¯ä»¥åœ¨rigid bodyå±æ€§ä¸­è¿›è¡Œçº¦æŸï¼Œé˜»æ­¢æ»šåŠ¨ 5.2 ä»¿çœŸå­å¼¹æ•ˆæœåˆ¶ä½œæ ¹æ®è“„åŠ›å‘å°„å­å¼¹çš„æ•ˆæœï¼Œè“„åŠ›æ—¶é—´è¶Šé•¿å°„çš„è¶Šè¿œ 5.2.1 é¢„åˆ¶ä»¶å°†å°çƒç›´æ¥æ‹–æ‹½åˆ°unityèµ„æºç®¡ç†å™¨çª—å£å³å¯è®©æŸä¸ªGameObjectåŠå…¶é™„å¸¦çš„æ‰€æœ‰å±æ€§ç§°ä¸ºä¸€ä¸ªå¯å¤ç”¨çš„é¢„åˆ¶ä»¶ æ–°å»ºè„šæœ¬ï¼Œè„šæœ¬å®Œæˆçš„åŠŸèƒ½æ˜¯ï¼šåˆ©ç”¨å­å¼¹çš„æ’åŠ›ç»„ä»¶æ¥æ–½åŠ è“„åŠ›æ•ˆæœ åˆ©ç”¨å°„çº¿æŸ¥è¯¢åŠŸèƒ½è®¡ç®—ç”Ÿæˆçš„å­å¼¹æ–¹å‘ 1234567891011121314151617181920212223242526272829303132333435public class fire : MonoBehaviour{ public ConstantForce bullet; // bulletä¸èƒ½ç”¨Transformï¼Œè€Œæ˜¯ConstantForceå±æ€§ private float pressedTime = 0f; // Start is called before the first frame update void Start() { } // Update is called once per frame void Update() { if (Input.GetButton(&quot;Fire1&quot;)) { pressedTime += Time.deltaTime; } if (Input.GetButtonUp(&quot;Fire1&quot;)) { // ä»æ‘„åƒæœºåˆ°é¼ æ ‡ç‚¹ç”Ÿæˆä¸€æ¡å°„çº¿ Ray ray = Camera.main.ScreenPointToRay(Input.mousePosition); RaycastHit hit; //å­˜å‚¨å°„çº¿å’Œxxçš„äº¤ç‚¹ if (Physics.Raycast(ray, out hit)) { // ä¸èƒ½æ˜¯GetComponentè€Œæ˜¯Instantiateè¡¨ç¤ºä»é¢„åˆ¶ä»¶å¤åˆ¶å‡ºä¸€ä¸ªå­å¼¹ï¼Œèµ·å§‹ä½ç½®ä¸ºå°„çº¿çš„èµ·ç‚¹ï¼ˆç›¸æœºï¼‰ï¼Œæ–¹å‘ä¸ºå°„çº¿æ–¹å‘ ConstantForce cf = Instantiate&lt;ConstantForce&gt;(bullet, ray.origin, Quaternion.LookRotation(hit.point - ray.origin)); // æ·»åŠ å±€éƒ¨ç©ºé—´æ’åŠ› cf.relativeForce = new Vector3(0f, 0f, pressedTime * 10); } pressedTime = 0f; } }} å¦‚æœå­å¼¹åäº†æ˜¯å› ä¸ºé¢„åˆ¶ä»¶å¤åˆ¶çš„å­å¼¹é»˜è®¤æ’åŠ›ä¸æ˜¯zè½´çš„10 5.3 å…³èŠ‚ç»“æ„jointå¯ä»¥çº¦æŸä¸€äº›ç‰©ç†è¿åŠ¨ ä½¿ç”¨ç©ºç‰©ä½“ä½œä¸ºçº¦æŸä½“ å»ºç«‹ä¸¤ä¸ªç©ºç‰©ä½“å¹¶åˆ†åˆ«èµ‹äºˆhingeå’Œspringçš„jointå±æ€§ hinge jointhinge jointå°±æ˜¯ç±»ä¼¼è‚˜å…³èŠ‚è¿™æ ·çš„å…³èŠ‚ï¼Œç»•è½´è½¬ï¼Œæˆ–è€…ç†è§£ä¸ºèƒ½æŒ‚åœ¨ç©ºæ°”ä¸­çš„æŒ‚é’©/é’‰å­ hingeè‡ªå¸¦rigid bodyï¼Œå…¶ä¸­çš„connected bodyæ˜¯è¦çº¦æŸçš„ç‰©ä½“ æ–°å»ºä¸€ä¸ªcubeå¹¶èµ‹äºˆrigid bodyå±æ€§ï¼Œæ”¾åœ¨hinge jointé™„è¿‘ä½ç½®ï¼Œæ‹–æ‹½è¿›å…¥connected body spring jointç©ºé—´ä¸­çš„å¼¹ç°§ï¼Œèƒ½å¤Ÿæ‚¬æŒ‚ç‰©ä½“ï¼Œæ“ä½œéƒ½ç±»ä¼¼ æ‚¬æŒ‚ç‰©ä½“åï¼Œå¯ä»¥å¯¹ç‰©ä½“è¿›è¡Œå­å¼¹æ‰“å‡»ï¼Œå°¤å…¶æ˜¯å¼¹ç°§æ‚¬æŒ‚çš„ç‰©ä½“ï¼Œæ•ˆæœå¾ˆæœ‰è¶£ ç ´åjointjointæœ‰ä¸ªbreak forceå±æ€§ï¼Œå°±æ˜¯è¯´æ”¶åˆ°å¤šå°‘åŠ›çš„æ—¶å€™æ–­å¼€çº¦æŸï¼Œæˆ‘ä»¬å¯ä»¥ç»™hingeä¸€ä¸ªè¾ƒå¤§çš„æ–­å¼€åŠ›æ¯”å¦‚1000ï¼Œspring jointè®¾ç½®ä¸º30 è¿è¡Œï¼Œå°±èƒ½å‘ç°spring jointæ‚¬æŒ‚çš„æ–¹å—è¢«å­å¼¹ä¸€æ‰“å‡»å°±æ‰è½ï¼Œè€Œhingeæ‚¬æŒ‚çš„æ–¹å—éœ€è¦ä¸€å®šçš„è“„åŠ›æ‰èƒ½æ‰“æ‰ è„šæœ¬ï¼Œç ´åäº‹ä»¶å¯ä»¥é€šè¿‡è„šæœ¬æ•è·åˆ°ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬æ•è·æ‰“å‡»çš„åŠ›åº¦ è¿™é‡Œç›´æ¥åœ¨unityæ§åˆ¶å°æ‰“å° 1234private void OnJointBreak(float breakForce){ Debug.Log(&quot;this force is: &quot; + breakForce);} è¿è¡Œ å½“ç„¶å¯ä»¥è¯•è¯•ä½¿ç”¨UIç©ºé—´åœ¨å±å¹•ç©ºé—´å³ä¸Šè§’è®°å½•åˆ†æ•°ç­‰ç®€å•æ¸¸æˆ 5.4 ç¢°æ’äº‹ä»¶æ¯”å¦‚æˆ‘ä»¬ç©æ¸¸æˆæ—¶é‡åˆ°çš„åå¼¹æˆ–è€…çªç„¶åŠ é€Ÿæ•ˆæœï¼Œæœ¬è´¨éƒ½æ˜¯æ£€æµ‹åˆ°ç¢°æ’ä¹‹åæ–½åŠ ç‰¹æ®Šçš„ç‰©ç†æ•ˆæœã€‚æ–°å»ºä¸€ä¸ªcubeå¹¶èµ‹äºˆé€æ˜æè´¨ cubeæœ‰ä¸ªå±æ€§å«isTrigger ä¹Ÿå°±æ˜¯è§¦å‘ç¢°æ’ï¼Œå¦‚æœå‹¾é€‰ï¼Œé‚£ä¹ˆç¢°æ’æ—¶ç‰©ä½“ä¸ä¼šç¢°æ’è€Œæ˜¯ä¼šç©¿é€ç‰©ä½“ï¼Œé€‚åˆåšä¸€äº›æ°´é¢æ•ˆæœã€‚ ä¸‹é¢æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªåŠ é€Ÿå¸¦æ•ˆæœï¼šå½“ç©¿é€è¿™ä¸ªåŠé€æ˜ç‰©ä½“æ—¶ç»™å­å¼¹è¿›è¡Œä¸€ä¸ªèµ‹åŠ›ï¼Œä½¿å­å¼¹åŠ é€Ÿ é¦–å…ˆç»™å­å¼¹æ·»åŠ tagï¼Œæ–¹ä¾¿æˆ‘ä»¬æ§åˆ¶æ‰€æœ‰å­å¼¹ æ–°å»ºè„šæœ¬ 1234567891011121314private void OnCollisionEnter(Collision collision) { if (collision.gameObject.tag != &quot;Bullet&quot;) return; Destroy(collision.gameObject); } private void OnTriggerStay(Collider other) { if (other.tag != &quot;Bullet&quot;) return; if (other.attachedRigidbody) other.attachedRigidbody.AddForce(Vector3.up * 30); } è¿è¡Œï¼Œç¢°åˆ°åŠé€æ˜æ–¹å—æ—¶å°±ä¼šå¼¹èµ· 6. äººå·¥æ™ºèƒ½6.1 è‡ªåŠ¨å¯»è·¯å…ˆå»ºç«‹å¦‚ä¸‹åœºæ™¯ï¼Œèƒ¶å›Šä½“æ¨¡æ‹Ÿå°äºº åŒæ—¶ä¸ºå°äººæ·»åŠ NavMeshAgentå±æ€§ æ¥ä¸‹æ¥æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªè„šæœ¬è®©å°äººç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œéœ€è¦ç”¨åˆ°ä¸€ä¸ªAIåº“ä¸­çš„NavMeshAgentå±æ€§ 123456789101112131415161718192021222324using System.Collections;using System.Collections.Generic;using UnityEngine;using UnityEngine.AI;public class Actor : MonoBehaviour{ public Transform goal; // ç›®æ ‡ private NavMeshAgent agent; //AIåº“çš„ä¸€ä¸ªå¯»è·¯å±æ€§ç±» // Start is called before the first frame update void Start() { agent = GetComponent&lt;NavMeshAgent&gt;(); agent.destination = goal.position; } // Update is called once per frame void Update() { }} å°†è„šæœ¬æŒ‚æ¥åˆ°èƒ¶å›Šèº«ä¸Šï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸ªpublicçš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ç›®æ ‡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºGameObjectä½œä¸ºç›®æ ‡ ç°åœ¨è¿è¡Œè¿˜ä¸ä¼šè‡ªåŠ¨å¯»è·¯ï¼Œè¿˜éœ€è¦ä¸€äº›é¢„è®¡ç®—ï¼š ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€è°“çš„è‡ªåŠ¨å¯»è·¯ç®—æ³•éœ€è¦å¯¹ç°æœ‰åœºæ™¯è¿›è¡Œçƒ˜ç„™ï¼ˆé¢„è®¡ç®—ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å°†ä¸€äº›ä¸åŠ¨çš„ç‰©ä½“è®¾ç½®ä¸ºstaticå±æ€§ï¼ˆåœ°é¢ï¼Œéšœç¢ç‰©ç­‰ï¼‰ï¼Œå¦‚æœéšœç¢ç‰©æ²¡æœ‰è¢«é™æ€çƒ˜ç„™ï¼Œé‚£ä¹ˆä¼šç›´æ¥ç©¿è¿‡å»ï¼ˆä¹Ÿå°±æ˜¯æ²¡æœ‰ç»•è¿‡éšœç¢ç‰©è¿›è¡Œå¯»è·¯ï¼‰ è¿è¡Œï¼Œå°±èƒ½è‡ªåŠ¨å¯»è·¯äº†ï¼Œé™¤äº†é¿éšœä¹‹å¤–ï¼Œè¿˜ä¼šè‡ªåŠ¨å¯»æ‰¾æœ€çŸ­çš„è·¯å¾„ ä¿®æ”¹è„šæœ¬ï¼Œå®ç°ç‚¹å‡»ç§»åŠ¨åˆ°é¼ æ ‡æŒ‡å®šä½ç½® 123456789void Update(){ if (Input.GetMouseButtonDown(0)) { RaycastHit hit; if (Physics.Raycast(Camera.main.ScreenPointToRay(Input.mousePosition), out hit, 100)) { agent.destination = hit.point; } }} è¿è¡Œç‚¹å‡»é¼ æ ‡å·¦é”®å¯ä»¥çœ‹åˆ°æ•ˆæœ å°é˜¶è·³è·ƒå½“æˆ‘ä»¬ç‚¹å‡»é«˜å°çš„æ—¶å€™å‘ç°ä¸èƒ½è·³ä¸Šå»ï¼Œåªèƒ½å¯»è·¯åˆ°ç¦»é«˜å°æœ€è¿‘çš„ä½ç½® æ–¹å¼1ï¼šè®¾ç½®set heightå±æ€§æ¡†æœ‰ä¸ªè®¾ç½®è·³è·ƒé«˜åº¦ï¼Œæ¯æ¬¡è®¾ç½®å®Œéƒ½è¦bake å½“æˆ‘ä»¬çœ‹åˆ°bakeåçº¿æ²¡äº†å°±è¯´æ˜èƒ½è·³ä¸Šå»äº† æ–¹å¼2ï¼šä½¿ç”¨off mesh linkè¿æ¥å¦‚æœè§‰å¾—æ–¹å¼1çš„è·³è·ƒä¸å¤ŸçœŸå®ï¼Œæˆ–è€…æƒ³å®ç°éƒ¨åˆ†æ¸¸æˆé‡Œçš„ä¼ é€æ•ˆæœï¼ˆå‚è€ƒé©¬é‡Œå¥¥å¤§ç‚®ï¼Œlolå¨±ä¹æ¨¡å¼å¤§ç‚®ï¼Œè¿œç¨‹è·³è·ƒæˆ–è€…ä¸èƒ½ç›´æ¥è¿æ¥ï¼‰ï¼Œoff mesh linkå°±æ˜¯è¿™æ ·å»ºç«‹ä¸¤ä¸ªç‰©ä½“ä¹‹é—´çš„æ›²çº¿ ä¸‹é¢æˆ‘ä»¬å®ç°ç›´æ¥ä»åœ°é¢è·³è·ƒåˆ°è“è‰²ç‰©ä½“ åœºæ™¯ä¸­å»ºç«‹è·³è·ƒçš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼ˆcubeï¼Œç»ˆç‚¹æœ€å¥½æ˜¯çœ‹å¾—è§çš„..æ–¹ä¾¿æ¼”ç¤ºï¼‰ å¹¶ç»™å…¶ä¸­ä¸€ä¸ªè·³è·ƒç‚¹æ·»åŠ off mesh linkç»„ä»¶ æ‹–å…¥èµ·ç‚¹å’Œç»ˆç‚¹ ç§»åŠ¨çš„éšœç¢ç‰©å¯¹äºç§»åŠ¨çš„éšœç¢ç‰©ï¼Œæ²¡æœ‰åŠæ³•è®¾ç½®staticï¼Œéœ€è¦é€šè¿‡nav mesh obstacle åœ¨åœºæ™¯ä¸­æ–°å»ºä¸€é¢å¢™ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“å¦‚æœä¸é…ç½®staticçš„è¯è¿åŠ¨è·¯çº¿ç©¿è¿‡å¢™çš„è¯å°±ä¼šç›´æ¥ç©¿è¿‡å»ã€‚å› æ­¤æˆ‘ä»¬ä¸ºå¢™æ·»åŠ nav mesh obstacleç»„ä»¶ è¿è¡Œï¼Œå°±èƒ½é¿å¼€è¿™ä¸ªéstaticçš„ç‰©ä½“äº†ï¼ˆè™½ç„¶è¿™ä¸ªå¢™å¹¶æ²¡æœ‰ä¸ºå…¶æ·»åŠ animationï¼Œå¯ä»¥è‡ªå·±æ·»åŠ ï¼‰ è¯´ä¸€ä¸‹carveå±æ€§ï¼Œcarveå±æ€§èƒ½è®©åŠ¨æ€ç‰©ä½“ä¹ŸåŠ å…¥çƒ˜ç„™å½“ä¸­ å‹¾é€‰ä»¥åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°bakeæ—¶è¿™é¢å¢™å‘¨å›´ä¹Ÿæœ‰ç¦æ­¢è§¦ç¢°çš„åŒºåŸŸäº† æˆ‘ä»¬éƒ½çŸ¥é“bakeæ˜¯æå‰è®¡ç®—ä¸€äº›å¤æ‚çš„æ¸²æŸ“æ•ˆæœï¼Œè¿è¡Œæ—¶å°±å¯ä»¥ä¸å†è®¡ç®—ï¼Œé‚£éstaticçš„ç‰©ä½“å‹¾é€‰è¿™ä¸ªcarveæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿé‚£å°±æ˜¯é’ˆå¯¹åŠ¨æ€ç”Ÿæˆä½†ç”Ÿæˆä»¥åé™æ­¢çš„ç‰©ä½“ ç»¼ä¸Šï¼š staticï¼šé™æ­¢ç‰©ä½“ éstaticï¼šç§»åŠ¨ç‰©ä½“ éstaticä½†carveï¼šåŠ¨æ€ç”Ÿæˆä½†ç”Ÿæˆä»¥åé™æ­¢çš„ç‰©ä½“ 6.2 æ•Œäººå·¡é€»é€šå¸¸æ¸¸æˆé‡Œçš„æ•Œäººéƒ½æœ‰å·¡é€»é€»è¾‘ï¼Œå›ºå®šçš„ç§»åŠ¨æŸäº›ç©ºé—´ç‚¹ï¼Œé‡åˆ°ç©å®¶åå°±ä¼šè¿½èµ¶ï¼Œç©å®¶ç¦»å¼€èŒƒå›´åå›åˆ°è‡ªå·±çš„å·¡é€»è·¯å¾„ åœ¨åœºæ™¯ä¸­å»ºç«‹æ•Œäººï¼Œå¹¶å»ºç«‹å‡ ä¸ªå·¡é€»è·¯å¾„ç‚¹ï¼Œå·¦ä¸Šè§’çš„ä¸ºæ•Œäººï¼Œå³ä¸‹è§’çš„ä¸ºç©å®¶ï¼Œç”¨ä¸€ä¸ªçˆ¶GameObjectæ¥ç®¡ç†è·¯å¾„ç‚¹ï¼Œè·¯å¾„ç‚¹ä½ç½®å¤§è‡´å¦‚ä¸‹ ä¸‹é¢é€šè¿‡è„šæœ¬ä½¿å…¶èƒ½æŒ‰è§„å®šç§»åŠ¨åˆ°å„ä¸ªå·¡é€»ç‚¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152using System;using System.Collections;using System.Collections.Generic;using UnityEngine;using UnityEngine.AI;public class Enemy : MonoBehaviour{ public float patrolSpeed = 3f; // å·¡é€»ç§»åŠ¨é€Ÿåº¦ public float patrolWaitTime = 0.5f; // åˆ°è¾¾æ¯ä¸ªå·¡é€»ç‚¹åœä¸€ä¸‹ public Transform patrolWayPoints; // å·¡é€»ç‚¹éƒ½åœ¨è¿™ä¸ªçˆ¶ç‰©ä½“é‡Œäº†ï¼Œæˆ‘ä»¬ç›´æ¥è·å–çˆ¶ç‰©ä½“ private NavMeshAgent agent; private float patrolTimer = 0f; // è®°å½•å·²ç»åœç•™çš„æ—¶é—´ï¼Œå¤§äºpatrolWaitTimeå°±ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå·¡é€»ç‚¹ private int wayPointIndex = 0; // å·¡é€»ç‚¹ä¸‹æ ‡ // Start is called before the first frame update void Start() { agent = GetComponent&lt;NavMeshAgent&gt;(); } // Update is called once per frame void Update() { Patrolling(); } private void Patrolling() { agent.isStopped = false; agent.speed = patrolSpeed; // åˆ¤æ–­æ˜¯å¦åˆ°è¾¾æŸä¸ªå·¡é€»ç‚¹(agentè€ƒè™‘äº†è¯¯å·®ï¼Œæ‰€ä»¥æ˜¯èŒƒå›´å°äºè¯¥åœæ­¢çš„èŒƒå›´) if (agent.remainingDistance &lt; agent.stoppingDistance) { patrolTimer += Time.deltaTime; if(patrolTimer &gt; patrolWaitTime) { if (wayPointIndex == patrolWayPoints.childCount - 1) wayPointIndex = 0; else wayPointIndex++; patrolTimer = 0f; } } else { patrolTimer = 0f; } agent.destination = patrolWayPoints.GetChild(wayPointIndex).position; }} å…³äºç¬¬34è¡Œçš„é‚£ä¸ªstopping distanceæ˜¯è¯¯å·®èŒƒå›´åˆ¤æ–­ï¼Œå…¶å®æ˜¯nav mesh agentæä¾›çš„ä¸€ä¸ªè¯¯å·®åˆ¤æ–­ï¼Œåœ¨è„šæœ¬æŒ‚æ¥åˆ°æ•Œäººåï¼Œè¿˜éœ€è¦è°ƒæ•´stopping distanceçš„å±æ€§å€¼ï¼Œæœ€å¥½å¤§äº0ï¼Œä»¥ä¸ºåœ°å½¢å¯èƒ½æœ‰é«˜æœ‰çŸ®ä¹‹ç±»çš„ï¼Œå­˜åœ¨è¯¯å·®ï¼Œå¯»è·¯ç®—æ³•å¯èƒ½æ²¡æœ‰åŠæ³•å®Œå…¨è¾¾åˆ° 6.3 æ•Œäººè§†é‡ä¸‹é¢å®ç°æ•Œäººå‘ç°ç©å®¶çš„åŠŸèƒ½ è§†é‡åŠŸèƒ½çš„æœ¬è´¨æ˜¯collider åˆ›å»ºä¸€ä¸ªç©ºç‰©ä½“ä½œä¸ºæ•Œäººçš„å­ç‰©ä½“ï¼ˆè§†é‡ï¼‰ï¼Œæ·»åŠ box colliderå¹¶è°ƒæ•´åˆ°åˆé€‚çš„è§†é‡å¤§å°ï¼Œå‹¾é€‰isTriggerä»…ä½œä¸ºè§¦å‘å™¨ä½¿ç”¨ï¼Œå¯ä»¥é¿å…ç‰©ç†ç¢°æ’ ç¼–å†™è„šæœ¬ï¼Œæ³¨æ„è„šæœ¬æ˜¯ç»™è¿™ä¸ªEnemySightçš„ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364using System.Collections;using System.Collections.Generic;using UnityEngine;public class EnemySight : MonoBehaviour{ public float filedOfView = 100f; // è§†é‡è§’åº¦ public bool playerInsight = false; // æ˜¯å¦å‘ç° public Vector3 playerLastPos; // ç©å®¶æœ€åä½ç½® public Vector3 resetPos = Vector3.back; // ç©å®¶é»˜è®¤ä½ç½® private BoxCollider col; // æ•Œäººè§†é‡ç¢°æ’ä½“ private GameObject player; // ç©å®¶ // Start is called before the first frame update void Start() { col = GetComponent&lt;BoxCollider&gt;(); player = GameObject.FindGameObjectWithTag(&quot;Player&quot;); playerLastPos = resetPos; } // ç¢°æ’ä½“æ£€æµ‹å‡½æ•° void OnTriggerStay(Collider other) { if(other.gameObject == player) { playerInsight = false; // è·å¾—ç©å®¶å’Œæ•Œäººçš„è¿çº¿ Vector3 dir = other.transform.position - transform.position; // åˆ¤æ–­è¯¥è¿çº¿å’Œæ•Œäººå‰æ–¹çš„å‘é‡å¤¹è§’ï¼Œè‹¥å¤§äºè§†é‡è§’åº¦çš„ä¸€åŠï¼ˆå·¦å³ä¸¤è¾¹ï¼‰ï¼Œå°±è¯´æ˜ç©å®¶å¯èƒ½è¢«çœ‹åˆ°äº† float angle = Vector3.Angle(dir, transform.forward); if(angle &lt;= filedOfView * 0.5) { // åªæ˜¯å¯èƒ½è¢«çœ‹åˆ°è€Œå·²ï¼Œè¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦æœ‰éšœç¢ç‰©ï¼Œå¯ä»¥æ„é€ ä¸€æ¡å°„çº¿ï¼Œraycastæ˜¯å¦ä»…æœ‰ç©å®¶è€Œæ²¡æœ‰åˆ«çš„ç‰©ä½“ RaycastHit hit; if(Physics.Raycast(transform.position + transform.up, dir.normalized, out hit, col.size.z)) { if(hit.collider.gameObject == player) { playerInsight = true; playerLastPos = player.transform.position; Debug.Log(&quot;Find Player&quot;); } } } } } private void OnTriggerExit(Collider other) { if(other.gameObject == player) { playerInsight = false; } } // Update is called once per frame void Update() { }} éœ€è¦æ³¨æ„ï¼Œcolliderç¢°æ’æ£€æµ‹ï¼Œå½“ç„¶è¦æ±‚playeræŒæœ‰rigid bodyå±æ€§ï¼Œå› æ­¤è¦æ³¨æ„ç»™ç©å®¶å’Œæ•Œäººæ·»åŠ rigid bodyå±æ€§ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜è¦å‹¾é€‰isKinematicï¼Œè¡¨ç¤ºä¸å—åŠ¨åŠ›å­¦å½±å“ï¼ˆæ¯”å¦‚è¢«å¢™å£æ’å¼€åå—äº†æ¨åŠ›ï¼Œç›´æ¥è¢«æ’å¼€åˆ°åœ°å›¾å¤–ï¼‰ 6.4 æ”»å‡»ä¸è¿½è¸ªæˆ‘ä»¬å°†è¦ä¿®æ”¹æ•Œäººçš„è„šæœ¬é€»è¾‘ï¼Œä½¿å…¶é™¤äº†å·¡é€»åŠŸèƒ½å¤–è¿˜èƒ½æ‹¥æœ‰è¿½è¸ªå’Œå°„å‡»åŠ¨ä½œ æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š1æ•Œäººå·¡é€»ï¼Œ2è§†é‡å‘ç°ç©å®¶ï¼Œ3æ‰å¤´æœå‘ç©å®¶ï¼Œ4å¼€æªå°„å‡»ï¼Œ5ç©å®¶è„±ç¦»è§†é‡ï¼Œ6æ•Œäººè¿½è¸ªï¼Œè¿”å›2ç›´è‡³è¿½ä¸ä¸Šï¼Œè¿”å›1 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758using System;using System.Collections;using System.Collections.Generic;using UnityEngine;using UnityEngine.AI;public class Enemy : MonoBehaviour{ public float patrolSpeed = 3f; // å·¡é€»ç§»åŠ¨é€Ÿåº¦ public float patrolWaitTime = 0.5f; // åˆ°è¾¾æ¯ä¸ªå·¡é€»ç‚¹åœä¸€ä¸‹ public Transform patrolWayPoints; // å·¡é€»ç‚¹éƒ½åœ¨è¿™ä¸ªçˆ¶ç‰©ä½“é‡Œäº†ï¼Œæˆ‘ä»¬ç›´æ¥è·å–çˆ¶ç‰©ä½“ private NavMeshAgent agent; private float patrolTimer = 0f; // è®°å½•å·²ç»åœç•™çš„æ—¶é—´ï¼Œå¤§äºpatrolWaitTimeå°±ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå·¡é€»ç‚¹ private int wayPointIndex = 0; // å·¡é€»ç‚¹ä¸‹æ ‡ public float chaseSpeed = 6f; // è¿½è¸ªé€Ÿåº¦ public float chaseWaitTime = 5f; // å…è®¸è¿½è¸ªæ—¶é—´ï¼ˆè¶…è¿‡å°±åˆ¤å®šä¸ºè¿½ä¸åˆ°ï¼‰ private float chaseTimer = 0f; // å·²ç»è¿½è¸ªçš„æ—¶é—´ public float sqrPlayerDist = 4f; // è·ç¦»å¹³æ–¹ï¼Œå¹³æ–¹æ˜¯ä¸ºäº†ç®€åŒ–è®¡ç®— private bool chase = false; // æ˜¯å¦è¿½åˆ° public float shootRotSpeed = 4f; // å‘ç°æ•Œäººè¦å…ˆæ‰å¤´ public float shootFreeTime = 2f; // å­å¼¹å†·å´æ—¶é—´ï¼ˆæ¢å¼¹ï¼‰ï¼Œä¸èƒ½æ— çº¿å‘å°„å­å¼¹ private float shootTimer = 0f; // å·²ç»å†·å´çš„æ—¶é—´ private EnemySight enemySight; // ç›´æ¥è·å–è§†é‡æ‰€ç”¨è„šæœ¬ private Transform player; // ç©å®¶ public Rigidbody bullet; // å­å¼¹ // Start is called before the first frame update void Start() { agent = GetComponent&lt;NavMeshAgent&gt;(); enemySight = transform.Find(&quot;EnemySight&quot;).GetComponent&lt;EnemySight&gt;(); player = GameObject.FindGameObjectWithTag(&quot;Player&quot;).transform; } // Update is called once per frame void Update() { // åœ¨è§†é‡å†…ï¼šå°„å‡»ï¼Œæ²¡è§†é‡äº†ï¼šè¿½è¸ªï¼Œè¿½ä¸ä¸Šäº†ï¼šå·¡é€» if(enemySight.playerInsight) { Shoting(); // å°„å‡» chase = true; } else if(chase) { Chasing(); // è¿½è¸ª } else { Patrolling(); // å·¡é€» } }} å°„å‡»å‡½æ•° 1234567891011121314151617181920private void Shoting(){ // é¦–å…ˆæ‰å¤´æœå‘ç©å®¶ Vector3 lookPos = player.position; lookPos.y = transform.position.y; // è¿™é‡Œä¸ºäº†ç®€ä¾¿ä¸è¿›è¡ŒæŠ¬å¤´ä½å¤´ Vector3 targetDir = lookPos - transform.position; transform.rotation = Quaternion.Slerp(transform.rotation, Quaternion.LookRotation(targetDir), Mathf.Min(1f, Time.deltaTime * shootRotSpeed)); // ä½¿ç”¨å››å…ƒæ•°åœ¨xxæ—¶é—´å†…å˜æˆæŒ‡å®šæ–¹å‘ agent.isStopped = true; // å¯»è·¯è¿‡ç¨‹æš‚æ—¶åœæ­¢ // å‘åŠ¨æ”»å‡» if(Vector3.Angle(transform.forward, targetDir) &lt; 2) // ä¸ä¸€å®šè¦å®Œå…¨é¢å‘ç©å®¶ï¼Œå¤§å®¶éƒ½ä¼šåŠ¨ï¼Œå…è®¸ä¸€å®šè¯¯å·® { if(shootTimer &gt; shootFreeTime) { Instantiate(bullet, transform.position, Quaternion.LookRotation(player.position - transform.position)); // ä»é¢„åˆ¶ä»¶ä¸­åˆ›å»ºå­å¼¹ï¼Œå¹¶æŒ‡å®šä½ç½®å’Œæ–¹å‘ shootTimer = 0f; } shootTimer += Time.deltaTime; }} åˆ¶ä½œå­å¼¹å’Œé¢„åˆ¶ä»¶ å­å¼¹ä¸è¦å¤ªå¤§ï¼Œè°ƒæ•´ç¼©æ”¾ å­å¼¹ä¸å—ç‰©ç†ç³»ç»Ÿçš„ç¢°æ’å½±å“ï¼Œå‹¾é€‰isTrigger ä¸ºäº†æ–¹ä¾¿å­å¼¹ä¸å—é‡åŠ›å½±å“ï¼Œå–æ¶ˆå‹¾é€‰gravity ç»™å­å¼¹ä¸€ä¸ªå¾€å‰çš„æ’åŠ›ï¼Œå±€éƒ¨åæ ‡zä¸º5 ä¸ºå­å¼¹ç¼–å†™è„šæœ¬ 12345678private void OnTriggerEnter(Collider other){ if(other.tag == &quot;Player&quot;) { GameObject.Destroy(other.gameObject); // ä¸€æªç›´æ¥èƒ½æ‰“çˆ†ç©å®¶ç‹—å¤´ GameObject.Destroy(gameObject); // é”€æ¯å­å¼¹æœ¬èº« }} æŒ‚æ¥ç»™å­å¼¹ï¼Œç„¶ååˆ›å»ºé¢„åˆ¶ä»¶å¹¶åˆ é™¤é»˜è®¤å­å¼¹ å°†å­å¼¹é¢„åˆ¶ä»¶ä½œä¸ºå‚æ•°æ‹–æ‹½ç»™Enemyè„šæœ¬ä¸­çš„bulletå‚æ•° ç°åœ¨è¿è¡Œå¯ä»¥çœ‹åˆ°æ•Œäººå‘å°„å­å¼¹æ‰“æ­»ç©å®¶äº†ï¼Œä½†æ˜¯æ•Œäººè¿˜ä¸ä¼šè¿½è¸ªï¼Œä¸”å°„å‡»å‡½æ•°è®©å¯»è·¯åŠŸèƒ½æš‚åœï¼Œæ‰€ä»¥è§†é‡æ•æ‰åˆ°ç©å®¶åå°±ä¼šåœä¸‹ è¿½è¸ªå‡½æ•° 1234567891011121314151617181920212223242526private void Chasing(){ // å¯»è·¯ agent.isStopped = false; // é‡æ–°æ‰“å¼€å¯»è·¯åŠŸèƒ½ Vector3 sightDeltaVec = enemySight.playerLastPos - transform.position; if(sightDeltaVec.sqrMagnitude &gt; sqrPlayerDist) // è®¡ç®—å½“å‰æ•Œäººå’Œç©å®¶çš„è·ç¦»ï¼Œå…¶å®ç©å®¶æ˜¯ä¸Šä¸€å¸§å› ä¸ºä¸å¯èƒ½çŸ¥é“ç©å®¶0.å‡ å¸§çš„ä½ç½® { agent.destination = enemySight.playerLastPos; } agent.speed = chaseSpeed; // å°†å·¡é€»é€Ÿåº¦æ¢æˆè¿½è¸ªé€Ÿåº¦ if (agent.remainingDistance &lt; agent.stoppingDistance) { // èµ°åˆ°ç›®æ ‡destinationçš„ä½ç½®æ—¶ï¼Œå››å¤„å¼ æœ›ä¸€ä¸‹ï¼Œå¦‚æœç©å®¶ä¸è§äº†ï¼Œå°±å›åˆ°å·¡é€» chaseTimer += Time.deltaTime; if (chaseTimer &gt; chaseWaitTime) { chase = false; chaseTimer = 0f; } } else chaseTimer = 0f; // ä¸€ç›´å¤„äºè¿½è¸ªçŠ¶æ€ï¼Œä¸å¯èƒ½å› ä¸ºæ—¶é—´å°±ä¸è¿½äº†ï¼Œä¸€ç›´å½’0 enemySight.playerInsight = false; return;} è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°æ•Œäººå¯ä»¥å·¡é€»ï¼Œè¿½è¸ªï¼Œå°„å‡»ï¼Œé‡æ–°å·¡é€» 7. éŸ³é¢‘7.1 éŸ³é¢‘åŸºç¡€å¯ä»¥ç›´æ¥å°†éŸ³é¢‘æ–‡ä»¶æ‹–æ‹½åˆ°åœºæ™¯ï¼Œä¼šè‡ªåŠ¨å»ºç«‹ä¸€ä¸ªGameObjectï¼Œé™„å¸¦Audio Sourceç»„ä»¶ï¼Œå…¶ä¸­çš„AudioClipå±æ€§å°±æ˜¯è¿™æ®µéŸ³é¢‘ï¼Œè€Œoutputå¯ä»¥æŒ‡å®šä¸€ä¸ªaudio listenerï¼Œaudio listeneræ˜¯éŸ³é¢‘æ¥æ”¶å™¨æ¥æ¨¡æ‹Ÿäººçš„è€³æœµï¼Œæ·»åŠ éŸ³é¢‘æ—¶é»˜è®¤ä¸ºmain cameraæ·»åŠ ä¸€ä¸ªaudio listenerç»„ä»¶ 3DéŸ³æ•ˆï¼šspatial blendæ‹‰æˆ3Då°±å¯ä»¥ï¼Œè¿è¡Œæ—¶é•œå¤´çš„ä½ç½®å†³å®šäº†å£°éŸ³æ–¹å‘åœ¨å“ªé‡Œ muteï¼šæš‚æ—¶é™éŸ³ Bypass Effectsï¼šå¿½ç•¥éŸ³æ•ˆï¼ˆéŸ³æ•ˆå’ŒéŸ³é‡æ˜¯ä¸ä¸€æ ·çš„ï¼‰ Play On Awakeï¼šè‡ªåŠ¨æ’­æ”¾ Loopï¼šå¾ªç¯æ’­æ”¾ Priorityï¼šä¼˜å…ˆçº§0~256 Volumeï¼šéŸ³é‡ Pitchï¼šå£°éŸ³æ’­æ”¾é¢‘ç‡ï¼ˆå€é€Ÿï¼‰ Stereo Panï¼šå£°éŸ³æ–¹å‘ï¼Œåªå¯¹2Då£°éŸ³æœ‰å½±å“ï¼Œ3Dæƒ…å†µä¸‹åªè·Ÿä½ç½®æœ‰å…³ Reverb Zone Mixï¼šå†³å®šå¤šå°‘è¾“å‡ºä¿¡å·ç»™å›å£°åŒºåŸŸ Doppler Levelï¼šå¤šæ™®å‹’æ•ˆåº” https://baike.baidu.com/item/%E5%A4%9A%E6%99%AE%E5%8B%92%E6%95%88%E5%BA%94/115710?fr=aladdin Spreadï¼š3DéŸ³æºçš„å‘å°„è§’åº¦ Volume Rolloffï¼šè·ç¦»å’ŒéŸ³é‡çš„å‡½æ•° Max Distanceï¼šå£°éŸ³ä¼ æ’­æœ€å¤§è·ç¦» 7.2 æ··éŸ³å™¨å¯¹å¤šä¸ªå£°éŸ³è¿›è¡Œæ§åˆ¶ å¯ä»¥é€šè¿‡ä¸åŒçš„ç»„æ¥æ§åˆ¶ä¸åŒçš„éŸ³æºï¼ˆå±æ€§ä¸­çš„outputå¯¹åº”è¿™é‡Œä¸åŒçš„ç»„ï¼‰ è¿è¡Œï¼Œå°±å¯ä»¥å‘ç°å¤šä¸ªç»„å¯¹åº”çš„éŸ³æºåŒæ—¶æ’­æ”¾äº†ï¼Œå¯ä»¥ç¼–è¾‘å„ä¸ªç»„çš„éŸ³é¢‘æ–‡ä»¶çš„æƒé‡ï¼Œè¾¾åˆ°æ··éŸ³æ•ˆæœã€‚ çˆ¶groupçš„è°ƒæ•´ä¼šå½±å“ä»–çš„æ‰€æœ‰å­ç‰©ä½“ SMBæŒ‰é’®çš„æ„æ€æ˜¯ Sï¼šsoloå•ç‹¬æ’­æ”¾ Mï¼šmuteé™éŸ³ Bï¼šbypasså–æ¶ˆéŸ³æ•ˆ å½“æˆ‘ä»¬è°ƒæ•´åˆ°è§‰å¾—é€‚åˆçš„æ··éŸ³æ•ˆæœæ—¶ï¼Œå¯ä»¥ç‚¹å‡»Snapshotsï¼Œä¿å­˜å½“å‰çš„å‚æ•°å¿«ç…§ Viewsï¼šä¹Ÿæ˜¯å¯ä»¥ä¿å­˜å¤šä»½ï¼Œä½†æ˜¯ä¿å­˜çš„æ˜¯groupå¯è§æ€§çš„è‡ªç”±ç»„åˆï¼Œæ¯”å¦‚ç¬¬ä¸€ä»½å±è”½äº†effectï¼Œç¬¬äºŒä»½å±è”½äº†background Mixerä¹Ÿå¯ä»¥æœ‰å±‚æ¬¡å…³ç³»ï¼šä¸€ä¸ªæ··éŸ³å™¨æ§åˆ¶å¦ä¸€ä¸ªæ··éŸ³å™¨ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³ç©å®¶ç‚¹ç©ºæ ¼çš„æ—¶å€™ä¸€ç§éŸ³æ•ˆï¼Œç‚¹å›è½¦çš„æ—¶å€™å¦ä¸€ç§éŸ³æ•ˆ é¦–å…ˆæ‹–æ‹½ä¸¤ä¸ªéŸ³æºshootå’Œexplodeæ¨¡æ‹Ÿå¼€æªå’Œè·³è·ƒï¼Œå¹¶ç®¡ç†åœ¨çˆ¶controllerä¸‹ï¼ˆè¯‘ä¸ºç©å®¶æ§åˆ¶éŸ³é¢‘ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªaudio mixerå¯¹åº”è¿™ä¸ªæ§åˆ¶éŸ³é¢‘ï¼ˆè¿™é‡Œåå­—æ˜¯SoundEffectï¼‰ï¼Œä¸¤ä¸ªéŸ³é¢‘éƒ½å°†outputè®¾ç½®ä¸ºSoundEffect æ¥ä¸‹æ¥æ·»åŠ ä¸€ä¸ªç»„PlayerSoundï¼Œå†å°†åˆšæ‰çš„SoundEffectæ··éŸ³å™¨ä½œä¸ºMusicæ··éŸ³å™¨çš„å­æ··éŸ³å™¨ï¼Œå¹¶é€‰æ‹©ç»„ä¸ºPlayerSound å½“ç„¶ï¼Œäº¤äº’éœ€è¦è„šæœ¬ 123456789101112public class Controller : MonoBehaviour { public AudioSource shootSnd; public AudioSource explodeSnd; // Update is called once per frame void Update () { if (Input.GetMouseButtonDown(0)) shootSnd.Play(); if (Input.GetKeyDown(KeyCode.Space)) explodeSnd.Play(); }} æŒ‚æ¥ç»™controllerå¹¶å°†å¯¹åº”çš„éŸ³æºGameObjectä½œä¸ºå‚æ•°ä¼ é€’è¿›å»ï¼Œè¿è¡Œï¼Œä¾¿å¯ä»¥å‘ç°æ—¢æœ‰èƒŒæ™¯éŸ³ä¹ï¼Œä¹Ÿæœ‰å­ç‰©ä½“ï¼ˆç”¨æˆ·æ“ä½œæ—¶çš„éŸ³æºï¼‰äº† 7.3 éŸ³æ•ˆéŸ³æ•ˆå’ŒéŸ³é¢‘ä¸ä¸€æ ·ï¼ŒéŸ³é¢‘æ˜¯ä¸€æ®µmp3ï¼ŒéŸ³æ•ˆæ˜¯æ¯”å¦‚å›éŸ³ï¼Œç©ºæ—·ï¼Œäººå£°ä¹‹ç±»çš„ æ–°å»ºåœºæ™¯ï¼Œæ‹–å…¥èƒŒæ™¯éŸ³ä¹éŸ³é¢‘ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ··éŸ³å™¨ï¼ˆè¿™é‡Œå«AudioEffectDemoï¼‰ï¼Œæ··éŸ³å™¨æ·»åŠ ä¸¤ä¸ªgroupåˆ†åˆ«ä½œä¸ºéŸ³ä¹å’ŒéŸ³æ•ˆ å°†musicä½œä¸ºéŸ³é¢‘çš„outputï¼Œè¿è¡Œæµ‹è¯•musicçš„å‚æ•°æ˜¯å¦èƒ½è°ƒæ•´å£°éŸ³å¤§å° ä¸‹é¢å¯¹effectç»„ç‚¹å‡»Addæ·»åŠ éŸ³æ•ˆï¼Œunityä¸ºæˆ‘ä»¬æä¾›äº†è®¸å¤šå†…ç½®éŸ³æ•ˆï¼Œè¿™é‡Œé€‰æ‹©SFX Reverbï¼ˆå›å£°ï¼‰ å›å£°éœ€è¦çŸ¥é“æ¥è‡ªä»€ä¹ˆçš„å›å£°ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»™effectsæ·»åŠ ä¸€ä¸ªReceiveï¼Œç»™musicæ·»åŠ ä¸€ä¸ªsend æœ‰äº†æ¥å£åï¼Œç‚¹å‡»musicï¼Œåœ¨sendé‡Œé€‰æ‹©effectsçš„Receiveæ¥å£ï¼Œå°±å¯ä»¥æŠŠéŸ³é¢‘å‘é€ç»™æ¥æ”¶è€… æ³¨æ„ï¼ŒéŸ³æ•ˆæ˜¯æœ‰å¤„ç†é¡ºåºçš„ï¼Œå¿…é¡»å…ˆæ¥æ”¶ï¼Œå†å›å£°ï¼Œå› æ­¤è¦è°ƒæ•´é¡ºåºå¦‚ä¸‹å›¾ è¿è¡Œï¼Œè¿˜ä¸è¡Œï¼Œéœ€è¦ç‚¹å‡»è¿™é‡Œè°ƒæ•´å›å£°å¼ºåº¦ å¦‚æœå›å£°æ•ˆæœä¸æ˜æ˜¾ï¼Œå¯ä»¥è°ƒæ•´SFX Reverbçš„å‚æ•°ï¼Œæ¯”å¦‚Roomæˆ¿é—´å¤§å°å’ŒReverbå›å£°å¼ºåº¦ é™¤äº†å›å£°æ•ˆæœï¼Œunityä¹Ÿæä¾›äº†è®¸å¤šå…¶ä»–éŸ³æ•ˆï¼Œæ¯”å¦‚ä½é€šæ»¤æ³¢å™¨ï¼ˆå¯ä»¥è¿‡æ»¤ä½éŸ³ä¿ç•™é«˜éŸ³ï¼‰ç­‰ç­‰ï¼Œè‡ªå·±å¯ä»¥å°è¯•ï¼Œä½†æ˜¯è¦æ³¨æ„é¡ºåºï¼Œmusicè¦å…ˆä½é€šå†sendå›éŸ³ï¼Œå¦åˆ™å›éŸ³æ¥å—åˆ°çš„æ˜¯åŸéŸ³ è„šæœ¬æ§åˆ¶ä»¥ä¸Šï¼Œéƒ½æ˜¯åœ¨unityç¼–è¾‘å™¨ä¸­è®¾ç½®çš„ï¼Œé‚£å¦‚æœéœ€è¦åŠ¨æ€è®¾ç½®å‘¢ï¼Ÿï¼Œæ¯”å¦‚åœ¨æ¸¸æˆåœºæ™¯ä¸­äººç‰©å¯ä»¥è°ƒæ•´æŸä¸ªæ”¶éŸ³æœºçš„éŸ³é‡ä¹‹ç±»ï¼Œå› æ­¤å¯ä»¥æš´éœ²æ··éŸ³å™¨è®¾ç½®ç»™è„šæœ¬ å› ä¸ºmasterå¯ä»¥æ§åˆ¶æ‰€æœ‰å­éŸ³é¢‘ï¼Œæ‰€ä»¥æˆ‘ä»¬æš´éœ²masterçš„æ§åˆ¶è„šæœ¬ï¼Œæ³¨æ„æ˜¯å¯¹ç€Volumeç‚¹å³é”®è€Œä¸æ˜¯å¯¹ç€Attentionç‚¹å³é”® å®Œæˆä¹‹åè¿™é‡Œä¼šå‡ºç°ä¸€ä¸ªExposed Parametersï¼Œä¹Ÿå°±æ˜¯è‡ªå®šä¹‰å‚æ•° æ–°å»ºè„šæœ¬ï¼Œè¿™é‡Œé€šè¿‡é”®ç›˜ä¸Šä¸‹é”®æ¥æ§åˆ¶éŸ³é‡ 12345678910111213141516171819using System.Collections;using System.Collections.Generic;using UnityEngine;using UnityEngine.Audio;public class Adjust : MonoBehaviour { public AudioMixer audioMixer; // Update is called once per frame void Update () { float v; audioMixer.GetFloat(&quot;MyVolume&quot;, out v); Debug.Log(v); if (Input.GetKeyDown(KeyCode.UpArrow)) audioMixer.SetFloat(&quot;MyVolume&quot;, v + 1); if (Input.GetKeyDown(KeyCode.DownArrow)) audioMixer.SetFloat(&quot;MyVolume&quot;, v - 1); }} è„šæœ¬æŒ‚æ¥åˆ°main caneraï¼Œmix audioä½œä¸ºå‚æ•° è¿è¡Œï¼Œé€šè¿‡é”®ç›˜â†‘â†“è°ƒæ•´éŸ³é‡å¤§å° è‡³æ­¤éŸ³æ•ˆä»‹ç»å®Œæ¯• 8. ç½‘ç»œ2019ä»¥åçš„unityç‰ˆæœ¬ç°åœ¨è¿™é‡Œç‚¹å‡»ä¸€ä¸‹å®‰è£… 8.1 åŒç©å®¶è¿çº¿ åŒç©å®¶è¿çº¿ï¼šè¿™ç§æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡ç«¯å…¶å®ä¹Ÿæ˜¯å…¶ä¸­ä¸€ä¸ªå®¢æˆ·ç«¯ï¼ˆä¹Ÿæ˜¯ä¸€ä¸ªunityç¨‹åºï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯æ“ä½œä¸€ä¸ªå°äººï¼ŒæœåŠ¡ç«¯ä¹Ÿæœ‰æ“ä½œå°äººçš„åŠŸèƒ½ã€‚ä½†æ˜¯è¿˜æ˜¯å¿…é¡»å…ˆå¯åŠ¨æœåŠ¡ç«¯ã€‚ å¤šç©å®¶è¿çº¿ï¼šè¿™ç§æ¨¡å¼ä¸‹ï¼ŒæœåŠ¡ç«¯é€šå¸¸åªåšæ•°æ®çš„æ¥æ”¶ã€è½¬å‘å’Œå¹¿æ’­ï¼Œæœ¬èº«å¹¶ä¸å…·æœ‰å®¢æˆ·ç«¯çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¼šå­˜å‚¨å®¢æˆ·ç«¯çš„åˆ—è¡¨ï¼Œæ“ä½œå¯¹åº”çš„æ•°æ®æ˜¯å•æ’­è¿˜æ˜¯å¹¿æ’­ æ·»åŠ ç½‘ç»œç®¡ç†å™¨ æ–°å»ºåœºæ™¯ï¼Œæ·»åŠ ä¸€ä¸ªç¬¬ä¸‰äººç§°é¢„å®ç°å°äººï¼Œæ·»åŠ ä¸€ä¸ªç©ºobjectï¼Œä¸ºç©ºç‰©ä½“æ·»åŠ network managerå’Œnetwork manager HUDç»„ä»¶ ä¸ºäººç‰©æ·»åŠ ç½‘ç»œå®ä½“å’Œç½‘ç»œå¹¿æ’­ ä¸ºå°äººå¤åˆ¶å‡ºé¢„åˆ¶ä»¶ å¯¹å°äººæ·»åŠ  networkIdentityç»„ä»¶ï¼Œè¡¨ç¤ºè¯¥å°äººæ˜¯ç½‘ç»œå®ä½“ å‹¾é€‰ä¸‹é¢è¿™ä¸ªé€‰é¡¹ï¼Œç”±äºåœ¨ç½‘ç»œæ¸¸æˆä¸­ï¼Œä¸å®œä¼ è¾“å¤ªå¤šæ•°æ®ï¼Œæ¯”å¦‚äººç‰©å¯ä»¥åœ¨è‡ªå·±æœ¬åœ°å¯ä»¥æ§åˆ¶çš„ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯åªæœ‰ä¸€ä¸ªç©å®¶ã€‚åªéœ€è¦å‘ç½‘ç»œå¹¿æ’­è‡ªå·±çš„ä¸€äº›ä¿¡æ¯å³å¯ï¼Œå› æ­¤å°±å¯ä»¥å‹¾é€‰ä¸‹é¢è¿™ä¸ªé€‰é¡¹ã€‚ é‚£å‹¾é€‰äº†æœ¬åœ°æ“ä½œä¹‹åï¼Œæ€ä¹ˆå‘ç½‘ç»œå¹¿æ’­è‡ªå·±çš„ä½ç½®ä¿¡æ¯å‘¢ï¼Ÿ ä¸ºå°äººæ·»åŠ network transformç»„ä»¶ å°±å¯ä»¥å‘ç½‘ç»œä¸­å‘é€è‡ªå·±çš„transformäº† å®Œæˆä¹‹åï¼Œç‚¹å‡»apply allå¯ä»¥åº”ç”¨åˆ°å¯¹åº”çš„é¢„åˆ¶ä»¶ ç°åœ¨è¿è¡Œå¹¶ä¸æ˜¯çœŸæ­£çš„ç½‘ç»œæ•°æ®ï¼Œè¿˜éœ€è¦ä¿®æ”¹äººç‰©è„šæœ¬ï¼Œè¿›å…¥è¿™ä¸ªè„šæœ¬ æ‰“å¼€å¯ä»¥çœ‹åˆ°MonoBehaviourï¼Œè¿™æ˜¯å•äººæ¸¸æˆçš„æ„æ€ éœ€è¦æ”¹æˆå¦‚ä¸‹ï¼šç½‘ç»œæ¸¸æˆ è¿™ä¸ªç±»å°±å¯ä»¥è°ƒç”¨ä¸€äº›è”ç½‘åŠŸèƒ½ æˆ‘ä»¬å¯¹å…¶ä¿®æ”¹ï¼Œç›®çš„æ˜¯ï¼šäººç‰©åŠ¨ä½œåªåœ¨æœ¬åœ°ï¼Œä½†æ˜¯ä¸€äº›ä½ç½®ç­‰ä¿¡æ¯éœ€è¦å‘ç½‘ç»œå¹¿æ’­ ä¿å­˜ï¼Œapply allåå°±å¯ä»¥åˆ é™¤åœºæ™¯ä¸­çš„å°äººäº†ï¼Œå’±ä»¬åªä¿ç•™é¢„åˆ¶ä»¶ï¼Œå°äººäº¤ç”±æœåŠ¡ç«¯ç”Ÿæˆ \\3. æœåŠ¡ç«¯ç”Ÿæˆé¢„åˆ¶ä»¶ åˆšåˆšè¯´äº†å°äººåº”è¯¥åœ¨æœåŠ¡ç«¯ç”Ÿæˆè€Œä¸æ˜¯ä¸€å¼€å§‹å°±åœ¨å®¢æˆ·ç«¯ä¸­ \\4. è¿è¡Œ ç°åœ¨ä¸€åˆ‡å·²ç»å°±ç»ªï¼Œé‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆæ¨¡æ‹Ÿè”æœºå‘¢ï¼Œå½“ç„¶å¯ä»¥æ‰¾ä¸¤å°åŒä¸€wifi/å±€åŸŸç½‘ä¸‹çš„ç”µè„‘ï¼Œä¹Ÿå¯ä»¥æœ¬æœºæ¨¡æ‹Ÿï¼Œæˆ‘ä»¬ç›´æ¥buildä¸€ä¸‹ä½œä¸ºä¸€ä¸ªï¼Œç„¶åç¼–è¾‘å™¨ä¸­è¿è¡Œä½œä¸ºå¦ä¸€ä¸ªï¼ˆå½“ç„¶ä½ ä¹Ÿå¯ä»¥buildåè¿è¡Œä¸¤ä¸ªï¼‰ã€‚æ€»ä¹‹æ— è®ºå¦‚ä½•ï¼Œæ‰“å¼€ä¸¤ä¸ªå°±è¡Œäº† éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»å…ˆå¯åŠ¨æœåŠ¡ç«¯ï¼Œå†å¯åŠ¨å®¢æˆ·ç«¯è¿æ¥å®ƒ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆåŠŸè”æœºäº†ï¼Œä½†æ˜¯åªæœ‰ä½ç½®è”æœºäº†ï¼ŒåŠ¨ä½œæ²¡æœ‰æ”¹å˜ï¼ˆAç«¯è‡ªå·±çš„å°äººä¼šåœ¨Bç«¯ç§»åŠ¨ï¼Œä½†ä¸ä¼šåœ¨Bç«¯åšåŠ¨ä½œï¼‰ unityä¸ºç½‘ç»œæ¸¸æˆä¼˜åŒ–çš„è§„åˆ™å°±æ˜¯é»˜è®¤ä¸ä¼ è¾“æ‰€æœ‰æ•°æ®ï¼Œè‡³äºä½ç½®ä¿¡æ¯æ˜¯å› ä¸ºæˆ‘ä»¬æ·»åŠ äº†network transformç»„ä»¶æ‰è¿›è¡Œä¼ è¾“ æ€ä¹ˆæ ·æ‰èƒ½è®©åŠ¨ä½œä¹Ÿä½œä¸ºç½‘ç»œæ•°æ®ä¼ è¾“å‘¢ï¼ŸåŠ¨ä½œå…¶å®å°±æ˜¯åŠ¨ç”»animationï¼Œåˆ°è¿™é‡Œå°±æ˜ç™½äº†ï¼šnetwork animationï¼Œæ˜¯çš„ è¸©å‘ï¼šé¢„åˆ¶ä»¶çš„ä¿®æ”¹ä½†æ˜¯è¦ä¿®æ”¹é¢„åˆ¶ä»¶çš„ä¸œè¥¿ï¼Œæœ€å¥½å…ˆå°†é¢„åˆ¶ä»¶æ‹–å…¥åœºæ™¯ä¸­å˜ä¸ºå®ä½“ï¼Œæ”¹åŠ¨å®Œå†apply allï¼Œå†åˆ é™¤åœºæ™¯ä¸­çš„GameObject å› ä¸ºå‚æ•°é€šå¸¸æ˜¯ä¼ å…¥GameObjectï¼Œå¦‚ä¸‹ å¦‚æœåªæœ‰Playeré¢„åˆ¶ä»¶æ²¡æœ‰ç”Ÿæˆä¸€ä¸ªPlayerçš„GameObjectå®ä½“ï¼Œé‚£ä¹ˆè¿™é‡Œä¼šå‘ç°æ²¡æœ‰Playerå¯é€‰ å°†ä¸Šè¿°æ‰€æœ‰ä¿®æ”¹å®Œæˆå†apply allï¼Œåˆ é™¤åœºæ™¯ä¸­çš„å®ä½“å³å¯ é‡æ–°buildï¼Œè”æœºï¼Œå‘ç°åŠ¨ä½œä¹Ÿæœ‰äº†ï¼Œå»¶è¿Ÿå–å†³äºç½‘ç»œï¼ï¼ï¼ï¼ 8.2 è”ç½‘å­å¼¹å‡†å¤‡å·¥ä½œï¼šå•æœºå­å¼¹å’Œå‘å°„ ä¸‹é¢åˆ¶ä½œå­å¼¹ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªçƒä½“ï¼Œå±æ€§å¦‚ä¸‹ å¹¶ä½œä¸ºé¢„åˆ¶ä»¶ï¼Œå°†åœºæ™¯ä¸­çš„å­å¼¹åˆ é™¤ ç¼–è¾‘playerè„šæœ¬ï¼Œä½¿å…¶å¯ä»¥å‘å°„å­å¼¹ 1234void Fire(){ GameObject bullet = Instantiate(bulletPrefab, transform.position + transform.up + transform.forward * 2, transform.rotation);} è¿™æ—¶å€™å·²ç»å®Œæˆäº†å•æœºå‘å°„å­å¼¹äº†ï¼Œå¯ä»¥è¿è¡Œæµ‹è¯• ä¸‹é¢ç»§ç»­åˆ¶ä½œè”ç½‘å­å¼¹ å°†å­å¼¹é¢„åˆ¶ä»¶æ‹–æ‹½åˆ°åœºæ™¯ç¼–è¾‘ï¼Œæ·»åŠ network identityå’Œnetwork transform ç”±äºæˆ‘ä»¬ä¸å¸Œæœ›å­å¼¹çš„ä½ç½®è‡ªåŠ¨ä¼ è¾“ï¼Œå› æ­¤å°†send rateè®¾ç½®ä¸º0 apply å°†å­å¼¹é¢„åˆ¶ä»¶çº³å…¥åˆ°ç½‘ç»œç®¡ç†å™¨çš„ç”Ÿæˆåˆ—è¡¨ç§ï¼Œä½¿å¾—å­å¼¹ç”±ç½‘ç»œç”Ÿæˆ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±ç½‘ç»œç”Ÿæˆçš„åˆ—è¡¨å¿…é¡»å¸¦æœ‰[Command]ï¼Œè€Œæœ‰Commandçš„å‡½æ•°å¿…é¡»æ˜¯ä»¥Cmdå¼€å¤´ æ–°å»ºè¡€é‡è„šæœ¬ æˆ‘ä»¬æƒ³åšä¸€ä¸ªåŠŸèƒ½æ˜¯å½“è¡€é‡ä¸º0æ—¶ï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªç©å®¶ï¼Œæˆ‘ä»¬çŸ¥é“ç°åœ¨Playeræ˜¯åœ¨æœåŠ¡ç«¯ç”Ÿæˆçš„ï¼Œä½†æ˜¯ç”Ÿæˆåæ˜¯äº¤ç»™å®¢æˆ·ç«¯æ¥å¯¹è¿™ä¸ªPlayeræ‰§è¡Œ unityæä¾›äº†ä¸€ä¸ªç”±æœåŠ¡ç«¯è°ƒç”¨ï¼Œå®¢æˆ·ç«¯æ‰§è¡Œçš„å‡½æ•° ä¸ºå­å¼¹å»ºç«‹è„šæœ¬ï¼Œç¢°æ’æ£€æµ‹å’Œè°ƒç”¨è¡€æ¡å‡å°‘ï¼ˆæ€»çš„æ¥è¯´å°±æ˜¯é€ æˆä¼¤å®³ï¼‰ 12345private void OnTriggerEnter(Collider other){ // é€šè¿‡SendMessageæ–¹æ³•å°è¯•è°ƒç”¨gameobjectåä¸ºTakeDamageçš„è„šæœ¬å‡½æ•°ï¼Œå¦‚æœè¯¥gameobjectæ²¡æœ‰è¿™ä¸ªå‡½æ•°åˆ™DontRequireReceiverä¸æ‰§è¡Œ other.gameObject.SendMessage(&quot;takeDamage&quot;, 60, SendMessageOptions.DontRequireReceiver);} è¿™é‡Œè¯´æ˜ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰ç”¨if(other.gameobject == â€œplayerâ€)ï¼Œå› ä¸ºè¿™ä¸ªç¢°æ’æ£€æµ‹å¯èƒ½å¯¹playeræœ‰æ•ˆï¼Œå¯¹enemeyä¹Ÿæœ‰æ•ˆï¼ŒåæœŸå¯èƒ½å¯¹å…¶ä»–çš„ç‰©ä½“ä¹Ÿæœ‰æ•ˆï¼Œé‚£ä¹ˆè¿™æ ·è®¾è®¡æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œunityæä¾›çš„è¿™ç§æ¶ˆæ¯æœºåˆ¶å°±å¯ä»¥è®©æ‰€æœ‰çš„ç‰©ä½“éƒ½æ¥æ”¶ï¼Œç„¶åå°è¯•è°ƒç”¨TakeDamageæ–¹æ³•ï¼Œå¦‚æœç‰©å“æ²¡æœ‰è¿™ä¸ªæ–¹æ³•å°±ä¸ä½œä¸ºï¼Œå¦‚æœç‰©å“æœ‰è¿™ä¸ªæ–¹æ³•å°±è°ƒç”¨ã€‚ å°†è„šæœ¬æ‹–æ‹½ç»™bulleté¢„åˆ¶ä»¶ï¼Œå°†healthè„šæœ¬æ‹–æ‹½ç»™playerï¼Œè¿è¡Œ 8.3 NPCNPCå°±æ˜¯å…±åŒçš„æ•Œäººï¼Œï¼ˆæˆ–è€…åœ¨æŸäº›æ¸¸æˆä¸­ä¸æ˜¯æ•Œäººï¼Œæ€»ä¹‹å…±åŒçš„å°±å¯¹äº†ï¼‰ é‡æ–°åˆ¶ä½œé¢„åˆ¶ä»¶ æ‹–æ‹½ä¸€ä¸ªå°äººåˆ°åœºæ™¯ä¸­ï¼Œé‡å‘½åä¸ºNPCï¼Œå¹¶ä¿®æ”¹æè´¨ä½¿å…¶çœ‹èµ·æ¥æœ‰åŒºåˆ«äºenemyå’Œplayer é‡æ–°åˆ¶ä½œé¢„åˆ¶ä»¶å¹¶å‘½åä¸ºNPCé¢„åˆ¶ä»¶ï¼Œå¹¶å°†åœºæ™¯ä¸­çš„å°äººåˆ é™¤ ä¸ºNPCæ·»åŠ ç½‘ç»œç®¡ç†å™¨ æ–°å»ºç©ºç‰©ä½“ï¼Œæ·»åŠ network identityç»„ä»¶ï¼Œå‹¾é€‰server onlyï¼ˆNPCåº”è¯¥è®¾ç½®ä¸ºä»…ç”±æœåŠ¡ç«¯ç”Ÿæˆï¼Œä¸å—å®¢æˆ·ç«¯æ§åˆ¶ï¼‰ åŠ¨æ€éšæœºç”Ÿæˆå¤šä¸ªNPCè„šæœ¬ 12345678910111213141516171819public class NPCSpawner : NetworkBehaviour{ public GameObject NPCPrefab; public int numOfNPC; // æœåŠ¡ç«¯å¯åŠ¨æ—¶çš„ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸè™šå‡½æ•° public override void OnStartServer() { for(int i = 0; i &lt; numOfNPC; i++) { // éšæœºä½ç½®å’Œæœå‘ Vector3 spawnPos = new Vector3(Random.Range(-5f, 5f), 0f, Random.Range(-5f, 5f)); Quaternion spawnRot = Quaternion.Euler(0, Random.Range(0, 180), 0f); // æ›´ä¹ æƒ¯ç”¨æ¬§æ‹‰è§’ GameObject NPC = Instantiate(NPCPrefab, spawnPos, spawnRot); NetworkServer.Spawn(NPC); } base.OnStartServer(); }} æ‹–æ‹½ç»™ç”Ÿæˆå™¨gameobject å¡«å…¥å‚æ•° æ³¨å†Œåˆ°ç½‘ç»œç”Ÿæˆå™¨åˆ—è¡¨ ä¸ºNPCæ·»åŠ è¡€æ¡æ•ˆæœ ç°åœ¨è¿è¡Œå¯ä»¥æ­£å¸¸ç”ŸæˆNPCä½†ä¸ä¼šæ”¶åˆ°ä¼¤å®³ï¼Œå› ä¸ºHealthæ˜¯å®¢æˆ·ç«¯çš„è„šæœ¬åŠŸèƒ½ ä¿®æ”¹å¦‚ä¸‹ è¿è¡Œï¼Œå¯ä»¥è”ç½‘æ‰“æ€ª 9. æ—¶é—´è½´9.2 åˆ›å»ºtime lineå…ˆæ¥çœ‹çœ‹å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ—¶é—´è½´åˆ›å»ºä¸€ä¸ªtimeline 9.1 å’ŒåŠ¨ç”»çš„å¼‚åŒtimelineæ˜¯å¼•æ“åæ¥æä¾›çš„ä¸€ä¸ªæ–°åŠŸèƒ½ã€‚ç›¸æ¯”äºanimationï¼Œtimelineå¯ä»¥è®¤ä¸ºæ˜¯æ§åˆ¶åœºæ™¯çš„æ•´ä½“åŠ¨ç”»ï¼Œæ—¢å¯ä»¥å¯¹å•ä¸ªç‰©ä½“ä¹Ÿå¯ä»¥æ§åˆ¶å¤šä¸ªç‰©ä½“ååŒè¿åŠ¨ï¼ŒåŒæ—¶å¯ä»¥æ’­æ”¾å£°éŸ³ï¼Œç²’å­æ•ˆæœï¼Œæ‘„åƒæœºè·Ÿè¸ªç­‰ç­‰ã€‚è€Œanimationåªå¯ä»¥æ§åˆ¶å•ä¸ªç‰©ä½“ï¼Œä¸”è¯¥ç‰©ä½“çš„å¤šä¸ªåŠ¨ç”»ç‰‡æ®µéœ€è¦animation controlleråè°ƒè¿›è¡Œå åŠ æˆ–è€…æ··åˆï¼Œå¤šä¸ªç‰©ä½“çš„åŠ¨ç”»éœ€è¦å„è‡ªçš„animationã€‚å¯ä»¥ç†è§£æˆtimelineæ˜¯æ¨ªå‘çš„ï¼Œä¸€ä¸ªobjectæ§åˆ¶å¤šä¸ªç‰©ä½“åŒæ—¶æ’­æ”¾åŠ¨ç”»ï¼Œanimationæ˜¯çºµå‘çš„ï¼Œæ¯ä¸ªç‰©ä½“èƒ½åœ¨è‡ªå·±çš„æ—¶åˆ»æ’­æ”¾è‡ªå·±çš„åŠ¨ç”»ã€‚ åŠ¨ç”»è½¨é“æ–°å»ºä¸€ä¸ªç©ºç‰©ä½“ï¼Œæ·»åŠ Playable Directorç»„ä»¶ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯window-&gt;timeline-&gt;createï¼ˆè¿™ç§æ–¹å¼å°±ç±»ä¼¼äºanimationï¼‰ å¦‚ä¸‹å›¾æ“ä½œï¼Œæ‹–æ‹½ä¸¤ä¸ªç‰©ä½“è¿›å…¥animationè½¨é“ï¼Œç”±Directorè¿™ä¸ªtimelineç‰©ä½“çš„timelineç»„ä»¶æ§åˆ¶ åœ¨å„è‡ªçš„è½¨é“ä¸Šåˆ›å»ºè‡ªå·±çš„animationï¼Œå¯ä»¥åƒanimationä¸€æ ·å½•åˆ¶ï¼Œä¹Ÿå¯ä»¥å¦‚ä¸‹ç›´æ¥æ¤å…¥é¢„åˆ¶åŠ¨ç”»ç‰‡æ®µ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå½•åˆ¶çš„è¯ï¼Œå¯¹åŠ¨ç”»ä¸­éœ€è¦å˜åŠ¨çš„transformå±æ€§è¿›è¡Œå³é”®add key å½•åˆ¶å®Œåï¼Œå¯ä»¥å¯¹æŸä¸€æ®µåŠ¨ç”»è¿›è¡Œå°è£…æˆä¸€ä¸ªå®Œæ•´çš„ç‰‡æ®µ é™¤äº†åŠ¨ç”»è½¨é“ï¼Œè¿˜å¯ä»¥æœ‰éŸ³é¢‘è½¨é“å’Œæ§åˆ¶è½¨é“ éŸ³é¢‘è½¨é“audio trackå’ŒåŠ¨ç”»ç±»ä¼¼ï¼Œåˆ›å»ºéŸ³æºï¼Œåˆ›å»ºè½¨é“ï¼Œæ·»åŠ å£°éŸ³ç‰‡æ®µï¼Œå¯ä»¥èåˆ æ§åˆ¶è½¨é“ control trackå¯ä»¥åŠ¨æ€ç”Ÿæˆä¸€ä¸ªç‰©ä½“ è‡ªå®šä¹‰è½¨é“Playeable trackå¯ä»¥æ¥æ”¶è‡ªå®šä¹‰è„šæœ¬ï¼Œè„šæœ¬ç±»éœ€è¦é›†æˆPlayableAsset ä¸‹é¢å®ç°ä¸€ä¸ªUIç©ºé—´Textæ˜¾ç¤ºå½“å‰è½¨é“çš„æ’­æ”¾çŠ¶æ€ 123456789101112131415161718192021222324252627282930313233using System.Collections;using System.Collections.Generic;using UnityEngine;using UnityEngine.Playables;using UnityEngine.UI;public class MyplayableAsset : PlayableAsset { public ExposedReference&lt;Text&gt; myText; public override Playable CreatePlayable(PlayableGraph graph, GameObject owner) { var playable = ScriptPlayable&lt;MyplayableBehaviour&gt;.Create(graph); playable.GetBehaviour().status = myText.Resolve(graph.GetResolver()); return playable; }}public class MyplayableBehaviour:PlayableBehaviour{ public Text status; public override void OnBehaviourPlay(Playable playable, FrameData info) { if(status != null) { status.text = &quot;Playing&quot;; } } public override void OnBehaviourPause(Playable playable, FrameData info) { if(status != null) { status.text = &quot;End playing&quot;; } }} ç®€å•æ¥è¯´ï¼Œtimelineç»‘å®šäº†Textç±»å‹çš„æ§ä»¶ï¼Œèƒ½å¤Ÿå…è®¸è¿™ä¸ªæ§ä»¶åœ¨æŸæ®µæ—¶é—´ç”Ÿæ•ˆï¼Œè‡³äºä»£ç å¯èƒ½æ˜¯å›ºå®šå†™æ³•ï¼Œæ—¥åå†æ¢ç©¶ åˆ›å»ºUIç©ºé—´Textå¹¶æ‹–å…¥ï¼Œè¿è¡Œ 9.3 è§’è‰²åŠ¨ç”»æ‹–æ‹½ä¸€ä¸ªç¬¬ä¸‰äººç§°å°äººé¢„å®ç°ï¼Œå–æ¶ˆè„šæœ¬å’Œanimator controllerï¼Œè¿è¡Œï¼Œæ­¤æ—¶å°äººç›¸å½“äºé™æ€æ¨¡å‹ï¼Œæ·»åŠ timelineï¼ŒåŠ¨ç”»ä¾æ¬¡ä¸ºidle-&gt;walk-&gt;runï¼Œè¿è¡Œï¼Œæ­¤æ—¶å‘ç°æœ‰ä¸¤ä¸ªé—®é¢˜ 1.è§’è‰²ä¸èƒ½æ‰å¤´ï¼Œå³ä½¿è°ƒæ•´åœºæ™¯ä¸­çš„å°äººrotYä¸º180ï¼Œä½†æ˜¯è¿è¡Œçš„æ—¶å€™è¿˜æ˜¯ä¼šèƒŒå¯¹ç›¸æœºï¼Œè¿™æ˜¯å› ä¸ºè§’è‰²çš„transformå·²ç»äº¤ç»™ç›®å‰å‡ºäºæ¿€æ´»çŠ¶æ€çš„timelineæ§åˆ¶ï¼Œéœ€è¦åœ¨è¿™ä¸ªåœ°æ–¹è°ƒæ•´ 2.åŠ¨ç”»è¢«é‡ç½®ï¼Œå°¤å…¶æ˜¯walk-&gt;runï¼Œwalkå·²ç»èµ°äº†ä¸€æ®µè·ç¦»ï¼Œä½†æ˜¯runçš„æ—¶å€™ä¼šè‡ªåŠ¨å…ˆå›åˆ°åŸç‚¹ï¼Œè€Œä¸æ˜¯æ¥ç€walkçš„ä½ç½®è·‘ã€‚å³å‡»runç‰‡æ®µé€‰ä¸­å¦‚ä¸‹é€‰é¡¹ 3.åŠ¨ç”»è¿‡æ¸¡å¤ªåƒµç¡¬ï¼Œå›é¡¾ä¹‹å‰animationçš„èåˆï¼Œtimelineä¹Ÿæä¾›äº†éå¸¸æ–¹ä¾¿çš„è¿‡æ¸¡åŠŸèƒ½ã€‚åªéœ€è¦å°†ä¸¤ä¸ªåŠ¨ç”»ç‰‡æ®µäº¤å‰å³å¯è‡ªåŠ¨è¿‡æ¸¡ã€‚ ç»†èŠ‚ï¼šç”±äºåŠ¨ç”»ç‰‡æ®µçš„ç‹¬ç«‹æ€§ï¼Œç”±äºé€Ÿåº¦ä¸åŒæˆ–è€…å…¶ä»–é—®é¢˜ï¼Œå¯¼è‡´è‡ªåŠ¨èåˆä¸­ä¼šå‡ºç°æ¯”å¦‚walk-&gt;runæ—¶å‡ºç°æ»‘æ­¥çš„ç°è±¡ï¼Œè‡ªå·±å¯¹ä½ç½®åšä¸€äº›å¾®è°ƒå³å¯ å¯ä»¥åƒanimationä¸€æ ·è¿›è¡ŒåŠ¨ç”»çš„å åŠ ï¼Œæ¯”å¦‚åœ¨åŠ¨ç”»1çš„æ—¶å€™æ·»åŠ è½¬èº«ï¼Œé®ç½©ï¼ˆèº«ä½“çš„æŸä¸ªéƒ¨ä½åšä¸ä¸€æ ·çš„åŠ¨ç”»ï¼‰ å¦‚æœåŠ¨ä½œéƒ¨ä½å†²çªåˆæ²¡æœ‰é®ç½©çš„è¯ï¼Œåé¢çš„è½¨é“ä¼šè¦†ç›–å‰é¢çš„è½¨é“ 9.4 è„šæœ¬æ§åˆ¶é€šå¸¸timelineéƒ½æ˜¯è¾¾åˆ°æŸä¸ªåœºæ™¯è§¦å‘ï¼Œä¸‹é¢æˆ‘ä»¬æ¨¡æ‹Ÿè„šæœ¬æ§åˆ¶timelineçš„è§¦å‘ï¼Œæ–°å»ºç©ºç‰©ä½“å¹¶ä¸ºå…¶åˆ›å»ºè„šæœ¬å¦‚ä¸‹ å…³äºç¬¬8è¡Œï¼Œå…¶å®å†™publicä¹Ÿè¡Œï¼Œåªæ˜¯æä¸€ä¸‹æœ‰è¿™ä¹ˆä¸€ç§å†™æ³•ï¼Œæ—¢æ˜¯privateåˆå¯ä»¥åœ¨unityç¼–è¾‘å™¨ä¸­æš´éœ²å‚æ•°ï¼Œåƒbuttonä¸€æ ·ä¼ å…¥å‚æ•° è¿è¡Œï¼Œä¾æ¬¡æŒ‰ä¸‹QE 9.5 Cinemachineè½¬åœºåŠ¨ç”»ä¸­ç»å¸¸è§åˆ°çš„å¤šæ‘„åƒæœºåŠ¨ç”»ã€‚æ¯”å¦‚åœ¨æ¸¸æˆå¼€å§‹å‰ï¼Œç›¸æœºå…ˆå±•ç¤ºæ•Œäººå’Œä¸€äº›ç‰¹æ®Šé“å…·çš„ä½ç½®ï¼Œéšåé•œå¤´æ‰ç»™åˆ°ä¸»è§’ã€‚å…¶å®å°±æ˜¯Cinemachineåœ¨å¤šä¸ªæ‘„åƒæœºä¹‹é—´çš„è½¬æ¢ã€‚ timelineå¯¹å¤šæ‘„åƒæœºæœ‰å¾ˆä¸“ä¸šçš„åŠ¨ç”»è°ƒæ§æ”¯æŒ ç¬¬ä¸€æ¬¡ä½¿ç”¨éœ€è¦å…ˆå®‰è£…ä¸€ä¸‹ æ–°å»ºcinemachine track æ·»åŠ åå‘ç°å¤šäº†ä¸€ä¸ªtrackï¼Œæ–°å»ºå®ƒ cinemachineå…¶å®æ˜¯é‡‡ç”¨äº†è™šæ‹Ÿæ‘„åƒæœºæ¥æ¨¡æ‹Ÿå¤šæ‘„åƒæœºæ•ˆæœ ä¸ºä¸»æ‘„åƒæœºæ·»åŠ cinemachint brainç»„ä»¶ \\3. æ–°å»ºè™šæ‹Ÿæ‘„åƒæœº å¦‚ä¸‹ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç®€å•çš„è™šæ‹Ÿæ‘„åƒæœºï¼Œunityä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†è®¸å¤šå…·å¤‡ä¸€å®šåŠŸèƒ½çš„æ‘„åƒæœºï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªfreelookï¼šè¿™ä¸ªè™šæ‹Ÿæ‘„åƒæœºå…è®¸æˆ‘ä»¬è§’åº¦è‡ªç”±çš„è§‚å¯Ÿä¸€äº›ç‰©ä½“ã€‚ å†å»ºç«‹ä¸€ä¸ªå¸¦è½¨é“çš„æ¨æ‹‰æ‘„åƒæœºï¼šè¿™ä¸ªè™šæ‹Ÿæ‘„åƒæœºå¯ä»¥å¯¹ä¸€ä¸ªç‰©ä½“å‰åæ¨æ‹‰è¾¾åˆ°è¿œè¿‘å˜åŒ–è§‚å¯Ÿçš„æ•ˆæœ è°ƒæ•´è™šæ‹Ÿæ‘„åƒæœºè¾¾åˆ°é¢„æœŸæ•ˆæœ å’±ä»¬ç›®çš„æ˜¯è®©æ¨æ‹‰å¸¦è½¨é“æ‘„åƒæœºæ²¿ç€è®¾å®šçš„è½¨é“ç§»åŠ¨ï¼Œå¹¶æ—¶åˆ»æ³¨é‡Šçº¢è‰²ç‰©ä½“ï¼Œè‡ªç”±æ‘„åƒæœºæ³¨é‡Šè“è‰²ç‰©ä½“ã€‚å¹¶åœ¨timelineä¸­è®¾ç½®ä¸ºå…ˆè§‚å¯Ÿè“ç‰©ä½“ï¼Œå†è§‚å¯Ÿçº¢ç‰©ä½“çš„æ•ˆæœ æ¨æ‹‰æ‘„åƒæœºçš„è·¯å¾„è®¾ç½®å¦‚ä¸‹ æ¨æ‹‰æ‘„åƒæœºå‚æ•°è®¾ç½®å¦‚ä¸‹ï¼šå…¶ä¸­Path offsetè®¾ç½®æˆ0è¡¨ç¤ºæ‘„åƒæœºä¸¥æ ¼æŒ‰è½¨é“ç§»åŠ¨ è®¾ç½®å®Œæˆåï¼Œæ¨æ‹‰æ‘„åƒæœºå°±å¯ä»¥åœ¨è½¨é“ä¸Šæ‰¾åˆ°æœ€è¿‘çš„ç‚¹å»è§‚å¯Ÿçº¢è‰²ç‰©ä½“äº† å¦å¤–ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿çœ‹åˆ°æ•ˆæœï¼Œè¦è®©çº¢è“ç‰©ä½“åœ¨åŠ¨ç”»å¼€å§‹æ—¶è‡ªåŠ¨è¿åŠ¨ï¼ˆä¹‹å‰è®¾ç½®äº†è¦æŒ‰ä¸‹QEï¼‰ è°ƒé«˜main cameraçš„ä¼˜å…ˆçº§ è‡ªå·±å¯ä»¥å¯¹æ¯”è§‚å¯Ÿä¸€ä¸‹ï¼Œæ˜¯è¿™æ ·çš„ï¼Œcamerachineæ‰€è°“çš„è™šæ‹Ÿæ‘„åƒæœºå¹¶ä¸è®°å½•ç”»é¢ï¼Œè€Œæ˜¯å°†è™šæ‹Ÿæ‘„åƒæœºçœ‹åˆ°çš„ç”»é¢ä¼ è¾“ç»™cameraï¼ˆç±»ä¼¼äºæ— äººæœºï¼Œæ— äººæœºåœ¨é£ï¼Œæ‹åˆ°çš„ç”»é¢æ˜¯å‘é€åˆ°æ“æ§è€…çš„å±å¹•ä¸Šï¼Œæ— äººæœºè‡ªå·±å¹¶æ²¡æœ‰ä¿å­˜ç…§ç‰‡çš„åŠŸèƒ½ï¼‰ã€‚ å¦‚æœä¸è°ƒé«˜main cameraçš„ä¼˜å…ˆçº§ï¼Œé‚£ä¹ˆä¼šæ˜¾ç¤ºè™šæ‹Ÿæ‘„åƒæœºå¼€å§‹çš„ä½ç½®è§‚å¯Ÿçš„ç”»é¢ï¼Œå› ä¸ºè™šæ‹Ÿæ‘„åƒæœºåªæœ‰ç¬¬ä¸€å¸§çš„ç”»é¢ï¼Œåé¢çš„ç”»é¢ä¸è®°å½•ä¸æ›´æ–°ï¼Œè€Œæ˜¯å‘é€ç»™äº†main cameraï¼Œå› æ­¤æˆ‘ä»¬çœ‹åˆ°çš„å°±æ˜¯è™šæ‹Ÿæ‘„åƒæœºä¼¼ä¹æ²¡åŠ¨ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä¸€ç›´çœ‹main cameraï¼Œè¦å°†main cameraçš„ä¼˜å…ˆçº§è°ƒé«˜ï¼Œè¦†ç›–å…¶ä»–æ‘„åƒæœºã€‚ timelineæ§åˆ¶ä¸¤ä¸ªcamerachine è¿è¡Œè§‚çœ‹æ•ˆæœ 10. 2Dæ¸¸æˆunityæ–°å»ºå·¥ç¨‹çš„æ—¶å€™ï¼Œå¦‚æœæƒ³è¦åˆ›å»ºäºŒç»´å·¥ç¨‹ï¼Œéœ€è¦åœ¨åˆ›å»ºæ—¶ç‚¹å‡»2D é•¿è¿™æ · å¯ä»¥çœ‹è§å·¥å…·æ æœ‰ä¸ª2Dè§†å›¾ï¼Œå…¶å®åªè¦æ¢æˆ3Då°±å˜æˆ3Då·¥ç¨‹äº†ï¼Œæ‰€è°“2Dæ¸¸æˆä¸è¿‡æ˜¯æŠŠzè½´å»æ‰ 10.1 ç²¾çµ2Dæ¸¸æˆä¸­çš„çº¹ç†é»˜è®¤æ˜¯ç²¾çµç±»å‹ï¼Œ2Dæ¸¸æˆå°±æ˜¯ç”±ä¸€ä¸ªä¸ªçš„å›¾ç‰‡ï¼ˆæˆ–è€…è¯´çº¹ç†æˆ–è€…è¯´ç²¾çµï¼‰+ç§»åŠ¨+è„šæœ¬åˆ¶ä½œçš„ å°†ä¸€å¼ å›¾ç‰‡æ‹–æ‹½åˆ°unityï¼Œå¯ä»¥çœ‹åˆ°é»˜è®¤æ˜¯ç²¾çµç±»å‹ å¦‚æœå›¾ç‰‡æœ¬èº«å°±å…·æœ‰alphaé€æ˜é€šé“ï¼Œé‚£ä¹ˆå›¾ç‰‡å¯èƒ½ä¼šä¸æ˜¾ç¤ºï¼ˆé€æ˜å˜›ï¼‰ï¼Œå¯ä»¥å¦‚ä¸Šå›¾å»é™¤é€æ˜é€šé“ï¼Œè®°å¾—ç‚¹å‡»apply æ‹–æ‹½ä¸¤ä¸ªç‰©ä½“è¿›å…¥åœºæ™¯ï¼Œå‘ç°è¢«è¦†ç›–ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒæ•´sorting layerï¼Œä¸‹é¢çš„order in layerè¡¨ç¤ºå³ä½¿æ˜¯åŒä¸€å±‚ä¹Ÿæœ‰é®æŒ¡é¡ºåº ç‚¹å‡»ä¸‰è§’å½¢ï¼Œç‚¹å‡»add layerï¼Œå¹¶æ·»åŠ è‡ªå®šä¹‰å±‚ï¼Œä¸‹é¢çš„ä¼˜å…ˆçº§é«˜äºä¸Šé¢ ç¼–è¾‘å¥½åï¼Œå°†åœºæ™¯ä¸­çš„ç‰©ä½“åº”ç”¨åˆ°å„è‡ªçš„å±‚ï¼Œå¦å…‹å°±ä¸ä¼šè¢«èƒŒæ™¯é®ä½äº† å½“æˆ‘ä»¬æ‹–æ‹½å­å¼¹åï¼Œå‘ç°æ˜¯ä¸€è¿ä¸²çš„ ä½†æˆ‘ä»¬çŸ¥é“è¿™å…¶å®æ˜¯å¤šå¸§è¿ç»­æ’­æ”¾çš„åŠ¨å›¾ï¼Œunityç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªéå¸¸ç®€ä¾¿çš„åˆ‡å‰²æ–¹å¼ å…¶ä¸­sliceæä¾›äº†å¾ˆå¤šåˆ‡å‰²æ¨¡å¼ automaticæ˜¯è‡ªåŠ¨åˆ‡å‰²ï¼Œé‡‡ç”¨äº†æœ€å°åŒ…å›´ç›’ç®—æ³• sizeæ˜¯æŒ‡å®šé•¿å’Œå®½çš„åƒç´  countæ˜¯æŒ‡å®šå‡ è¡Œå‡ åˆ— å®Œæˆåè®°å¾—ç‚¹å‡»apply æ­¤æ—¶å†æ‹–æ‹½åˆ°åœºæ™¯ï¼Œä¼šè‡ªåŠ¨æç¤ºåˆ›å»ºanimation åˆ›å»ºå®ŒåŠ¨ç”»åè¿è¡Œå³å¯çœ‹åˆ°æ•ˆæœ å¤šä¸ªç‰©ä½“æ‰¹é‡è°ƒæ•´å¤§å° åˆ›å»ºå‘å°„å­å¼¹è„šæœ¬ 12345678910111213141516171819202122232425262728293031using System.Collections;using System.Collections.Generic;using UnityEngine;[RequireComponent(typeof(Rigidbody2D))]public class Bullet : MonoBehaviour{ [SerializeField] private float speed = 2.0f; private Rigidbody2D body; // Start is called before the first frame update void Start() { body = GetComponent&lt;Rigidbody2D&gt;(); } // Update is called once per frame void Update() { body.MovePosition(transform.position - transform.right * speed * Time.deltaTime); } private void OnCollisionEnter2D(Collision2D collision) { if(collision.gameObject .tag == &quot;Player&quot;) { GameObject.Destroy(collision.gameObject); GameObject.Destroy(gameObject); } }} æŒ‚æ¥åˆ°å­å¼¹ï¼Œå­å¼¹ä¼šè‡ªåŠ¨æ·»åŠ rigid bodyç»„ä»¶ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªbox colliderç»„ä»¶ç”¨äºç¢°æ’æ£€æµ‹ï¼ŒåŒæ—¶è¿˜éœ€è¦æŠŠé‡åŠ›å–æ¶ˆ æ¥ä¸‹æ¥å®Œæˆå¦å…‹ç”Ÿæˆå­å¼¹ï¼Œå› æ­¤éœ€è¦åˆ¶ä½œé¢„åˆ¶ä»¶ï¼Œå¹¶resetä½ç½®ï¼ˆåˆ°æ—¶å€™ä½œä¸ºå¦å…‹çš„å­ç‰©ä½“ï¼‰ æ–°å»ºå‘å°„è„šæœ¬ 1234567891011121314151617181920212223using System.Collections;using System.Collections.Generic;using UnityEngine;public class Spawner : MonoBehaviour{ [SerializeField] private float shootTimer = 3f; // å†·å´æ—¶é—´ float timer = 0f; // å·²ç»å†·å´æ—¶é—´ [SerializeField] GameObject bullet; // å®ä¾‹åŒ–çš„å­å¼¹ // Update is called once per frame void Update() { if(timer &gt; shootTimer) { Instantiate(bullet, transform); // ä»transformä½ç½®ç”Ÿæˆå­å¼¹ timer = 0f; } timer += Time.deltaTime; }} æŒ‚æ¥ç»™Spawnerå‘å°„å™¨ï¼Œå¹¶å°†å­å¼¹é¢„åˆ¶ä»¶å‚æ•°æ‹–æ‹½è¿›å»ï¼Œè¿è¡Œ é¢œè‰²ï¼š å¯ä»¥è°ƒæ•´colorå±æ€§ å…‰ç…§ï¼š 2Dæ¸¸æˆé»˜è®¤æ²¡æœ‰å…‰ç…§ï¼Œå› ä¸ºæè´¨é»˜è®¤ä¸ä¼šå—åˆ°å…‰ç…§æ•ˆæœï¼Œå¯ä»¥æ‰‹åŠ¨æ·»åŠ å…‰æºï¼Œå¹¶æ·»åŠ æè´¨ï¼Œé€‰æ‹©æ¼«åå°„ å°†æè´¨æ‹–æ‹½ç»™2Dç‰©ä½“ï¼Œå°±å¯ä»¥çœ‹åˆ°å…‰ç…§æ•ˆæœï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ³¨æ„å…‰æºæ˜¯å¦ç¦»å¾—å¤ªè¿œï¼ˆè°ƒæ•´zå€¼ï¼‰å’Œè§’åº¦ï¼ˆè¿™ä¸ªè¦æ³¨æ„ï¼Œæ¯”å¦‚ç‚¹å…‰æºé»˜è®¤rotXæ˜¯90ï¼Œå»ºè®®åˆ‡æ¢æˆ3Dè§†å›¾æ¥è°ƒæ•´ï¼‰ 10.2 ç“¦ç‰‡åœ°å›¾tilemapï¼Œæ˜¯ä¸ºäº†2Dæ¸¸æˆç»å¸¸éœ€è¦çš„ä¸€ç§æ ¼å­æ’åˆ—å¸ƒå±€ ä½†æ˜¯è¿™æ ·å¾ˆè´¹æ—¶é—´ï¼Œäºæ˜¯æœ‰äº†ç“¦ç‰‡åœ°å›¾åŠŸèƒ½ æ–°å»ºç“¦ç‰‡åœ°å›¾tilemap é™¤äº†tilemapï¼Œä¸‹é¢è¿˜æœ‰å…­è¾¹å½¢ç­‰ è®°å¾—å°†è¿™ä¸ªtilemapå›¾å±‚è¦†ç›–åœ¨backgroundä¹‹ä¸Š è°ƒå‡ºç“¦ç‰‡è°ƒè‰²æ¿tile palette æ‹–æ‹½åˆ°è°ƒè‰²æ¿ ç”¨ç¬”åˆ·åˆ·å‡ºè¿ç»­çš„æ•ˆæœ ç‚¹å‡»editå¯ä»¥è°ƒæ•´è°ƒè‰²æ¿ä¸Šçš„ç“¦ç‰‡æ•ˆæœï¼Œå¯ä»¥ç”¨å¤šä¸ªç‰©ä½“ç»„è£…æˆä¸€ä¸ªç“¦ç‰‡ï¼Œé¼ æ ‡æ¡†é€‰åä½œä¸ºä¸€ä¸ªæ•´ä½“å†ä½¿ç”¨ç¬”åˆ· 10.2.1 ç¢°æ’ä½“ å¯ä»¥ä¸ºtilemapä¸­çš„æ¯ä¸€ç‰‡ç“¦ç‰‡é‡Œçš„æ¯ä¸€ä¸ªæ–¹å—éƒ½æ·»åŠ ç¢°æ’ä½“ è¿™æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦è¿›è¡Œä¸€äº›ç¢°æ’ä½“çš„èåˆ æ·»åŠ è¿™ä¸ªä¼šè‡ªåŠ¨æ·»åŠ rigid bodyï¼Œå¦‚æœæ˜¯åœ°å½¢çš„è¯ï¼Œä¸å—é‡åŠ›å½±å“ï¼Œæœ€å¥½ç›´æ¥è®¾ç½®æˆé™æ€ tilemapå…è®¸ä½¿ç”¨ç¢°æ’ç»„åˆ 10.3 è§’è‰²æ§åˆ¶ä¸‹é¢æˆ‘ä»¬å­¦ä¹ 2Dä¸‹çš„æ¸¸æˆè§’è‰²æ§åˆ¶ å…ˆæ·»åŠ èµ„æºåŒ…ï¼Œåªéœ€è¦æ·»åŠ è¿™å‡ å¼ å›¾ç‰‡å°±è¡Œ å¦‚æœæ‰“å¼€sprite editerå°±å¯ä»¥å‘ç°éƒ½åˆ‡å‰²å¥½äº† æ‹–æ‹½idleåŠ¨ç”»ï¼ˆä¸€å®šè¦è®°å¾—æ˜¯æ‹–æ‹½åˆ°åœºæ™¯è€Œä¸èƒ½æ˜¯Hierarchyï¼‰ï¼Œèµ·åPlayerä½œä¸ºè§’è‰²ï¼Œä¿®æ”¹ä¸ºactorå±‚ï¼Œè®¾ç½®tagä¸ºPlayerï¼Œæ·»åŠ capsule collider 2Då¹¶è°ƒæ•´å¤§å°åˆ°åŒ…è£¹å°äººèŒƒå›´ï¼Œæ·»åŠ rigid body2Dç»„ä»¶ï¼Œä¸å¸Œæœ›æ—‹è½¬æ‰€ä»¥é”å®šæ—‹è½¬è½´ åŠ¨ç”»ä¿®æ”¹ ä¸å¤šè¯´äº†ï¼Œç¼–è¾‘ideçš„çŠ¶æ€æœºï¼Œæ·»åŠ walk run jump å¹¶åˆ›å»ºä¸‰ä¸ªå‚æ•°ï¼Œæ·»åŠ è½¬æ¢æ¡ä»¶ speedï¼šé€Ÿåº¦ï¼ŒGroundï¼šæ˜¯å¦è§¦ç¢°åœ°é¢ï¼ŒvSpeedï¼šçºµå‘è·³è·ƒé€Ÿåº¦ idel-&gt;walkï¼šé€Ÿåº¦å¤§äº0.01 åä¹‹äº¦ç„¶ walk-&gt;runï¼šé€Ÿåº¦å¤§äº0.1ï¼Œåä¹‹äº¦ç„¶ æœ€åçŠ¶æ€æœºå¦‚ä¸‹å›¾ æ·»åŠ å¯¹åº”çš„Motionï¼ˆå¦‚æœæ²¡æœ‰çš„è¯å°±å…ˆå°†å‡ ä¸ªpngæ‹‰å…¥åœºæ™¯ï¼Œå› ä¸ºè¿™ä¸ªä¸æ˜¯ä»èµ„æºåŒ…å¼„å‡ºæ¥çš„åŠ¨ç”»ï¼Œè€Œæ˜¯ä»pngé‡Œé¢é€šè¿‡sprite editoråˆ‡å‰²å‡ºæ¥çš„ï¼‰ åˆ›å»ºplayerè„šæœ¬ è¿™ä¸ªè„šæœ¬æ¯”è¾ƒå¤æ‚ï¼Œä½†ç›®çš„åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯é€šè¿‡æŒ‰é”®æ”¹å˜animatoråŠ¨ç”»ä¸­è¿™å‡ ä¸ªå‚æ•°ï¼Œå‰©ä¸‹çš„ä¸ç”¨ç†ä¼šï¼ŒåŠ¨ç”»éƒ½åšå¥½äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990using System.Collections;using System.Collections.Generic;using UnityEngine;public class Character : MonoBehaviour{ [SerializeField] float maxSpeed = 10f; [SerializeField] float jumpForce = 400f; [SerializeField] LayerMask whatIsGround; // å“ªäº›å±‚éœ€è¦åœ°é¢æ£€æµ‹ Transform groundCheck; // æˆ‘ä»¬ä¼šåœ¨å°äººè„šçš„ä½ç½®å»ºç«‹ä¸€ä¸ªç©ºå­ç‰©ä½“ç”¨äºç¢°æ’æ£€æµ‹ float groundRadius = 0.5f; // è·ç¦»åœ°é¢å¤šå°‘åˆ¤æ–­ä¸ºç€åœ° bool grounded = false; Animator anim; Rigidbody2D body; bool facingRight; // é¢æœå³è¾¹ bool jump = true; // æ˜¯å¦åœ¨è·³è·ƒ private void Awake() { // è¿™é‡Œæ²¡æœ‰ç”¨startè€Œæ˜¯ç”¨awake groundCheck = transform.Find(&quot;GroundCheck&quot;); anim = GetComponent&lt;Animator&gt;(); body = GetComponent&lt;Rigidbody2D&gt;(); } private void FixedUpdate() { grounded = false; // OverlapCircleAllçš„ä½œç”¨æ˜¯ä»æŸä¸ªç‚¹å¼€å§‹ï¼Œåœ¨å¤šå¤§èŒƒå›´å†…ï¼ˆäºŒç»´å¹³é¢çš„åœˆï¼‰ï¼Œåœ¨æŸä¸ªå±‚æ˜¯å¦æœ‰ç›¸äº¤ç‰©ä½“ Collider2D[] colliders = Physics2D.OverlapCircleAll(groundCheck.position, groundRadius, whatIsGround); foreach (Collider2D collider in colliders) { if (collider.gameObject != gameObject) // å…»æˆä¹ æƒ¯ï¼Œç¢°æ’ä½“ä¸æ˜¯è‡ªå·±ï¼Œå…¶å®è¿™é‡Œè¿˜è¦æ£€æµ‹æ˜¯å¦æ˜¯æ•Œäººæˆ–è€…åˆ«çš„ä»€ä¹ˆ grounded = true; // æ€»ä¹‹è¿™é‡Œå°±å…ˆç®€å•çš„è®¤ä¸ºç¢°æ’äº†ä¸”ä¸æ˜¯è‡ªå·±å°±è¯´æ˜æ˜¯åœ°é¢ } anim.SetBool(&quot;Ground&quot;, grounded); anim.SetFloat(&quot;vSpeed&quot;, body.velocity.y); // è¿™ä¸ªå¯ä»¥è·å–é€Ÿåº¦ float h = Input.GetAxis(&quot;Horizontal&quot;); // è¿™ä¸ªå¯ä»¥è·å–ç”¨æˆ·æ˜¯æŒ‰ä¸‹â†ï¼ˆ-1ï¼‰è¿˜æ˜¯â†’ï¼ˆ1ï¼‰ if (!jump) // è¿™æ ·åšå¯ä»¥ç¦æ­¢è¿è·³ { jump = Input.GetButtonDown(&quot;Jump&quot;); // è¿™ä¸ªå¯ä»¥è·å–ç”¨æˆ·æ˜¯å¦æŒ‰ä¸‹â†‘ } Move(h, jump); // ç§»åŠ¨å‡½æ•°ï¼Œåœ¨ä¸‹é¢ç»™å‡ºå®ç° jump = false; } /** * ç§»åŠ¨å‡½æ•°ï¼Œåˆ¤æ–­moveæ˜¯å¾€å·¦è¿˜æ˜¯å¾€å³ï¼Œæœ‰æ²¡æœ‰å‘ç”Ÿè·³è·ƒ */ void Move(float move, bool jumping) { if (grounded) // å¾ˆç»†èŠ‚ï¼Œç€åœ°äº†æ‰åˆ¤æ–­é€Ÿåº¦ï¼Œå¦åˆ™åœ¨ç©ºä¸­é€Ÿåº¦å¤Ÿäº†å°±è·‘èµ·æ¥äº†ï¼Œæ‰“æ–­äº†è·³è·ƒåŠ¨ä½œ { anim.SetFloat(&quot;Speed&quot;, Mathf.Abs(move)); body.velocity = new Vector2(move * maxSpeed, body.velocity.y); // æ–°é€Ÿåº¦ // æ”¹å˜æœå‘ if (move &gt; 0 &amp;&amp; !facingRight) { Flip(); // æ‰å¤´æ–¹æ³• } else if (move &lt; 0 &amp;&amp; facingRight) { Flip(); } // è·³è·ƒåˆ¤æ–­ if (jumping &amp;&amp; anim.GetBool(&quot;Ground&quot;)) { grounded = false; anim.SetBool(&quot;Ground&quot;, false); body.AddForce(new Vector2(0f, jumpForce)); } } } /** * æ‰å¤´æ–¹æ³• */ void Flip() { facingRight = !facingRight; Vector3 scale = transform.localScale; scale.x *= -1; transform.localScale = scale; }} è„šæœ¬æŒ‚æ¥ç»™å°äºº è¿™é‡Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å…ˆé€‰Everythingï¼Œå¦‚æœæ¸¸æˆåšçš„ç»†çš„è¯å¯ä»¥æ˜¯åœ°é¢Terrainå’Œä¸€äº›è¢«è®¤ä¸ºåœ°é¢çš„ä¸€äº›å±‚ æ·»åŠ è„šæœ¬ä¸­æåˆ°çš„ç”¨äºç¢°æ’æ£€æµ‹çš„å­ç‰©ä½“ è¿è¡Œå‘ç°æœ‰å»¶è¿Ÿï¼Œåº”è¯¥æŠŠè½¬æ¢è°ƒæˆç«‹å³è½¬æ¢ ç›¸æœºè·Ÿéš è¿™ä¸ªæ¯”è¾ƒç®€å•çš„ä¸€ç§åšæ³•æ˜¯è®©main cameraä½œä¸ºPlayerçš„å­ç‰©ä½“ å½“ç„¶è¿™é‡Œç”±äºå­å¼¹ç¢°æ’åé”€æ¯PlayeråŠå…¶å­ç‰©ä½“å¯¼è‡´æ’åˆ°å­å¼¹åæŠ¥å¦‚ä¸‹é”™è¯¯ï¼Œè¿™é‡Œå…ˆä¸ç®¡ä»–ï¼ˆè§£å†³æ–¹æ³•æ˜¯è¦ä¹ˆç¢°æ’æ—¶åˆ¤æ–­ä¸é”€æ¯ç›¸æœºï¼Œè¦ä¹ˆæ‘„åƒæœºçš„ç§»åŠ¨ä¸é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œè€Œæ˜¯è„šæœ¬ç§»åŠ¨ç›¸æœºçš„transformçš„positionï¼‰ å•æ–¹å‘ç¢°æ’æ£€æµ‹ é€šå¸¸è¿™ç§2Dæ¸¸æˆéƒ½æ˜¯å¯ä»¥ä»ä¸‹é¢ç©¿ä¸Šå»çš„ï¼Œunityä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¸ªåŠŸèƒ½ é€‰ä¸­ä¸¤ä¸ªtilemapå¹¶æ·»åŠ å¦‚ä¸‹ç»„ä»¶ å‹¾é€‰å¦‚ä¸‹ä¸¤ä¸ªé€‰é¡¹ è¿è¡Œ 11. å¤©ç©ºç›’ 12. å¿½ç•¥ç¢°æ’æ£€æµ‹éƒ¨åˆ†ç‰©ä½“æ˜¯ä¸éœ€è¦ç¢°æ’æ£€æµ‹çš„ï¼Œunityæä¾›äº†éå¸¸æ–¹ä¾¿çš„é€‰é¡¹ä¾›æˆ‘ä»¬å¿½ç•¥è€Œä¸éœ€è¦åœ¨è„šæœ¬ä¸­åˆ¤æ–­ã€‚ é¦–å…ˆæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªtagä¸“é—¨æ ‡è¯†å¿½ç•¥ç¢°æ’æ£€æµ‹çš„ç‰©ä½“æ¯”å¦‚IgnoreCollider å¦‚ä¸‹å›¾ çŸ©é˜µå°‘ä¸€åŠï¼Œè¯´æ˜ä¸æ”¯æŒå•å‘ç¢°æ’æ£€æµ‹ï¼ˆAå¯ä»¥ç¢°æ’Bï¼ŒBä¸å¯ä»¥ç¢°æ’Aï¼‰ï¼Œå› æ­¤å¦‚æœæœ‰å…¶ä»–å¤æ‚çš„éœ€è¦ä»ç„¶é€šè¿‡è„šæœ¬å®ç°ï¼Œåªæ¨èå‹¾é€‰å›¾ç‰‡ä¸­çš„ä¸€ä¸ªï¼Œé™¤éç¡®å®šæŸç‰©ä½“å®Œå…¨ä¸å—ç¢°æ’","link":"/games/Unity3D-note/"},{"title":"Line-It èŠ‚ç‚¹ç¼–è¾‘å™¨","text":"åœ¨wyçš„æ—¶å€™æœ‰æ¨å¹¿è¿‡ä¸€ä¸ªå·¥å…·ï¼Œæ˜¯ä½¿ç”¨èŠ‚ç‚¹ç¼–è¾‘å™¨å·¥å…·æ¥å®Œæˆä¸€äº›ç¨‹åºåŒ–å¸ƒæ™¯ï¼Œç§°ä¹‹ä¸ºç¨‹åºåŒ–å·¥ä½œæµï¼Œä¸è¿‡é‚£ä¸ªå·¥å…·ä¸»è¦æ˜¯é’ˆå¯¹åœºç¼–å’Œç¾æœ¯ç­–åˆ’ç›¸å…³çš„åœºæ™¯ï¼Œè€Œæœ¬äººçš„å·¥ä½œæ˜¯å·¥å…·å’Œè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚å½“æ—¶å°±åœ¨æƒ³è‡ªåŠ¨åŒ–æµ‹è¯•åº”è¯¥æ˜¯ç¬¦åˆæµæ°´çº¿ä¸€æ ·æ‰§è¡Œçš„ï¼Œèƒ½ä¸èƒ½æŠŠä¸¤æ ·ä¸œè¥¿ç»“åˆèµ·æ¥ï¼Œé€šè¿‡èŠ‚ç‚¹ç¼–è¾‘å™¨æ¥å®Œæˆè‡ªåŠ¨åŒ–æµ‹è¯•ç›¸å…³å·¥ä½œæµï¼Œäºæ˜¯ç°åœ¨ç¦»èŒåå°±å°è¯•å®ç°ä¸€ä¸‹ å‰è¨€èŠ‚ç‚¹ç¼–è¾‘å™¨å·²ç»æ˜¯è€ä¸œè¥¿äº†ï¼Œç½‘ä¸Šå„ç§å®ç°äº”èŠ±å…«é—¨ï¼Œä¹‹å‰åªæ¥è§¦è¿‡webå‰åç«¯ï¼Œæœ¬ç€å­¦ä¹ å’Œç»ƒæ‰‹çš„ç›®çš„ï¼Œé€‰æ‹©äº†å®¢æˆ·ç«¯+qt(pysideï¼Œc++å†™ä¸æ¥)ã€‚ç”±äºæœ¬äººæ²¡æ¥è§¦è¿‡qtï¼Œä¹Ÿæ˜¯è¸©äº†å¾ˆå¤šå‘ã€‚åŸºäºblenderfreakå¤§ä½¬çš„å®ç°ï¼ˆhttps://gitlab.com/pavel.krupala/pyqt-node-editorï¼‰åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘ å¼€è´´è®°å½•ä¸€ä¸‹ï¼Œå¸–å­é‡Œçš„å†…å®¹å¹¶ä¸èƒ½é¢é¢ä¿±åˆ°ï¼Œå¦‚æœæœ‰ä¸æ¸…æ¥šçš„å¯ä»¥cloneä¸‹é¢çš„ä»“åº“ä»£ç å¯¹ç€çœ‹ã€‚ githubä»“åº“åœ°å€https://github.com/wjwABCDEFG/LineIt ç”»å¸ƒ/å›¾å…ƒè¿™ç§å¯ä»¥è‡ªç”±ç»˜åˆ¶ç”»æ¿çš„æ–¹å¼ï¼Œå†™èµ·æ¥å’Œä»¥å¾€çš„ä¸€èˆ¬çš„æ§ä»¶ä¸åŒï¼Œéœ€è¦è¡¥å……ä¸€ç‚¹å‰ç½®çŸ¥è¯†ï¼ŒåŸºäºå›¾å…ƒç»˜åˆ¶ä¸»è¦æ˜¯ä¸‰ä¸ªç±»ï¼š QGraphicsSceneï¼šèƒŒæ™¯ç”»å¸ƒæ ¼å­çº¿æ¡QGraphicsViewï¼šèƒŒæ™¯ç”»å¸ƒç»˜åˆ¶æ¨¡å¼ï¼ˆæŠ—é”¯é½¿ï¼Œå…¨é‡æ›´æ–°ï¼‰ã€é¼ æ ‡é”®ç›˜äº‹ä»¶å¤„ç†ï¼ˆæ»šè½®æ”¾å¤§ç¼©å°ï¼Œä¸­é”®ç”»å¸ƒæ‹–æ‹½ï¼‰QGraphicsItemï¼šç»˜åˆ¶æ­£æ–¹å½¢/åœ†å½¢/æ›²çº¿ç­‰åŸºæœ¬å…ƒç´ ï¼Œç”¨æ¥å®Œæˆnode/edge/socketç­‰è®¾è®¡ æ ¼å­ç»˜åˆ¶ QGraphicsSceneçš„drawBackgroundå‡½æ•°æ¯æ¬¡èƒŒæ™¯å˜åŠ¨éƒ½ä¼šå‡ºå‘é‡æ–°ç»˜åˆ¶ï¼ŒæŠŠå½“å‰çš„rectç”»æ»¡ 1234567891011121314151617181920212223242526272829def drawBackground(self, painter, rect): \"\"\"æ¯æ¬¡èƒŒæ™¯å˜åŠ¨éƒ½ä¼šè§¦å‘\"\"\" super().drawBackground(painter, rect) # grid left = int(math.floor(rect.left())) right = int(math.ceil(rect.right())) top = int(math.floor(rect.top())) bottom = int(math.ceil(rect.bottom())) first_left = left - (left % self.gridSize) first_top = top - (top % self.gridSize) # compute all lines to be drawn lines_light, lines_dark = [], [] for x in range(first_left, right, self.gridSize): if (x % (self.gridSize*self.gridSquares) != 0): lines_light.append(QLine(x, top, x, bottom)) else: lines_dark.append(QLine(x, top, x, bottom)) for y in range(first_top, bottom, self.gridSize): if (y % (self.gridSize*self.gridSquares) != 0): lines_light.append(QLine(left, y, right, y)) else: lines_dark.append(QLine(left, y, right, y)) # draw the lines painter.setPen(self._pen_light) painter.drawLines(lines_light) painter.setPen(self._pen_dark) painter.drawLines(lines_dark) èŠ‚ç‚¹å›¾å½¢ å…ƒç´ æ¯”è¾ƒç®€å•ä¸€ä¸ªçŸ©å½¢ï¼Œå·¦å³ä¸¤è¾¹çš„æ’æ§½ï¼ˆsocketï¼‰æ„æˆçš„node QGraphicsItemçš„paintå‡½æ•°ä¸­ç»˜åˆ¶èŠ‚ç‚¹ï¼Œåˆ†ä¸ºä¸Šé¢çš„titleå’Œcontentä¸¤ä¸ªçŸ©å½¢ï¼Œå¹¶åŠ ä¸Šäº†åœ†è§’ï¼Œè¿™éƒ¨åˆ†éƒ½æ˜¯å›ºå®šå†™æ³•ï¼Œéœ€è¦æ³¨æ„çš„å°±æ˜¯contentçš„heightå®é™…ä¸Šæ˜¯ä»[title_height, height-title_height] åæ§½ï¼Œè™½ç„¶æ˜¯å›ºå®šå†™æ³•ï¼Œä½†æ˜¯qtè¿™ä¸ªå†™èµ·æ¥ä¹Ÿå¤ªéº»çƒ¦äº† uiå’Œé€»è¾‘çš„äº’æ“æ¶æ„blenderfreakå¤§ä½¬çš„å®ç°ä¸­ç»™äº†ä¸€ä¸ªè®¾è®¡å›¾ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘çœ‹äº†å‡ ä¸ªèŠ‚ç‚¹ç¼–è¾‘å™¨åè§‰å¾—è¿™ä¸ªæœ€å¥½çš„åŸå› ï¼Œæ€»ä½“å°±æ˜¯è¿™å‡ ä¸ªéƒ¨åˆ†ï¼š Sceneçš„QWidgetç±»ä¿å­˜äº†sceneçš„QGraphicsViewå¯¹è±¡ Nodeçš„QWidgetç±»ä¿å­˜äº†nodeå’Œcontentçš„QGraphicsItemå¯¹è±¡ Edgeçš„QWidgetç±»ä¿å­˜äº†edgeçš„QGraphicsItemå¯¹è±¡ Socketçš„QWidgetç±»ä¿å­˜äº†socketçš„QGraphicsItemå¯¹è±¡ åŒæ—¶ï¼Œåˆåœ¨Graphçš„æ„é€ ä¸­ä¼ å…¥äº†Widgetå¯¹è±¡ï¼Œäº’ç›¸ä¿å­˜ï¼Œåœ¨ä¸‹é¢çš„èŠ‚ç‚¹è®¾è®¡ä¸­å±•ç¤ºäº†å…·ä½“çš„ä¼ªä»£ç ï¼Œæ€»ä¹‹æœ‰ç‚¹ç±»ä¼¼å®‰å“çš„context uiéƒ¨åˆ†å°±åˆ°è¿™é‡Œï¼Œqtçš„å¾ˆå¤šä»£ç çœ‹èµ·æ¥å¾ˆç¹æ‚ï¼Œä½†éƒ½æ˜¯å›ºå®šå†™æ³•ï¼Œæ¯”å¦‚å›¾å…ƒç»˜åˆ¶çš„addRoundedRect/addRect/setPen/setBrush/drawPathï¼Œä½†å½’æ ¹åˆ°åº•éƒ½æ˜¯äº›apiçš„è°ƒç”¨ å¯¹äºèŠ‚ç‚¹ç¼–è¾‘å™¨ï¼Œåç»­çš„socketé€»è¾‘æ‰æ˜¯å¤§å¤´ èŠ‚ç‚¹çš„è®¾è®¡åŸºæœ¬ç»“æ„uiå’Œé€»è¾‘åˆ†ç¦»ï¼Œuiéƒ¨åˆ†ä½¿ç”¨qtçš„QGraphicsItemç»˜åˆ¶ï¼Œé€»è¾‘åœ¨Nodeç±»ä¸­ ä¸ºäº†æ–¹ä¾¿äº’æ“ï¼Œuiå¯¹è±¡ä½œä¸ºNodeçš„æˆå‘˜ï¼ŒåŒæ—¶æ„é€ çš„æ—¶å€™ä¼šå°†æœ¬å¯¹è±¡selfä¼ å…¥uiå¯¹è±¡ä¸­ä½œä¸ºæˆå‘˜ï¼ˆè¿™ä¸ªæ“ä½œç±»ä¼¼androidç»å¸¸ä¼šå°†activityçš„thisä¼ å…¥fragmentä¸­ï¼Œ ä¸è¿‡å®‰å“ä¸­å½¢å‚ç§°ä¹‹ä¸ºcontextä¸Šä¸‹æ–‡ï¼Œè¿™é‡Œæ²¡æœ‰è¿‡å¤šä¸“ä¸šçš„åè¯ï¼Œä¸è¿‡æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼‰ 123456789class QDMGraphicsNode(QGraphicsItem): def __init__(self, node: 'Node'): super().__init__(parent) self.node = nodeclass Node: def __init__(self): super().__init__() self.grNode = QDMGraphicsNode(self) å’Œsocket/edgeå…³è”socketå°±æ˜¯nodeå·¦å³ä¸¤è¾¹çš„è¿æ¥ç‚¹ï¼Œnodeé‡Œé¢ä¿å­˜äº†inputså’ŒoutputsèŠ‚ç‚¹ï¼Œä¿å­˜äº†æ‰€æœ‰çš„socketï¼Œè¿™æ˜¯æ•´ä¸ªç¼–è¾‘å™¨æœ€å¤æ‚çš„åœ°æ–¹ï¼Œå› ä¸ºsocketå®é™…ä¸Šæ˜¯è¿æ¥nodeå’Œedgeçš„åª’ä»‹ï¼Œè®¾è®¡æ—¶è¦è€ƒè™‘çš„ä¸œè¥¿å¾ˆå¤šï¼Œä½†æˆ‘å¹¶ä¸æƒ³åœ¨è¿™é‡Œå•ç‹¬å¼€ä¸€ç« ï¼ŒåŸæ¥å¤§ä½¬çš„è®¾è®¡å¾ˆç²¾å½©ï¼Œä½†æˆ‘è¿™é‡Œçš„é‡ç‚¹æ˜¯æ•´ä½“çš„åŠŸèƒ½ socketçš„å±æ€§åŒ…æ‹¬ï¼š nodeï¼šæ‰€åœ¨nodeçš„å¼•ç”¨ï¼Œå’Œä¹‹å‰è¯´çš„ä¸€æ ·ï¼Œç±»ä¼¼contextäº’æ“ edges: è¿æ¥çš„æ‰€æœ‰edgeï¼Œæ³¨æ„ï¼Œinput socketåªèƒ½è¿æ¥ä¸€æ ¹çº¿ï¼Œä½†æ˜¯output socketå¯ä»¥è¿æ¥å¤šæ ¹çº¿ indexï¼šç¬¬å‡ ä¸ªsocketï¼ŒåŒä¸€ä¾§å¯èƒ½æœ‰å¤šä¸ªï¼Œç”¨äºç»˜åˆ¶æ—¶è®¡ç®—ä½ç½®å’Œåºåˆ—åŒ–æ—¶ä½¿ç”¨ positionï¼šå³ä½¿åœ¨åŒä¸€ä¾§ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å·¦ä¸Šä¸­ä¸‹ï¼Œå³ä¸Šä¸­ä¸‹å‡ ç§ï¼Œä¹Ÿæ˜¯ç”¨äºç»˜åˆ¶ socket_typeï¼šè¿™éƒ¨åˆ†æˆ‘è®¤ä¸ºåŸæœ¬çš„è®¾è®¡å­˜åœ¨ä¸è¶³ï¼Œä»£ç é‡Œå†™çš„Constant defining type(color) of this socketï¼Œä¹Ÿå°±æ˜¯è¯´åªæ˜¯ä¸€ä¸ªcolorï¼Œæˆ‘ä¼°è®¡åŸæœ¬ä½œè€…çš„æƒ³æ³•åº”è¯¥æ˜¯åƒunity shaderæˆ–è€…ueè“å›¾ä¸€æ ·ï¼Œæ ¹æ®è¾“å‡ºçš„å€¼ç±»å‹å˜åŒ–é¢œè‰²ï¼Œè®©ç”¨æˆ·çŸ¥é“ä»€ä¹ˆoutputèƒ½è¿æ¥ä»€ä¹ˆinputï¼Œä¸å…è®¸ä¹±è¿æ¥ï¼Œä½†ç”±äºä½œè€…æœ€åæ˜¯åšäº†ä¸€ä¸ªè®¡ç®—å™¨ï¼Œæ‰€ä»¥éƒ½æ˜¯intæ²¡æœ‰ç»†åŒ–è¿™éƒ¨åˆ† is_inputï¼šé€šè¿‡è¿™ä¸ªæ¥åŒºåˆ†æ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡º edgeçš„å±æ€§åŒ…æ‹¬ï¼š start_socketå’Œend_socket edge_typeï¼šè´å¡å°”æ›²çº¿/ç›´çº¿ å½“ä¸€ä¸ªèŠ‚ç‚¹è¦æ‰¾å‰é¢/åé¢èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå®é™…ä¸Šçš„é“¾è·¯ä¸ºï¼šnode -&gt; (for)output_socket -&gt; (for)edge -&gt; end_socket -&gt; next_node åŠ¨æ€æ³¨å†Œä¸ºäº†æ–¹ä¾¿ç”¨æˆ·æ·»åŠ è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œéœ€è¦åŠ¨æ€æ³¨å†Œçš„æ–¹å¼ã€‚åç»­å¦‚ä½¿ç”¨pyinstalleræ‰“åŒ…æ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®.specæ–‡ä»¶è·³è¿‡å¯¹nodesæ–‡ä»¶å¤¹ä¸‹çš„æ‰“åŒ…ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·è‡ªå®šä¹‰å’Œå‚è€ƒåŸæœ‰node é€šè¿‡@register_node(â€œDIVâ€)è£…é¥°å™¨æŠŠè¿™ä¸ªclassæ·»åŠ åˆ°å­—å…¸CALC_NODES = {}ä¸­ä¿å­˜åŠ¨æ€ï¼Œæ‰€æœ‰éœ€è¦æ·»åŠ çš„èŠ‚ç‚¹éƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªè£…é¥°å™¨æ·»åŠ è¿›èŠ‚ç‚¹ç¼–è¾‘å™¨ä¸­ï¼Œæ–¹ä¾¿ç”¨æˆ·è‡ªå®šä¹‰å’Œæ‰©å±•èŠ‚ç‚¹ ä½¿ç”¨__all__æ³¨å†Œæ•´ä¸ªåŒ…ä¸‹çš„pyæ–‡ä»¶ï¼Œåç»­æ‰“åŒ…æ—¶å¯ä»¥å±è”½è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨æˆ·ä¾¿å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹è‡ªç”±çš„ç¼–å†™è‡ªå®šä¹‰èŠ‚ç‚¹ è®¡ç®—èŠ‚ç‚¹ å¦‚å››åˆ™è¿ç®—èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹CalcNodeæŠ½è±¡å‡ºä¸€ä¸ªevalImplementation/evalOperationæ–¹æ³•ï¼Œå­èŠ‚ç‚¹ç±»éƒ½éœ€è¦å®ç° æ•°æ®å­˜å‚¨ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸€ä¸ªvalueå­—æ®µç”¨äºå­˜å‚¨ï¼Œå½“æƒ³è¦è®¡ç®—æ—¶ï¼Œé€šè¿‡getInput(idx)æ–¹æ³•ä»æŒ‡å®šçš„è¾“å…¥ç«¯å£ï¼ˆinputs[idx]ï¼‰æ‰¾åˆ°å¯¹åº”çš„ä¸Šæ¸¸èŠ‚ç‚¹æ‹¿å…¶valueï¼Œå®Œæˆè®¡ç®—åä¹Ÿè¦å°†ç»“æœæ”¾ç½®åœ¨å½“å‰èŠ‚ç‚¹çš„valueä¸­ å‘åè®¡ç®—ï¼šå‘åè®¡ç®—æ—¶ï¼Œå¯¹ç€å½“å‰èŠ‚ç‚¹ç‚¹å‡»evalï¼Œä¼šè°ƒç”¨evalåï¼Œè°ƒç”¨evalChildrenéå†å½“å‰èŠ‚ç‚¹æ‰€æœ‰outputï¼Œæ‰¾åˆ°å…¶ä¸‹ä¸€å±‚å­èŠ‚ç‚¹å¹¶è°ƒç”¨å…¶evalæ–¹æ³•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ•´ä¸ªè®¡ç®—é¡ºåºåº”è¯¥æ˜¯dfs 1234567def evalChildren(self): \"\"\" ä½¿ç”¨è¿™ä¸ªå®Œæˆè®¡ç®—ï¼Œæ¯æ¬¡è®¡ç®—å®Œï¼Œæ‰¾åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ç»§ç»­è®¡ç®— æ¯ä¸ªevalé‡Œé¢è¦å®ç°ä»inputç«¯å£çš„ä¸Šä¸€ä¸ªè¿æ¥èŠ‚ç‚¹æ‹¿æ•°æ®ï¼Œè®¡ç®—ï¼ŒæŠŠç»“æœæ”¾åˆ°valueä¸­ \"\"\" for node in self.getChildrenNodes(): node.eval() å‘å‰è®¡ç®—ï¼šå‘å‰è®¡ç®—æ—¶ï¼Œæ¯”å¦‚outputï¼Œå¯¹ç€outputç‚¹å‡»evalï¼Œå¾€å‰æ‰¾æ‰€æœ‰çš„inputï¼Œå¹¶è°ƒç”¨å…¶evalå‡½æ•°ï¼Œå¯ä»¥è‡ªåŠ¨å‘å‰å®Œæˆè®¡ç®—ï¼Œå…¶è¿‡ç¨‹ä¹Ÿæ˜¯dfs 1234def evalImplementation(self): input_node = self.getInput(0) # å¦‚æœinputç«¯å£ä¸æ­¢ä¸€ä¸ªä¹Ÿå¯ä»¥éå†inputs val = input_node.eval() return val åºåˆ—åŒ–/ååºåˆ—åŒ–è¦å®ç°graphçš„æŒä¹…åŒ–ä¿å­˜ï¼Œæˆ–æ•°æ®ä¼ è¾“ï¼Œç”šè‡³æ˜¯redo/undoåŠŸèƒ½ï¼Œéƒ½å¿…é¡»å®Œæˆåºåˆ—åŒ–å’Œååºåˆ—åŒ–å·¥ä½œï¼Œé€šè¿‡å­—ç¬¦ä¸²å®Œæ•´è¡¨è¾¾graphä¸­çš„æ•°æ® serializeéœ€è¦åºåˆ—åŒ–çš„ä¸œè¥¿åŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š åœºæ™¯ï¼šidã€ç”»å¸ƒçš„å¤§å° èŠ‚ç‚¹ï¼ˆåˆ—è¡¨ï¼‰ï¼šèŠ‚ç‚¹idã€æ ‡é¢˜ã€ä½ç½®ã€inputsè¾“å…¥ç‚¹åˆ—è¡¨ï¼ˆidã€idxã€ä½ç½®ã€ç±»å‹ï¼‰ã€outputsè¾“å‡ºç‚¹åˆ—è¡¨ï¼ˆidã€idxã€ä½ç½®ã€ç±»å‹ï¼‰ã€å†…å®¹ è¾¹ï¼ˆåˆ—è¡¨ï¼‰ï¼šè¾¹çš„idã€èµ·ç‚¹å’Œç»ˆç‚¹çš„èŠ‚ç‚¹id å› æ­¤æ•´ä¸ªåºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹æ˜¯ä¸€ä¸ªè‡ªé¡¶å‘ä¸‹çš„ç»“æ„ï¼Œå®Œæˆå¦‚ä¸Šæ‰€è¿°çš„æ•´ä¸ªåœºæ™¯çš„åºåˆ—åŒ–ï¼Œå®é™…ä¸Šæ˜¯åˆ†åˆ«å¯¹nodeå’Œedgeè¿›è¡Œåºåˆ—åŒ–ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªdictæ–¹ä¾¿åç»­çš„jsonç›´æ¥ä¿å­˜æˆå­—ç¬¦ä¸²ï¼š 12345678910111213# åœºæ™¯åºåˆ—åŒ–ä¼ªä»£ç def serialize(self): nodes, edges = [], [] for node in self.nodes: nodes.append(node.serialize()) # nodeåºåˆ—åŒ– for edge in self.edges: edges.append(edge.serialize()) # edgeåºåˆ—åŒ– return { 'id', self.id, 'scene_width', self.scene_width, 'scene_height', self.scene_height, 'nodes', nodes, 'edges', edges, } nodeå’Œedgeçš„serializeå®ç°ä¹Ÿæ˜¯æŒ‰ä¸Šé¢æˆ‘ä»¬æ‰€è¯´çš„ä¿å­˜ç›¸åº”çš„ä¿¡æ¯åˆ°dict å½“ç„¶ï¼Œä¸Šè¿°ä¼ªä»£ç å†™çš„æ˜¯dictï¼Œæœ€ç»ˆçš„å®ç°æ˜¯OrderedDictï¼Œä¿è¯äº†æ¯æ¬¡ä¿å­˜æ•°æ®keyçš„é¡ºåºæ˜¯ä¸€æ ·çš„ deserializeååºåˆ—åŒ–å³æ˜¯æ ¹æ®dictä¿¡æ¯æ„é€ å‡ºæ•´ä¸ªç”»å¸ƒï¼Œdeserializeå’Œserializeç»“æ„ç±»ä¼¼ï¼Œä¹Ÿæ˜¯åˆ†åˆ«å¯¹nodeå’Œedgeè¿›è¡Œååºåˆ—åŒ–ï¼Œååºåˆ—åŒ–çš„è¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯æ ¹æ®ä¿¡æ¯åˆ›å»ºnodeå’Œedgeå¯¹è±¡çš„è¿‡ç¨‹ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„ä»¥ä¸‹å…³é”®ç‚¹ idçš„å­˜å‚¨ï¼ŒæŒ‰ç†æ¥è¯´ï¼Œå³ä½¿æ²¡æœ‰idä¹Ÿå¯ä»¥å®Œå…¨å¤åˆ»ä¸€ä¸ªé•¿å¾—ä¸€æ¨¡ä¸€æ ·çš„åœºæ™¯ï¼Œä¸ºä»€ä¹ˆè¿˜è¦è®°å½•idå‘¢ï¼Ÿå› ä¸ºåˆ›å»ºå‡ºæ¥çš„nodeåªæ˜¯ä½ç½®å’Œå†…å®¹ç›¸åŒå¹¶éåŸæ¥çš„nodeï¼ˆå†…å­˜åœ°å€ä¸åŒï¼‰ï¼Œè€Œè¾¹çš„åºåˆ—åŒ–ä¿¡æ¯åˆéœ€è¦è®°å½•èµ·ç‚¹å’Œç»ˆç‚¹æ˜¯å“ªä¸ªnodeçš„å“ªä¸ªsocketï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•åœ¨åŒæ ·çš„å†…å­˜åœ°å€ä¸­åˆ›å»ºå¯¹è±¡ï¼Œå› æ­¤è¿™ä¸ªidåªèƒ½å½“æˆæˆå‘˜å˜é‡è®°å½•èµ·æ¥ 12345678# deserializeä¼ªä»£ç def Node: def __init__(self): self.id = id(self) def deserialize(self, data: dict, hashmap: dict={}) -&gt; bool: if restore_id: self.id = data['id'] # ... è¿™æ ·ä¸€æ¥ï¼Œè™½ç„¶æ–°æ—§èŠ‚ç‚¹å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œä½†self.idæ˜¯ä¸€æ ·çš„ï¼Œåœ¨edgeååºåˆ—åŒ–çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡èµ·ç‚¹ç»ˆç‚¹idæ¥æ‰¾åˆ°æ˜¯å“ªä¸ªnodeçš„å“ªä¸ªsocketäº† æ³¨æ„åˆ°å½¢å‚è¿™é‡Œæœ‰ä¸ªhashmapï¼Œç®—æ˜¯ä¸€ä¸ªä¼˜åŒ–ç‚¹ï¼Œnodeå’Œsocketååºåˆ—åŒ–æ—¶å°±åŠ å…¥{id: obj}è¿›hashmapï¼Œè¿™æ ·edgeåºåˆ—åŒ–çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥é€šè¿‡idå¯»æ‰¾socketäº†ä¸éœ€è¦éå†æŸ¥æ‰¾ undo/redoåŠŸèƒ½è¿™é‡Œçš„ä¸€ä¸ªè¯¯åŒºåœ¨äºï¼šæˆ‘ä»¬é¦–å…ˆä¼šæƒ³åˆ°ä¸€ä¸ªæ“ä½œæ ˆhistory_stackï¼ŒæŠŠæ‰€æœ‰çš„æ“ä½œéƒ½å…¥æ ˆï¼Œçœ‹èµ·æ¥undoå°±æ˜¯å¼¹å‡ºè¿‡ç¨‹ï¼Œredoå°±æ˜¯æ ˆæ¢å¤çš„è¿‡ç¨‹ã€‚ä½†è¿™æ ·åšä»å®ç°çš„è§’åº¦æ˜¯éå¸¸å¤æ‚çš„ å®é™…ä¸Šï¼Œè®¾è®¡åº”è¯¥å¦‚ä¸‹ï¼š æˆ‘ä»¬å¹¶ä¸ä¼šç”¨åˆ°æ ˆstackè¿™ç§å­˜å‚¨ç»“æ„ï¼Œå› ä¸ºåœ¨å¤šæ¬¡undoåæ¯æ¬¡å¼¹å‡ºçš„å†…å®¹è¿˜ä¸èƒ½æŠ›å¼ƒï¼Œå› ä¸ºå¯èƒ½åˆå¤šæ¬¡redoï¼Œå› æ­¤å¦‚æœä½¿ç”¨stackå®ç°ï¼Œéœ€è¦ç”¨å¦ä¸€ä¸ªæ ˆæ¥å­˜å‚¨ï¼Œå› æ­¤æˆ‘ä»¬history_stackå®é™…ä¸Šé‡‡ç”¨çš„æ˜¯æ•°ç»„é˜Ÿåˆ—+ä¸‹æ ‡æŒ‡é’ˆ å­˜å‚¨çš„ä¸åº”è¯¥æ˜¯æ“ä½œï¼Œå› ä¸ºæ“ä½œéœ€è¦æ­£å‘å’Œåå‘ï¼Œæ¯”å¦‚undoåˆ é™¤å¯¹åº”redoåˆ›å»ºï¼Œç”±äºæ“ä½œéå¸¸å¤šï¼Œè¿™æ˜¯ä¸åˆç†çš„ã€‚å› æ­¤å®é™…ä¸Šhistory_stackæ˜¯å­˜å‚¨æ•´ä¸ªé¢æ¿çš„serializeæ•°æ®ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸ºï¼šâ€œå˜åŠ¨â€ -&gt; store(serialized_data) -&gt; undo/redo -&gt; restore(serialized_data)ï¼Œè¿™æ ·undoå’Œredoå®é™…ä¸Šéƒ½æ˜¯é‡ç»˜æ•´ä¸ªç”»å¸ƒï¼Œåªæ˜¯åœ¨ç§»åŠ¨cur_idxæŒ‡é’ˆï¼Œé€»è¾‘ç»Ÿä¸€å®ç°ç®€å• â€œå˜åŠ¨â€åŒ…æ‹¬ï¼šèŠ‚ç‚¹ï¼ˆæ–°å»º/ç§»åŠ¨/åˆ é™¤ï¼‰ï¼Œè¾¹ï¼ˆæ–°å»º/åˆ é™¤ï¼‰ï¼Œé€‰ä¸­å’Œå–æ¶ˆé€‰ä¸­ åˆšå¼€å§‹åˆ›å»º/æ‰“å¼€èŠ‚ç‚¹æ–‡ä»¶çš„æ—¶å€™è¦è®°å½•ä¸€æ¬¡ å½“undoå‡ æ¬¡åï¼Œå¦‚æœä¸æ˜¯redoè€Œæ˜¯storeHistoryæ’å…¥ï¼Œé‚£ä¹ˆå°±ä¼šä¸¢å¼ƒåŸæœ¬å¯ä»¥redoçš„éƒ¨åˆ†ï¼Œå°±åƒä¸«å­—å½¢ï¼Œè§†ä¸ºå¼€å§‹æ–°çš„ä¸€æ¡å²”è·¯ å‰ªè´´æ¿åŠŸèƒ½åˆ©ç”¨QApplication.instance().clipå®ç°ï¼Œåœ¨å¤åˆ¶(ctrl+c)å’Œå‰ªè´´(ctrl+x)çš„æ—¶å€™åºåˆ—åŒ–å¹¶å­˜å…¥å‰ªè´´æ¿ï¼Œç²˜è´´(ctrl+v)çš„æ—¶å€™ååºåˆ—åŒ– æ³¨æ„ï¼š ç²˜è´´çš„æ—¶å€™ï¼Œéœ€è¦ç»™nodeã€socketå’Œedgeæ·»åŠ ä¸€ä¸ªæ–°çš„idï¼Œå¦åˆ™idé‡å¤ã€‚ç”±äºåºåˆ—åŒ–/ååºåˆ—åŒ–æ‰€æœ‰èŠ‚ç‚¹éƒ½å­˜å‚¨äºä¸€ä¸ªhashmapä¸­ï¼Œä¼šå¯¼è‡´keyé‡å¤ å‰ªåˆ‡ï¼ˆåˆ é™¤ï¼‰èŠ‚ç‚¹åï¼Œå¦‚æœå‰ªè´´æ¿çš„è¾¹æœ‰æœªè¿æ¥çš„èŠ‚ç‚¹ï¼Œéœ€è¦å‰”é™¤ï¼Œå¦‚æœviewä¸­å‰©ä½™çš„è¾¹æœ‰æœªè¿æ¥çš„èŠ‚ç‚¹ï¼Œä¹Ÿéœ€è¦å‰”é™¤ MDIçª—å£Multiple Document Interfaceå¤šæ–‡æ¡£ç•Œé¢ï¼Œå³ä¸€ä¸ªçª—å£ä¸‹é€šè¿‡tabåˆ†å‰²å¤šä¸ªå­çª—å£ï¼Œæ–‡æ¡£å‹å·¥å…·é€šå¸¸ä¸ä¼šåªæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤º å¯ä»¥æå¤§çš„æé«˜ç”Ÿäº§åŠ›å’Œä¾¿åˆ©æ€§ï¼Œæ®è¯´æ˜¯ç”±å¾®è½¯æå‡ºçš„ç”¨äºexcelå¤šè¡¨ç¼–è¾‘ï¼Œä½†ä¸çŸ¥é“ä¸ºä»€ä¹ˆåæ¥çš„excelå¼ƒç”¨äº†ï¼Œå¤šè¡¨é‡‡ç”¨å¤šçª—å£ mdiçª—å£ç°åœ¨æœ‰å¤§é‡é€šç”¨çš„å‚è€ƒï¼ŒQTä¹Ÿæœ‰é¢„åˆ¶çš„å®ç°QMdiAreaï¼Œå…³é”®ç‚¹ï¼š åŸæ¥QMainWindow.CentralWidget = QWidgetå¯¹è±¡ï¼Œç°åœ¨ä¸­é—´æ·»åŠ äº†ä¸€å±‚QMdiAreaï¼Œå˜ä¸ºQMainWindow.CentralWidget = QMdiAreaå¯¹è±¡ï¼Œç„¶åé€šè¿‡mdiArea.addSubWindow(QWidget)æ·»åŠ æ¯ä¸ªtabé¡¹é‡Œçš„QWidgetå¯¹è±¡ å‡ ä¸ªapiå¹¶ä¸å¤æ‚ï¼Œå…³é”®ç‚¹åœ¨äºæ¯æ¬¡æ“ä½œé‡Œé¢çš„widgetçš„æ—¶å€™ï¼Œè®°å¾—å…ˆé€šè¿‡mdiArea.activeSubWindow().widget()æ¥è·å–å½“å‰çš„widget è¿™ä¹Ÿä¾§é¢è¯´æ˜äº†ä¸ºä»€ä¹ˆhistory_stackè¦æ”¾åœ¨Widgetè€Œä¸æ˜¯windowä¸­çš„åŸå› ï¼Œå› ä¸ºæ¯ä¸ªgraphçš„history_stackæ˜¯ç‹¬ç«‹çš„ï¼ŒåŒç†ä¿å­˜ç­‰æ“ä½œä¹Ÿæ˜¯ç‹¬ç«‹çš„ï¼Œè®°å¾—å…ˆè·å–å½“å‰æ¿€æ´»çš„çª—å£ Detailsé¢æ¿æŸä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½æœ‰éœ€è¦é…ç½®çš„ä¸œè¥¿ï¼Œä¸å¥½ç›´æ¥åœ¨ä¸€ä¸ªèŠ‚ç‚¹çš„contenté‡Œå±•ç¤ºï¼Œæ˜¾å¾—éå¸¸å‡Œä¹±ï¼Œæ‰€ä»¥åœ¨å³ä¾§åŠ å…¥äº†detailsé¢æ¿ï¼Œè¿™æ ·æ–¹ä¾¿ç”¨æˆ·é…ç½®è‡ªå·±çš„å±æ€§ è€ƒè™‘åˆ°ç”¨æˆ·å¯èƒ½ä¼šè‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œå› æ­¤åœ¨node_baseä¸­ä¹Ÿæš´éœ²äº†detailsInfo:å±æ€§ï¼Œ ç±»å‹ä¸ºList[QWidget]ï¼Œè‡ªå®šä¹‰èŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥é€šè¿‡å¾€è¯¥å±æ€§ä¸­ä¸æ–­append widgetï¼Œå³å¯åœ¨Detailsé¢æ¿ä¸­çœ‹åˆ°éœ€è¦çš„å±æ€§ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªé¢æ¿é‡Œçš„å‚æ•°å¦‚æœéœ€è¦ä¿å­˜ï¼Œåº”è¯¥åŠ å…¥åˆ°åºåˆ—åŒ–çš„valueä¸­ å¼€å…³åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ï¼Œæ ¹æ®ä»¥å¾€çš„ç»éªŒï¼Œæœ‰å‡ æ¬¡å¯èƒ½è¦æ‰§è¡ŒæŸä¸€æ®µä»£ç ï¼Œè€Œæœ‰å‡ æ¬¡åˆè¦ä¸æ‰§è¡ŒæŸä¸€æ®µä»£ç ã€‚å› æ­¤ä¸ºæ¯ä¸ªèŠ‚ç‚¹è®¾è®¡äº†å¼€å…³ï¼Œå¦‚æœå…³é—­ï¼Œåˆ™æ­¤æ¬¡æ‰§è¡Œè·³è¿‡è¯¥èŠ‚ç‚¹ evalæ‰§è¡Œæµç¨‹è®¾è®¡è€ƒè™‘è‡ªåŠ¨åŒ–éœ€æ±‚ï¼Œé‡æ–°å®ç°äº†è®¡ç®—æµç¨‹ï¼Œa -&gt; b -&gt; c -&gt; dï¼Œæœ‰å¯èƒ½éœ€è¦å…ˆæ‰§è¡Œåˆ°cå‡ºé”™äº†ï¼Œæ­¤æ—¶å¸Œæœ›ä¸é‡å¤æ‰§è¡Œabï¼Œè€Œæ˜¯ä»cå¼€å§‹ç»§ç»­æ‰§è¡Œï¼Œç”±äºå‰é¢å·²ç»å®ç°äº†å‰å‘è®¡ç®—å’Œåå‘è®¡ç®—çš„åŸºæœ¬æ“ä½œï¼Œè¿™é‡Œè€ƒè™‘å¦‚ä¸‹è®¾è®¡æ–¹æ¡ˆ æ–¹æ¡ˆä¸€ï¼ˆå‘åæ‰§è¡Œï¼‰ï¼š å°†c mark dirtyï¼Œä¼šæŠŠåç»­çš„å­èŠ‚ç‚¹éƒ½mark dirtyï¼Œå¯¹ç€cæˆ–è€…bè¿›è¡Œevalå‘åæ‰§è¡Œ æ–¹æ¡ˆäºŒï¼ˆå‘å‰æ‰§è¡Œï¼‰ï¼š å°†c mark dirtyï¼Œä¼šæŠŠåç»­çš„å­èŠ‚ç‚¹éƒ½mark dirtyï¼Œå¯¹ç€dè¿›è¡Œevalå‘å‰æ‰§è¡Œï¼Œæ­¤æ–¹æ¡ˆä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœcå‡ºç°äº†åˆ†å‰c-&gt;dåŒæ—¶è¿˜æœ‰c-&gt;eï¼Œæ²¡æ³•æ‰§è¡Œåˆ°c-&gt;e æ–¹æ¡ˆä¸‰ï¼ˆå‘å‰æ‰§è¡Œä¿®æ­£ï¼‰ï¼š å°†c mark dirtyï¼Œä¼šæŠŠåç»­çš„å­èŠ‚ç‚¹éƒ½mark dirtyï¼Œå¯¹ç€dè¿›è¡Œevalï¼Œä¸è¦å‘å‰æ‰§è¡Œè€Œæ˜¯æ”¹ä¸ºå¾€å‰æ‰¾åˆ°å·²ç»okçš„èŠ‚ç‚¹bï¼Œå†ä»è¯¥èŠ‚ç‚¹å¼€å§‹å‘åæ‰§è¡Œ æš‚æ—¶æ˜¯æ–¹æ¡ˆäºŒå•Šï¼Œæˆ‘æ„è¯†åˆ°æœ‰é—®é¢˜ï¼Œåé¢å†æ”¹ æ–¹æ¡ˆä¸€å’Œæ–¹æ¡ˆä¸‰ç›¸æ¯”ï¼Œæ–¹æ¡ˆä¸‰æ›´åŠ ç¬¦åˆæ­£å¸¸äººçš„æ“ä½œä¹ æƒ¯ï¼Œå› ä¸ºè¿æ¥å®ŒèŠ‚ç‚¹åä¹ æƒ¯äºä»æœ€åçš„èŠ‚ç‚¹å¼€å§‹ç‚¹å‡»æ‰§è¡Œ StoreèŠ‚ç‚¹åœ¨ä¹‹å‰ä½¿ç”¨èŠ‚ç‚¹ç¼–è¾‘å™¨çš„æ—¶å€™å°±å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹äºæ­£å¸¸ç¼–å†™ç¨‹åºï¼Œé€»è¾‘æœ¬å°±ä¸æ˜¯åƒæµæ°´çº¿ä¸€æ ·çº¿æ€§çš„ï¼Œéš¾å…å­˜åœ¨å¦‚ä¸‹ä»£ç ï¼š 123456789a = 1xxx ä¸­é—´ä¸€å¤§æ®µb = 2xxx ä¸­é—´ä¸€å¤§æ®µc = a + b å¦‚æœa b cåˆ†åˆ«åœ¨ä¸åŒçš„èŠ‚ç‚¹ï¼Œa -&gt; b -&gt;c é‚£ä¹ˆcæƒ³ä½¿ç”¨açš„æ—¶å€™ï¼Œå°±å¾—æŠŠaå…ˆä¼ ç»™bï¼Œå†æŠŠbä¼ ç»™c åœ¨ä»¥å‰å·¥ä½œæ—¶ä½¿ç”¨çš„èŠ‚ç‚¹ç¼–è¾‘å™¨ä¸­ï¼Œçˆ·çˆ·èŠ‚ç‚¹çš„æ•°æ®éœ€è¦ä¸€è·¯ä¼ ä¸‹æ¥ï¼Œé“¾è·¯ä¸Šä¿å­˜çš„æ•°æ®å°±è¶Šæ¥è¶Šå¤šï¼Œè€Œä¸”æ¯æ¬¡éƒ½å¾—å¾€ä¸‹ä¼ ï¼ï¼ï¼ˆå³ä½¿è¿™ä¸ªèŠ‚ç‚¹ç¼–è¾‘å™¨çš„æ•°æ®æ˜¯ä¸åœ¨é“¾è·¯ä¸Šè€Œåœ¨èŠ‚ç‚¹ä¸­ï¼Œä½†ä¾ç„¶å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼‰ï¼Œè™½ç„¶è‡ªåŠ¨åŒ–æµ‹è¯•æ›´åŠ æ¥è¿‘æµæ°´çº¿ä¸€ç‚¹ï¼Œä½†ä½¿ç”¨å†å²æ•°æ®é—®é¢˜è‚¯å®šæ˜¯åœ¨æ‰€éš¾å…çš„ï¼Œå› æ­¤è¦è§£å†³è¿™ä¸ªè®¾è®¡ç¼ºé™· StoreèŠ‚ç‚¹ï¼Œæœ¬è´¨ä¸Šæ˜¯å¾€ä¸€ä¸ªç©ºçš„global_dataå­˜ä¸œè¥¿ï¼Œè¿™é‡Œç”¨çš„æ˜¯æ¨¡å—ï¼Œæœ‰ç‚¹æ•°æ®æ€»çº¿çš„å‘³é“~ ç”±äºoutput socketæœ¬èº«å°±å¯ä»¥è¿æ¥å¤šæ ¹çº¿ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒä»å“ªä¸ªsocketå‡ºæ¥çš„é—®é¢˜ï¼Œåœ¨LineItä¸­ï¼Œæœ¬èº«outputå¤§æ¦‚ç‡å°±åªæœ‰ä¸€ä¸ªsocket æ¥å£ç±»å‹é¢œè‰²ä¹Ÿè®¸åœ¨ä¸Šä¸€ä¸ªèŠ‚ç‚¹valueçš„ç±»å‹è½¬æ¢æˆé¢œè‰²å€¼ï¼Œä¸‹ä¸€ä¸ªçš„getInputé‡Œé¢éªŒè¯ï¼Œä¸ä¸€æ ·ç±»å‹çš„å°±ä¸å…è®¸è¿æ¥ TODOï¼Œæš‚æ—¶æç½®ï¼Œå¾ˆå¤šè¿æ¥ç‚¹å…¶å®æ˜¯æ²¡æœ‰ç±»å‹ä¼ è¾“ç»™ä¸‹ä¸ªèŠ‚ç‚¹çš„ï¼Œä¸ç¡®å®šè¿™ç§åŠŸèƒ½æ˜¯å¦ä¼šå¯¼è‡´æ“ä½œä¸ä¾¿ï¼Œéœ€è¦å†ä»”ç»†è€ƒé‡ åŠ¨æ€å¢åŠ ouputæ•°é‡TODOï¼Œåœ¨LineItä¸­ï¼Œæœ¬èº«outputå¤§æ¦‚ç‡å°±åªæœ‰ä¸€ä¸ªsocketï¼Œæ‰€ä»¥å¯èƒ½æ²¡å¤šå¤§ç”¨å¤„ï¼Œæš‚æ—¶æç½® èŠ‚ç‚¹åˆ—è¡¨æ—¢ç„¶æ˜¯åšè‡ªåŠ¨åŒ–äº†ï¼Œé‚£å°±å°è¯•æ€§çš„æŠŠä¸€äº›åŠŸèƒ½å°è£…æˆèŠ‚ç‚¹å§ ç§»åŠ¨è®¾å¤‡æ“ä½œç±»è¿™é‡Œè¦æ³¨æ„å°½é‡å…¼å®¹å¤šå¹³å°ï¼Œä¸»æµå°±æ˜¯android/iOSï¼Œandroidä½¿ç”¨adbï¼ŒiOSä½¿ç”¨tidevice/wdaï¼Œç›¸å½“äºåšäº†ä¹‹å‰airtestçš„ä¸€äº›å·¥ä½œï¼Œä½†æ˜¯è¿™æ ·æ›´åŠ åŸç”Ÿä¸€ç‚¹ï¼Œä¹Ÿé¿å…å¼•å…¥äº†å¾ˆå¤šä¸å¿…è¦çš„ä¸œè¥¿ Nodes ä½œç”¨ è®¾è®¡ è®¾å¤‡åˆ—è¡¨ æ˜¾ç¤ºé€šè¿‡usbè¿æ¥çš„androidå’ŒiOSè®¾å¤‡ å¼€ä¸¤ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«é€šè¿‡adbå’Œtideviceæ£€æµ‹è®¾å¤‡è¿æ¥æƒ…å†µï¼Œç„¶åemitåˆ°è¯¥nodeæ›´æ–°ä¿¡æ¯å³å¯ æ‰“å¼€åº”ç”¨ æ‰“å¼€app / æˆªå± æˆªå± / æ€§èƒ½æ•°æ® ç›‘æµ‹æ€§èƒ½æ•°æ® å•ç‹¬å¼€ä¸ªwidgetå¯¹æ¯å°å·²è¿æ¥è®¾å¤‡å±•ç¤ºæ€§èƒ½æ•°æ®ï¼Œ2sä¸€æ¬¡å³å¯ å®‰è£…åº”ç”¨ / / TODOæ¨¡æ‹Ÿæ“ä½œ å•æœº/åŒå‡»/æ»‘åŠ¨ï¼Ÿ æš‚æ—¶ä¸åšï¼Œå¦‚æœåšäº†æ„Ÿè§‰æœ‰ç‚¹åƒappium/airtestäº†ï¼Ÿæˆ–è€…åé¢ç›´æ¥é›†æˆå‘¢ï¼Ÿ https://blog.csdn.net/qq_27672101/article/details/143996095 https://zhuanlan.zhihu.com/p/3422441811 æ–‡ä»¶ç±» Nodes ä½œç”¨ è®¾è®¡ æ–‡ä»¶åˆ—è¡¨ ç”¨äºé…åˆä¸‹é¢çš„èŠ‚ç‚¹æ‰¹é‡æ“ä½œ é‡å‘½å æ­é…æ–‡ä»¶åˆ—è¡¨è¿›è¡Œæ‰¹é‡é‡å‘½å windowsçš„ä¼šå˜æˆa_1.pngï¼Œa_1_1.pngï¼Œä¸ç”¨æˆ‘å¤šè¯´äº†å§ TODOå¤åˆ¶ æš‚æ—¶ä¸åšï¼Œæ„ä¹‰ä¸å¤§ï¼Œå¦‚æœåç»­æœ‰ç”Ÿæˆæ–‡ä»¶æ—¶å†è¡¥å…… TODOç§»åŠ¨ æš‚æ—¶ä¸åšï¼Œæ„ä¹‰ä¸å¤§ï¼Œå¦‚æœåç»­æœ‰ç”Ÿæˆæ–‡ä»¶æ—¶å†è¡¥å…… å›¾åƒç±» Nodes ä½œç”¨ è®¾è®¡ TODOï¼Œåç»­æç‚¹è¶…åˆ†è¾¨ç‡æˆ–è€…stable diffusionç›¸å…³çš„ï¼Ÿ TODOï¼Œä¹Ÿè®¸é’ˆå¯¹å›¾ç‰‡åæœŸå¤„ç†è¿™éƒ¨åˆ†æœ‰å¾—åšï¼Œæ»¤é•œ/å¯¹æ¯”åº¦/é«˜å…‰/æ›å…‰è‰²è°ƒè¿™äº› å·¥å…·ç±» Nodes ä½œç”¨ è®¾è®¡ ç­‰å¾… sleep(s) æœ‰äº›æ—¶å€™æ‰“å¼€åº”ç”¨è¿™ç§æ“ä½œï¼Œæ²¡æœ‰å›è°ƒï¼Œå°±æ²¡åŠæ³•çŸ¥é“æ‰“å¼€æ²¡æœ‰çš„ï¼Œsleepä¸ªå‡ ç§’çœ‹çœ‹ store å…¨å±€å­˜å‚¨èŠ‚ç‚¹ ç”¨äºéæµæ°´çº¿å¼çš„å˜é‡å–å€¼ python æœ‰äº›äººå°±è¯´ï¼šå“å‘€æˆ‘å°±ä¸æƒ³æ‰“å¼€ç ´ç¼–è¾‘å™¨å†™è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œæˆ‘å°±æƒ³ç®€å•å†™ä¸¤è¡ŒéªŒè¯ä¸€ä¸‹ è¡Œï¼ŒåŒå‡»nodeè¿˜å¯ä»¥æ‰“å¼€vscode å¯èƒ½å­˜åœ¨çš„é—®é¢˜ä»¥åŠåç»­çš„è§„åˆ’èŠ‚ç‚¹é€šç”¨æ€§é—®é¢˜è¦æ€è€ƒå°è£…çš„èŠ‚ç‚¹æ˜¯å¦å…·æœ‰é€šç”¨æ€§ï¼Œå¦åˆ™å®¹æ˜“å˜æˆè¿™ä¸€å¥—èŠ‚ç‚¹åªèƒ½ç”¨äºè¿™ä¸€å¥—graphã€‚ä¸ºäº†é¿å…å‡ºç°è¿™ç§é—®é¢˜ï¼Œå°è£…èŠ‚ç‚¹å¯ä»¥æ€è€ƒå¦‚ä¸‹å‡ ç‚¹ï¼š è¯¥èŠ‚ç‚¹æ˜¯å¦èƒ½æƒ³åˆ°ç¬¬äºŒç§è¿æ¥æ–¹å¼æ­é…ä½¿ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å­˜åœ¨åˆç†æ€§ æ˜¯å¦ä»¥â€œåŠŸèƒ½â€/â€œæ“ä½œâ€ä¸ºå•ä½ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™å­˜åœ¨åˆç†æ€§ æœ¬æ¬¡ç¼–å†™çš„æ‰€æœ‰èŠ‚ç‚¹é“¾è·¯æ˜¯å¦éœ€è¦åˆå¹¶æˆä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¸åˆç† é¿å…åœ¨evalç›¸å…³çš„å‡½æ•°ä¸­æ“ä½œç•Œé¢å¹¶è¡ŒåŒ–æ”¹é€ åï¼Œevalå¯èƒ½ç”±äºçˆ¶èŠ‚ç‚¹ä¸åœ¨åŒä¸€çº¿ç¨‹ï¼Œæ­¤æ—¶æ“ä½œç•Œé¢å¯èƒ½ä¼šå¯¼è‡´ç•Œé¢æ— æ³•æ›´æ–°æˆ–è€…æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜ï¼Œå¹¶ä¸”è¿™æœ¬æ¥ä¹Ÿæ˜¯ä¸å¥½çš„ä¹ æƒ¯ã€‚å¦‚æœè¦åœ¨evalä¸­ä¿®æ”¹ç•Œé¢ï¼Œè¯·é€šè¿‡ä¿¡å·æ§½æœºåˆ¶æ¥ä¿®æ”¹ã€‚è¿™ç‚¹éå¸¸é‡è¦ å¹¶è¡ŒåŒ–æ”¹é€ å­˜åœ¨çš„é—®é¢˜å…³äºå¹¶è¡ŒåŒ–æ”¹é€ ï¼Œç›®å‰è¿˜å­˜åœ¨é—®é¢˜ï¼Œæœ¬æ¥åº”è¯¥ä½¿ç”¨å¤šè¿›ç¨‹multiprocessæ“ä½œå®‰å“è®¾å¤‡çš„ï¼Œåœ¨pythonä¸­ï¼Œåˆ›å»ºå¤šè¿›ç¨‹åœ¨linuxä¸‹æ˜¯ä½¿ç”¨forkï¼Œè€Œåœ¨windowsä¸­ä½¿ç”¨çš„æ˜¯pickleè¿›è¡Œåºåˆ—åŒ–+ååºåˆ—åŒ–ï¼Œä½†æ˜¯pyqt/pysideä¸­QObjectå®é™…ä¸Šæ˜¯c++å¯¹è±¡ï¼Œäºæ˜¯æ— æ³•pickleä¼šæŠ¥é”™ è¿™ç®—æ˜¯pysideçš„å‘ï¼Œæš‚æ—¶æ²¡æœ‰è§£å†³ pysideçš„å‘(çŸ¥ä¹)ï¼Œç­”ä¸»ä»‹ç»äº†ä¸€ç§é‡å†™__repr__é­”æ³•æ–¹æ³•ä½¿pickleåºåˆ—åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œå¤ªæ·± forå¾ªç¯é—®é¢˜è¿™ç§æƒ…å†µåœ¨çº¯codingä¸­è‚¯å®šæ˜¯å­˜åœ¨çš„ï¼Œè€Œåœ¨èŠ‚ç‚¹ç¼–è¾‘å™¨ä¸­å¤„ç†èµ·æ¥åˆå¾ˆéº»çƒ¦ä¸ä¼˜é›…ï¼Œç›®å‰å¸‚é¢ä¸Šçš„èŠ‚ç‚¹ç¼–è¾‘å™¨ä¹Ÿæ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚comfyuiæ˜¯å•å¼ å›¾ç‰‡çš„å·¥ä½œæµè€Œä¸æ˜¯é¢å‘â€œæ‰¹é‡åŒ–â€å¤„ç†ï¼ŒShaderGraphæ˜¯é¢å¯¹gpuçš„å¹¶è¡ŒåŒ–æ“ä½œæœ¬èº«æ²¡æœ‰foré€»è¾‘ï¼ŒUEè“å›¾å€’æ˜¯æœ‰WhileLoop/ForLoopèŠ‚ç‚¹ï¼Œå¯ä»¥å‚è€ƒï¼Œä½†ueè“å›¾æ˜¯é¢å‘ç¨‹åºçš„ï¼Œå‚æ•°ç»™åˆ°äº†èŠ‚ç‚¹ä¸Šï¼Œè€ŒLineItæ˜¯é¢å‘å·¥ä½œæµçš„ï¼Œéœ€è¦é‡æ–°è®¾è®¡ å‡è®¾æœ‰å¦‚ä¸‹æ“ä½œ 1234for item in list: doA doB doC åœ¨æ²¡æœ‰forå¾ªç¯èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œå˜æˆäº† 1234567891011//node1for item in list: doA //node2for item in list: doB //node3for item in list: doC å¤æ‚åº¦ä¹Ÿä¼šç”±O(n)å˜æˆO(3n) å‚æ•°èŠ‚ç‚¹åŒ–é—®é¢˜åç»­å¯ä»¥åšä¸€ä¸ªåŠŸèƒ½ï¼Œå…è®¸æŠŠdetailsInfoçš„å‚æ•°å˜æˆè¾“å…¥èŠ‚ç‚¹ï¼Œè¿™æ ·å¯èƒ½æ›´åŠ çµæ´»ä¸€äº› æš‚å®šçš„è®¾è®¡ï¼šå³é”®èŠ‚ç‚¹-&gt;æš´éœ²å‚æ•°-&gt;é€‰æ‹©detailsInfoä¸­çš„å‚æ•°åˆ—è¡¨-&gt;æ‰©å±•inputèŠ‚ç‚¹ å¦‚æœåšè¿™ä¸ªçš„è¯ï¼Œæ¯ä¸ªsocketå¯èƒ½è¿˜è¦å¸¦ä¸€ä¸ªlabelæ ‡ç­¾æ³¨æ˜è¿™ä¸ªsocketçš„ä½œç”¨","link":"/Others/line-it-node-editor/"}],"tags":[{"name":"åŠ›æ‰£","slug":"åŠ›æ‰£","link":"/tags/%E5%8A%9B%E6%89%A3/"},{"name":"æ ‘","slug":"æ ‘","link":"/tags/%E6%A0%91/"},{"name":"é€’å½’","slug":"é€’å½’","link":"/tags/%E9%80%92%E5%BD%92/"},{"name":"å›æº¯","slug":"å›æº¯","link":"/tags/%E5%9B%9E%E6%BA%AF/"},{"name":"åŠ¨æ€è§„åˆ’","slug":"åŠ¨æ€è§„åˆ’","link":"/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"},{"name":"å‰‘æŒ‡offer","slug":"å‰‘æŒ‡offer","link":"/tags/%E5%89%91%E6%8C%87offer/"},{"name":"lintcode","slug":"lintcode","link":"/tags/lintcode/"},{"name":"æ¸¸æˆå’Œå¼•æ“","slug":"æ¸¸æˆå’Œå¼•æ“","link":"/tags/%E6%B8%B8%E6%88%8F%E5%92%8C%E5%BC%95%E6%93%8E/"},{"name":"å•è°ƒæ ˆ","slug":"å•è°ƒæ ˆ","link":"/tags/%E5%8D%95%E8%B0%83%E6%A0%88/"},{"name":"æ ˆ","slug":"æ ˆ","link":"/tags/%E6%A0%88/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","link":"/tags/%E7%AE%97%E6%B3%95/"},{"name":"å¼€å‘","slug":"å¼€å‘","link":"/tags/%E5%BC%80%E5%8F%91/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","link":"/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"ç¬”è¯•é¢è¯•","slug":"ç¬”è¯•é¢è¯•","link":"/tags/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/"},{"name":"åŠ å¯†","slug":"åŠ å¯†","link":"/tags/%E5%8A%A0%E5%AF%86/"},{"name":"spring","slug":"spring","link":"/tags/spring/"},{"name":"mysql","slug":"mysql","link":"/tags/mysql/"},{"name":"markdown","slug":"markdown","link":"/tags/markdown/"},{"name":"http","slug":"http","link":"/tags/http/"},{"name":"springcloud","slug":"springcloud","link":"/tags/springcloud/"},{"name":"äºŒåˆ†æŸ¥æ‰¾","slug":"äºŒåˆ†æŸ¥æ‰¾","link":"/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/"},{"name":"ç¬”è¯•","slug":"ç¬”è¯•","link":"/tags/%E7%AC%94%E8%AF%95/"},{"name":"å­—ç¬¦ä¸²","slug":"å­—ç¬¦ä¸²","link":"/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"name":"DL/ML","slug":"DL-ML","link":"/tags/DL-ML/"},{"name":"å­¦ä¹ è®°å½•","slug":"å­¦ä¹ è®°å½•","link":"/tags/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"},{"name":"æ’åº","slug":"æ’åº","link":"/tags/%E6%8E%92%E5%BA%8F/"}],"categories":[{"name":"æ•°æ®ç»“æ„å’Œç®—æ³•","slug":"algorithms","link":"/categories/algorithms/"},{"name":"ç”Ÿæ´»éšç¬”","slug":"life","link":"/categories/life/"},{"name":"æ¸¸æˆå’Œå¼•æ“","slug":"games","link":"/categories/games/"},{"name":"Utilå·¥å…·ç±»","slug":"util","link":"/categories/util/"},{"name":"JavaåŸºç¡€","slug":"JavaåŸºç¡€","link":"/categories/Java%E5%9F%BA%E7%A1%80/"},{"name":"å‰ç«¯","slug":"frontend","link":"/categories/frontend/"},{"name":"Mysql","slug":"Mysql","link":"/categories/Mysql/"},{"name":"SpringCloud","slug":"SpringCloud","link":"/categories/SpringCloud/"},{"name":"Spring","slug":"Spring","link":"/categories/Spring/"},{"name":"Others","slug":"Others","link":"/categories/Others/"},{"name":"redis","slug":"redis","link":"/categories/redis/"},{"name":"ç„å­¦","slug":"deeplearning","link":"/categories/deeplearning/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"designpattern","link":"/categories/designpattern/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"cs","link":"/categories/cs/"}]}